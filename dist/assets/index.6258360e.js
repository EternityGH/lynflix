var Fe=Object.defineProperty,ze=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var $e=(r,t,l)=>t in r?Fe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[t]=l,q=(r,t)=>{for(var l in t||(t={}))ke.call(t,l)&&$e(r,l,t[l]);if(J)for(var l of J(t))Le.call(t,l)&&$e(r,l,t[l]);return r},te=(r,t)=>ze(r,qe(t));var re=(r,t)=>{var l={};for(var s in r)ke.call(r,s)&&t.indexOf(s)<0&&(l[s]=r[s]);if(r!=null&&J)for(var s of J(r))t.indexOf(s)<0&&Le.call(r,s)&&(l[s]=r[s]);return l};import{u as O,j as a,a as e,L as g,r as m,F as x,b as We,i as G,I as Q,c as V,d as He,e as se,f as F,g as Ke,h as _e,B as Be,k as De,s as Je,l as Ge,R as le,S as ae,N as ie,m as ne,n as Qe,q as Xe,z as Ye,W as Ze,o as Ce,E as et,p as tt,t as rt,C as st,v as X,w as lt,G as at,x as it,y as nt,A as ot,D as ct,H as P,J as dt,K as mt,M as ht}from"./vendor.2dcb193e.js";const ut=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function l(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=l(i);fetch(i.href,n)}};ut();const j=()=>{const r=O();return a("div",{className:"flex flex-col min-h-screen justify-center items-center gap-4",children:[e("img",{className:"w-full max-w-[200px] h-auto",src:"/error.png",alt:""}),e("p",{className:"text-xl",children:"Something went wrong"}),r.pathname!=="/"&&e(g,{className:"text-primary",to:"/",children:"Return home"})]})},E=({value:r})=>(m.exports.useEffect(()=>{document.title=r},[r]),e(x,{})),$=We.create({baseURL:"https://ga-mobile-api.loklok.tv/cms/app",headers:{lang:"en",versioncode:"11",clienttype:"ios_jike_default"}}),ft=async(r,t)=>(await $.post("search/v1/search",{size:20,params:"",category:r,sort:t})).data.data.searchResults,C=(r,t="",l="")=>`https://agvmolqooq.cloudimg.io/v7/${r}?width=${t}&height=${l}`,Ie=r=>`https://srt-to-vtt.vercel.app?url=${encodeURIComponent(r)}`,W={0:{width:200,height:100},1:{width:175,height:246}},pt=({id:r,categoryName:t})=>{var c,u;const l=(d,o)=>{var f,b;return o&&o.length===0?null:`${r}-${((b=(f=o==null?void 0:o.slice(-1))==null?void 0:f[0])==null?void 0:b.sort)||""}`},{data:s,error:i,setSize:n}=G(l,d=>ft(r,d.split("-").slice(-1)[0]));return i?e(j,{}):a(x,{children:[e(E,{value:`Category ${t} - Lynflix`}),e(Q,{dataLength:(s==null?void 0:s.length)||0,next:()=>n(d=>d+1),hasMore:!i&&((u=(c=s==null?void 0:s.slice(-1))==null?void 0:c[0])==null?void 0:u.length)!==0,loader:e("div",{className:"flex justify-center w-full",children:e("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin my-10"})}),endMessage:e("p",{className:"text-center mt-6",children:"Nothing more to see"}),children:e("div",{className:"flex justify-center mx-[7vw]",children:e("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6",children:s==null?void 0:s.reduce((d,o)=>(d.push(...o),d),[]).map(d=>e(g,{title:d.name,to:d.domainType===0?`/movie/${d.id}`:`/tv/${d.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:C(d.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:d.name})})]})},d.id))})})})]})},Re=r=>{const t=new Date(0);return t.setSeconds(r),t.toISOString().substr(11,8)},gt=()=>/iPhone|iPad|iPod|Android/i.test(window.navigator.userAgent),xt=r=>{const t=document.createElement("div");return t.innerHTML=r,t.textContent},vt=r=>{let t={year:365*30*24*60*60*1e3,month:30*24*60*60*1e3,week:7*24*60*60*1e3,day:24*60*60*1e3,hour:60*60*1e3,minute:60*1e3},l=Date.now()-r;for(const s in t)if(l>=t[s]){let i=Math.floor(l/t[s]);return`${i} ${i===1?s:s+"s"} ago`}return"Just now"},bt=async r=>(await $.post("search/searchLenovo",{searchKeyWord:r,size:10})).data.data.searchResults,yt=async r=>(await $.post("search/v1/searchWithKeyWord",{searchKeyWord:r,size:50,sort:"",searchType:""})).data.data.searchResults,oe=({autoFocus:r})=>{const[t,l]=m.exports.useState(""),[s,i]=m.exports.useState([]),n=m.exports.useRef(null),c=He();return m.exports.useEffect(()=>{n.current&&clearTimeout(n.current),i([]),!!t.trim()&&(n.current=setTimeout(async()=>{const d=await bt(t.trim());i(d.map(o=>xt(o)))},500))},[t]),a("div",{className:"relative group w-full",children:[a("form",{onSubmit:d=>{d.preventDefault(),t.trim()&&c(`/search?q=${encodeURIComponent(t.trim())}`)},className:"relative",children:[e("input",{value:t,onKeyDown:d=>d.stopPropagation(),onKeyUp:d=>d.stopPropagation(),onKeyPress:d=>d.stopPropagation(),onChange:d=>l(d.target.value),className:"bg-transparent outline-none border border-gray-600 w-full rounded-full py-2 pl-4 pr-8",type:"text",placeholder:"Search...",autoFocus:r}),e("button",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:e("i",{className:"fas fa-search text-xl"})})]}),s.length>0&&e("div",{className:"absolute z-10 top-full left-0 w-full bg-dark-lighten rounded overflow-x-hidden overflow-y-auto max-h-[200px] flex-col items-stretch hidden group-focus-within:flex",children:s.map((d,o)=>e(g,{to:`/search?q=${encodeURIComponent(d)}`,children:e("button",{className:`text-left p-2 w-full ${o!==s.length-1?"border-b border-gray-500":""}`,children:d})},o))})]})},H=()=>a("div",{className:"flex justify-between items-center my-7",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"Lynflix"})]}),e(g,{className:"block md:hidden",to:"/search",children:e("i",{className:"fas fa-search text-2xl"})}),e("div",{className:"max-w-[500px] hidden md:block",children:e(oe,{})})]}),Pe=async()=>(await $.get("search/list")).data.data,Nt=async(r,t,l)=>(await $.post("search/v1/search",te(q({size:20,params:r},t),{sort:l}))).data.data.searchResults,wt=()=>{var i,n;const{id:r}=se(),{data:t,error:l}=F("search-config",()=>Pe());if(l)return e(j,{});if(!t)return e("div",{className:"flex-grow flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})});const s=(n=(i=t[0].screeningItems.find(c=>c.id===5))==null?void 0:i.items.find(c=>c.params===r))==null?void 0:n.name;return s?a("div",{children:[a("div",{className:"mx-[7vw]",children:[e(H,{}),a("h1",{className:"my-6 text-2xl",children:["Category: ",s]})]}),e(pt,{id:r,categoryName:s})]}):e(j,{})},ce=i=>{var n=i,{className:r,onLoad:t,crossOrigin:l}=n,s=re(n,["className","onLoad","crossOrigin"]);const[c,u]=m.exports.useState(!1);return e("img",q({className:`${c?"opacity-100":"opacity-0"} transition duration-300 ${r}`,onLoad:d=>{u(!0),t&&t(d)}},s))},je=Ke(JSON.parse('{"apiKey":"AIzaSyD0gV-8hlN9osUoEp0pl4EPFpGH1ov16Cw","authDomain":"lynflix-3ef5c.firebaseapp.com","projectId":"lynflix-3ef5c","storageBucket":"lynflix-3ef5c.appspot.co","messagingSenderId":"324058700956","appId":"1:324058700956:web:2a4f4b39a5b4c32c03e159"}')),de=_e(je),me=Be(je),Y=De(r=>({currentUser:void 0,setCurrentUser:t=>r({currentUser:t})})),Ee=({sidebarActive:r})=>{const t=O(),l=Y(i=>i.currentUser),s=()=>{Je(de)};return a("div",{className:`flex-shrink-0 sm:sticky sm:!left-0 fixed top-0 flex flex-col items-stretch py-10 pl-5 xl:pl-10 pr-0 w-[90vw] max-w-[288px] sm:max-w-none sm:w-16 xl:w-72 border-r border-gray-800 h-screen overflow-y-auto z-10 bg-dark sm:bg-transparent transition-all duration-500 ${r?"left-0":"left-[-100%]"}`,children:[a(g,{to:"/",className:"flex gap-2 items-center",children:[e("img",{className:"w-6 h-6",src:"/icon.png",alt:""}),e("p",{className:"font-semibold text-xl block sm:hidden xl:block",children:"Lynflix"})]}),a("div",{className:"mt-0 sm:mt-4 xl:mt-0 block sm:flex flex-col gap-0 sm:gap-4 xl:block xl:gap-0",children:[e("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block",children:"Menu"}),a("div",{className:"flex flex-col items-stretch gap-3",children:[a(g,{to:"/",className:`flex items-center gap-2 transition ${t.pathname==="/"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-home text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Home"})]}),a(g,{to:"/discovery",className:`flex items-center gap-2 transition ${t.pathname==="/discovery"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-compass text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Discovery"})]}),a(g,{to:"/explore",className:`flex items-center gap-2 transition ${t.pathname==="/explore"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-desktop text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Explore"})]}),a(g,{to:"/history",className:`flex items-center gap-2 transition ${t.pathname==="/history"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-history text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"History"})]}),a(g,{to:"/search",className:`md:!hidden flex items-center gap-2 transition ${t.pathname==="/search"?"text-primary border-r-4 border-primary hover:brightness-125":"text-gray-400 hover:text-gray-300"}`,children:[e("i",{className:"fas fa-search text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Search"})]})]}),e("p",{className:"text-gray-400 uppercase mt-10 mb-4 block sm:hidden xl:block",children:"Personal"}),l?a("div",{className:"flex flex-col items-stretch gap-3",children:[a("div",{className:"flex gap-2 items-center",children:[e("img",{className:"w-[24px] h-[24px] rounded-full",src:C(l.photoURL,"24","24"),alt:""}),e("p",{className:"text-gray-400 block sm:hidden xl:block",children:l.displayName})]}),a("button",{onClick:s,className:"flex items-center cursor-pointer gap-2 transition text-gray-400 hover:text-gray-300",children:[e("i",{className:"fas fa-sign-out-alt text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Sign Out"})]})]}):a(g,{to:`/sign-in?redirect=${encodeURIComponent(t.pathname)}`,className:"flex items-center cursor-pointer gap-2 transition text-gray-400 hover:text-gray-300",children:[e("i",{className:"fas fa-sign-in-alt text-xl w-[24px]"}),e("p",{className:"block sm:hidden xl:block",children:"Sign In"})]})]})]})},St=async(r=0)=>{const t=(await $.get("recommendPool/getVideoFromRecommondPool",{params:{page:r},headers:{deviceid:Math.random().toString(36).slice(-8)}})).data.data,l=(await $.post("media/bathGetplayInfo",t.map(s=>({category:s.category,contentId:s.id,episodeId:s.mediaInfo.id,definition:s.mediaInfo.definitionList.slice(-1)[0].code})))).data.data.map(s=>s.mediaUrl);return t.map((s,i)=>te(q({},s),{mediaUrl:l[i]}))},kt=()=>{var u,d;const[r,t]=m.exports.useState(!1),l=o=>`discovery-${o||0}`,{data:s,error:i,setSize:n}=G(l,o=>St(Number(o.split("-").slice(-1)[0])),{revalidateFirstPage:!1}),c=O();return m.exports.useEffect(()=>{t(!1)},[c]),i?e(j,{}):a(x,{children:[a("div",{className:"flex sm:hidden justify-between px-[4vw] mt-6",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"Lynflix"})]}),e("button",{onClick:()=>t(!r),children:e("i",{className:"fas fa-bars text-2xl"})})]}),e("div",{onClick:()=>t(!1),className:`bg-[#00000080] z-[5] fixed top-0 left-0 w-full h-full transition duration-500 ${r?"opacity-100 visible":"opacity-0 invisible"}`}),a("div",{className:"flex",children:[e(Ee,{sidebarActive:r}),a("div",{className:"flex-grow py-10 px-[4vw]",children:[!s&&e("div",{className:"h-screen w-full flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})}),e(Q,{dataLength:(s==null?void 0:s.length)||0,next:()=>n(o=>o+1),hasMore:!i&&((d=(u=s==null?void 0:s.slice(-1))==null?void 0:u[0])==null?void 0:d.length)!==0,loader:e(x,{}),children:e("div",{className:"flex flex-col items-center w-full gap-24",children:s==null?void 0:s.reduce((o,f)=>[...o,...f],[]).map(o=>{var f,b,T;return a("div",{className:"w-full max-w-[600px] flex gap-2",children:[e(ce,{className:"w-12 h-12 rounded-full flex-shrink-0 bg-gray-500",src:C(o.upInfo.upImgUrl),alt:""}),a("div",{className:"flex flex-col items-stretch flex-grow gap-3",children:[e("p",{className:"font-semibold",children:((f=o.refList[0])==null?void 0:f.name)||o.name}),e("p",{children:o.introduction}),e(Ge,{threshold:.5,children:({ref:A,inView:N})=>e("div",{ref:A,className:"h-0 relative pb-[100%]",children:e(le,{controls:!0,muted:!0,autoPlay:N,src:o.mediaUrl,className:"absolute top-0 left-0 w-full h-full object-contain"})})})]}),a("div",{className:"flex flex-col items-center justify-center w-20 gap-5",children:[a("div",{className:"flex flex-col items-center gap-2",children:[e("button",{className:"bg-dark-lighten rounded-full h-10 w-10 flex justify-center items-center",children:e("i",{className:"fas fa-heart text-red-500"})}),e("span",{children:o.likeCount})]}),((T=(b=o==null?void 0:o.refList)==null?void 0:b[0])==null?void 0:T.id)&&a("div",{className:"flex flex-col items-center gap-2",children:[e(g,{to:o.refList[0].category===0?`/movie/${o.refList[0].id}`:`/tv/${o.refList[0].id}`,className:"bg-dark-lighten rounded-full h-10 w-10 flex justify-center items-center",children:e("i",{className:"fas fa-external-link-alt"})}),e("span",{children:"Open"})]})]})]},o.id)})})})]})]})]})},Lt=({params:r,configs:t})=>{var c,u;const l=(d,o)=>{var f,b;return o&&o.length===0?null:`explore-${JSON.stringify(t)}-${((b=(f=o==null?void 0:o.slice(-1))==null?void 0:f[0])==null?void 0:b.sort)||""}`},{data:s,error:i,setSize:n}=G(l,d=>Nt(r,t,d.split("-").slice(-1)[0]),{revalidateFirstPage:!1});return i?e(j,{}):e(Q,{dataLength:(s==null?void 0:s.length)||0,next:()=>n(d=>d+1),hasMore:!i&&((u=(c=s==null?void 0:s.slice(-1))==null?void 0:c[0])==null?void 0:u.length)!==0,loader:e("div",{className:"flex justify-center w-full",children:e("div",{className:"w-10 h-10 border-[3px] border-primary border-t-transparent rounded-full animate-spin my-10"})}),endMessage:e("p",{className:"text-center mt-6",children:"Nothing more to see"}),children:e("div",{className:"w-full grid grid-cols-sm md:grid-cols-lg gap-6",children:s==null?void 0:s.reduce((d,o)=>[...d,...o],[]).map(d=>e(g,{title:d.name,to:d.domainType===0?`/movie/${d.id}`:`/tv/${d.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:C(d.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:d.name})})]})},d.id))})})},$t=({config:r})=>{const[t,l]=m.exports.useState(r.screeningItems.reduce((i,n)=>(i[n.items[0].screeningType]=n.items[0].params,i),{})),s=(i,n)=>{const c=JSON.parse(JSON.stringify(t));c[i]=n,l(c)};return a(x,{children:[e("div",{className:"flex gap-3 flex-wrap my-6",children:r.screeningItems.map((i,n)=>e("select",{className:"outline-none bg-dark-lighten px-3 py-2 rounded",value:t[i.items[0].screeningType],onChange:c=>s(i.items[0].screeningType,c.target.value),children:i.items.map(c=>e("option",{className:"outline-none bg-dark-lighten px-3 py-2",value:c.params,children:c.name},c.params))},`${n}`))}),e(Lt,{params:r.params,configs:t})]})},Ct=()=>{const{data:r,error:t}=F("search-config",()=>Pe()),[l,s]=m.exports.useState(0);return t?e(j,{}):a(x,{children:[e(E,{value:"Explore - Lynflix"}),a("div",{className:"flex flex-col items-stretch min-h-screen mx-[7vw]",children:[e(H,{}),r?a("div",{className:"mb-6",children:[e("div",{className:"flex gap-3",children:r.map((i,n)=>e("button",{className:`transition relative after:absolute after:top-[110%] after:left-0 after:w-full after:h-[2px] after:bg-transparent after:rounded after:transition ${l===n?"text-primary after:bg-primary":""}`,onClick:()=>{s(n)},children:i.name},n))}),e($t,{config:r[l]},l)]}):e("div",{className:"flex-grow flex justify-center items-center",children:e("div",{className:"w-10 h-10 border-[3px] border-t-transparent border-primary rounded-full animate-spin"})})]})]})},Te=()=>{try{return JSON.parse(localStorage.getItem("filmhot-recent")||"[]")}catch{return[]}},It=()=>{const[r,t]=m.exports.useState(Te());return a(x,{children:[e(E,{value:"Watch history - Lynflix"}),a("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8",children:[e(H,{}),a("div",{className:"flex justify-between mb-6",children:[e("h1",{className:"text-3xl",children:"Watch history"}),a("button",{onClick:()=>{localStorage.removeItem("filmhot-recent"),t(Te())},className:"text-primary",children:[e("i",{className:"fas fa-trash"})," ",e("span",{children:"Clear"})]})]}),e("div",{className:"grid gap-6 grid-cols-sm md:grid-cols-lg",children:r.length===0?e("div",{children:"No result found"}):e(x,{children:r.map(s=>e(g,{title:s.name,to:s.category===0?`/movie/${s.id}`:`/tv/${s.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:C(s.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:s.name})})]})},s.id))})})]})]})},Rt=({images:r})=>e(ae,{className:"rounded-2xl overflow-hidden",modules:[ie],navigation:!0,loop:!0,slidesPerView:1,children:r.map(t=>e(ne,{children:e(g,{to:t.link,children:a("div",{className:"w-full h-0 pb-[42%] relative",children:[e(V.LazyLoadImage,{className:"absolute top-0 left-0 w-full h-full object-cover opacity-75",src:C(t.image,"900"),alt:"",effect:"opacity"}),e("h1",{className:"scale-100 absolute left-[7%] bottom-[10%] text-xl md:text-3xl max-w-[86%] whitespace-nowrap overflow-hidden text-ellipsis",children:t.title})]})})},t.image))}),Pt=({images:r,coverType:t})=>e(ae,{modules:[ie],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30,children:r.map(l=>e(ne,{style:{width:W[t].width},children:e(g,{to:l.link,children:a("div",{className:"rounded-lg overflow-hidden bg-dark-lighten group",children:[e(V.LazyLoadImage,{style:{width:W[t].width,height:W[t].height},className:"group-hover:brightness-75 transition duration-300 object-cover",src:l.image,width:W[t].width,height:W[t].height,effect:"opacity",alt:""}),e("h1",{className:"group-hover:text-primary transition duration-300 pb-1 px-2 m-0 text-lg max-w-full whitespace-nowrap overflow-hidden text-ellipsis",children:l.title})]})})},l.image))}),k=l=>{var s=l,{className:r}=s,t=re(s,["className"]);return e("div",q({className:`animate-pulse bg-gray-700 ${r}`},t))},Ae=()=>e(ae,{modules:[ie],navigation:!0,slidesPerView:"auto",slidesPerGroupAuto:!0,spaceBetween:30,children:[...new Array(Math.ceil(window.innerWidth/200))].map((r,t)=>e(ne,{className:"!w-[175px]",children:e(k,{className:"w-[175px] h-[246px] rounded-xl"})},t))}),jt=async(r=0)=>(await $.get("homePage/getHome",{params:{page:r}})).data.data.recommendItems,Et=async()=>(await $.get("search/v1/searchLeaderboard")).data.data.list,Ue=()=>{const{data:r,error:t}=F("home-top-searches",()=>Et());return!r||t?e("div",{className:"flex flex-col gap-3",children:[...new Array(Math.round(window.innerHeight/100))].map((l,s)=>a("div",{className:"flex gap-2",children:[e(k,{className:"w-[100px] h-[60px] flex-shrink-0 rounded-lg"}),e(k,{className:"flex-grow h-4 rounded-md"})]},s))}):e("div",{className:"flex flex-col gap-3",children:r.map(l=>a(g,{to:l.domainType===0?`/movie/${l.id}`:`/tv/${l.id}`,className:"flex gap-2 hover:brightness-75 transition duration-300",children:[e("div",{className:"w-[100px] h-[60px] flex-shrink-0",children:e(V.LazyLoadImage,{className:"w-[100px] h-[60px] object-cover rounded-lg",src:C(l.cover,"100"),width:100,height:60,effect:"opacity",alt:""})}),e("div",{children:e("h1",{children:l.title})})]},l.id))})},Tt=()=>{var u,d;const r=o=>`home-${o||0}`,{data:t,error:l,setSize:s}=G(r,o=>jt(Number(o.split("-").slice(-1)[0])),{revalidateFirstPage:!1}),[i,n]=m.exports.useState(!1),c=O();return m.exports.useEffect(()=>{n(!1)},[c]),a(x,{children:[e(E,{value:"Lynflix - AdFree Movie / Anime Watching Website"}),a("div",{className:"flex sm:hidden justify-between px-[4vw] mt-6",children:[a(g,{to:"/",className:"flex items-center gap-2",children:[e("img",{className:"w-8 h-8",src:"/icon.png",alt:""}),e("span",{className:"text-xl font-medium",children:"Lynflix"})]}),e("button",{onClick:()=>n(!i),children:e("i",{className:"fas fa-bars text-2xl"})})]}),e("div",{onClick:()=>n(!1),className:`bg-[#00000080] z-[5] fixed top-0 left-0 w-full h-full transition duration-500 ${i?"opacity-100 visible":"opacity-0 invisible"}`}),a("div",{className:"flex",children:[e(Ee,{sidebarActive:i}),e("div",{className:"flex-grow px-[4vw] md:px-8 pb-8 pt-0 overflow-hidden flex flex-col items-stretch",children:!t||l?a(x,{children:[e("div",{className:"relative h-0 pb-[42%] mt-8",children:e(k,{className:"absolute top-0 left-0 w-full h-full rounded-2xl"})}),[...new Array(2)].map((o,f)=>a(m.exports.Fragment,{children:[e(k,{className:"my-8 h-6 w-full max-w-[200px]"}),e("div",{className:"overflow-hidden",children:e(Ae,{})})]},f))]}):e(Q,{dataLength:(t==null?void 0:t.length)||0,next:()=>s(o=>o+1),hasMore:!l&&((d=(u=t==null?void 0:t.slice(-1))==null?void 0:u[0])==null?void 0:d.length)!==0,loader:a(x,{children:[e(k,{className:"my-8 h-6 w-full max-w-[200px]"}),e("div",{className:"overflow-hidden",children:e(Ae,{})})]}),children:t.reduce((o,f)=>[...o,...f],[]).map(o=>o.homeSectionType==="BANNER"?e("div",{className:"overflow-hidden w-full mt-8",children:e(Rt,{images:o.recommendContentVOList.map(f=>{const b=new URLSearchParams(new URL(f.jumpAddress).search);return{title:f.title,image:f.imageUrl,link:b.get("type")==="0"?`/movie/${b.get("id")}`:`/tv/${b.get("id")}`}})||[]})},o.homeSectionId):a("div",{children:[e("h1",{className:"text-2xl mb-3 mt-8",children:o.homeSectionName.replace("on Loklok","")}),e(Pt,{images:o.recommendContentVOList.map(f=>{const b=new URLSearchParams(new URL(f.jumpAddress).search);return{title:f.title,image:C(f.imageUrl,"200"),link:b.get("type")==="0"?`/movie/${b.get("id")}`:`/tv/${b.get("id")}`}}),coverType:o.coverType})]},o.homeSectionId))})}),a("div",{className:"flex-shrink-0 w-[350px] p-8 sticky top-0 h-screen scrollbar overflow-hidden overflow-y-auto hidden md:block",children:[e(oe,{}),e("h1",{className:"text-xl my-6",children:"Top Searches"}),e(Ue,{})]})]})]})},At=(r,t)=>{const[l,s]=m.exports.useState(null),[i,n]=m.exports.useState(!Boolean(l)),[c,u]=m.exports.useState(!1);return m.exports.useEffect(()=>{const d=Qe(t,o=>{s(o),n(!1)},o=>{console.log(o),s(null),n(!1),u(!0)});return()=>{d()}},[r]),{loading:i,error:c,data:l}},Ut=({data:r,episodeIndex:t})=>{const l=Y(v=>v.currentUser),s=O(),[i,n]=m.exports.useState(""),[c,u]=m.exports.useState(!1),o=`${typeof t=="undefined"?"movie":"tv"}-${r.id}`,[f,b]=m.exports.useState(10),T=async v=>{v.preventDefault(),i.trim()&&(u(!0),et(Ce(me,o),{user:l,value:i.trim(),reactions:{},createdAt:tt()}).finally(()=>u(!1)),n(""))},A=async(v,w)=>{(l==null?void 0:l.uid)&&rt(st(me,o,v),{[`reactions.${l==null?void 0:l.uid}`]:w})},{data:N,error:R,loading:U}=At(`${o}-${f}`,Xe(Ce(me,o),Ze("createdAt","desc"),Ye(f)));return a("div",{children:[e("h1",{className:"text-2xl mt-10",children:"Comments"}),R?e("div",{className:"my-3",children:"Cannot load comments"}):a(x,{children:[l?a("form",{onSubmit:T,className:"relative border border-gray-600 rounded-full my-6",children:[e("img",{className:"w-[30px] h-[30px] rounded-full absolute top-1/2 -translate-y-1/2 left-[10px]",src:C(l.photoURL,"30","30"),alt:""}),e("input",{value:i,onChange:v=>n(v.target.value),onKeyDown:v=>v.stopPropagation(),onKeyUp:v=>v.stopPropagation(),onKeyPress:v=>v.stopPropagation(),className:"w-full h-12 bg-transparent outline-none text-white px-12",placeholder:"Comment what you think...",type:"text"}),c?e("div",{className:"absolute right-[14px] top-1/2 -translate-y-1/2",children:e("div",{className:"w-[25px] h-[25px] rounded-full border-white border-t-transparent border-[3px] animate-spin"})}):e("button",{className:"absolute right-[14px] top-1/2 -translate-y-1/2",type:"submit",children:e("i",{className:"fas fa-paper-plane text-xl"})})]}):a("div",{className:"flex items-center gap-3 h-12 border border-gray-600 rounded-full my-6 px-3",children:[e("img",{className:"w-[30px] h-[30px] rounded-full",src:"/avatar.png",alt:""}),a("p",{children:["You need to"," ",e(g,{className:"text-primary",to:`/sign-in?redirect=${encodeURIComponent(s.pathname)}`,children:"Sign in"})," ","to comment"]})]}),e("div",{className:"flex flex-col items-stretch gap-3",children:N==null?void 0:N.docs.map(v=>{var M,z,K;const w=v.data();return a("div",{className:"flex gap-2",children:[e("img",{className:"w-[50px] h-[50px] rounded-full",src:C(w.user.photoURL,"50","50"),alt:""}),a("div",{className:"flex flex-col items-stretch",children:[a("div",{className:"flex gap-2 items-end",children:[e("p",{className:"font-bold",children:w.user.displayName}),e("p",{className:"text-gray-400 text-sm",children:((M=w==null?void 0:w.createdAt)==null?void 0:M.seconds)?vt(w.createdAt.seconds*1e3):"Just now"})]}),e("p",{children:w.value}),a("div",{className:"flex gap-3 items-center",children:[a("button",{onClick:()=>{var S;return A(v.id,((S=Object.entries(w.reactions).find(I=>I[0]===(l==null?void 0:l.uid)))==null?void 0:S[1])===1?0:1)},className:`flex items-center gap-1 transition ${l?"hover:brightness-75":"cursor-default"} ${((z=Object.entries(w.reactions).find(S=>S[0]===(l==null?void 0:l.uid)))==null?void 0:z[1])===1?"text-primary":""}`,children:[e("i",{className:"fas fa-thumbs-up"}),e("span",{children:Object.values(w.reactions).filter(S=>S===1).length})]}),a("button",{onClick:()=>{var S;return A(v.id,((S=Object.entries(w.reactions).find(I=>I[0]===(l==null?void 0:l.uid)))==null?void 0:S[1])===2?0:2)},className:`flex items-center gap-1 transition ${l?"hover:brightness-75":"cursor-default"} ${((K=Object.entries(w.reactions).find(S=>S[0]===(l==null?void 0:l.uid)))==null?void 0:K[1])===2?"text-primary":""}`,children:[e("i",{className:"fas fa-thumbs-down"}),e("span",{children:Object.values(w.reactions).filter(S=>S===2).length})]})]})]})]},v.id)})}),!U&&!(N==null?void 0:N.size)&&e("p",{className:"text-center text-gray-400",children:"No one has commented"}),!U&&Boolean(N==null?void 0:N.size)&&(N==null?void 0:N.size)>=f&&e("div",{className:"flex justify-center mt-8",children:e("button",{onClick:()=>b(f+10),className:"bg-primary text-white px-4 py-2 rounded hover:brightness-[115%] transition",children:"Load more"})})]})]})},Vt=({playerKey:r,sources:t,subtitles:l})=>{var be;const[s,i]=m.exports.useState(0),[n,c]=m.exports.useState(Number(localStorage.getItem("filmhot-speed"))||1),[u,d]=m.exports.useState(!0),[o,f]=m.exports.useState(!1),[b,T]=m.exports.useState(!1),[A,N]=m.exports.useState(!1),[R,U]=m.exports.useState(0),[v,w]=m.exports.useState(0),[M,z]=m.exports.useState(0),[K,S]=m.exports.useState(!1),[I,ue]=m.exports.useState(isNaN(parseInt(localStorage.getItem("filmhot-volume")))?100:Number(localStorage.getItem("filmhot-volume"))),[Me,fe]=m.exports.useState(!0),y=m.exports.useRef(null),Z=m.exports.useRef(null),ee=m.exports.useRef(null),_=m.exports.useRef(!1),B=m.exports.useRef(null),pe=m.exports.useRef(null),ge=m.exports.useRef(null),D=h=>{y.current&&(y.current.currentTime+=h)},Oe=()=>{ue(h=>h===0?100:0)},xe=h=>{if(!y.current||!ee.current)return;const p=(h.clientX-h.target.getBoundingClientRect().left)/ee.current.offsetWidth,L=(Math.abs(p)===1/0||isNaN(p)?0:p)*y.current.duration;y.current.currentTime=L,w(L)},ve=()=>{A?N(!1):d(h=>!h)};return m.exports.useEffect(()=>{var h,p;u?(h=y.current)==null||h.pause():(p=y.current)==null||p.play()},[u]),m.exports.useEffect(()=>{y.current&&(y.current.volume=I/100),localStorage.setItem("filmhot-volume",String(I))},[I]),m.exports.useEffect(()=>{X.on("change",()=>{X.isFullscreen?f(!0):f(!1)})},[]),m.exports.useEffect(()=>{let h=Z.current;o?X.request(h):X.exit()},[o]),m.exports.useEffect(()=>{!y.current||(y.current.currentTime=v)},[s]),m.exports.useEffect(()=>{!y.current||(localStorage.setItem("filmhot-speed",String(n)),y.current.playbackRate=n)},[n]),m.exports.useEffect(()=>{const h=L=>{var ye,Ne,we,Se;((ye=Z.current)==null?void 0:ye.contains(document.activeElement))&&((Ne=document.activeElement)==null||Ne.blur()),L.keyCode===32&&((we=ge.current)==null||we.click()),L.keyCode===37&&D(-10),L.keyCode===39&&D(10),L.keyCode===70&&((Se=pe.current)==null||Se.click())},p=L=>{L.keyCode===32&&L.preventDefault()};return window.addEventListener("keyup",h),window.addEventListener("keydown",p),()=>{window.removeEventListener("keyup",h),window.removeEventListener("keydown",p)}},[]),e("div",{className:"relative w-full h-0 pb-[56.25%]",children:a("div",{onMouseMove:()=>{B.current&&clearTimeout(B.current),fe(!0),B.current=setTimeout(()=>{fe(!1),N(!1)},2e3)},onMouseLeave:()=>N(!1),ref:Z,className:"absolute top-0 left-0 w-full h-full flex justify-center items-center group bg-black",children:[e(le,{crossOrigin:"",playsInline:!0,onClickCapture:ve,className:"w-full h-full cursor-pointer",controls:!1,autoPlay:!1,playerRef:y,src:t[s].url,onWaiting:()=>T(!0),onPlaying:()=>T(!1),onLoadedData:()=>{var p;S(!0),z(((p=y.current)==null?void 0:p.duration)||0);const h=Number(localStorage.getItem(`${r}-time`));w(h),y.current&&(y.current.currentTime=h)},onTimeUpdate:()=>{var h,p,L;localStorage.setItem(`${r}-time`,String(((h=y.current)==null?void 0:h.currentTime)||0)),w(((p=y.current)==null?void 0:p.currentTime)||0),z(((L=y.current)==null?void 0:L.duration)||0)},children:R>=0&&K&&e("track",{kind:"subtitles",srcLang:"sub",label:"Subtitle",src:Ie((be=l[R])==null?void 0:be.url),default:!0})}),b&&!u&&e("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 cursor-pointer",children:e("div",{className:"border-white border-4 border-r-transparent w-12 h-12 rounded-full animate-spin"})}),u&&e("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 cursor-pointer",onClickCapture:ve,children:e("img",{className:"w-[50px] h-[50px]",src:"/play.svg",alt:""})}),a("div",{className:`absolute bottom-0 left-0 w-full h-16 bg-gradient-to-b from-transparent to-[#000000e0] flex flex-col items-stretch text-xl transition duration-300 opacity-0 ${u?"!opacity-100":""} ${Me?"group-hover:opacity-100":""}`,children:[e("div",{ref:ee,onMouseDown:h=>{_.current=!0,xe(h)},onMouseMove:h=>{_.current&&xe(h)},onMouseUp:()=>_.current=!1,onMouseLeave:()=>_.current=!1,className:"flex-shrink-0 h-[12px] w-full cursor-pointer flex flex-col items-stretch justify-center seek-container",children:e("div",{className:"h-[4px] bg-[#FFFFFF80]",children:e("div",{style:{width:M!==0?`${Math.round(v/M*1e3)/10}%`:0},className:"h-full bg-white relative after:absolute after:w-[12px] after:h-[12px] after:right-[-6px] after:bg-white after:top-1/2 after:-translate-y-1/2 after:rounded-full after:opacity-0 seek-ball after:transition"})})}),a("div",{className:"flex justify-between items-stretch flex-grow px-4",children:[a("div",{className:"flex items-center gap-4",children:[e("button",{ref:ge,className:"before:left-[46px]","data-tooltips":u?"Play (space)":"Pause (space)",onClickCapture:()=>d(h=>!h),children:e("img",{className:"w-[20px] h-[20px]",src:u?"/play.svg":"/pause.svg",alt:""})}),e("button",{"data-tooltips":"Rewind 10s",onClickCapture:()=>D(-10),children:e("i",{className:"fas fa-step-backward"})}),e("button",{"data-tooltips":"Forward 10s",onClickCapture:()=>D(10),children:e("i",{className:"fas fa-step-forward"})}),a("div",{className:"flex items-stretch volume-container",children:[e("button",{"data-tooltips":"Volume",onClickCapture:Oe,children:e("i",{className:`fas fa-volume-${I===100?"up":I===0?"mute":"down"}`})}),e("div",{className:"w-0 transition-all duration-300 overflow-hidden flex items-center justify-end volume",children:e("input",{className:"slider w-[100px]",type:"range",min:0,max:100,value:I,onChange:h=>ue(+h.target.value)})})]}),a("div",{className:"text-base hidden sm:block",children:[e("span",{children:Re(v)}),e("span",{children:" / "}),e("span",{children:Re(M)})]})]}),a("div",{className:"flex gap-4 items-center",children:[e("button",{"data-tooltips":R>=0?"Disable subtitle":"Enable subtitle",onClickCapture:()=>R>=0?U(-1):U(0),children:e("i",{className:`${R>=0?"fas":"far"} fa-closed-captioning`})}),a("div",{className:"relative",children:[e("button",{onClickCapture:()=>N(h=>!h),"data-tooltips":"Settings",children:e("i",{className:"fas fa-cog"})}),a("div",{onMouseMove:h=>{h.stopPropagation(),clearTimeout(B.current)},className:`absolute bottom-[40px] right-[-40px] w-[200px] h-[200px] overflow-y-auto overflow-x-hidden bg-dark-lighten p-4 invisible opacity-0 transition ${A?"!opacity-100 !visible":""}`,children:[e("h1",{className:"text-lg",children:"Quality"}),e("div",{className:"flex flex-col items-stretch pl-[6px]",children:t.map((h,p)=>e("div",{children:a("button",{onClickCapture:()=>{i(p),d(!0)},className:`text-sm relative text-gray-400 ${s===p?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:[h.quality,"p"]})},h.quality))}),e("h1",{className:"text-lg mt-4",children:"Subtitle"}),a("div",{className:"flex flex-col items-stretch pl-[6px]",children:[e("div",{children:e("button",{onClickCapture:()=>U(-1),className:`text-sm relative text-gray-400 text-left ${R===-1?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:"Off"})}),l.map((h,p)=>e("div",{children:e("button",{onClickCapture:()=>U(p),className:`text-sm relative text-gray-400 text-left ${R===p?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:h.language})},p))]}),e("h1",{className:"text-lg mt-4",children:"Speed"}),e("div",{className:"flex flex-col items-stretch pl-[6px]",children:[...new Array(8)].map((h,p)=>e("div",{children:a("button",{onClickCapture:()=>c((p+1)/4),className:`text-sm relative text-gray-400 ${n===(p+1)/4?"text-white before:absolute before:left-[-10px] before:top-1/2 before:-translate-y-1/2 before:w-1 before:h-1 before:bg-white before:rounded-full":""}`,children:[(p+1)/4,"x"]})},p))})]})]}),e("button",{ref:pe,className:"before:right-[-14px] before:left-auto before:translate-x-0","data-tooltips":`${o?"Exit (f)":"Fullscreen (f)"}`,onClickCapture:()=>f(h=>!h),children:o?e("i",{className:"fas fa-compress-alt"}):e("i",{className:"fas fa-expand-alt"})})]})]})]})]})})},Mt=({data:r,episodeIndex:t})=>{var l;return e(x,{children:r?a("div",{className:"flex flex-col gap-[10px]",children:[e("h1",{className:"text-3xl mt-5",children:r==null?void 0:r.name}),a("div",{className:"flex gap-4",children:[a("div",{className:"flex items-center gap-1",children:[e("img",{className:"w-4 h-4",src:"/star.png",alt:""}),e("p",{children:(l=r==null?void 0:r.score)==null?void 0:l.toFixed(1)})]}),a("div",{className:"flex items-center gap-1",children:[e("img",{className:"w-4 h-4",src:"/calendar.png",alt:""}),e("p",{children:r==null?void 0:r.year})]})]}),e("div",{className:"flex gap-3 flex-wrap",children:r.tagList.map(s=>e(g,{to:`/category/${s.id}`,className:"bg-dark-lighten rounded-full px-3 py-1 hover:brightness-125 transition duration-300",children:s.name},s.id))}),e("p",{children:r.introduction}),r.episodeVo.length>1&&a(x,{children:[e("h1",{className:"text-xl my-3",children:"Episodes"}),e("div",{className:"flex max-w-[92vw] md:max-w-[calc(88vw-300px)] gap-3 overflow-auto",children:r.episodeVo.map((s,i)=>e(g,{to:`/tv/${r.id}?episode=${i}`,className:`px-4 py-[8px] bg-dark-lighten rounded hover:brightness-125 transition duration-300 ${i===t?"!bg-primary text-white":""}`,children:i+1},i))})]})]}):a(x,{children:[e(k,{className:"w-[70%] h-8 mt-6"}),e(k,{className:"w-[60%] h-8 mt-6"})]})})},Ot=({playerKey:r,sources:t,subtitles:l})=>{const s=m.exports.useRef(null),[i,n]=m.exports.useState(!1);return e("div",{className:"relative w-full h-0 pb-[56.25%]",children:e("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center group bg-black",children:e(le,{crossOrigin:"",playsInline:!0,controls:!0,autoPlay:!1,playerRef:s,src:t[0].url,className:"w-full h-full",onLoadedData:()=>{n(!0);const c=Number(localStorage.getItem(`${r}-time`));s.current&&(s.current.currentTime=c)},onTimeUpdate:()=>{var c;localStorage.setItem(`${r}-time`,String(((c=s.current)==null?void 0:c.currentTime)||0))},children:i&&l.map((c,u)=>e("track",{kind:"subtitles",srcLang:c.lang,label:c.language,src:Ie(c.url),default:u===0}))})})})},Ft=({data:r})=>e("div",{className:"flex-shrink-0 md:w-[300px]",children:r?a(x,{children:[(r==null?void 0:r.refList)&&r.refList.filter(t=>t.id!==r.id).length>0&&a(x,{children:[e("h1",{className:"text-2xl my-3",children:"In the series"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2",children:r==null?void 0:r.refList.filter(t=>t.id!==r.id).map(t=>a(g,{to:`/${t.category===0?"movie":"tv"}/${t.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300",children:[e("div",{className:"flex-shrink-0 h-[100px] w-[70px]",children:e(ce,{className:"h-full w-full object-cover",src:C(t.coverVerticalUrl,"","100"),alt:""})}),e("div",{className:"my-2 flex-grow",children:e("p",{children:t.name})})]},t.id))})]}),(r==null?void 0:r.likeList)&&r.likeList.length>0&&a(x,{children:[e("h1",{className:"text-2xl my-3",children:"Similar to this"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col items-stretch gap-2",children:r==null?void 0:r.likeList.map(t=>{var l;return a(g,{to:`/${t.category===0?"movie":"tv"}/${t.id}`,className:"flex gap-3 pr-2 hover:brightness-[85%] transition duration-300",children:[e("div",{className:"flex-shrink-0 h-[100px] w-[70px]",children:e(ce,{className:"h-full w-full object-cover",src:C(t.coverVerticalUrl,"","100"),alt:""})}),a("div",{className:"my-2 flex-grow",children:[e("p",{children:t.name}),a("div",{className:"flex items-center gap-2",children:[e("img",{className:"w-4 h-4",src:"/star.png",alt:""}),e("p",{children:(l=t.score)==null?void 0:l.toFixed(1)})]})]})]},t.id)})})]})]}):e(x,{children:[...new Array(2)].map((t,l)=>a("div",{children:[e(k,{className:"w-[60%] h-7 my-6"}),e("div",{className:"max-h-[60vh] overflow-x-hidden overflow-y-auto flex flex-col gap-3",children:[...new Array(10)].map((s,i)=>a("div",{className:"flex gap-3 pr-2",children:[e(k,{className:"h-[100px] w-[70px] flex-shrink-0"}),a("div",{className:"flex-grow",children:[e(k,{className:"w-full h-4"}),e(k,{className:"w-[70%] h-4 mt-3"})]})]},i))},l)]},l))})}),Ve=({data:r,sources:t,subtitles:l,episodeIndex:s})=>{const n=`${typeof s=="undefined"?"movie":"tv"}-${r==null?void 0:r.id}${s?`-${s}`:""}`;return m.exports.useEffect(()=>{if(!r)return;let c=JSON.parse(localStorage.getItem("filmhot-recent")||"[]");!Array.isArray(c)||(c=c.filter(u=>u.id!==r.id),c.unshift({id:r.id,category:r.category,coverVerticalUrl:r.coverVerticalUrl,name:r.name}),localStorage.setItem("filmhot-recent",JSON.stringify(c)))},[r]),a(x,{children:[r&&e(E,{value:`Watch ${r.name}${typeof s!="undefined"?` - Episode ${s+1}`:""} - Lynflix`}),e("div",{className:"flex justify-center",children:a("div",{className:"mx-[4vw] lg:mx-[6vw] flex-1",children:[e(H,{}),a("div",{className:"flex flex-col md:flex-row gap-10 my-7",children:[a("div",{className:"flex flex-col items-stretch flex-grow",children:[e("div",{className:"w-full",children:r&&t&&l?e(x,{children:gt()?e(Ot,{playerKey:n,sources:t,subtitles:l}):e(Vt,{playerKey:n,sources:t,subtitles:l})}):e("div",{className:"w-full h-0 pb-[56.25%] relative",children:e(k,{className:"absolute top-0 left-0 w-full h-full"})})},s),e(Mt,{data:r,episodeIndex:s}),r&&e(Ut,{data:r,episodeIndex:s})]}),e(Ft,{data:r})]})]})})]})},zt=async r=>{const t=(await $.get("movieDrama/get",{params:{id:r,category:0}})).data.data,l=(await Promise.all(t.episodeVo[0].definitionList.map(async i=>(await $.get("media/previewInfo",{params:{category:0,contentId:r,episodeId:t.episodeVo[0].id,definition:i.code}})).data.data.mediaUrl))).map((i,n)=>({quality:Number(t.episodeVo[0].definitionList[n].description.toLowerCase().replace("p","")),url:i})).sort((i,n)=>n.quality-i.quality),s=t.episodeVo[0].subtitlingList.map(i=>({language:i.language,url:i.subtitlingUrl,lang:i.languageAbbr})).reduce((i,n)=>n.lang==="en"?[n,...i]:[...i,n],[]).reduce((i,n)=>n.lang==="vi"?[n,...i]:[...i,n],[]);return{data:t,sources:l,subtitles:s}},qt=()=>{const{id:r}=se(),{data:t,error:l}=F(`movie-${r}`,()=>zt(r));return l?e(j,{}):e(Ve,{data:t==null?void 0:t.data,sources:t==null?void 0:t.sources,subtitles:t==null?void 0:t.subtitles})},Wt=({query:r})=>{const{data:t,error:l}=F(`search-${r}`,()=>yt(r));return l?e(j,{}):e("div",{className:"grid gap-6 grid-cols-sm md:grid-cols-lg",children:t?t.length===0?e("div",{children:"No result found"}):e(x,{children:t.map(s=>e(g,{title:s.name,to:s.domainType===0?`/movie/${s.id}`:`/tv/${s.id}`,className:"relative h-0 pb-[163%] bg-dark-lighten rounded overflow-hidden group",children:a("div",{className:"absolute top-0 left-0 w-full h-full flex flex-col items-stretch",children:[e("div",{className:"relative w-full h-0 pb-[140%] flex-shrink-0 group-hover:brightness-[80%] transition duration-300",children:e(V.LazyLoadImage,{effect:"opacity",className:"absolute top-0 left-0 w-full h-full object-cover",src:C(s.coverVerticalUrl,"250"),alt:""})}),e("div",{className:"flex-grow flex items-center",children:e("h1",{className:"w-full whitespace-nowrap overflow-hidden text-ellipsis px-2 group-hover:text-primary transition duration-300",children:s.name})})]})},s.id))}):e(x,{children:[...new Array(20)].map((s,i)=>e("div",{className:"relative h-0 pb-[163%]",children:e(k,{className:"absolute top-0 left-0 w-full h-full rounded"})},i))})})},he=()=>{const r=O();return new URLSearchParams(r.search)},Ht=()=>{const t=he().get("q");return(t==null?void 0:t.trim())?a(x,{children:[e(E,{value:`Search for ${t} - Lynflix`}),a("div",{className:"flex flex-col items-stretch mx-[7vw] mb-8",children:[e(H,{}),e("div",{children:a("h1",{className:"mb-6 text-3xl",children:["Search result for ",t]})}),e(Wt,{query:t})]})]}):a(x,{children:[e(E,{value:"Search - Lynflix"}),e("div",{className:"flex justify-center my-[100px] mx-6",children:a("div",{className:"w-full max-w-[400px] flex flex-col items-center gap-4",children:[a("div",{className:"flex flex-col items-stretch gap-3",children:[e("h1",{className:"text-2xl",children:"Search for your favorite movies"}),e(oe,{autoFocus:!0})]}),a("div",{className:"mt-8 w-full",children:[e("h1",{className:"text-lg mb-3",children:"Popular Searches"}),e(Ue,{})]})]})})]})},Kt=()=>{const r=Y(u=>u.currentUser),t=he(),[l,s]=m.exports.useState(!1),[i,n]=m.exports.useState(""),c=u=>{s(!0),nt(de,u).then(d=>{console.log(d.user)}).catch(d=>{n(`Error: ${d.code}`)}).finally(()=>{s(!1)})};return r?e(lt,{to:t.get("redirect")||"/"}):a(x,{children:[e(E,{value:"Sign In - Lynflix"}),e("div",{className:"min-h-screen w-screen bg-[url('/bg.png')] bg-no-repeat bg-cover bg-center",children:e("div",{className:"w-full min-h-screen flex justify-center items-center bg-[#00000056]",children:a("div",{className:"w-[90vw] max-w-[350px] bg-black p-10 flex flex-col items-center gap-6 rounded-xl",children:[e("h1",{className:"text-3xl font-semibold",children:"Sign In"}),i&&e("div",{className:"p-3 bg-red-200 text-red-600 border border-red-400 w-full rounded",children:i}),a("button",{disabled:l,onClick:()=>c(new at),className:"flex items-center bg-white text-black p-3 gap-3 rounded-md cursor-pointer hover:brightness-90 disabled:!brightness-75 disabled:!cursor-default transition duration-300 w-full",children:[e("img",{className:"w-6 h-6",src:"/google.svg",alt:""}),e("span",{children:"Sign In With Google"})]}),a("button",{disabled:l,onClick:()=>c(new it),className:"flex items-center bg-primary text-white p-3 gap-3 rounded-md cursor-pointer hover:brightness-90 disabled:!brightness-75 disabled:!cursor-default transition duration-300 w-full",children:[e("img",{className:"w-6 h-6",src:"/facebook.svg",alt:""}),e("span",{children:"Sign In With Facebook"})]})]})})})]})},_t=async(r,t)=>{const l=(await $.get("movieDrama/get",{params:{id:r,category:1}})).data.data,s=(await Promise.all(l.episodeVo[t].definitionList.map(async n=>(await $.get("media/previewInfo",{params:{category:1,contentId:r,episodeId:l.episodeVo[0].id,definition:n.code}})).data.data.mediaUrl))).map((n,c)=>({quality:Number(l.episodeVo[0].definitionList[c].description.toLowerCase().replace("p","")),url:n})).sort((n,c)=>c.quality-n.quality),i=l.episodeVo[0].subtitlingList.map(n=>({language:`${n.language}`,url:n.subtitlingUrl,lang:n.languageAbbr})).reduce((n,c)=>c.lang==="en"?[c,...n]:[...n,c],[]).reduce((n,c)=>c.lang==="vi"?[c,...n]:[...n,c],[]);return{data:l,sources:s,subtitles:i}},Bt=()=>{const{id:r}=se(),t=he(),l=Number(t.get("episode"))||0,{data:s,error:i}=F(`tv-${r}-${l}`,()=>_t(r,l));return i?e(j,{}):e(Ve,{data:s==null?void 0:s.data,sources:s==null?void 0:s.sources,subtitles:s==null?void 0:s.subtitles,episodeIndex:l})},Dt=()=>{const r=Y(t=>t.setCurrentUser);return m.exports.useEffect(()=>{ot(de,t=>{r(t?{uid:t.uid,email:t.email,photoURL:t.photoURL,displayName:t.displayName}:null)})},[]),a(ct,{children:[e(P,{index:!0,element:e(Tt,{})}),e(P,{path:"movie/:id",element:e(qt,{})}),e(P,{path:"tv/:id",element:e(Bt,{})}),e(P,{path:"search",element:e(Ht,{})}),e(P,{path:"explore",element:e(Ct,{})}),e(P,{path:"sign-in",element:e(Kt,{})}),e(P,{path:"history",element:e(It,{})}),e(P,{path:"category/:id",element:e(wt,{})}),e(P,{path:"discovery",element:e(kt,{})})]})};dt.render(e(mt,{children:e(ht,{value:{revalidateOnFocus:!1,shouldRetryOnError:!1},children:e(Dt,{})})}),document.getElementById("root"));
