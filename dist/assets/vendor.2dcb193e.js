var kb=Object.defineProperty,Lb=Object.defineProperties;var Db=Object.getOwnPropertyDescriptors;var ql=Object.getOwnPropertySymbols;var Sv=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable;var _v=(t,e,r)=>e in t?kb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bo=(t,e)=>{for(var r in e||(e={}))Sv.call(e,r)&&_v(t,r,e[r]);if(ql)for(var r of ql(e))xv.call(e,r)&&_v(t,r,e[r]);return t},Wf=(t,e)=>Lb(t,Db(e));var Kf=(t,e)=>{var r={};for(var n in t)Sv.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&ql)for(var n of ql(t))e.indexOf(n)<0&&xv.call(t,n)&&(r[n]=t[n]);return r};var Ob=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Pb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ae={exports:{}},it={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var bv=Object.getOwnPropertySymbols,Nb=Object.prototype.hasOwnProperty,Mb=Object.prototype.propertyIsEnumerable;function Fb(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Ub(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Av=Ub()?Object.assign:function(t,e){for(var r,n=Fb(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var a in r)Nb.call(r,a)&&(n[a]=r[a]);if(bv){i=bv(r);for(var l=0;l<i.length;l++)Mb.call(r,i[l])&&(n[i[l]]=r[i[l]])}}return n};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=Av,bs=60103,Iv=60106;it.Fragment=60107;it.StrictMode=60108;it.Profiler=60114;var Rv=60109,Cv=60110,kv=60112;it.Suspense=60113;var Lv=60115,Dv=60116;if(typeof Symbol=="function"&&Symbol.for){var on=Symbol.for;bs=on("react.element"),Iv=on("react.portal"),it.Fragment=on("react.fragment"),it.StrictMode=on("react.strict_mode"),it.Profiler=on("react.profiler"),Rv=on("react.provider"),Cv=on("react.context"),kv=on("react.forward_ref"),it.Suspense=on("react.suspense"),Lv=on("react.memo"),Dv=on("react.lazy")}var Ov=typeof Symbol=="function"&&Symbol.iterator;function Bb(t){return t===null||typeof t!="object"?null:(t=Ov&&t[Ov]||t["@@iterator"],typeof t=="function"?t:null)}function $o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nv={};function As(t,e,r){this.props=t,this.context=e,this.refs=Nv,this.updater=r||Pv}As.prototype.isReactComponent={};As.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error($o(85));this.updater.enqueueSetState(this,t,e,"setState")};As.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mv(){}Mv.prototype=As.prototype;function Yf(t,e,r){this.props=t,this.context=e,this.refs=Nv,this.updater=r||Pv}var Xf=Yf.prototype=new Mv;Xf.constructor=Yf;qf(Xf,As.prototype);Xf.isPureReactComponent=!0;var Qf={current:null},Fv=Object.prototype.hasOwnProperty,Uv={key:!0,ref:!0,__self:!0,__source:!0};function Bv(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Fv.call(e,n)&&!Uv.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];i.children=d}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:bs,type:t,key:s,ref:a,props:i,_owner:Qf.current}}function $b(t,e){return{$$typeof:bs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jf(t){return typeof t=="object"&&t!==null&&t.$$typeof===bs}function Vb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var $v=/\/+/g;function Zf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Vb(""+t.key):e.toString(36)}function Yl(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bs:case Iv:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Zf(a,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace($v,"$&/")+"/"),Yl(i,e,r,"",function(u){return u})):i!=null&&(Jf(i)&&(i=$b(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace($v,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){s=t[l];var d=n+Zf(s,l);a+=Yl(s,e,r,d,i)}else if(d=Bb(t),typeof d=="function")for(t=d.call(t),l=0;!(s=t.next()).done;)s=s.value,d=n+Zf(s,l++),a+=Yl(s,e,r,d,i);else if(s==="object")throw e=""+t,Error($o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return a}function Xl(t,e,r){if(t==null)return t;var n=[],i=0;return Yl(t,n,"","",function(s){return e.call(r,s,i++)}),n}function jb(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var Vv={current:null};function Rn(){var t=Vv.current;if(t===null)throw Error($o(321));return t}var Gb={ReactCurrentDispatcher:Vv,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Qf,IsSomeRendererActing:{current:!1},assign:qf};it.Children={map:Xl,forEach:function(t,e,r){Xl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Xl(t,function(){e++}),e},toArray:function(t){return Xl(t,function(e){return e})||[]},only:function(t){if(!Jf(t))throw Error($o(143));return t}};it.Component=As;it.PureComponent=Yf;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gb;it.cloneElement=function(t,e,r){if(t==null)throw Error($o(267,t));var n=qf({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Qf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(d in e)Fv.call(e,d)&&!Uv.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:bs,type:t.type,key:i,ref:s,props:n,_owner:a}};it.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:Cv,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:Rv,_context:t},t.Consumer=t};it.createElement=Bv;it.createFactory=function(t){var e=Bv.bind(null,t);return e.type=t,e};it.createRef=function(){return{current:null}};it.forwardRef=function(t){return{$$typeof:kv,render:t}};it.isValidElement=Jf;it.lazy=function(t){return{$$typeof:Dv,_payload:{_status:-1,_result:t},_init:jb}};it.memo=function(t,e){return{$$typeof:Lv,type:t,compare:e===void 0?null:e}};it.useCallback=function(t,e){return Rn().useCallback(t,e)};it.useContext=function(t,e){return Rn().useContext(t,e)};it.useDebugValue=function(){};it.useEffect=function(t,e){return Rn().useEffect(t,e)};it.useImperativeHandle=function(t,e,r){return Rn().useImperativeHandle(t,e,r)};it.useLayoutEffect=function(t,e){return Rn().useLayoutEffect(t,e)};it.useMemo=function(t,e){return Rn().useMemo(t,e)};it.useReducer=function(t,e,r){return Rn().useReducer(t,e,r)};it.useRef=function(t){return Rn().useRef(t)};it.useState=function(t){return Rn().useState(t)};it.version="17.0.2";ae.exports=it;var Gn=ae.exports;function Ql(){return Ql=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ql.apply(this,arguments)}var Oi,ed=Oi||(Oi={});ed.Pop="POP";ed.Push="PUSH";ed.Replace="REPLACE";var jv=function(t){return t};function Gv(t){t.preventDefault(),t.returnValue=""}function zv(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(r){return r!==e})}},call:function(e){t.forEach(function(r){return r&&r(e)})}}}function zb(){return Math.random().toString(36).substr(2,8)}function td(t){var e=t.pathname;e=e===void 0?"/":e;var r=t.search;return r=r===void 0?"":r,t=t.hash,t=t===void 0?"":t,r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),t&&t!=="#"&&(e+=t.charAt(0)==="#"?t:"#"+t),e}function Pi(t){var e={};if(t){var r=t.indexOf("#");0<=r&&(e.hash=t.substr(r),t=t.substr(0,r)),r=t.indexOf("?"),0<=r&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Hb(t){function e(){var S=d.location,x=u.state||{};return[x.idx,jv({pathname:S.pathname,search:S.search,hash:S.hash,state:x.usr||null,key:x.key||"default"})]}function r(S){return typeof S=="string"?S:td(S)}function n(S,x){return x===void 0&&(x=null),jv(Ql({pathname:w.pathname,hash:"",search:""},typeof S=="string"?Pi(S):S,{state:x,key:zb()}))}function i(S){E=S,S=e(),m=S[0],w=S[1],C.call({action:E,location:w})}function s(S,x){function _(){s(S,x)}var D=Oi.Push,k=n(S,x);if(!R.length||(R.call({action:D,location:k,retry:_}),!1)){var M=[{usr:k.state,key:k.key,idx:m+1},r(k)];k=M[0],M=M[1];try{u.pushState(k,"",M)}catch{d.location.assign(M)}i(D)}}function a(S,x){function _(){a(S,x)}var D=Oi.Replace,k=n(S,x);R.length&&(R.call({action:D,location:k,retry:_}),1)||(k=[{usr:k.state,key:k.key,idx:m},r(k)],u.replaceState(k[0],"",k[1]),i(D))}function l(S){u.go(S)}t===void 0&&(t={}),t=t.window;var d=t===void 0?document.defaultView:t,u=d.history,h=null;d.addEventListener("popstate",function(){if(h)R.call(h),h=null;else{var S=Oi.Pop,x=e(),_=x[0];if(x=x[1],R.length){if(_!=null){var D=m-_;D&&(h={action:S,location:x,retry:function(){l(-1*D)}},l(D))}}else i(S)}});var E=Oi.Pop;t=e();var m=t[0],w=t[1],C=zv(),R=zv();return m==null&&(m=0,u.replaceState(Ql({},u.state,{idx:m}),"")),{get action(){return E},get location(){return w},createHref:r,push:s,replace:a,go:l,back:function(){l(-1)},forward:function(){l(1)},listen:function(S){return C.push(S)},block:function(S){var x=R.push(S);return R.length===1&&d.addEventListener("beforeunload",Gv),function(){x(),R.length||d.removeEventListener("beforeunload",Gv)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function an(t,e){if(!t)throw new Error(e)}const rd=ae.exports.createContext(null),nd=ae.exports.createContext(null),Is=ae.exports.createContext({outlet:null,matches:[]});function I2(t){let{to:e,replace:r,state:n}=t;Rs()||an(!1);let i=Hv();return ae.exports.useEffect(()=>{i(e,{replace:r,state:n})}),null}function Wb(t){return Qb(t.context)}function Kb(t){an(!1)}function qb(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Oi.Pop,navigator:s,static:a=!1}=t;Rs()&&an(!1);let l=vA(e),d=ae.exports.useMemo(()=>({basename:l,navigator:s,static:a}),[l,s,a]);typeof n=="string"&&(n=Pi(n));let{pathname:u="/",search:h="",hash:E="",state:m=null,key:w="default"}=n,C=ae.exports.useMemo(()=>{let R=Xv(u,l);return R==null?null:{pathname:R,search:h,hash:E,state:m,key:w}},[l,u,h,E,m,w]);return C==null?null:ae.exports.createElement(rd.Provider,{value:d},ae.exports.createElement(nd.Provider,{children:r,value:{location:C,navigationType:i}}))}function R2(t){let{children:e,location:r}=t;return Jb(id(e),r)}function Yb(t){Rs()||an(!1);let{basename:e,navigator:r}=ae.exports.useContext(rd),{hash:n,pathname:i,search:s}=Wv(t),a=i;if(e!=="/"){let l=mA(t),d=l!=null&&l.endsWith("/");a=i==="/"?e+(d?"/":""):zn([e,i])}return r.createHref({pathname:a,search:s,hash:n})}function Rs(){return ae.exports.useContext(nd)!=null}function Jl(){return Rs()||an(!1),ae.exports.useContext(nd).location}function Hv(){Rs()||an(!1);let{basename:t,navigator:e}=ae.exports.useContext(rd),{matches:r}=ae.exports.useContext(Is),{pathname:n}=Jl(),i=JSON.stringify(r.map(l=>l.pathnameBase)),s=ae.exports.useRef(!1);return ae.exports.useEffect(()=>{s.current=!0}),ae.exports.useCallback(function(l,d){if(d===void 0&&(d={}),!s.current)return;if(typeof l=="number"){e.go(l);return}let u=Yv(l,JSON.parse(i),n);t!=="/"&&(u.pathname=zn([t,u.pathname])),(d.replace?e.replace:e.push)(u,d.state)},[t,e,i,n])}const Xb=ae.exports.createContext(null);function Qb(t){let e=ae.exports.useContext(Is).outlet;return e&&ae.exports.createElement(Xb.Provider,{value:t},e)}function C2(){let{matches:t}=ae.exports.useContext(Is),e=t[t.length-1];return e?e.params:{}}function Wv(t){let{matches:e}=ae.exports.useContext(Is),{pathname:r}=Jl(),n=JSON.stringify(e.map(i=>i.pathnameBase));return ae.exports.useMemo(()=>Yv(t,JSON.parse(n),r),[t,n,r])}function Jb(t,e){Rs()||an(!1);let{matches:r}=ae.exports.useContext(Is),n=r[r.length-1],i=n?n.params:{};n&&n.pathname;let s=n?n.pathnameBase:"/";n&&n.route;let a=Jl(),l;if(e){var d;let m=typeof e=="string"?Pi(e):e;s==="/"||((d=m.pathname)==null?void 0:d.startsWith(s))||an(!1),l=m}else l=a;let u=l.pathname||"/",h=s==="/"?u:u.slice(s.length)||"/",E=Zb(t,{pathname:h});return cA(E&&E.map(m=>Object.assign({},m,{params:Object.assign({},i,m.params),pathname:zn([s,m.pathname]),pathnameBase:m.pathnameBase==="/"?s:zn([s,m.pathnameBase])})),r)}function id(t){let e=[];return ae.exports.Children.forEach(t,r=>{if(!ae.exports.isValidElement(r))return;if(r.type===ae.exports.Fragment){e.push.apply(e,id(r.props.children));return}r.type!==Kb&&an(!1);let n={caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path};r.props.children&&(n.children=id(r.props.children)),e.push(n)}),e}function Zb(t,e,r){r===void 0&&(r="/");let n=typeof e=="string"?Pi(e):e,i=Xv(n.pathname||"/",r);if(i==null)return null;let s=Kv(t);eA(s);let a=null;for(let l=0;a==null&&l<s.length;++l)a=uA(s[l],i);return a}function Kv(t,e,r,n){return e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n=""),t.forEach((i,s)=>{let a={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(n)||an(!1),a.relativePath=a.relativePath.slice(n.length));let l=zn([n,a.relativePath]),d=r.concat(a);i.children&&i.children.length>0&&(i.index===!0&&an(!1),Kv(i.children,e,d,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:aA(l,i.index),routesMeta:d})}),e}function eA(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:lA(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const tA=/^:\w+$/,rA=3,nA=2,iA=1,sA=10,oA=-2,qv=t=>t==="*";function aA(t,e){let r=t.split("/"),n=r.length;return r.some(qv)&&(n+=oA),e&&(n+=nA),r.filter(i=>!qv(i)).reduce((i,s)=>i+(tA.test(s)?rA:s===""?iA:sA),n)}function lA(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function uA(t,e){let{routesMeta:r}=t,n={},i="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],d=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=fA({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u);if(!h)return null;Object.assign(n,h.params);let E=l.route;s.push({params:n,pathname:zn([i,h.pathname]),pathnameBase:zn([i,h.pathnameBase]),route:E}),h.pathnameBase!=="/"&&(i=zn([i,h.pathnameBase]))}return s}function cA(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((r,n,i)=>ae.exports.createElement(Is.Provider,{children:n.route.element!==void 0?n.route.element:ae.exports.createElement(Wb,null),value:{outlet:r,matches:e.concat(t.slice(0,i+1))}}),null)}function fA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=dA(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,h,E)=>{if(h==="*"){let m=l[E]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}return u[h]=hA(l[E]||""),u},{}),pathname:s,pathnameBase:a,pattern:t}}function dA(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,l)=>(n.push(l),"([^\\/]+)"));return t.endsWith("*")?(n.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),n]}function hA(t,e){try{return decodeURIComponent(t)}catch{return t}}function pA(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Pi(t):t;return{pathname:r?r.startsWith("/")?r:gA(r,e):e,search:yA(n),hash:EA(i)}}function gA(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Yv(t,e,r){let n=typeof t=="string"?Pi(t):t,i=t===""||n.pathname===""?"/":n.pathname,s;if(i==null)s=r;else{let l=e.length-1;if(i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),l-=1;n.pathname=d.join("/")}s=l>=0?e[l]:"/"}let a=pA(n,s);return i&&i!=="/"&&i.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function mA(t){return t===""||t.pathname===""?"/":typeof t=="string"?Pi(t).pathname:t.pathname}function Xv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=t.charAt(e.length);return r&&r!=="/"?null:t.slice(e.length)||"/"}const zn=t=>t.join("/").replace(/\/\/+/g,"/"),vA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,EA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sd.apply(this,arguments)}function TA(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}const wA=["onClick","reloadDocument","replace","state","target","to"];function k2(t){let{basename:e,children:r,window:n}=t,i=ae.exports.useRef();i.current==null&&(i.current=Hb({window:n}));let s=i.current,[a,l]=ae.exports.useState({action:s.action,location:s.location});return ae.exports.useLayoutEffect(()=>s.listen(l),[s]),ae.exports.createElement(qb,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:s})}function SA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const L2=ae.exports.forwardRef(function(e,r){let{onClick:n,reloadDocument:i,replace:s=!1,state:a,target:l,to:d}=e,u=TA(e,wA),h=Yb(d),E=xA(d,{replace:s,state:a,target:l});function m(w){n&&n(w),!w.defaultPrevented&&!i&&E(w)}return ae.exports.createElement("a",sd({},u,{href:h,onClick:m,ref:r,target:l}))});function xA(t,e){let{target:r,replace:n,state:i}=e===void 0?{}:e,s=Hv(),a=Jl(),l=Wv(t);return ae.exports.useCallback(d=>{if(d.button===0&&(!r||r==="_self")&&!SA(d)){d.preventDefault();let u=!!n||td(a)===td(l);s(t,{replace:u,state:i})}},[a,s,l,n,i,r,t])}var Zl={exports:{}},Vo={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A=ae.exports,Qv=60103;Vo.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Jv=Symbol.for;Qv=Jv("react.element"),Vo.Fragment=Jv("react.fragment")}var bA=_A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AA=Object.prototype.hasOwnProperty,IA={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)AA.call(e,n)&&!IA.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:Qv,type:t,key:s,ref:a,props:i,_owner:bA.current}}Vo.jsx=Zv;Vo.jsxs=Zv;Zl.exports=Vo;const ln=Zl.exports.jsx,eu=Zl.exports.jsxs,RA=Zl.exports.Fragment;var od=function(t,e){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},od(t,e)};function CA(t,e){od(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jo=function(){return jo=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jo.apply(this,arguments)};function kA(t,e,r,n){var i,s=!1,a=0;function l(){i&&clearTimeout(i)}function d(){l(),s=!0}typeof e!="boolean"&&(n=r,r=e,e=void 0);function u(){var h=this,E=Date.now()-a,m=arguments;if(s)return;function w(){a=Date.now(),r.apply(h,m)}function C(){i=void 0}n&&!i&&w(),l(),n===void 0&&E>t?w():e!==!0&&(i=setTimeout(n?C:w,n===void 0?t-E:t))}return u.cancel=d,u}var Cs={Pixel:"Pixel",Percent:"Percent"},e0={unit:Cs.Percent,value:.8};function t0(t){return typeof t=="number"?{unit:Cs.Percent,value:t*100}:typeof t=="string"?t.match(/^(\d*(\.\d+)?)px$/)?{unit:Cs.Pixel,value:parseFloat(t)}:t.match(/^(\d*(\.\d+)?)%$/)?{unit:Cs.Percent,value:parseFloat(t)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),e0):(console.warn("scrollThreshold should be string or number"),e0)}var D2=function(t){CA(e,t);function e(r){var n=t.call(this,r)||this;return n.lastScrollTop=0,n.actionTriggered=!1,n.startY=0,n.currentY=0,n.dragging=!1,n.maxPullDownDistance=0,n.getScrollableTarget=function(){return n.props.scrollableTarget instanceof HTMLElement?n.props.scrollableTarget:typeof n.props.scrollableTarget=="string"?document.getElementById(n.props.scrollableTarget):(n.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},n.onStart=function(i){n.lastScrollTop||(n.dragging=!0,i instanceof MouseEvent?n.startY=i.pageY:i instanceof TouchEvent&&(n.startY=i.touches[0].pageY),n.currentY=n.startY,n._infScroll&&(n._infScroll.style.willChange="transform",n._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},n.onMove=function(i){!n.dragging||(i instanceof MouseEvent?n.currentY=i.pageY:i instanceof TouchEvent&&(n.currentY=i.touches[0].pageY),!(n.currentY<n.startY)&&(n.currentY-n.startY>=Number(n.props.pullDownToRefreshThreshold)&&n.setState({pullToRefreshThresholdBreached:!0}),!(n.currentY-n.startY>n.maxPullDownDistance*1.5)&&n._infScroll&&(n._infScroll.style.overflow="visible",n._infScroll.style.transform="translate3d(0px, "+(n.currentY-n.startY)+"px, 0px)")))},n.onEnd=function(){n.startY=0,n.currentY=0,n.dragging=!1,n.state.pullToRefreshThresholdBreached&&(n.props.refreshFunction&&n.props.refreshFunction(),n.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){n._infScroll&&(n._infScroll.style.overflow="auto",n._infScroll.style.transform="none",n._infScroll.style.willChange="unset")})},n.onScrollListener=function(i){typeof n.props.onScroll=="function"&&setTimeout(function(){return n.props.onScroll&&n.props.onScroll(i)},0);var s=n.props.height||n._scrollableNode?i.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!n.actionTriggered){var a=n.props.inverse?n.isElementAtTop(s,n.props.scrollThreshold):n.isElementAtBottom(s,n.props.scrollThreshold);a&&n.props.hasMore&&(n.actionTriggered=!0,n.setState({showLoader:!0}),n.props.next&&n.props.next()),n.lastScrollTop=s.scrollTop}},n.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:r.dataLength},n.throttledOnScrollListener=kA(150,n.onScrollListener).bind(n),n.onStart=n.onStart.bind(n),n.onMove=n.onMove.bind(n),n.onEnd=n.onEnd.bind(n),n}return e.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},e.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},e.prototype.componentDidUpdate=function(r){this.props.dataLength!==r.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},e.getDerivedStateFromProps=function(r,n){var i=r.dataLength!==n.prevDataLength;return i?jo(jo({},n),{prevDataLength:r.dataLength}):null},e.prototype.isElementAtTop=function(r,n){n===void 0&&(n=.8);var i=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,s=t0(n);return s.unit===Cs.Pixel?r.scrollTop<=s.value+i-r.scrollHeight+1:r.scrollTop<=s.value/100+i-r.scrollHeight+1},e.prototype.isElementAtBottom=function(r,n){n===void 0&&(n=.8);var i=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,s=t0(n);return s.unit===Cs.Pixel?r.scrollTop+i>=r.scrollHeight-s.value:r.scrollTop+i>=s.value/100*r.scrollHeight},e.prototype.render=function(){var r=this,n=jo({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),i=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),s=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return ln("div",{style:s,className:"infinite-scroll-component__outerdiv",children:eu("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(a){return r._infScroll=a},style:n,children:[this.props.pullDownToRefresh&&ln("div",{style:{position:"relative"},ref:function(a){return r._pullDown=a},children:ln("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance},children:this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent})}),this.props.children,!this.state.showLoader&&!i&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage]})})},e}(ae.exports.Component),ad={exports:{}},Kr={},r0={exports:{}},n0={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var d=null,u=null,h=function(){if(d!==null)try{var ee=t.unstable_now();d(!0,ee),d=null}catch(oe){throw setTimeout(h,0),oe}};e=function(ee){d!==null?setTimeout(e,0,ee):(d=ee,setTimeout(h,0))},r=function(ee,oe){u=setTimeout(ee,oe)},n=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var E=window.setTimeout,m=window.clearTimeout;if(typeof console!="undefined"){var w=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof w!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var C=!1,R=null,S=-1,x=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},i=function(){},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ee?Math.floor(1e3/ee):5};var D=new MessageChannel,k=D.port2;D.port1.onmessage=function(){if(R!==null){var ee=t.unstable_now();_=ee+x;try{R(!0,ee)?k.postMessage(null):(C=!1,R=null)}catch(oe){throw k.postMessage(null),oe}}else C=!1},e=function(ee){R=ee,C||(C=!0,k.postMessage(null))},r=function(ee,oe){S=E(function(){ee(t.unstable_now())},oe)},n=function(){m(S),S=-1}}function M(ee,oe){var ve=ee.length;ee.push(oe);e:for(;;){var ge=ve-1>>>1,Ue=ee[ge];if(Ue!==void 0&&0<q(Ue,oe))ee[ge]=oe,ee[ve]=Ue,ve=ge;else break e}}function B(ee){return ee=ee[0],ee===void 0?null:ee}function z(ee){var oe=ee[0];if(oe!==void 0){var ve=ee.pop();if(ve!==oe){ee[0]=ve;e:for(var ge=0,Ue=ee.length;ge<Ue;){var Je=2*(ge+1)-1,Oe=ee[Je],Ze=Je+1,et=ee[Ze];if(Oe!==void 0&&0>q(Oe,ve))et!==void 0&&0>q(et,Oe)?(ee[ge]=et,ee[Ze]=ve,ge=Ze):(ee[ge]=Oe,ee[Je]=ve,ge=Je);else if(et!==void 0&&0>q(et,ve))ee[ge]=et,ee[Ze]=ve,ge=Ze;else break e}}return oe}return null}function q(ee,oe){var ve=ee.sortIndex-oe.sortIndex;return ve!==0?ve:ee.id-oe.id}var H=[],Y=[],re=1,se=null,he=3,Te=!1,Le=!1,De=!1;function Fe(ee){for(var oe=B(Y);oe!==null;){if(oe.callback===null)z(Y);else if(oe.startTime<=ee)z(Y),oe.sortIndex=oe.expirationTime,M(H,oe);else break;oe=B(Y)}}function Ke(ee){if(De=!1,Fe(ee),!Le)if(B(H)!==null)Le=!0,e(Ae);else{var oe=B(Y);oe!==null&&r(Ke,oe.startTime-ee)}}function Ae(ee,oe){Le=!1,De&&(De=!1,n()),Te=!0;var ve=he;try{for(Fe(oe),se=B(H);se!==null&&(!(se.expirationTime>oe)||ee&&!t.unstable_shouldYield());){var ge=se.callback;if(typeof ge=="function"){se.callback=null,he=se.priorityLevel;var Ue=ge(se.expirationTime<=oe);oe=t.unstable_now(),typeof Ue=="function"?se.callback=Ue:se===B(H)&&z(H),Fe(oe)}else z(H);se=B(H)}if(se!==null)var Je=!0;else{var Oe=B(Y);Oe!==null&&r(Ke,Oe.startTime-oe),Je=!1}return Je}finally{se=null,he=ve,Te=!1}}var Ge=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){Le||Te||(Le=!0,e(Ae))},t.unstable_getCurrentPriorityLevel=function(){return he},t.unstable_getFirstCallbackNode=function(){return B(H)},t.unstable_next=function(ee){switch(he){case 1:case 2:case 3:var oe=3;break;default:oe=he}var ve=he;he=oe;try{return ee()}finally{he=ve}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Ge,t.unstable_runWithPriority=function(ee,oe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ve=he;he=ee;try{return oe()}finally{he=ve}},t.unstable_scheduleCallback=function(ee,oe,ve){var ge=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?ge+ve:ge):ve=ge,ee){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ve+Ue,ee={id:re++,callback:oe,priorityLevel:ee,startTime:ve,expirationTime:Ue,sortIndex:-1},ve>ge?(ee.sortIndex=ve,M(Y,ee),B(H)===null&&ee===B(Y)&&(De?n():De=!0,r(Ke,ve-ge))):(ee.sortIndex=Ue,M(H,ee),Le||Te||(Le=!0,e(Ae))),ee},t.unstable_wrapCallback=function(ee){var oe=he;return function(){var ve=he;he=oe;try{return ee.apply(this,arguments)}finally{he=ve}}}})(n0);r0.exports=n0;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=ae.exports,Tt=Av,Vt=r0.exports;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!tu)throw Error(pe(227));var i0=new Set,Go={};function Ni(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Go[t]=e,t=0;t<e.length;t++)i0.add(e[t])}var Cn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),LA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s0=Object.prototype.hasOwnProperty,o0={},a0={};function DA(t){return s0.call(a0,t)?!0:s0.call(o0,t)?!1:LA.test(t)?a0[t]=!0:(o0[t]=!0,!1)}function OA(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PA(t,e,r,n){if(e===null||typeof e=="undefined"||OA(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vr(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function ud(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ld,ud);Xt[e]=new vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ld,ud);Xt[e]=new vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ld,ud);Xt[e]=new vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new vr(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new vr(t,1,!1,t.toLowerCase(),null,!0,!0)});function cd(t,e,r,n){var i=Xt.hasOwnProperty(e)?Xt[e]:null,s=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(PA(e,r,i,n)&&(r=null),n||i===null?DA(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Mi=tu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zo=60103,Fi=60106,Hn=60107,fd=60108,Ho=60114,dd=60109,hd=60110,ru=60112,Wo=60113,nu=60120,iu=60115,pd=60116,gd=60121,md=60128,l0=60129,vd=60130,yd=60131;if(typeof Symbol=="function"&&Symbol.for){var jt=Symbol.for;zo=jt("react.element"),Fi=jt("react.portal"),Hn=jt("react.fragment"),fd=jt("react.strict_mode"),Ho=jt("react.profiler"),dd=jt("react.provider"),hd=jt("react.context"),ru=jt("react.forward_ref"),Wo=jt("react.suspense"),nu=jt("react.suspense_list"),iu=jt("react.memo"),pd=jt("react.lazy"),gd=jt("react.block"),jt("react.scope"),md=jt("react.opaque.id"),l0=jt("react.debug_trace_mode"),vd=jt("react.offscreen"),yd=jt("react.legacy_hidden")}var u0=typeof Symbol=="function"&&Symbol.iterator;function Ko(t){return t===null||typeof t!="object"?null:(t=u0&&t[u0]||t["@@iterator"],typeof t=="function"?t:null)}var Ed;function qo(t){if(Ed===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ed=e&&e[1]||""}return`
`+Ed+t}var Td=!1;function su(t,e){if(!t||Td)return"";Td=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l])return`
`+i[a].replace(" at new "," at ");while(1<=a&&0<=l);break}}}finally{Td=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?qo(t):""}function NA(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=su(t.type,!1),t;case 11:return t=su(t.type.render,!1),t;case 22:return t=su(t.type._render,!1),t;case 1:return t=su(t.type,!0),t;default:return""}}function Ls(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hn:return"Fragment";case Fi:return"Portal";case Ho:return"Profiler";case fd:return"StrictMode";case Wo:return"Suspense";case nu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hd:return(t.displayName||"Context")+".Consumer";case dd:return(t._context.displayName||"Context")+".Provider";case ru:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case iu:return Ls(t.type);case gd:return Ls(t._render);case pd:e=t._payload,t=t._init;try{return Ls(t(e))}catch{}}return null}function Wn(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function c0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MA(t){var e=c0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ou(t){t._valueTracker||(t._valueTracker=MA(t))}function f0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=c0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function wd(t,e){var r=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:t._wrapperState.initialChecked})}function d0(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Wn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function h0(t,e){e=e.checked,e!=null&&cd(t,"checked",e,!1)}function Sd(t,e){h0(t,e);var r=Wn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xd(t,e.type,r):e.hasOwnProperty("defaultValue")&&xd(t,e.type,Wn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function p0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xd(t,e,r){(e!=="number"||au(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function FA(t){var e="";return tu.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function _d(t,e){return t=Tt({children:void 0},e),(e=FA(e.children))&&(t.children=e),t}function Ds(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Wn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(pe(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(pe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Wn(r)}}function m0(t,e){var r=Wn(e.value),n=Wn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function v0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Ad={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function y0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lu,E0=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Ad.svg||"innerHTML"in t)t.innerHTML=e;else{for(lu=lu||document.createElement("div"),lu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UA=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){UA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function T0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function w0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=T0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var BA=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rd(t,e){if(e){if(BA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function Cd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ld=null,Os=null,Ps=null;function S0(t){if(t=ga(t)){if(typeof Ld!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=Au(e),Ld(t.stateNode,t.type,e))}}function x0(t){Os?Ps?Ps.push(t):Ps=[t]:Os=t}function _0(){if(Os){var t=Os,e=Ps;if(Ps=Os=null,S0(t),e)for(t=0;t<e.length;t++)S0(e[t])}}function Dd(t,e){return t(e)}function b0(t,e,r,n,i){return t(e,r,n,i)}function Od(){}var A0=Dd,Ui=!1,Pd=!1;function Nd(){(Os!==null||Ps!==null)&&(Od(),_0())}function $A(t,e,r){if(Pd)return t(e,r);Pd=!0;try{return A0(t,e,r)}finally{Pd=!1,Nd()}}function Qo(t,e){var r=t.stateNode;if(r===null)return null;var n=Au(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(pe(231,e,typeof r));return r}var Md=!1;if(Cn)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Md=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Md=!1}function VA(t,e,r,n,i,s,a,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Zo=!1,uu=null,cu=!1,Fd=null,jA={onError:function(t){Zo=!0,uu=t}};function GA(t,e,r,n,i,s,a,l,d){Zo=!1,uu=null,VA.apply(jA,arguments)}function zA(t,e,r,n,i,s,a,l,d){if(GA.apply(this,arguments),Zo){if(Zo){var u=uu;Zo=!1,uu=null}else throw Error(pe(198));cu||(cu=!0,Fd=u)}}function Bi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!=0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function I0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function R0(t){if(Bi(t)!==t)throw Error(pe(188))}function HA(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return R0(i),t;if(s===n)return R0(i),e;s=s.sibling}throw Error(pe(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(pe(189))}}if(r.alternate!==n)throw Error(pe(190))}if(r.tag!==3)throw Error(pe(188));return r.stateNode.current===r?t:e}function C0(t){if(t=HA(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function k0(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var L0,Ud,D0,O0,Bd=!1,hn=[],Kn=null,qn=null,Yn=null,ea=new Map,ta=new Map,ra=[],P0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $d(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function N0(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(e.pointerId)}}function na(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t=$d(e,r,n,i,s),e!==null&&(e=ga(e),e!==null&&Ud(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function WA(t,e,r,n,i){switch(e){case"focusin":return Kn=na(Kn,t,e,r,n,i),!0;case"dragenter":return qn=na(qn,t,e,r,n,i),!0;case"mouseover":return Yn=na(Yn,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return ea.set(s,na(ea.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ta.set(s,na(ta.get(s)||null,t,e,r,n,i)),!0}return!1}function KA(t){var e=$i(t.target);if(e!==null){var r=Bi(e);if(r!==null){if(e=r.tag,e===13){if(e=I0(r),e!==null){t.blockedOn=e,O0(t.lanePriority,function(){Vt.unstable_runWithPriority(t.priority,function(){D0(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=ga(r),e!==null&&Ud(e),t.blockedOn=r,!1;e.shift()}return!0}function M0(t,e,r){fu(t)&&r.delete(e)}function qA(){for(Bd=!1;0<hn.length;){var t=hn[0];if(t.blockedOn!==null){t=ga(t.blockedOn),t!==null&&L0(t);break}for(var e=t.targetContainers;0<e.length;){var r=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&hn.shift()}Kn!==null&&fu(Kn)&&(Kn=null),qn!==null&&fu(qn)&&(qn=null),Yn!==null&&fu(Yn)&&(Yn=null),ea.forEach(M0),ta.forEach(M0)}function ia(t,e){t.blockedOn===e&&(t.blockedOn=null,Bd||(Bd=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,qA)))}function F0(t){function e(i){return ia(i,t)}if(0<hn.length){ia(hn[0],t);for(var r=1;r<hn.length;r++){var n=hn[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Kn!==null&&ia(Kn,t),qn!==null&&ia(qn,t),Yn!==null&&ia(Yn,t),ea.forEach(e),ta.forEach(e),r=0;r<ra.length;r++)n=ra[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ra.length&&(r=ra[0],r.blockedOn===null);)KA(r),r.blockedOn===null&&ra.shift()}function du(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ns={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Vd={},U0={};Cn&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function hu(t){if(Vd[t])return Vd[t];if(!Ns[t])return t;var e=Ns[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in U0)return Vd[t]=e[r];return t}var B0=hu("animationend"),$0=hu("animationiteration"),V0=hu("animationstart"),j0=hu("transitionend"),G0=new Map,jd=new Map,YA=["abort","abort",B0,"animationEnd",$0,"animationIteration",V0,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",j0,"transitionEnd","waiting","waiting"];function Gd(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),jd.set(n,e),G0.set(n,i),Ni(i,[n])}}var XA=Vt.unstable_now;XA();var dt=8;function Ms(t){if((1&t)!=0)return dt=15,1;if((2&t)!=0)return dt=14,2;if((4&t)!=0)return dt=13,4;var e=24&t;return e!==0?(dt=12,e):(t&32)!=0?(dt=11,32):(e=192&t,e!==0?(dt=10,e):(t&256)!=0?(dt=9,256):(e=3584&t,e!==0?(dt=8,e):(t&4096)!=0?(dt=7,4096):(e=4186112&t,e!==0?(dt=6,e):(e=62914560&t,e!==0?(dt=5,e):t&67108864?(dt=4,67108864):(t&134217728)!=0?(dt=3,134217728):(e=805306368&t,e!==0?(dt=2,e):(1073741824&t)!=0?(dt=1,1073741824):(dt=8,t))))))}function QA(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function JA(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(pe(358,t))}}function sa(t,e){var r=t.pendingLanes;if(r===0)return dt=0;var n=0,i=0,s=t.expiredLanes,a=t.suspendedLanes,l=t.pingedLanes;if(s!==0)n=s,i=dt=15;else if(s=r&134217727,s!==0){var d=s&~a;d!==0?(n=Ms(d),i=dt):(l&=s,l!==0&&(n=Ms(l),i=dt))}else s=r&~a,s!==0?(n=Ms(s),i=dt):l!==0&&(n=Ms(l),i=dt);if(n===0)return 0;if(n=31-Xn(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&(e&a)==0){if(Ms(e),i<=dt)return e;dt=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Xn(e),i=1<<r,n|=t[r],e&=~i;return n}function z0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pu(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Fs(24&~e),t===0?pu(10,e):t;case 10:return t=Fs(192&~e),t===0?pu(8,e):t;case 8:return t=Fs(3584&~e),t===0&&(t=Fs(4186112&~e),t===0&&(t=512)),t;case 2:return e=Fs(805306368&~e),e===0&&(e=268435456),e}throw Error(pe(358,t))}function Fs(t){return t&-t}function zd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function gu(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-Xn(e),t[e]=r}var Xn=Math.clz32?Math.clz32:tI,ZA=Math.log,eI=Math.LN2;function tI(t){return t===0?32:31-(ZA(t)/eI|0)|0}var rI=Vt.unstable_UserBlockingPriority,nI=Vt.unstable_runWithPriority,mu=!0;function iI(t,e,r,n){Ui||Od();var i=Hd,s=Ui;Ui=!0;try{b0(i,t,e,r,n)}finally{(Ui=s)||Nd()}}function sI(t,e,r,n){nI(rI,Hd.bind(null,t,e,r,n))}function Hd(t,e,r,n){if(mu){var i;if((i=(e&4)==0)&&0<hn.length&&-1<P0.indexOf(t))t=$d(null,t,e,r,n),hn.push(t);else{var s=Wd(t,e,r,n);if(s===null)i&&N0(t,n);else{if(i){if(-1<P0.indexOf(t)){t=$d(s,t,e,r,n),hn.push(t);return}if(WA(s,t,e,r,n))return;N0(t,n)}Ty(t,e,n,null,r)}}}}function Wd(t,e,r,n){var i=kd(n);if(i=$i(i),i!==null){var s=Bi(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=I0(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ty(t,e,n,i,r),null}var Qn=null,Kd=null,vu=null;function H0(){if(vu)return vu;var t,e=Kd,r=e.length,n,i="value"in Qn?Qn.value:Qn.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return vu=i.slice(t,1<n?1-n:void 0)}function yu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eu(){return!0}function W0(){return!1}function Nr(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eu:W0,this.isPropagationStopped=W0,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qd=Nr(Us),oa=Tt({},Us,{view:0,detail:0}),oI=Nr(oa),Yd,Xd,aa,Tu=Tt({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(Yd=t.screenX-aa.screenX,Xd=t.screenY-aa.screenY):Xd=Yd=0,aa=t),Yd)},movementY:function(t){return"movementY"in t?t.movementY:Xd}}),K0=Nr(Tu),aI=Tt({},Tu,{dataTransfer:0}),lI=Nr(aI),uI=Tt({},oa,{relatedTarget:0}),Qd=Nr(uI),cI=Tt({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),fI=Nr(cI),dI=Tt({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hI=Nr(dI),pI=Tt({},Us,{data:0}),q0=Nr(pI),gI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vI[t])?!!e[t]:!1}function Jd(){return yI}var EI=Tt({},oa,{key:function(t){if(t.key){var e=gI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jd,charCode:function(t){return t.type==="keypress"?yu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TI=Nr(EI),wI=Tt({},Tu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=Nr(wI),SI=Tt({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jd}),xI=Nr(SI),_I=Tt({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),bI=Nr(_I),AI=Tt({},Tu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),II=Nr(AI),RI=[9,13,27,32],Zd=Cn&&"CompositionEvent"in window,la=null;Cn&&"documentMode"in document&&(la=document.documentMode);var CI=Cn&&"TextEvent"in window&&!la,X0=Cn&&(!Zd||la&&8<la&&11>=la),Q0=String.fromCharCode(32),J0=!1;function Z0(t,e){switch(t){case"keyup":return RI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function kI(t,e){switch(t){case"compositionend":return ey(e);case"keypress":return e.which!==32?null:(J0=!0,Q0);case"textInput":return t=e.data,t===Q0&&J0?null:t;default:return null}}function LI(t,e){if(Bs)return t==="compositionend"||!Zd&&Z0(t,e)?(t=H0(),vu=Kd=Qn=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X0&&e.locale!=="ko"?null:e.data;default:return null}}var DI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DI[t.type]:e==="textarea"}function ry(t,e,r,n){x0(n),e=Su(e,"onChange"),0<e.length&&(r=new qd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ua=null,ca=null;function OI(t){gy(t,0)}function wu(t){var e=zs(t);if(f0(e))return t}function PI(t,e){if(t==="change")return e}var ny=!1;if(Cn){var eh;if(Cn){var th="oninput"in document;if(!th){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),th=typeof iy.oninput=="function"}eh=th}else eh=!1;ny=eh&&(!document.documentMode||9<document.documentMode)}function sy(){ua&&(ua.detachEvent("onpropertychange",oy),ca=ua=null)}function oy(t){if(t.propertyName==="value"&&wu(ca)){var e=[];if(ry(e,ca,t,kd(t)),t=OI,Ui)t(e);else{Ui=!0;try{Dd(t,e)}finally{Ui=!1,Nd()}}}}function NI(t,e,r){t==="focusin"?(sy(),ua=e,ca=r,ua.attachEvent("onpropertychange",oy)):t==="focusout"&&sy()}function MI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wu(ca)}function FI(t,e){if(t==="click")return wu(e)}function UI(t,e){if(t==="input"||t==="change")return wu(e)}function BI(t,e){return t===e&&(t!==0||1/t==1/e)||t!==t&&e!==e}var qr=typeof Object.is=="function"?Object.is:BI,$I=Object.prototype.hasOwnProperty;function fa(t,e){if(qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!$I.call(e,r[n])||!qr(t[r[n]],e[r[n]]))return!1;return!0}function ay(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ly(t,e){var r=ay(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ay(r)}}function uy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cy(){for(var t=window,e=au();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=au(t.document)}return e}function rh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var VI=Cn&&"documentMode"in document&&11>=document.documentMode,$s=null,nh=null,da=null,ih=!1;function fy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ih||$s==null||$s!==au(n)||(n=$s,"selectionStart"in n&&rh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),da&&fa(da,n)||(da=n,n=Su(nh,"onSelect"),0<n.length&&(e=new qd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=$s)))}Gd("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Gd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Gd(YA,2);for(var dy="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),sh=0;sh<dy.length;sh++)jd.set(dy[sh],0);ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function py(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,zA(n,e,void 0,t),t.currentTarget=null}function gy(t,e){e=(e&4)!=0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==s&&i.isPropagationStopped())break e;py(i,l,u),s=d}else for(a=0;a<n.length;a++){if(l=n[a],d=l.instance,u=l.currentTarget,l=l.listener,d!==s&&i.isPropagationStopped())break e;py(i,l,u),s=d}}}if(cu)throw t=Fd,cu=!1,Fd=null,t}function vt(t,e){var r=Ay(e),n=t+"__bubble";r.has(n)||(Ey(e,t,2,!1),r.add(n))}var my="_reactListening"+Math.random().toString(36).slice(2);function vy(t){t[my]||(t[my]=!0,i0.forEach(function(e){hy.has(e)||yy(e,!1,t,null),yy(e,!0,t,null)}))}function yy(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(t==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),n!==null&&!e&&hy.has(t)){if(t!=="scroll")return;i|=2,s=n}var a=Ay(s),l=t+"__"+(e?"capture":"bubble");a.has(l)||(e&&(i|=4),Ey(s,t,i,e),a.add(l))}function Ey(t,e,r,n){var i=jd.get(e);switch(i===void 0?2:i){case 0:i=iI;break;case 1:i=sI;break;default:i=Hd}r=i.bind(null,e,r,t),i=void 0,!Md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Ty(t,e,r,n,i){var s=n;if((e&1)==0&&(e&2)==0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;l!==null;){if(a=$i(l),a===null)return;if(d=a.tag,d===5||d===6){n=s=a;continue e}l=l.parentNode}}n=n.return}$A(function(){var u=s,h=kd(r),E=[];e:{var m=G0.get(t);if(m!==void 0){var w=qd,C=t;switch(t){case"keypress":if(yu(r)===0)break e;case"keydown":case"keyup":w=TI;break;case"focusin":C="focus",w=Qd;break;case"focusout":C="blur",w=Qd;break;case"beforeblur":case"afterblur":w=Qd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=K0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=lI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=xI;break;case B0:case $0:case V0:w=fI;break;case j0:w=bI;break;case"scroll":w=oI;break;case"wheel":w=II;break;case"copy":case"cut":case"paste":w=hI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Y0}var R=(e&4)!=0,S=!R&&t==="scroll",x=R?m!==null?m+"Capture":null:m;R=[];for(var _=u,D;_!==null;){D=_;var k=D.stateNode;if(D.tag===5&&k!==null&&(D=k,x!==null&&(k=Qo(_,x),k!=null&&R.push(pa(_,k,D)))),S)break;_=_.return}0<R.length&&(m=new w(m,C,null,r,h),E.push({event:m,listeners:R}))}}if((e&7)==0){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&(e&16)==0&&(C=r.relatedTarget||r.fromElement)&&($i(C)||C[Gs]))break e;if((w||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,w?(C=r.relatedTarget||r.toElement,w=u,C=C?$i(C):null,C!==null&&(S=Bi(C),C!==S||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=u),w!==C)){if(R=K0,k="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=Y0,k="onPointerLeave",x="onPointerEnter",_="pointer"),S=w==null?m:zs(w),D=C==null?m:zs(C),m=new R(k,_+"leave",w,r,h),m.target=S,m.relatedTarget=D,k=null,$i(h)===u&&(R=new R(x,_+"enter",C,r,h),R.target=D,R.relatedTarget=S,k=R),S=k,w&&C)t:{for(R=w,x=C,_=0,D=R;D;D=Vs(D))_++;for(D=0,k=x;k;k=Vs(k))D++;for(;0<_-D;)R=Vs(R),_--;for(;0<D-_;)x=Vs(x),D--;for(;_--;){if(R===x||x!==null&&R===x.alternate)break t;R=Vs(R),x=Vs(x)}R=null}else R=null;w!==null&&wy(E,m,w,R,!1),C!==null&&S!==null&&wy(E,S,C,R,!0)}}e:{if(m=u?zs(u):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var M=PI;else if(ty(m))if(ny)M=UI;else{M=MI;var B=NI}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=FI);if(M&&(M=M(t,u))){ry(E,M,r,h);break e}B&&B(t,m,u),t==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&xd(m,"number",m.value)}switch(B=u?zs(u):window,t){case"focusin":(ty(B)||B.contentEditable==="true")&&($s=B,nh=u,da=null);break;case"focusout":da=nh=$s=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,fy(E,r,h);break;case"selectionchange":if(VI)break;case"keydown":case"keyup":fy(E,r,h)}var z;if(Zd)e:{switch(t){case"compositionstart":var q="onCompositionStart";break e;case"compositionend":q="onCompositionEnd";break e;case"compositionupdate":q="onCompositionUpdate";break e}q=void 0}else Bs?Z0(t,r)&&(q="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(q="onCompositionStart");q&&(X0&&r.locale!=="ko"&&(Bs||q!=="onCompositionStart"?q==="onCompositionEnd"&&Bs&&(z=H0()):(Qn=h,Kd="value"in Qn?Qn.value:Qn.textContent,Bs=!0)),B=Su(u,q),0<B.length&&(q=new q0(q,t,null,r,h),E.push({event:q,listeners:B}),z?q.data=z:(z=ey(r),z!==null&&(q.data=z)))),(z=CI?kI(t,r):LI(t,r))&&(u=Su(u,"onBeforeInput"),0<u.length&&(h=new q0("onBeforeInput","beforeinput",null,r,h),E.push({event:h,listeners:u}),h.data=z))}gy(E,e)})}function pa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Su(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qo(t,r),s!=null&&n.unshift(pa(t,s,i)),s=Qo(t,e),s!=null&&n.push(pa(t,s,i))),t=t.return}return n}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wy(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var l=r,d=l.alternate,u=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&u!==null&&(l=u,i?(d=Qo(r,s),d!=null&&a.unshift(pa(r,d,l))):i||(d=Qo(r,s),d!=null&&a.push(pa(r,d,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}function xu(){}var oh=null,ah=null;function Sy(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function lh(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xy=typeof setTimeout=="function"?setTimeout:void 0,jI=typeof clearTimeout=="function"?clearTimeout:void 0;function uh(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function _y(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ch=0;function GI(t){return{$$typeof:md,toString:t,valueOf:t}}var _u=Math.random().toString(36).slice(2),Jn="__reactFiber$"+_u,bu="__reactProps$"+_u,Gs="__reactContainer$"+_u,by="__reactEvents$"+_u;function $i(t){var e=t[Jn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Gs]||r[Jn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=_y(t);t!==null;){if(r=t[Jn])return r;t=_y(t)}return e}t=r,r=t.parentNode}return null}function ga(t){return t=t[Jn]||t[Gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function Au(t){return t[bu]||null}function Ay(t){var e=t[by];return e===void 0&&(e=t[by]=new Set),e}var fh=[],Hs=-1;function Zn(t){return{current:t}}function yt(t){0>Hs||(t.current=fh[Hs],fh[Hs]=null,Hs--)}function bt(t,e){Hs++,fh[Hs]=t.current,t.current=e}var ei={},lr=Zn(ei),Ar=Zn(!1),Vi=ei;function Ws(t,e){var r=t.type.contextTypes;if(!r)return ei;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ir(t){return t=t.childContextTypes,t!=null}function Iu(){yt(Ar),yt(lr)}function Iy(t,e,r){if(lr.current!==ei)throw Error(pe(168));bt(lr,e),bt(Ar,r)}function Ry(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(pe(108,Ls(e)||"Unknown",i));return Tt({},r,n)}function Ru(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,Vi=lr.current,bt(lr,t),bt(Ar,Ar.current),!0}function Cy(t,e,r){var n=t.stateNode;if(!n)throw Error(pe(169));r?(t=Ry(t,e,Vi),n.__reactInternalMemoizedMergedChildContext=t,yt(Ar),yt(lr),bt(lr,t)):yt(Ar),bt(Ar,r)}var dh=null,ji=null,zI=Vt.unstable_runWithPriority,hh=Vt.unstable_scheduleCallback,ph=Vt.unstable_cancelCallback,HI=Vt.unstable_shouldYield,ky=Vt.unstable_requestPaint,gh=Vt.unstable_now,WI=Vt.unstable_getCurrentPriorityLevel,Cu=Vt.unstable_ImmediatePriority,Ly=Vt.unstable_UserBlockingPriority,Dy=Vt.unstable_NormalPriority,Oy=Vt.unstable_LowPriority,Py=Vt.unstable_IdlePriority,mh={},KI=ky!==void 0?ky:function(){},kn=null,ku=null,vh=!1,Ny=gh(),ur=1e4>Ny?gh:function(){return gh()-Ny};function Ks(){switch(WI()){case Cu:return 99;case Ly:return 98;case Dy:return 97;case Oy:return 96;case Py:return 95;default:throw Error(pe(332))}}function My(t){switch(t){case 99:return Cu;case 98:return Ly;case 97:return Dy;case 96:return Oy;case 95:return Py;default:throw Error(pe(332))}}function Gi(t,e){return t=My(t),zI(t,e)}function ma(t,e,r){return t=My(t),hh(t,e,r)}function pn(){if(ku!==null){var t=ku;ku=null,ph(t)}Fy()}function Fy(){if(!vh&&kn!==null){vh=!0;var t=0;try{var e=kn;Gi(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),kn=null}catch(r){throw kn!==null&&(kn=kn.slice(t+1)),hh(Cu,pn),r}finally{vh=!1}}}var qI=Mi.ReactCurrentBatchConfig;function un(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Lu=Zn(null),Du=null,qs=null,Ou=null;function yh(){Ou=qs=Du=null}function Eh(t){var e=Lu.current;yt(Lu),t.type._context._currentValue=e}function Uy(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Ys(t,e){Du=t,Ou=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!=0&&(cn=!0),t.firstContext=null)}function Yr(t,e){if(Ou!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Ou=t,e=1073741823),e={context:t,observedBits:e,next:null},qs===null){if(Du===null)throw Error(pe(308));qs=e,Du.dependencies={lanes:0,firstContext:e,responders:null}}else qs=qs.next=e;return t._currentValue}var ti=!1;function Th(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function By(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function $y(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function va(t,e,r,n){var i=t.updateQueue;ti=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var d=l,u=d.next;d.next=null,a===null?s=u:a.next=u,a=d;var h=t.alternate;if(h!==null){h=h.updateQueue;var E=h.lastBaseUpdate;E!==a&&(E===null?h.firstBaseUpdate=u:E.next=u,h.lastBaseUpdate=d)}}if(s!==null){E=i.baseState,a=0,h=u=d=null;do{l=s.lane;var m=s.eventTime;if((n&l)===l){h!==null&&(h=h.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var w=t,C=s;switch(l=e,m=r,C.tag){case 1:if(w=C.payload,typeof w=="function"){E=w.call(m,E,l);break e}E=w;break e;case 3:w.flags=w.flags&-4097|64;case 0:if(w=C.payload,l=typeof w=="function"?w.call(m,E,l):w,l==null)break e;E=Tt({},E,l);break e;case 2:ti=!0}}s.callback!==null&&(t.flags|=32,l=i.effects,l===null?i.effects=[s]:l.push(s))}else m={eventTime:m,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},h===null?(u=h=m,d=E):h=h.next=m,a|=l;if(s=s.next,s===null){if(l=i.shared.pending,l===null)break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);h===null&&(d=E),i.baseState=d,i.firstBaseUpdate=u,i.lastBaseUpdate=h,Ca|=a,t.lanes=a,t.memoizedState=E}}function Vy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(pe(191,i));i.call(n)}}}var jy=new tu.Component().refs;function Pu(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Tt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Nu={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mr(),i=oi(t),s=ri(n,i);s.payload=e,r!=null&&(s.callback=r),ni(t,s),ai(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mr(),i=oi(t),s=ri(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),ni(t,s),ai(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mr(),n=oi(t),i=ri(r,n);i.tag=2,e!=null&&(i.callback=e),ni(t,i),ai(t,n,r)}};function Gy(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!fa(r,n)||!fa(i,s):!0}function zy(t,e,r){var n=!1,i=ei,s=e.contextType;return typeof s=="object"&&s!==null?s=Yr(s):(i=Ir(e)?Vi:lr.current,n=e.contextTypes,s=(n=n!=null)?Ws(t,i):ei),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Nu.enqueueReplaceState(e,e.state,null)}function wh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=jy,Th(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yr(s):(s=Ir(e)?Vi:lr.current,i.context=Ws(t,s)),va(t,r,i,n),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Pu(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nu.enqueueReplaceState(i,i.state,null),va(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var Mu=Array.isArray;function ya(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pe(309));var n=r.stateNode}if(!n)throw Error(pe(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=n.refs;a===jy&&(a=n.refs={}),s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(pe(284));if(!r._owner)throw Error(pe(290,t))}return t}function Fu(t,e){if(t.type!=="textarea")throw Error(pe(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function Wy(t){function e(S,x){if(t){var _=S.lastEffect;_!==null?(_.nextEffect=x,S.lastEffect=x):S.firstEffect=S.lastEffect=x,x.nextEffect=null,x.flags=8}}function r(S,x){if(!t)return null;for(;x!==null;)e(S,x),x=x.sibling;return null}function n(S,x){for(S=new Map;x!==null;)x.key!==null?S.set(x.key,x):S.set(x.index,x),x=x.sibling;return S}function i(S,x){return S=ci(S,x),S.index=0,S.sibling=null,S}function s(S,x,_){return S.index=_,t?(_=S.alternate,_!==null?(_=_.index,_<x?(S.flags=2,x):_):(S.flags=2,x)):x}function a(S){return t&&S.alternate===null&&(S.flags=2),S}function l(S,x,_,D){return x===null||x.tag!==6?(x=np(_,S.mode,D),x.return=S,x):(x=i(x,_),x.return=S,x)}function d(S,x,_,D){return x!==null&&x.elementType===_.type?(D=i(x,_.props),D.ref=ya(S,x,_),D.return=S,D):(D=tc(_.type,_.key,_.props,null,S.mode,D),D.ref=ya(S,x,_),D.return=S,D)}function u(S,x,_,D){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=ip(_,S.mode,D),x.return=S,x):(x=i(x,_.children||[]),x.return=S,x)}function h(S,x,_,D,k){return x===null||x.tag!==7?(x=no(_,S.mode,D,k),x.return=S,x):(x=i(x,_),x.return=S,x)}function E(S,x,_){if(typeof x=="string"||typeof x=="number")return x=np(""+x,S.mode,_),x.return=S,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zo:return _=tc(x.type,x.key,x.props,null,S.mode,_),_.ref=ya(S,null,x),_.return=S,_;case Fi:return x=ip(x,S.mode,_),x.return=S,x}if(Mu(x)||Ko(x))return x=no(x,S.mode,_,null),x.return=S,x;Fu(S,x)}return null}function m(S,x,_,D){var k=x!==null?x.key:null;if(typeof _=="string"||typeof _=="number")return k!==null?null:l(S,x,""+_,D);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zo:return _.key===k?_.type===Hn?h(S,x,_.props.children,D,k):d(S,x,_,D):null;case Fi:return _.key===k?u(S,x,_,D):null}if(Mu(_)||Ko(_))return k!==null?null:h(S,x,_,D,null);Fu(S,_)}return null}function w(S,x,_,D,k){if(typeof D=="string"||typeof D=="number")return S=S.get(_)||null,l(x,S,""+D,k);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case zo:return S=S.get(D.key===null?_:D.key)||null,D.type===Hn?h(x,S,D.props.children,k,D.key):d(x,S,D,k);case Fi:return S=S.get(D.key===null?_:D.key)||null,u(x,S,D,k)}if(Mu(D)||Ko(D))return S=S.get(_)||null,h(x,S,D,k,null);Fu(x,D)}return null}function C(S,x,_,D){for(var k=null,M=null,B=x,z=x=0,q=null;B!==null&&z<_.length;z++){B.index>z?(q=B,B=null):q=B.sibling;var H=m(S,B,_[z],D);if(H===null){B===null&&(B=q);break}t&&B&&H.alternate===null&&e(S,B),x=s(H,x,z),M===null?k=H:M.sibling=H,M=H,B=q}if(z===_.length)return r(S,B),k;if(B===null){for(;z<_.length;z++)B=E(S,_[z],D),B!==null&&(x=s(B,x,z),M===null?k=B:M.sibling=B,M=B);return k}for(B=n(S,B);z<_.length;z++)q=w(B,S,z,_[z],D),q!==null&&(t&&q.alternate!==null&&B.delete(q.key===null?z:q.key),x=s(q,x,z),M===null?k=q:M.sibling=q,M=q);return t&&B.forEach(function(Y){return e(S,Y)}),k}function R(S,x,_,D){var k=Ko(_);if(typeof k!="function")throw Error(pe(150));if(_=k.call(_),_==null)throw Error(pe(151));for(var M=k=null,B=x,z=x=0,q=null,H=_.next();B!==null&&!H.done;z++,H=_.next()){B.index>z?(q=B,B=null):q=B.sibling;var Y=m(S,B,H.value,D);if(Y===null){B===null&&(B=q);break}t&&B&&Y.alternate===null&&e(S,B),x=s(Y,x,z),M===null?k=Y:M.sibling=Y,M=Y,B=q}if(H.done)return r(S,B),k;if(B===null){for(;!H.done;z++,H=_.next())H=E(S,H.value,D),H!==null&&(x=s(H,x,z),M===null?k=H:M.sibling=H,M=H);return k}for(B=n(S,B);!H.done;z++,H=_.next())H=w(B,S,z,H.value,D),H!==null&&(t&&H.alternate!==null&&B.delete(H.key===null?z:H.key),x=s(H,x,z),M===null?k=H:M.sibling=H,M=H);return t&&B.forEach(function(re){return e(S,re)}),k}return function(S,x,_,D){var k=typeof _=="object"&&_!==null&&_.type===Hn&&_.key===null;k&&(_=_.props.children);var M=typeof _=="object"&&_!==null;if(M)switch(_.$$typeof){case zo:e:{for(M=_.key,k=x;k!==null;){if(k.key===M){switch(k.tag){case 7:if(_.type===Hn){r(S,k.sibling),x=i(k,_.props.children),x.return=S,S=x;break e}break;default:if(k.elementType===_.type){r(S,k.sibling),x=i(k,_.props),x.ref=ya(S,k,_),x.return=S,S=x;break e}}r(S,k);break}else e(S,k);k=k.sibling}_.type===Hn?(x=no(_.props.children,S.mode,D,_.key),x.return=S,S=x):(D=tc(_.type,_.key,_.props,null,S.mode,D),D.ref=ya(S,x,_),D.return=S,S=D)}return a(S);case Fi:e:{for(k=_.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){r(S,x.sibling),x=i(x,_.children||[]),x.return=S,S=x;break e}else{r(S,x);break}else e(S,x);x=x.sibling}x=ip(_,S.mode,D),x.return=S,S=x}return a(S)}if(typeof _=="string"||typeof _=="number")return _=""+_,x!==null&&x.tag===6?(r(S,x.sibling),x=i(x,_),x.return=S,S=x):(r(S,x),x=np(_,S.mode,D),x.return=S,S=x),a(S);if(Mu(_))return C(S,x,_,D);if(Ko(_))return R(S,x,_,D);if(M&&Fu(S,_),typeof _=="undefined"&&!k)switch(S.tag){case 1:case 22:case 0:case 11:case 15:throw Error(pe(152,Ls(S.type)||"Component"))}return r(S,x)}}var Uu=Wy(!0),Ky=Wy(!1),Ea={},gn=Zn(Ea),Ta=Zn(Ea),wa=Zn(Ea);function zi(t){if(t===Ea)throw Error(pe(174));return t}function Sh(t,e){switch(bt(wa,e),bt(Ta,t),bt(gn,Ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}yt(gn),bt(gn,e)}function Xs(){yt(gn),yt(Ta),yt(wa)}function qy(t){zi(wa.current);var e=zi(gn.current),r=Id(e,t.type);e!==r&&(bt(Ta,t),bt(gn,r))}function xh(t){Ta.current===t&&(yt(gn),yt(Ta))}var At=Zn(0);function Bu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ln=null,ii=null,mn=!1;function Yy(t,e){var r=Jr(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function Xy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function _h(t){if(mn){var e=ii;if(e){var r=e;if(!Xy(t,e)){if(e=js(r.nextSibling),!e||!Xy(t,e)){t.flags=t.flags&-1025|2,mn=!1,Ln=t;return}Yy(Ln,r)}Ln=t,ii=js(e.firstChild)}else t.flags=t.flags&-1025|2,mn=!1,Ln=t}}function Qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function $u(t){if(t!==Ln)return!1;if(!mn)return Qy(t),mn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!lh(e,t.memoizedProps))for(e=ii;e;)Yy(t,e),e=js(e.nextSibling);if(Qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ii=js(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ii=null}}else ii=Ln?js(t.stateNode.nextSibling):null;return!0}function bh(){ii=Ln=null,mn=!1}var Qs=[];function Ah(){for(var t=0;t<Qs.length;t++)Qs[t]._workInProgressVersionPrimary=null;Qs.length=0}var Sa=Mi.ReactCurrentDispatcher,Xr=Mi.ReactCurrentBatchConfig,xa=0,It=null,cr=null,Qt=null,Vu=!1,_a=!1;function Rr(){throw Error(pe(321))}function Ih(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!qr(t[r],e[r]))return!1;return!0}function Rh(t,e,r,n,i,s){if(xa=s,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sa.current=t===null||t.memoizedState===null?XI:QI,t=r(n,i),_a){s=0;do{if(_a=!1,!(25>s))throw Error(pe(301));s+=1,Qt=cr=null,e.updateQueue=null,Sa.current=JI,t=r(n,i)}while(_a)}if(Sa.current=Hu,e=cr!==null&&cr.next!==null,xa=0,Qt=cr=It=null,Vu=!1,e)throw Error(pe(300));return t}function Hi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?It.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function Wi(){if(cr===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=cr.next;var e=Qt===null?It.memoizedState:Qt.next;if(e!==null)Qt=e,cr=t;else{if(t===null)throw Error(pe(310));cr=t,t={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},Qt===null?It.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function vn(t,e){return typeof e=="function"?e(t):e}function ba(t){var e=Wi(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=cr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var l=a=s=null,d=i;do{var u=d.lane;if((xa&u)===u)l!==null&&(l=l.next={lane:0,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),n=d.eagerReducer===t?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};l===null?(a=l=h,s=n):l=l.next=h,It.lanes|=u,Ca|=u}d=d.next}while(d!==null&&d!==i);l===null?s=n:l.next=a,qr(n,e.memoizedState)||(cn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=l,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Aa(t){var e=Wi(),r=e.queue;if(r===null)throw Error(pe(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);qr(s,e.memoizedState)||(cn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Jy(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(xa&t)===t)&&(e._workInProgressVersionPrimary=n,Qs.push(e))),t)return r(e._source);throw Qs.push(e),Error(pe(350))}function Zy(t,e,r,n){var i=yr;if(i===null)throw Error(pe(349));var s=e._getVersion,a=s(e._source),l=Sa.current,d=l.useState(function(){return Jy(i,e,r)}),u=d[1],h=d[0];d=Qt;var E=t.memoizedState,m=E.refs,w=m.getSnapshot,C=E.source;E=E.subscribe;var R=It;return t.memoizedState={refs:m,source:e,subscribe:n},l.useEffect(function(){m.getSnapshot=r,m.setSnapshot=u;var S=s(e._source);if(!qr(a,S)){S=r(e._source),qr(h,S)||(u(S),S=oi(R),i.mutableReadLanes|=S&i.pendingLanes),S=i.mutableReadLanes,i.entangledLanes|=S;for(var x=i.entanglements,_=S;0<_;){var D=31-Xn(_),k=1<<D;x[D]|=S,_&=~k}}},[r,e,n]),l.useEffect(function(){return n(e._source,function(){var S=m.getSnapshot,x=m.setSnapshot;try{x(S(e._source));var _=oi(R);i.mutableReadLanes|=_&i.pendingLanes}catch(D){x(function(){throw D})}})},[e,n]),qr(w,r)&&qr(C,e)&&qr(E,n)||(t={pending:null,dispatch:null,lastRenderedReducer:vn,lastRenderedState:h},t.dispatch=u=Dh.bind(null,It,t),d.queue=t,d.baseQueue=null,h=Jy(i,e,r),d.memoizedState=d.baseState=h),h}function eE(t,e,r){var n=Wi();return Zy(n,t,e,r)}function Ia(t){var e=Hi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:vn,lastRenderedState:t},t=t.dispatch=Dh.bind(null,It,t),[e.memoizedState,t]}function ju(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=It.updateQueue,e===null?(e={lastEffect:null},It.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function tE(t){var e=Hi();return t={current:t},e.memoizedState=t}function Gu(){return Wi().memoizedState}function Ch(t,e,r,n){var i=Hi();It.flags|=t,i.memoizedState=ju(1|e,r,void 0,n===void 0?null:n)}function kh(t,e,r,n){var i=Wi();n=n===void 0?null:n;var s=void 0;if(cr!==null){var a=cr.memoizedState;if(s=a.destroy,n!==null&&Ih(n,a.deps)){ju(e,r,s,n);return}}It.flags|=t,i.memoizedState=ju(1|e,r,s,n)}function rE(t,e){return Ch(516,4,t,e)}function zu(t,e){return kh(516,4,t,e)}function nE(t,e){return kh(4,2,t,e)}function iE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sE(t,e,r){return r=r!=null?r.concat([t]):null,kh(4,2,iE.bind(null,e,t),r)}function Lh(){}function oE(t,e){var r=Wi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ih(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function aE(t,e){var r=Wi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ih(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function YI(t,e){var r=Ks();Gi(98>r?98:r,function(){t(!0)}),Gi(97<r?97:r,function(){var n=Xr.transition;Xr.transition=1;try{t(!1),e()}finally{Xr.transition=n}})}function Dh(t,e,r){var n=Mr(),i=oi(t),s={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s,a=t.alternate,t===It||a!==null&&a===It)_a=Vu=!0;else{if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,d=a(l,r);if(s.eagerReducer=a,s.eagerState=d,qr(d,l))return}catch{}finally{}ai(t,i,n)}}var Hu={readContext:Yr,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useOpaqueIdentifier:Rr,unstable_isNewReconciler:!1},XI={readContext:Yr,useCallback:function(t,e){return Hi().memoizedState=[t,e===void 0?null:e],t},useContext:Yr,useEffect:rE,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ch(4,2,iE.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ch(4,2,t,e)},useMemo:function(t,e){var r=Hi();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Hi();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Dh.bind(null,It,t),[n.memoizedState,t]},useRef:tE,useState:Ia,useDebugValue:Lh,useDeferredValue:function(t){var e=Ia(t),r=e[0],n=e[1];return rE(function(){var i=Xr.transition;Xr.transition=1;try{n(t)}finally{Xr.transition=i}},[t]),r},useTransition:function(){var t=Ia(!1),e=t[0];return t=YI.bind(null,t[1]),tE(t),[t,e]},useMutableSource:function(t,e,r){var n=Hi();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},Zy(n,t,e,r)},useOpaqueIdentifier:function(){if(mn){var t=!1,e=GI(function(){throw t||(t=!0,r("r:"+(ch++).toString(36))),Error(pe(355))}),r=Ia(e)[1];return(It.mode&2)==0&&(It.flags|=516,ju(5,function(){r("r:"+(ch++).toString(36))},void 0,null)),e}return e="r:"+(ch++).toString(36),Ia(e),e},unstable_isNewReconciler:!1},QI={readContext:Yr,useCallback:oE,useContext:Yr,useEffect:zu,useImperativeHandle:sE,useLayoutEffect:nE,useMemo:aE,useReducer:ba,useRef:Gu,useState:function(){return ba(vn)},useDebugValue:Lh,useDeferredValue:function(t){var e=ba(vn),r=e[0],n=e[1];return zu(function(){var i=Xr.transition;Xr.transition=1;try{n(t)}finally{Xr.transition=i}},[t]),r},useTransition:function(){var t=ba(vn)[0];return[Gu().current,t]},useMutableSource:eE,useOpaqueIdentifier:function(){return ba(vn)[0]},unstable_isNewReconciler:!1},JI={readContext:Yr,useCallback:oE,useContext:Yr,useEffect:zu,useImperativeHandle:sE,useLayoutEffect:nE,useMemo:aE,useReducer:Aa,useRef:Gu,useState:function(){return Aa(vn)},useDebugValue:Lh,useDeferredValue:function(t){var e=Aa(vn),r=e[0],n=e[1];return zu(function(){var i=Xr.transition;Xr.transition=1;try{n(t)}finally{Xr.transition=i}},[t]),r},useTransition:function(){var t=Aa(vn)[0];return[Gu().current,t]},useMutableSource:eE,useOpaqueIdentifier:function(){return Aa(vn)[0]},unstable_isNewReconciler:!1},ZI=Mi.ReactCurrentOwner,cn=!1;function Cr(t,e,r,n){e.child=t===null?Ky(e,null,r,n):Uu(e,t.child,r,n)}function lE(t,e,r,n,i){r=r.render;var s=e.ref;return Ys(e,i),n=Rh(t,e,r,n,s,i),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Dn(t,e,i)):(e.flags|=1,Cr(t,e,n,i),e.child)}function uE(t,e,r,n,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!tp(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,cE(t,e,a,n,i,s)):(t=tc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return a=t.child,(i&s)==0&&(i=a.memoizedProps,r=r.compare,r=r!==null?r:fa,r(i,n)&&t.ref===e.ref)?Dn(t,e,s):(e.flags|=1,t=ci(a,n),t.ref=e.ref,t.return=e,e.child=t)}function cE(t,e,r,n,i,s){if(t!==null&&fa(t.memoizedProps,n)&&t.ref===e.ref)if(cn=!1,(s&i)!=0)(t.flags&16384)!=0&&(cn=!0);else return e.lanes=t.lanes,Dn(t,e,s);return Ph(t,e,r,n,s)}function Oh(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},ec(e,r);else if((r&1073741824)!=0)e.memoizedState={baseLanes:0},ec(e,s!==null?s.baseLanes:r);else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},ec(e,t),null;else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ec(e,n);return Cr(t,e,i,r),e.child}function fE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function Ph(t,e,r,n,i){var s=Ir(r)?Vi:lr.current;return s=Ws(e,s),Ys(e,i),r=Rh(t,e,r,n,s,i),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,Dn(t,e,i)):(e.flags|=1,Cr(t,e,r,i),e.child)}function dE(t,e,r,n,i){if(Ir(r)){var s=!0;Ru(e)}else s=!1;if(Ys(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),zy(e,r,n),wh(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var d=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Yr(u):(u=Ir(r)?Vi:lr.current,u=Ws(e,u));var h=r.getDerivedStateFromProps,E=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";E||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||d!==u)&&Hy(e,a,n,u),ti=!1;var m=e.memoizedState;a.state=m,va(e,n,a,i),d=e.memoizedState,l!==n||m!==d||Ar.current||ti?(typeof h=="function"&&(Pu(e,r,h,n),d=e.memoizedState),(l=ti||Gy(e,r,l,n,m,d,u))?(E||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4)):(typeof a.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=d),a.props=n,a.state=d,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{a=e.stateNode,By(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:un(e.type,l),a.props=u,E=e.pendingProps,m=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=Yr(d):(d=Ir(r)?Vi:lr.current,d=Ws(e,d));var w=r.getDerivedStateFromProps;(h=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==E||m!==d)&&Hy(e,a,n,d),ti=!1,m=e.memoizedState,a.state=m,va(e,n,a,i);var C=e.memoizedState;l!==E||m!==C||Ar.current||ti?(typeof w=="function"&&(Pu(e,r,w,n),C=e.memoizedState),(u=ti||Gy(e,r,u,n,m,C,d))?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,C,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,C,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=C),a.props=n,a.state=C,a.context=d,n=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=256),n=!1)}return Nh(t,e,r,n,s,i)}function Nh(t,e,r,n,i,s){fE(t,e);var a=(e.flags&64)!=0;if(!n&&!a)return i&&Cy(e,r,!1),Dn(t,e,s);n=e.stateNode,ZI.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Uu(e,t.child,null,s),e.child=Uu(e,null,l,s)):Cr(t,e,l,s),e.memoizedState=n.state,i&&Cy(e,r,!0),e.child}function hE(t){var e=t.stateNode;e.pendingContext?Iy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iy(t,e.context,!1),Sh(t,e.containerInfo)}var Wu={dehydrated:null,retryLane:0};function pE(t,e,r){var n=e.pendingProps,i=At.current,s=!1,a;return(a=(e.flags&64)!=0)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!=0),a?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),bt(At,i&1),t===null?(n.fallback!==void 0&&_h(e),t=n.children,i=n.fallback,s?(t=gE(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Wu,t):typeof n.unstable_expectedLoadTime=="number"?(t=gE(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Wu,e.lanes=33554432,t):(r=rp({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?s?(n=vE(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Wu,n):(r=mE(t,e,n.children,r),e.memoizedState=null,r):s?(n=vE(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Wu,n):(r=mE(t,e,n.children,r),e.memoizedState=null,r)}function gE(t,e,r,n){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)==0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=rp(e,i,0,null),r=no(r,i,n,null),s.return=t,r.return=t,s.sibling=r,t.child=s,r}function mE(t,e,r,n){var i=t.child;return t=i.sibling,r=ci(i,{mode:"visible",children:r}),(e.mode&2)==0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function vE(t,e,r,n,i){var s=e.mode,a=t.child;t=a.sibling;var l={mode:"hidden",children:r};return(s&2)==0&&e.child!==a?(r=e.child,r.childLanes=0,r.pendingProps=l,a=r.lastEffect,a!==null?(e.firstEffect=r.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):r=ci(a,l),t!==null?n=ci(t,n):(n=no(n,s,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function yE(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uy(t.return,e)}function Mh(t,e,r,n,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i,a.lastEffect=s)}function EE(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Cr(t,e,n.children,r),n=At.current,(n&2)!=0)n=n&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!=0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yE(t,r);else if(t.tag===19)yE(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(bt(At,n),(e.mode&2)==0)e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Bu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Mh(e,!1,i,r,s,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Bu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Mh(e,!0,r,null,s,e.lastEffect);break;case"together":Mh(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Dn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ca|=e.lanes,(r&e.childLanes)!=0){if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,r=ci(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ci(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var TE,Fh,wE,SE;TE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fh=function(){};wE=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,zi(gn.current);var s=null;switch(r){case"input":i=wd(t,i),n=wd(t,n),s=[];break;case"option":i=_d(t,i),n=_d(t,n),s=[];break;case"select":i=Tt({},i,{value:void 0}),n=Tt({},n,{value:void 0}),s=[];break;case"textarea":i=bd(t,i),n=bd(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=xu)}Rd(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Go.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var d=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&l[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(s||(s=[]),s.push(u,r)),r=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(s=s||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Go.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&vt("scroll",t),s||l===d||(s=[])):typeof d=="object"&&d!==null&&d.$$typeof===md?d.toString():(s=s||[]).push(u,d))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};SE=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ra(t,e){if(!mn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function eR(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ir(e.type)&&Iu(),null;case 3:return Xs(),yt(Ar),yt(lr),Ah(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($u(e)?e.flags|=4:n.hydrate||(e.flags|=256)),Fh(e),null;case 5:xh(e);var i=zi(wa.current);if(r=e.type,t!==null&&e.stateNode!=null)wE(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return null}if(t=zi(gn.current),$u(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Jn]=e,n[bu]=s,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(t=0;t<ha.length;t++)vt(ha[t],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":d0(n,s),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},vt("invalid",n);break;case"textarea":g0(n,s),vt("invalid",n)}Rd(r,s),t=null;for(var a in s)s.hasOwnProperty(a)&&(i=s[a],a==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Go.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&vt("scroll",n));switch(r){case"input":ou(n),p0(n,s,!0);break;case"textarea":ou(n),v0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=xu)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(a=i.nodeType===9?i:i.ownerDocument,t===Ad.html&&(t=y0(r)),t===Ad.html?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Jn]=e,t[bu]=n,TE(t,e,!1,!1),e.stateNode=t,a=Cd(r,n),r){case"dialog":vt("cancel",t),vt("close",t),i=n;break;case"iframe":case"object":case"embed":vt("load",t),i=n;break;case"video":case"audio":for(i=0;i<ha.length;i++)vt(ha[i],t);i=n;break;case"source":vt("error",t),i=n;break;case"img":case"image":case"link":vt("error",t),vt("load",t),i=n;break;case"details":vt("toggle",t),i=n;break;case"input":d0(t,n),i=wd(t,n),vt("invalid",t);break;case"option":i=_d(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Tt({},n,{value:void 0}),vt("invalid",t);break;case"textarea":g0(t,n),i=bd(t,n),vt("invalid",t);break;default:i=n}Rd(r,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];s==="style"?w0(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&E0(t,d)):s==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&Yo(t,d):typeof d=="number"&&Yo(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Go.hasOwnProperty(s)?d!=null&&s==="onScroll"&&vt("scroll",t):d!=null&&cd(t,s,d,a))}switch(r){case"input":ou(t),p0(t,n,!1);break;case"textarea":ou(t),v0(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Wn(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ds(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ds(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xu)}Sy(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)SE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));r=zi(wa.current),zi(gn.current),$u(e)?(n=e.stateNode,r=e.memoizedProps,n[Jn]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jn]=e,e.stateNode=n)}return null;case 13:return yt(At),n=e.memoizedState,(e.flags&64)!=0?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&$u(e):r=t.memoizedState!==null,n&&!r&&(e.mode&2)!=0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(At.current&1)!=0?Jt===0&&(Jt=3):((Jt===0||Jt===3)&&(Jt=4),yr===null||(Ca&134217727)==0&&(Zs&134217727)==0||to(yr,fr))),(n||r)&&(e.flags|=4),null);case 4:return Xs(),Fh(e),t===null&&vy(e.stateNode.containerInfo),null;case 10:return Eh(e),null;case 17:return Ir(e.type)&&Iu(),null;case 19:if(yt(At),n=e.memoizedState,n===null)return null;if(s=(e.flags&64)!=0,a=n.rendering,a===null)if(s)Ra(n,!1);else{if(Jt!==0||t!==null&&(t.flags&64)!=0)for(t=e.child;t!==null;){if(a=Bu(t),a!==null){for(e.flags|=64,Ra(n,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return bt(At,At.current&1|2),e.child}t=t.sibling}n.tail!==null&&ur()>qh&&(e.flags|=64,s=!0,Ra(n,!1),e.lanes=33554432)}else{if(!s)if(t=Bu(a),t!==null){if(e.flags|=64,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ra(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!mn)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*ur()-n.renderingStartTime>qh&&r!==1073741824&&(e.flags|=64,s=!0,Ra(n,!1),e.lanes=33554432);n.isBackwards?(a.sibling=e.child,e.child=a):(r=n.last,r!==null?r.sibling=a:e.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=ur(),r.sibling=null,e=At.current,bt(At,s?e&1|2:e&1),r):null;case 23:case 24:return ep(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(pe(156,e.tag))}function tR(t){switch(t.tag){case 1:Ir(t.type)&&Iu();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(Xs(),yt(Ar),yt(lr),Ah(),e=t.flags,(e&64)!=0)throw Error(pe(285));return t.flags=e&-4097|64,t;case 5:return xh(t),null;case 13:return yt(At),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return yt(At),null;case 4:return Xs(),null;case 10:return Eh(t),null;case 23:case 24:return ep(),null;default:return null}}function Uh(t,e){try{var r="",n=e;do r+=NA(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function Bh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rR=typeof WeakMap=="function"?WeakMap:Map;function xE(t,e,r){r=ri(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yu||(Yu=!0,Yh=n),Bh(t,e)},r}function _E(t,e,r){r=ri(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return Bh(t,e),n(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(yn===null?yn=new Set([this]):yn.add(this),Bh(t,e));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}var nR=typeof WeakSet=="function"?WeakSet:Set;function bE(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){ui(t,r)}else e.current=null}function iR(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:un(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&uh(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(pe(163))}function sR(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)==3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,(i&4)!=0&&(i&1)!=0&&($E(r,t),hR(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:un(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&Vy(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}Vy(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&Sy(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&F0(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(pe(163))}function AE(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=T0("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function IE(t,e){if(ji&&typeof ji.onCommitFiberUnmount=="function")try{ji.onCommitFiberUnmount(dh,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if((n&4)!=0)$E(e,r);else{n=e;try{i()}catch(s){ui(n,s)}}r=r.next}while(r!==t)}break;case 1:if(bE(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){ui(e,s)}break;case 5:bE(e);break;case 4:LE(t,e)}}function RE(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function CE(t){return t.tag===5||t.tag===3||t.tag===4}function kE(t){e:{for(var e=t.return;e!==null;){if(CE(e))break e;e=e.return}throw Error(pe(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(pe(161))}r.flags&16&&(Yo(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||CE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?$h(t,r,e):Vh(t,r,e)}function $h(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=xu));else if(n!==4&&(t=t.child,t!==null))for($h(t,e,r),t=t.sibling;t!==null;)$h(t,e,r),t=t.sibling}function Vh(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Vh(t,e,r),t=t.sibling;t!==null;)Vh(t,e,r),t=t.sibling}function LE(t,e){for(var r=e,n=!1,i,s;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(pe(160));switch(i=n.stateNode,n.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=t,l=r,d=l;;)if(IE(a,d),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s?(a=i,l=r.stateNode,a.nodeType===8?a.parentNode.removeChild(l):a.removeChild(l)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(IE(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function jh(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)==3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(r[bu]=n,t==="input"&&n.type==="radio"&&n.name!=null&&h0(r,n),Cd(t,i),e=Cd(t,n),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];a==="style"?w0(r,l):a==="dangerouslySetInnerHTML"?E0(r,l):a==="children"?Yo(r,l):cd(r,a,l,e)}switch(t){case"input":Sd(r,n);break;case"textarea":m0(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,s=n.value,s!=null?Ds(r,!!n.multiple,s,!1):t!==!!n.multiple&&(n.defaultValue!=null?Ds(r,!!n.multiple,n.defaultValue,!0):Ds(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(pe(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,F0(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(Kh=ur(),AE(e.child,!0)),DE(e);return;case 19:DE(e);return;case 17:return;case 23:case 24:AE(e,e.memoizedState!==null);return}throw Error(pe(163))}function DE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new nR),e.forEach(function(n){var i=mR.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function oR(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var aR=Math.ceil,Ku=Mi.ReactCurrentDispatcher,Gh=Mi.ReactCurrentOwner,Be=0,yr=null,Ft=null,fr=0,Ki=0,zh=Zn(0),Jt=0,qu=null,Js=0,Ca=0,Zs=0,Hh=0,Wh=null,Kh=0,qh=1/0;function eo(){qh=ur()+500}var Se=null,Yu=!1,Yh=null,yn=null,si=!1,ka=null,La=90,Xh=[],Qh=[],On=null,Da=0,Jh=null,Xu=-1,Pn=0,Qu=0,Oa=null,Ju=!1;function Mr(){return(Be&48)!=0?ur():Xu!==-1?Xu:Xu=ur()}function oi(t){if(t=t.mode,(t&2)==0)return 1;if((t&4)==0)return Ks()===99?1:2;if(Pn===0&&(Pn=Js),qI.transition!==0){Qu!==0&&(Qu=Wh!==null?Wh.pendingLanes:0),t=Pn;var e=4186112&~Qu;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Ks(),(Be&4)!=0&&t===98?t=pu(12,Pn):(t=QA(t),t=pu(t,Pn)),t}function ai(t,e,r){if(50<Da)throw Da=0,Jh=null,Error(pe(185));if(t=Zu(t,e),t===null)return null;gu(t,e,r),t===yr&&(Zs|=e,Jt===4&&to(t,fr));var n=Ks();e===1?(Be&8)!=0&&(Be&48)==0?Zh(t):(Qr(t,r),Be===0&&(eo(),pn())):((Be&4)==0||n!==98&&n!==99||(On===null?On=new Set([t]):On.add(t)),Qr(t,r)),Wh=t}function Zu(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function Qr(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Xn(a),d=1<<l,u=s[l];if(u===-1){if((d&n)==0||(d&i)!=0){u=e,Ms(d);var h=dt;s[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=e&&(t.expiredLanes|=d);a&=~d}if(n=sa(t,t===yr?fr:0),e=dt,n===0)r!==null&&(r!==mh&&ph(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==mh&&ph(r)}e===15?(r=Zh.bind(null,t),kn===null?(kn=[r],ku=hh(Cu,Fy)):kn.push(r),r=mh):e===14?r=ma(99,Zh.bind(null,t)):(r=JA(e),r=ma(r,OE.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function OE(t){if(Xu=-1,Qu=Pn=0,(Be&48)!=0)throw Error(pe(327));var e=t.callbackNode;if(li()&&t.callbackNode!==e)return null;var r=sa(t,t===yr?fr:0);if(r===0)return null;var n=r,i=Be;Be|=16;var s=FE();(yr!==t||fr!==n)&&(eo(),ro(t,n));do try{cR();break}catch(l){ME(t,l)}while(1);if(yh(),Ku.current=s,Be=i,Ft!==null?n=0:(yr=null,fr=0,n=Jt),(Js&Zs)!=0)ro(t,0);else if(n!==0){if(n===2&&(Be|=64,t.hydrate&&(t.hydrate=!1,uh(t.containerInfo)),r=z0(t),r!==0&&(n=Pa(t,r))),n===1)throw e=qu,ro(t,0),to(t,r),Qr(t,ur()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(pe(345));case 2:qi(t);break;case 3:if(to(t,r),(r&62914560)===r&&(n=Kh+500-ur(),10<n)){if(sa(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xy(qi.bind(null,t),n);break}qi(t);break;case 4:if(to(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var a=31-Xn(r);s=1<<a,a=n[a],a>i&&(i=a),r&=~s}if(r=i,r=ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aR(r/1960))-r,10<r){t.timeoutHandle=xy(qi.bind(null,t),r);break}qi(t);break;case 5:qi(t);break;default:throw Error(pe(329))}}return Qr(t,ur()),t.callbackNode===e?OE.bind(null,t):null}function to(t,e){for(e&=~Hh,e&=~Zs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Xn(e),n=1<<r;t[r]=-1,e&=~n}}function Zh(t){if((Be&48)!=0)throw Error(pe(327));if(li(),t===yr&&(t.expiredLanes&fr)!=0){var e=fr,r=Pa(t,e);(Js&Zs)!=0&&(e=sa(t,e),r=Pa(t,e))}else e=sa(t,0),r=Pa(t,e);if(t.tag!==0&&r===2&&(Be|=64,t.hydrate&&(t.hydrate=!1,uh(t.containerInfo)),e=z0(t),e!==0&&(r=Pa(t,e))),r===1)throw r=qu,ro(t,0),to(t,e),Qr(t,ur()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,qi(t),Qr(t,ur()),null}function lR(){if(On!==null){var t=On;On=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,Qr(e,ur())})}pn()}function PE(t,e){var r=Be;Be|=1;try{return t(e)}finally{Be=r,Be===0&&(eo(),pn())}}function NE(t,e){var r=Be;Be&=-2,Be|=8;try{return t(e)}finally{Be=r,Be===0&&(eo(),pn())}}function ec(t,e){bt(zh,Ki),Ki|=e,Js|=e}function ep(){Ki=zh.current,yt(zh)}function ro(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,jI(r)),Ft!==null)for(r=Ft.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Iu();break;case 3:Xs(),yt(Ar),yt(lr),Ah();break;case 5:xh(n);break;case 4:Xs();break;case 13:yt(At);break;case 19:yt(At);break;case 10:Eh(n);break;case 23:case 24:ep()}r=r.return}yr=t,Ft=ci(t.current,null),fr=Ki=Js=e,Jt=0,qu=null,Hh=Zs=Ca=0}function ME(t,e){do{var r=Ft;try{if(yh(),Sa.current=Hu,Vu){for(var n=It.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Vu=!1}if(xa=0,Qt=cr=It=null,_a=!1,Gh.current=null,r===null||r.return===null){Jt=1,qu=e,Ft=null;break}e:{var s=t,a=r.return,l=r,d=e;if(e=fr,l.flags|=2048,l.firstEffect=l.lastEffect=null,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d;if((l.mode&2)==0){var h=l.alternate;h?(l.updateQueue=h.updateQueue,l.memoizedState=h.memoizedState,l.lanes=h.lanes):(l.updateQueue=null,l.memoizedState=null)}var E=(At.current&1)!=0,m=a;do{var w;if(w=m.tag===13){var C=m.memoizedState;if(C!==null)w=C.dehydrated!==null;else{var R=m.memoizedProps;w=R.fallback===void 0?!1:R.unstable_avoidThisFallback!==!0?!0:!E}}if(w){var S=m.updateQueue;if(S===null){var x=new Set;x.add(u),m.updateQueue=x}else S.add(u);if((m.mode&2)==0){if(m.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var _=ri(-1,1);_.tag=2,ni(l,_)}l.lanes|=1;break e}d=void 0,l=e;var D=s.pingCache;if(D===null?(D=s.pingCache=new rR,d=new Set,D.set(u,d)):(d=D.get(u),d===void 0&&(d=new Set,D.set(u,d))),!d.has(l)){d.add(l);var k=gR.bind(null,s,u,l);u.then(k,k)}m.flags|=4096,m.lanes=e;break e}m=m.return}while(m!==null);d=Error((Ls(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Jt!==5&&(Jt=2),d=Uh(d,l),m=a;do{switch(m.tag){case 3:s=d,m.flags|=4096,e&=-e,m.lanes|=e;var M=xE(m,s,e);$y(m,M);break e;case 1:s=d;var B=m.type,z=m.stateNode;if((m.flags&64)==0&&(typeof B.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(yn===null||!yn.has(z)))){m.flags|=4096,e&=-e,m.lanes|=e;var q=_E(m,s,e);$y(m,q);break e}}m=m.return}while(m!==null)}BE(r)}catch(H){e=H,Ft===r&&r!==null&&(Ft=r=r.return);continue}break}while(1)}function FE(){var t=Ku.current;return Ku.current=Hu,t===null?Hu:t}function Pa(t,e){var r=Be;Be|=16;var n=FE();yr===t&&fr===e||ro(t,e);do try{uR();break}catch(i){ME(t,i)}while(1);if(yh(),Be=r,Ku.current=n,Ft!==null)throw Error(pe(261));return yr=null,fr=0,Jt}function uR(){for(;Ft!==null;)UE(Ft)}function cR(){for(;Ft!==null&&!HI();)UE(Ft)}function UE(t){var e=jE(t.alternate,t,Ki);t.memoizedProps=t.pendingProps,e===null?BE(t):Ft=e,Gh.current=null}function BE(t){var e=t;do{var r=e.alternate;if(t=e.return,(e.flags&2048)==0){if(r=eR(r,e,Ki),r!==null){Ft=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||(Ki&1073741824)!=0||(r.mode&4)==0){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&(t.flags&2048)==0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(r=tR(e),r!==null){r.flags&=2047,Ft=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);Jt===0&&(Jt=5)}function qi(t){var e=Ks();return Gi(99,fR.bind(null,t,e)),null}function fR(t,e){do li();while(ka!==null);if((Be&48)!=0)throw Error(pe(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(pe(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<s;){var d=31-Xn(s),u=1<<d;i[d]=0,a[d]=-1,l[d]=-1,s&=~u}if(On!==null&&(n&24)==0&&On.has(t)&&On.delete(t),t===yr&&(Ft=yr=null,fr=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=Be,Be|=32,Gh.current=null,oh=mu,a=cy(),rh(a)){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&u.rangeCount!==0){l=u.anchorNode,s=u.anchorOffset,d=u.focusNode,u=u.focusOffset;try{l.nodeType,d.nodeType}catch{l=null;break e}var h=0,E=-1,m=-1,w=0,C=0,R=a,S=null;t:for(;;){for(var x;R!==l||s!==0&&R.nodeType!==3||(E=h+s),R!==d||u!==0&&R.nodeType!==3||(m=h+u),R.nodeType===3&&(h+=R.nodeValue.length),(x=R.firstChild)!==null;)S=R,R=x;for(;;){if(R===a)break t;if(S===l&&++w===s&&(E=h),S===d&&++C===u&&(m=h),(x=R.nextSibling)!==null)break;R=S,S=R.parentNode}R=x}l=E===-1||m===-1?null:{start:E,end:m}}else l=null;l=l||{start:0,end:0}}else l=null;ah={focusedElem:a,selectionRange:l},mu=!1,Oa=null,Ju=!1,Se=n;do try{dR()}catch(H){if(Se===null)throw Error(pe(330));ui(Se,H),Se=Se.nextEffect}while(Se!==null);Oa=null,Se=n;do try{for(a=t;Se!==null;){var _=Se.flags;if(_&16&&Yo(Se.stateNode,""),_&128){var D=Se.alternate;if(D!==null){var k=D.ref;k!==null&&(typeof k=="function"?k(null):k.current=null)}}switch(_&1038){case 2:kE(Se),Se.flags&=-3;break;case 6:kE(Se),Se.flags&=-3,jh(Se.alternate,Se);break;case 1024:Se.flags&=-1025;break;case 1028:Se.flags&=-1025,jh(Se.alternate,Se);break;case 4:jh(Se.alternate,Se);break;case 8:l=Se,LE(a,l);var M=l.alternate;RE(l),M!==null&&RE(M)}Se=Se.nextEffect}}catch(H){if(Se===null)throw Error(pe(330));ui(Se,H),Se=Se.nextEffect}while(Se!==null);if(k=ah,D=cy(),_=k.focusedElem,a=k.selectionRange,D!==_&&_&&_.ownerDocument&&uy(_.ownerDocument.documentElement,_)){for(a!==null&&rh(_)&&(D=a.start,k=a.end,k===void 0&&(k=D),"selectionStart"in _?(_.selectionStart=D,_.selectionEnd=Math.min(k,_.value.length)):(k=(D=_.ownerDocument||document)&&D.defaultView||window,k.getSelection&&(k=k.getSelection(),l=_.textContent.length,M=Math.min(a.start,l),a=a.end===void 0?M:Math.min(a.end,l),!k.extend&&M>a&&(l=a,a=M,M=l),l=ly(_,M),s=ly(_,a),l&&s&&(k.rangeCount!==1||k.anchorNode!==l.node||k.anchorOffset!==l.offset||k.focusNode!==s.node||k.focusOffset!==s.offset)&&(D=D.createRange(),D.setStart(l.node,l.offset),k.removeAllRanges(),M>a?(k.addRange(D),k.extend(s.node,s.offset)):(D.setEnd(s.node,s.offset),k.addRange(D)))))),D=[],k=_;k=k.parentNode;)k.nodeType===1&&D.push({element:k,left:k.scrollLeft,top:k.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<D.length;_++)k=D[_],k.element.scrollLeft=k.left,k.element.scrollTop=k.top}mu=!!oh,ah=oh=null,t.current=r,Se=n;do try{for(_=t;Se!==null;){var B=Se.flags;if(B&36&&sR(_,Se.alternate,Se),B&128){D=void 0;var z=Se.ref;if(z!==null){var q=Se.stateNode;switch(Se.tag){case 5:D=q;break;default:D=q}typeof z=="function"?z(D):z.current=D}}Se=Se.nextEffect}}catch(H){if(Se===null)throw Error(pe(330));ui(Se,H),Se=Se.nextEffect}while(Se!==null);Se=null,KI(),Be=i}else t.current=r;if(si)si=!1,ka=t,La=e;else for(Se=n;Se!==null;)e=Se.nextEffect,Se.nextEffect=null,Se.flags&8&&(B=Se,B.sibling=null,B.stateNode=null),Se=e;if(n=t.pendingLanes,n===0&&(yn=null),n===1?t===Jh?Da++:(Da=0,Jh=t):Da=0,r=r.stateNode,ji&&typeof ji.onCommitFiberRoot=="function")try{ji.onCommitFiberRoot(dh,r,void 0,(r.current.flags&64)==64)}catch{}if(Qr(t,ur()),Yu)throw Yu=!1,t=Yh,Yh=null,t;return(Be&8)!=0||pn(),null}function dR(){for(;Se!==null;){var t=Se.alternate;Ju||Oa===null||((Se.flags&8)!=0?k0(Se,Oa)&&(Ju=!0):Se.tag===13&&oR(t,Se)&&k0(Se,Oa)&&(Ju=!0));var e=Se.flags;(e&256)!=0&&iR(t,Se),(e&512)==0||si||(si=!0,ma(97,function(){return li(),null})),Se=Se.nextEffect}}function li(){if(La!==90){var t=97<La?97:La;return La=90,Gi(t,pR)}return!1}function hR(t,e){Xh.push(e,t),si||(si=!0,ma(97,function(){return li(),null}))}function $E(t,e){Qh.push(e,t),si||(si=!0,ma(97,function(){return li(),null}))}function pR(){if(ka===null)return!1;var t=ka;if(ka=null,(Be&48)!=0)throw Error(pe(331));var e=Be;Be|=32;var r=Qh;Qh=[];for(var n=0;n<r.length;n+=2){var i=r[n],s=r[n+1],a=i.destroy;if(i.destroy=void 0,typeof a=="function")try{a()}catch(d){if(s===null)throw Error(pe(330));ui(s,d)}}for(r=Xh,Xh=[],n=0;n<r.length;n+=2){i=r[n],s=r[n+1];try{var l=i.create;i.destroy=l()}catch(d){if(s===null)throw Error(pe(330));ui(s,d)}}for(l=t.current.firstEffect;l!==null;)t=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=t;return Be=e,pn(),!0}function VE(t,e,r){e=Uh(r,e),e=xE(t,e,1),ni(t,e),e=Mr(),t=Zu(t,1),t!==null&&(gu(t,1,e),Qr(t,e))}function ui(t,e){if(t.tag===3)VE(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){VE(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yn===null||!yn.has(n))){t=Uh(e,t);var i=_E(r,t,1);if(ni(r,i),i=Mr(),r=Zu(r,1),r!==null)gu(r,1,i),Qr(r,i);else if(typeof n.componentDidCatch=="function"&&(yn===null||!yn.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function gR(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&r,yr===t&&(fr&r)===r&&(Jt===4||Jt===3&&(fr&62914560)===fr&&500>ur()-Kh?ro(t,0):Hh|=r),Qr(t,e)}function mR(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,(e&2)==0?e=1:(e&4)==0?e=Ks()===99?1:2:(Pn===0&&(Pn=Js),e=Fs(62914560&~Pn),e===0&&(e=4194304))),r=Mr(),t=Zu(t,e),t!==null&&(gu(t,e,r),Qr(t,r))}var jE;jE=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Ar.current)cn=!0;else if((r&n)!=0)cn=(t.flags&16384)!=0;else{switch(cn=!1,e.tag){case 3:hE(e),bh();break;case 5:qy(e);break;case 1:Ir(e.type)&&Ru(e);break;case 4:Sh(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;bt(Lu,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return(r&e.child.childLanes)!=0?pE(t,e,r):(bt(At,At.current&1),e=Dn(t,e,r),e!==null?e.sibling:null);bt(At,At.current&1);break;case 19:if(n=(r&e.childLanes)!=0,(t.flags&64)!=0){if(n)return EE(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bt(At,At.current),n)break;return null;case 23:case 24:return e.lanes=0,Oh(t,e,r)}return Dn(t,e,r)}else cn=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Ws(e,lr.current),Ys(e,r),i=Rh(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(n)){var s=!0;Ru(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Th(e);var a=n.getDerivedStateFromProps;typeof a=="function"&&Pu(e,n,a,t),i.updater=Nu,e.stateNode=i,i._reactInternals=e,wh(e,n,t,r),e=Nh(null,e,n,!0,s,r)}else e.tag=0,Cr(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=yR(i),t=un(i,t),s){case 0:e=Ph(null,e,i,t,r);break e;case 1:e=dE(null,e,i,t,r);break e;case 11:e=lE(null,e,i,t,r);break e;case 14:e=uE(null,e,i,un(i.type,t),n,r);break e}throw Error(pe(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),Ph(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),dE(t,e,n,i,r);case 3:if(hE(e),n=e.updateQueue,t===null||n===null)throw Error(pe(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,By(t,e),va(e,n,null,r),n=e.memoizedState.element,n===i)bh(),e=Dn(t,e,r);else{if(i=e.stateNode,(s=i.hydrate)&&(ii=js(e.stateNode.containerInfo.firstChild),Ln=e,s=mn=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],Qs.push(s);for(r=Ky(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Cr(t,e,n,r),bh();e=e.child}return e;case 5:return qy(e),t===null&&_h(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,lh(n,i)?a=null:s!==null&&lh(n,s)&&(e.flags|=16),fE(t,e),Cr(t,e,a,r),e.child;case 6:return t===null&&_h(e),null;case 13:return pE(t,e,r);case 4:return Sh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Uu(e,null,n,r):Cr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),lE(t,e,n,i,r);case 7:return Cr(t,e,e.pendingProps,r),e.child;case 8:return Cr(t,e,e.pendingProps.children,r),e.child;case 12:return Cr(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value;var l=e.type._context;if(bt(Lu,l._currentValue),l._currentValue=s,a!==null)if(l=a.value,s=qr(l,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(l,s):1073741823)|0,s===0){if(a.children===i.children&&!Ar.current){e=Dn(t,e,r);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var d=l.dependencies;if(d!==null){a=l.child;for(var u=d.firstContext;u!==null;){if(u.context===n&&(u.observedBits&s)!=0){l.tag===1&&(u=ri(-1,r&-r),u.tag=2,ni(l,u)),l.lanes|=r,u=l.alternate,u!==null&&(u.lanes|=r),Uy(l.return,r),d.lanes|=r;break}u=u.next}}else a=l.tag===10&&l.type===e.type?null:l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===e){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Cr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,n=s.children,Ys(e,r),i=Yr(i,s.unstable_observedBits),n=n(i),e.flags|=1,Cr(t,e,n,r),e.child;case 14:return i=e.type,s=un(i,e.pendingProps),s=un(i.type,s),uE(t,e,i,s,n,r);case 15:return cE(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:un(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Ir(n)?(t=!0,Ru(e)):t=!1,Ys(e,r),zy(e,n,i),wh(e,n,i,r),Nh(null,e,n,!0,t,r);case 19:return EE(t,e,r);case 23:return Oh(t,e,r);case 24:return Oh(t,e,r)}throw Error(pe(156,e.tag))};function vR(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,r,n){return new vR(t,e,r,n)}function tp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yR(t){if(typeof t=="function")return tp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ru)return 11;if(t===iu)return 14}return 2}function ci(t,e){var r=t.alternate;return r===null?(r=Jr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function tc(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")tp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hn:return no(r.children,i,s,e);case l0:a=8,i|=16;break;case fd:a=8,i|=1;break;case Ho:return t=Jr(12,r,e,i|8),t.elementType=Ho,t.type=Ho,t.lanes=s,t;case Wo:return t=Jr(13,r,e,i),t.type=Wo,t.elementType=Wo,t.lanes=s,t;case nu:return t=Jr(19,r,e,i),t.elementType=nu,t.lanes=s,t;case vd:return rp(r,i,s,e);case yd:return t=Jr(24,r,e,i),t.elementType=yd,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dd:a=10;break e;case hd:a=9;break e;case ru:a=11;break e;case iu:a=14;break e;case pd:a=16,n=null;break e;case gd:a=22;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=Jr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function no(t,e,r,n){return t=Jr(7,t,n,e),t.lanes=r,t}function rp(t,e,r,n){return t=Jr(23,t,n,e),t.elementType=vd,t.lanes=r,t}function np(t,e,r){return t=Jr(6,t,null,e),t.lanes=r,t}function ip(t,e,r){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ER(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.mutableSourceEagerHydrationData=null}function TR(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function rc(t,e,r,n){var i=e.current,s=Mr(),a=oi(i);e:if(r){r=r._reactInternals;t:{if(Bi(r)!==r||r.tag!==1)throw Error(pe(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Ir(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(pe(171))}if(r.tag===1){var d=r.type;if(Ir(d)){r=Ry(r,d,l);break e}}r=l}else r=ei;return e.context===null?e.context=r:e.pendingContext=r,e=ri(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),ni(i,e),ai(i,a,s),a}function sp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function op(t,e){GE(t,e),(t=t.alternate)&&GE(t,e)}function wR(){return null}function ap(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new ER(t,e,r!=null&&r.hydrate===!0),e=Jr(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Th(e),t[Gs]=r.current,vy(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}ap.prototype.render=function(t){rc(t,this._internalRoot,null,null)};ap.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;rc(null,t,null,function(){e[Gs]=null})};function Na(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function SR(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new ap(t,0,e?{hydrate:!0}:void 0)}function nc(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s._internalRoot;if(typeof i=="function"){var l=i;i=function(){var u=sp(a);l.call(u)}}rc(e,a,t,i)}else{if(s=r._reactRootContainer=SR(r,n),a=s._internalRoot,typeof i=="function"){var d=i;i=function(){var u=sp(a);d.call(u)}}NE(function(){rc(e,a,t,i)})}return sp(a)}L0=function(t){if(t.tag===13){var e=Mr();ai(t,4,e),op(t,4)}};Ud=function(t){if(t.tag===13){var e=Mr();ai(t,67108864,e),op(t,67108864)}};D0=function(t){if(t.tag===13){var e=Mr(),r=oi(t);ai(t,r,e),op(t,r)}};O0=function(t,e){return e()};Ld=function(t,e,r){switch(e){case"input":if(Sd(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Au(n);if(!i)throw Error(pe(90));f0(n),Sd(n,i)}}}break;case"textarea":m0(t,r);break;case"select":e=r.value,e!=null&&Ds(t,!!r.multiple,e,!1)}};Dd=PE;b0=function(t,e,r,n,i){var s=Be;Be|=4;try{return Gi(98,t.bind(null,e,r,n,i))}finally{Be=s,Be===0&&(eo(),pn())}};Od=function(){(Be&49)==0&&(lR(),li())};A0=function(t,e){var r=Be;Be|=2;try{return t(e)}finally{Be=r,Be===0&&(eo(),pn())}};function zE(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Na(e))throw Error(pe(200));return TR(t,e,null,r)}var xR={Events:[ga,zs,Au,x0,_0,li,{current:!1}]},Ma={findFiberByHostInstance:$i,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},_R={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||wR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{dh=ic.inject(_R),ji=ic}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xR;Kr.createPortal=zE;Kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):Error(pe(268,Object.keys(t)));return t=C0(e),t=t===null?null:t.stateNode,t};Kr.flushSync=function(t,e){var r=Be;if((r&48)!=0)return t(e);Be|=1;try{if(t)return Gi(99,t.bind(null,e))}finally{Be=r,pn()}};Kr.hydrate=function(t,e,r){if(!Na(e))throw Error(pe(200));return nc(null,t,e,!0,r)};Kr.render=function(t,e,r){if(!Na(e))throw Error(pe(200));return nc(null,t,e,!1,r)};Kr.unmountComponentAtNode=function(t){if(!Na(t))throw Error(pe(40));return t._reactRootContainer?(NE(function(){nc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gs]=null})}),!0):!1};Kr.unstable_batchedUpdates=PE;Kr.unstable_createPortal=function(t,e){return zE(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Kr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Na(r))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return nc(t,e,r,!1,n)};Kr.version="17.0.2";function HE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HE)}catch(t){console.error(t)}}HE(),ad.exports=Kr;var O2=ad.exports,P2=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(n,i,s){r.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:s})},r.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,i){if(1&i&&(n=r(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var a in n)r.d(s,a,function(l){return n[l]}.bind(null,a));return s},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="",r(r.s=8)}([function(t,e){t.exports=ae.exports},function(t,e,r){t.exports=r(10)()},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return typeof window!="undefined"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function E(m,w){for(var C=0;C<w.length;C++){var R=w[C];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(m,R.key,R)}}return function(m,w,C){return w&&E(m.prototype,w),C&&E(m,C),m}}(),i=u(r(0)),s=r(1),a=u(r(4)),l=u(r(12)),d=u(r(2));function u(E){return E&&E.__esModule?E:{default:E}}var h=function(E){function m(w){(function(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")})(this,m);var C=function(D,k){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||typeof k!="object"&&typeof k!="function"?D:k}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,w)),R=w.afterLoad,S=w.beforeLoad,x=w.scrollPosition,_=w.visibleByDefault;return C.state={visible:_},_&&(S(),R()),C.onVisible=C.onVisible.bind(C),C.isScrollTracked=Boolean(x&&Number.isFinite(x.x)&&x.x>=0&&Number.isFinite(x.y)&&x.y>=0),C}return function(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(w,C):w.__proto__=C)}(m,E),n(m,[{key:"componentDidUpdate",value:function(w,C){C.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var w=this.props,C=w.className,R=w.delayMethod,S=w.delayTime,x=w.height,_=w.placeholder,D=w.scrollPosition,k=w.style,M=w.threshold,B=w.useIntersectionObserver,z=w.width;return this.isScrollTracked||B&&(0,d.default)()?i.default.createElement(a.default,{className:C,height:x,onVisible:this.onVisible,placeholder:_,scrollPosition:D,style:k,threshold:M,useIntersectionObserver:B,width:z}):i.default.createElement(l.default,{className:C,delayMethod:R,delayTime:S,height:x,onVisible:this.onVisible,placeholder:_,style:k,threshold:M,width:z})}}]),m}(i.default.Component);h.propTypes={afterLoad:s.PropTypes.func,beforeLoad:s.PropTypes.func,useIntersectionObserver:s.PropTypes.bool,visibleByDefault:s.PropTypes.bool},h.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1},e.default=h},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(C){for(var R=1;R<arguments.length;R++){var S=arguments[R];for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(C[x]=S[x])}return C},i=function(){function C(R,S){for(var x=0;x<S.length;x++){var _=S[x];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(R,_.key,_)}}return function(R,S,x){return S&&C(R.prototype,S),x&&C(R,x),R}}(),s=u(r(0)),a=u(r(5)),l=r(1),d=u(r(2));function u(C){return C&&C.__esModule?C:{default:C}}var h=function(C){C.forEach(function(R){R.isIntersecting&&R.target.onVisible()})},E={},m=function(C){return E[C]=E[C]||new IntersectionObserver(h,{rootMargin:C+"px"}),E[C]},w=function(C){function R(S){(function(D,k){if(!(D instanceof k))throw new TypeError("Cannot call a class as a function")})(this,R);var x=function(D,k){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||typeof k!="object"&&typeof k!="function"?D:k}(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,S));if(x.supportsObserver=!S.scrollPosition&&S.useIntersectionObserver&&(0,d.default)(),x.supportsObserver){var _=S.threshold;x.observer=m(_)}return x}return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);S.prototype=Object.create(x&&x.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(S,x):S.__proto__=x)}(R,C),i(R,[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,x=this.placeholder.getBoundingClientRect(),_=a.default.findDOMNode(this.placeholder).style,D={left:parseInt(_.getPropertyValue("margin-left"),10)||0,top:parseInt(_.getPropertyValue("margin-top"),10)||0};return{bottom:S.y+x.bottom+D.top,left:S.x+x.left+D.left,right:S.x+x.right+D.left,top:S.y+x.top+D.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window=="undefined"||!this.placeholder)return!1;var S=this.props,x=S.scrollPosition,_=S.threshold,D=this.getPlaceholderBoundingBox(x),k=x.y+window.innerHeight,M=x.x,B=x.x+window.innerWidth,z=x.y;return Boolean(z-_<=D.bottom&&k+_>=D.top&&M-_<=D.right&&B+_>=D.left)}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var S=this,x=this.props,_=x.className,D=x.height,k=x.placeholder,M=x.style,B=x.width;if(k&&typeof k.type!="function")return s.default.cloneElement(k,{ref:function(q){return S.placeholder=q}});var z=n({display:"inline-block"},M);return B!==void 0&&(z.width=B),D!==void 0&&(z.height=D),s.default.createElement("span",{className:_,ref:function(q){return S.placeholder=q},style:z},k)}}]),R}(s.default.Component);w.propTypes={onVisible:l.PropTypes.func.isRequired,className:l.PropTypes.string,height:l.PropTypes.oneOfType([l.PropTypes.number,l.PropTypes.string]),placeholder:l.PropTypes.element,threshold:l.PropTypes.number,useIntersectionObserver:l.PropTypes.bool,scrollPosition:l.PropTypes.shape({x:l.PropTypes.number.isRequired,y:l.PropTypes.number.isRequired}),width:l.PropTypes.oneOfType([l.PropTypes.number,l.PropTypes.string])},w.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0},e.default=w},function(t,e){t.exports=ad.exports},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(S){for(var x=1;x<arguments.length;x++){var _=arguments[x];for(var D in _)Object.prototype.hasOwnProperty.call(_,D)&&(S[D]=_[D])}return S},i=function(){function S(x,_){for(var D=0;D<_.length;D++){var k=_[D];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}return function(x,_,D){return _&&S(x.prototype,_),D&&S(x,D),x}}(),s=m(r(0)),a=m(r(5)),l=r(1),d=m(r(13)),u=m(r(14)),h=m(r(2)),E=m(r(15));function m(S){return S&&S.__esModule?S:{default:S}}function w(S,x){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||typeof x!="object"&&typeof x!="function"?S:x}var C=function(){return typeof window=="undefined"?0:window.scrollX||window.pageXOffset},R=function(){return typeof window=="undefined"?0:window.scrollY||window.pageYOffset};e.default=function(S){var x=function(_){function D(k){(function(z,q){if(!(z instanceof q))throw new TypeError("Cannot call a class as a function")})(this,D);var M=w(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,k));if(M.useIntersectionObserver=k.useIntersectionObserver&&(0,h.default)(),M.useIntersectionObserver)return w(M);var B=M.onChangeScroll.bind(M);return k.delayMethod==="debounce"?M.delayedScroll=(0,d.default)(B,k.delayTime):k.delayMethod==="throttle"&&(M.delayedScroll=(0,u.default)(B,k.delayTime)),M.state={scrollPosition:{x:C(),y:R()}},M.baseComponentRef=s.default.createRef(),M}return function(k,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);k.prototype=Object.create(M&&M.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(k,M):k.__proto__=M)}(D,_),i(D,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window=="undefined"||this.useIntersectionObserver||(0,E.default)(a.default.findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window=="undefined"||this.useIntersectionObserver||(this.scrollElement=(0,E.default)(a.default.findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window=="undefined"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:C(),y:R()}})}},{key:"render",value:function(){var k=this.props,M=(k.delayMethod,k.delayTime,function(z,q){var H={};for(var Y in z)q.indexOf(Y)>=0||Object.prototype.hasOwnProperty.call(z,Y)&&(H[Y]=z[Y]);return H}(k,["delayMethod","delayTime"])),B=this.useIntersectionObserver?null:this.state.scrollPosition;return s.default.createElement(S,n({ref:this.baseComponentRef,scrollPosition:B},M))}}]),D}(s.default.Component);return x.propTypes={delayMethod:l.PropTypes.oneOf(["debounce","throttle"]),delayTime:l.PropTypes.number,useIntersectionObserver:l.PropTypes.bool},x.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},x}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}t.exports=r},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0}),e.trackWindowScroll=e.LazyLoadComponent=e.LazyLoadImage=void 0;var n=a(r(9)),i=a(r(3)),s=a(r(6));function a(l){return l&&l.__esModule?l:{default:l}}e.LazyLoadImage=n.default,e.LazyLoadComponent=i.default,e.trackWindowScroll=s.default},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(h){for(var E=1;E<arguments.length;E++){var m=arguments[E];for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(h[w]=m[w])}return h},i=function(){function h(E,m){for(var w=0;w<m.length;w++){var C=m[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(E,C.key,C)}}return function(E,m,w){return m&&h(E.prototype,m),w&&h(E,w),E}}(),s=d(r(0)),a=r(1),l=d(r(3));function d(h){return h&&h.__esModule?h:{default:h}}var u=function(h){function E(m){(function(C,R){if(!(C instanceof R))throw new TypeError("Cannot call a class as a function")})(this,E);var w=function(C,R){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!R||typeof R!="object"&&typeof R!="function"?C:R}(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,m));return w.state={loaded:!1},w}return function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}(E,h),i(E,[{key:"onImageLoad",value:function(){var m=this;return this.state.loaded?null:function(){m.props.afterLoad(),m.setState({loaded:!0})}}},{key:"getImg",value:function(){var m=this.props,w=(m.afterLoad,m.beforeLoad,m.delayMethod,m.delayTime,m.effect,m.placeholder,m.placeholderSrc,m.scrollPosition,m.threshold,m.useIntersectionObserver,m.visibleByDefault,m.wrapperClassName,m.wrapperProps,function(C,R){var S={};for(var x in C)R.indexOf(x)>=0||Object.prototype.hasOwnProperty.call(C,x)&&(S[x]=C[x]);return S}(m,["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"]));return s.default.createElement("img",n({onLoad:this.onImageLoad()},w))}},{key:"getLazyLoadImage",value:function(){var m=this.props,w=m.beforeLoad,C=m.className,R=m.delayMethod,S=m.delayTime,x=m.height,_=m.placeholder,D=m.scrollPosition,k=m.style,M=m.threshold,B=m.useIntersectionObserver,z=m.visibleByDefault,q=m.width;return s.default.createElement(l.default,{beforeLoad:w,className:C,delayMethod:R,delayTime:S,height:x,placeholder:_,scrollPosition:D,style:k,threshold:M,useIntersectionObserver:B,visibleByDefault:z,width:q},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(m){var w=this.props,C=w.effect,R=w.height,S=w.placeholderSrc,x=w.width,_=w.wrapperClassName,D=w.wrapperProps,k=this.state.loaded,M=k?" lazy-load-image-loaded":"";return s.default.createElement("span",n({className:_+" lazy-load-image-background "+C+M,style:{backgroundImage:k||!S?"":"url("+S+")",backgroundSize:k||!S?"":"100% 100%",display:"inline-block",height:R,width:x}},D),m)}},{key:"render",value:function(){var m=this.props,w=m.effect,C=m.placeholderSrc,R=m.visibleByDefault,S=m.wrapperClassName,x=m.wrapperProps,_=this.getLazyLoadImage();return(w||C)&&!R||S||x?this.getWrappedLazyLoadImage(_):_}}]),E}(s.default.Component);u.propTypes={afterLoad:a.PropTypes.func,beforeLoad:a.PropTypes.func,delayMethod:a.PropTypes.string,delayTime:a.PropTypes.number,effect:a.PropTypes.string,placeholderSrc:a.PropTypes.string,threshold:a.PropTypes.number,useIntersectionObserver:a.PropTypes.bool,visibleByDefault:a.PropTypes.bool,wrapperClassName:a.PropTypes.string,wrapperProps:a.PropTypes.object},u.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""},e.default=u},function(t,e,r){var n=r(11);function i(){}function s(){}s.resetWarningCache=i,t.exports=function(){function a(u,h,E,m,w,C){if(C!==n){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}function l(){return a}a.isRequired=a;var d={array:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:s,resetWarningCache:i};return d.PropTypes=d,d}},function(t,e,r){t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function u(h,E){for(var m=0;m<E.length;m++){var w=E[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}return function(h,E,m){return E&&u(h.prototype,E),m&&u(h,m),h}}(),i=l(r(0)),s=l(r(4)),a=l(r(6));function l(u){return u&&u.__esModule?u:{default:u}}var d=function(u){function h(E){return function(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}(this,h),function(m,w){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?m:w}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,E))}return function(E,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);E.prototype=Object.create(m&&m.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(E,m):E.__proto__=m)}(h,u),n(h,[{key:"render",value:function(){return i.default.createElement(s.default,this.props)}}]),h}(i.default.Component);e.default=(0,a.default)(d)},function(t,e,r){(function(n){var i="Expected a function",s=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,h=/^0o[0-7]+$/i,E=parseInt,m=typeof n=="object"&&n&&n.Object===Object&&n,w=typeof self=="object"&&self&&self.Object===Object&&self,C=m||w||Function("return this")(),R=Object.prototype.toString,S=Math.max,x=Math.min,_=function(){return C.Date.now()};function D(M){var B=typeof M;return!!M&&(B=="object"||B=="function")}function k(M){if(typeof M=="number")return M;if(function(q){return typeof q=="symbol"||function(H){return!!H&&typeof H=="object"}(q)&&R.call(q)==a}(M))return s;if(D(M)){var B=typeof M.valueOf=="function"?M.valueOf():M;M=D(B)?B+"":B}if(typeof M!="string")return M===0?M:+M;M=M.replace(l,"");var z=u.test(M);return z||h.test(M)?E(M.slice(2),z?2:8):d.test(M)?s:+M}t.exports=function(M,B,z){var q,H,Y,re,se,he,Te=0,Le=!1,De=!1,Fe=!0;if(typeof M!="function")throw new TypeError(i);function Ke(ve){var ge=q,Ue=H;return q=H=void 0,Te=ve,re=M.apply(Ue,ge)}function Ae(ve){var ge=ve-he;return he===void 0||ge>=B||ge<0||De&&ve-Te>=Y}function Ge(){var ve=_();if(Ae(ve))return ee(ve);se=setTimeout(Ge,function(ge){var Ue=B-(ge-he);return De?x(Ue,Y-(ge-Te)):Ue}(ve))}function ee(ve){return se=void 0,Fe&&q?Ke(ve):(q=H=void 0,re)}function oe(){var ve=_(),ge=Ae(ve);if(q=arguments,H=this,he=ve,ge){if(se===void 0)return function(Ue){return Te=Ue,se=setTimeout(Ge,B),Le?Ke(Ue):re}(he);if(De)return se=setTimeout(Ge,B),Ke(he)}return se===void 0&&(se=setTimeout(Ge,B)),re}return B=k(B)||0,D(z)&&(Le=!!z.leading,Y=(De="maxWait"in z)?S(k(z.maxWait)||0,B):Y,Fe="trailing"in z?!!z.trailing:Fe),oe.cancel=function(){se!==void 0&&clearTimeout(se),Te=0,q=he=H=se=void 0},oe.flush=function(){return se===void 0?re:ee(_())},oe}}).call(this,r(7))},function(t,e,r){(function(n){var i="Expected a function",s=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,h=/^0o[0-7]+$/i,E=parseInt,m=typeof n=="object"&&n&&n.Object===Object&&n,w=typeof self=="object"&&self&&self.Object===Object&&self,C=m||w||Function("return this")(),R=Object.prototype.toString,S=Math.max,x=Math.min,_=function(){return C.Date.now()};function D(B,z,q){var H,Y,re,se,he,Te,Le=0,De=!1,Fe=!1,Ke=!0;if(typeof B!="function")throw new TypeError(i);function Ae(ge){var Ue=H,Je=Y;return H=Y=void 0,Le=ge,se=B.apply(Je,Ue)}function Ge(ge){var Ue=ge-Te;return Te===void 0||Ue>=z||Ue<0||Fe&&ge-Le>=re}function ee(){var ge=_();if(Ge(ge))return oe(ge);he=setTimeout(ee,function(Ue){var Je=z-(Ue-Te);return Fe?x(Je,re-(Ue-Le)):Je}(ge))}function oe(ge){return he=void 0,Ke&&H?Ae(ge):(H=Y=void 0,se)}function ve(){var ge=_(),Ue=Ge(ge);if(H=arguments,Y=this,Te=ge,Ue){if(he===void 0)return function(Je){return Le=Je,he=setTimeout(ee,z),De?Ae(Je):se}(Te);if(Fe)return he=setTimeout(ee,z),Ae(Te)}return he===void 0&&(he=setTimeout(ee,z)),se}return z=M(z)||0,k(q)&&(De=!!q.leading,re=(Fe="maxWait"in q)?S(M(q.maxWait)||0,z):re,Ke="trailing"in q?!!q.trailing:Ke),ve.cancel=function(){he!==void 0&&clearTimeout(he),Le=0,H=Te=Y=he=void 0},ve.flush=function(){return he===void 0?se:oe(_())},ve}function k(B){var z=typeof B;return!!B&&(z=="object"||z=="function")}function M(B){if(typeof B=="number")return B;if(function(H){return typeof H=="symbol"||function(Y){return!!Y&&typeof Y=="object"}(H)&&R.call(H)==a}(B))return s;if(k(B)){var z=typeof B.valueOf=="function"?B.valueOf():B;B=k(z)?z+"":z}if(typeof B!="string")return B===0?B:+B;B=B.replace(l,"");var q=u.test(B);return q||h.test(B)?E(B.slice(2),q?2:8):d.test(B)?s:+B}t.exports=function(B,z,q){var H=!0,Y=!0;if(typeof B!="function")throw new TypeError(i);return k(q)&&(H="leading"in q?!!q.leading:H,Y="trailing"in q?!!q.trailing:Y),D(B,z,{leading:H,maxWait:z,trailing:Y})}}).call(this,r(7))},function(t,e,r){Object.defineProperty(e,"__esModule",{value:!0});var n=function(s,a){return typeof getComputedStyle=="undefined"?s.style[a]:getComputedStyle(s,null).getPropertyValue(a)},i=function(s){return n(s,"overflow")+n(s,"overflow-y")+n(s,"overflow-x")};e.default=function(s){if(!(s instanceof HTMLElement))return window;for(var a=s;a&&a!==document.body&&a!==document.documentElement&&a.parentNode;){if(/(scroll|auto)/.test(i(a)))return a;a=a.parentNode}return window}}]),lp={exports:{}},WE=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},bR=WE,Yi=Object.prototype.toString;function up(t){return Yi.call(t)==="[object Array]"}function cp(t){return typeof t=="undefined"}function AR(t){return t!==null&&!cp(t)&&t.constructor!==null&&!cp(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function IR(t){return Yi.call(t)==="[object ArrayBuffer]"}function RR(t){return typeof FormData!="undefined"&&t instanceof FormData}function CR(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function kR(t){return typeof t=="string"}function LR(t){return typeof t=="number"}function KE(t){return t!==null&&typeof t=="object"}function sc(t){if(Yi.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function DR(t){return Yi.call(t)==="[object Date]"}function OR(t){return Yi.call(t)==="[object File]"}function PR(t){return Yi.call(t)==="[object Blob]"}function qE(t){return Yi.call(t)==="[object Function]"}function NR(t){return KE(t)&&qE(t.pipe)}function MR(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function FR(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function UR(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function fp(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),up(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function dp(){var t={};function e(i,s){sc(t[s])&&sc(i)?t[s]=dp(t[s],i):sc(i)?t[s]=dp({},i):up(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)fp(arguments[r],e);return t}function BR(t,e,r){return fp(e,function(i,s){r&&typeof i=="function"?t[s]=bR(i,r):t[s]=i}),t}function $R(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Fr={isArray:up,isArrayBuffer:IR,isBuffer:AR,isFormData:RR,isArrayBufferView:CR,isString:kR,isNumber:LR,isObject:KE,isPlainObject:sc,isUndefined:cp,isDate:DR,isFile:OR,isBlob:PR,isFunction:qE,isStream:NR,isURLSearchParams:MR,isStandardBrowserEnv:UR,forEach:fp,merge:dp,extend:BR,trim:FR,stripBOM:$R},io=Fr;function YE(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var XE=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(io.isURLSearchParams(r))i=r.toString();else{var s=[];io.forEach(r,function(d,u){d===null||typeof d=="undefined"||(io.isArray(d)?u=u+"[]":d=[d],io.forEach(d,function(E){io.isDate(E)?E=E.toISOString():io.isObject(E)&&(E=JSON.stringify(E)),s.push(YE(u)+"="+YE(E))}))}),i=s.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},VR=Fr;function oc(){this.handlers=[]}oc.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};oc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};oc.prototype.forEach=function(e){VR.forEach(this.handlers,function(n){n!==null&&e(n)})};var jR=oc,GR=Fr,zR=function(e,r){GR.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},QE=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},HR=QE,JE=function(e,r,n,i,s){var a=new Error(e);return HR(a,r,n,i,s)},WR=JE,KR=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(WR("Request failed with status code "+n.status,n.config,null,n.request,n))},ac=Fr,qR=ac.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,a,l){var d=[];d.push(r+"="+encodeURIComponent(n)),ac.isNumber(i)&&d.push("expires="+new Date(i).toGMTString()),ac.isString(s)&&d.push("path="+s),ac.isString(a)&&d.push("domain="+a),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),YR=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},XR=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},QR=YR,JR=XR,ZR=function(e,r){return e&&!QR(r)?JR(e,r):r},hp=Fr,eC=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],tC=function(e){var r={},n,i,s;return e&&hp.forEach(e.split(`
`),function(l){if(s=l.indexOf(":"),n=hp.trim(l.substr(0,s)).toLowerCase(),i=hp.trim(l.substr(s+1)),n){if(r[n]&&eC.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},ZE=Fr,rC=ZE.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var a=s;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){var l=ZE.isString(a)?i(a):a;return l.protocol===n.protocol&&l.host===n.host}}():function(){return function(){return!0}}();function pp(t){this.message=t}pp.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};pp.prototype.__CANCEL__=!0;var lc=pp,uc=Fr,nC=KR,iC=qR,sC=XE,oC=ZR,aC=tC,lC=rC,gp=JE,uC=fc,cC=lc,eT=function(e){return new Promise(function(n,i){var s=e.data,a=e.headers,l=e.responseType,d;function u(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}uc.isFormData(s)&&delete a["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(E+":"+m)}var w=oC(e.baseURL,e.url);h.open(e.method.toUpperCase(),sC(w,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function C(){if(!!h){var S="getAllResponseHeaders"in h?aC(h.getAllResponseHeaders()):null,x=!l||l==="text"||l==="json"?h.responseText:h.response,_={data:x,status:h.status,statusText:h.statusText,headers:S,config:e,request:h};nC(function(k){n(k),u()},function(k){i(k),u()},_),h=null}}if("onloadend"in h?h.onloadend=C:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(C)},h.onabort=function(){!h||(i(gp("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){i(gp("Network Error",e,null,h)),h=null},h.ontimeout=function(){var x=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",_=e.transitional||uC.transitional;e.timeoutErrorMessage&&(x=e.timeoutErrorMessage),i(gp(x,e,_.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},uc.isStandardBrowserEnv()){var R=(e.withCredentials||lC(w))&&e.xsrfCookieName?iC.read(e.xsrfCookieName):void 0;R&&(a[e.xsrfHeaderName]=R)}"setRequestHeader"in h&&uc.forEach(a,function(x,_){typeof s=="undefined"&&_.toLowerCase()==="content-type"?delete a[_]:h.setRequestHeader(_,x)}),uc.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),l&&l!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(S){!h||(i(!S||S&&S.type?new cC("canceled"):S),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),s||(s=null),h.send(s)})},Zt=Fr,tT=zR,fC=QE,dC={"Content-Type":"application/x-www-form-urlencoded"};function rT(t,e){!Zt.isUndefined(t)&&Zt.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function hC(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=eT),t}function pC(t,e,r){if(Zt.isString(t))try{return(e||JSON.parse)(t),Zt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var cc={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:hC(),transformRequest:[function(e,r){return tT(r,"Accept"),tT(r,"Content-Type"),Zt.isFormData(e)||Zt.isArrayBuffer(e)||Zt.isBuffer(e)||Zt.isStream(e)||Zt.isFile(e)||Zt.isBlob(e)?e:Zt.isArrayBufferView(e)?e.buffer:Zt.isURLSearchParams(e)?(rT(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Zt.isObject(e)||r&&r["Content-Type"]==="application/json"?(rT(r,"application/json"),pC(e)):e}],transformResponse:[function(e){var r=this.transitional||cc.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Zt.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?fC(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Zt.forEach(["delete","get","head"],function(e){cc.headers[e]={}});Zt.forEach(["post","put","patch"],function(e){cc.headers[e]=Zt.merge(dC)});var fc=cc,gC=Fr,mC=fc,vC=function(e,r,n){var i=this||mC;return gC.forEach(n,function(a){e=a.call(i,e,r)}),e},nT=function(e){return!!(e&&e.__CANCEL__)},iT=Fr,mp=vC,yC=nT,EC=fc,TC=lc;function vp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new TC("canceled")}var wC=function(e){vp(e),e.headers=e.headers||{},e.data=mp.call(e,e.data,e.headers,e.transformRequest),e.headers=iT.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),iT.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||EC.adapter;return r(e).then(function(i){return vp(e),i.data=mp.call(e,i.data,i.headers,e.transformResponse),i},function(i){return yC(i)||(vp(e),i&&i.response&&(i.response.data=mp.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Ur=Fr,sT=function(e,r){r=r||{};var n={};function i(h,E){return Ur.isPlainObject(h)&&Ur.isPlainObject(E)?Ur.merge(h,E):Ur.isPlainObject(E)?Ur.merge({},E):Ur.isArray(E)?E.slice():E}function s(h){if(Ur.isUndefined(r[h])){if(!Ur.isUndefined(e[h]))return i(void 0,e[h])}else return i(e[h],r[h])}function a(h){if(!Ur.isUndefined(r[h]))return i(void 0,r[h])}function l(h){if(Ur.isUndefined(r[h])){if(!Ur.isUndefined(e[h]))return i(void 0,e[h])}else return i(void 0,r[h])}function d(h){if(h in r)return i(e[h],r[h]);if(h in e)return i(void 0,e[h])}var u={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d};return Ur.forEach(Object.keys(e).concat(Object.keys(r)),function(E){var m=u[E]||s,w=m(E);Ur.isUndefined(w)&&m!==d||(n[E]=w)}),n},oT={version:"0.24.0"},SC=oT.version,yp={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){yp[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var aT={};yp.transitional=function(e,r,n){function i(s,a){return"[Axios v"+SC+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return function(s,a,l){if(e===!1)throw new Error(i(a," has been removed"+(r?" in "+r:"")));return r&&!aT[a]&&(aT[a]=!0,console.warn(i(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,a,l):!0}};function xC(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],a=e[s];if(a){var l=t[s],d=l===void 0||a(l,s,t);if(d!==!0)throw new TypeError("option "+s+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+s)}}var _C={assertOptions:xC,validators:yp},lT=Fr,bC=XE,uT=jR,cT=wC,dc=sT,fT=_C,so=fT.validators;function Fa(t){this.defaults=t,this.interceptors={request:new uT,response:new uT}}Fa.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=dc(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&fT.assertOptions(r,{silentJSONParsing:so.transitional(so.boolean),forcedJSONParsing:so.transitional(so.boolean),clarifyTimeoutError:so.transitional(so.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(e)===!1||(i=i&&m.synchronous,n.unshift(m.fulfilled,m.rejected))});var s=[];this.interceptors.response.forEach(function(m){s.push(m.fulfilled,m.rejected)});var a;if(!i){var l=[cT,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(s),a=Promise.resolve(e);l.length;)a=a.then(l.shift(),l.shift());return a}for(var d=e;n.length;){var u=n.shift(),h=n.shift();try{d=u(d)}catch(E){h(E);break}}try{a=cT(d)}catch(E){return Promise.reject(E)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};Fa.prototype.getUri=function(e){return e=dc(this.defaults,e),bC(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};lT.forEach(["delete","get","head","options"],function(e){Fa.prototype[e]=function(r,n){return this.request(dc(n||{},{method:e,url:r,data:(n||{}).data}))}});lT.forEach(["post","put","patch"],function(e){Fa.prototype[e]=function(r,n,i){return this.request(dc(i||{},{method:e,url:r,data:n}))}});var AC=Fa,IC=lc;function oo(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(a){r.subscribe(a),i=a}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new IC(i),e(r.reason))})}oo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};oo.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};oo.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};oo.source=function(){var e,r=new oo(function(i){e=i});return{token:r,cancel:e}};var RC=oo,CC=function(e){return function(n){return e.apply(null,n)}},kC=function(e){return typeof e=="object"&&e.isAxiosError===!0},dT=Fr,LC=WE,hc=AC,DC=sT,OC=fc;function hT(t){var e=new hc(t),r=LC(hc.prototype.request,e);return dT.extend(r,hc.prototype,e),dT.extend(r,e),r.create=function(i){return hT(DC(t,i))},r}var En=hT(OC);En.Axios=hc;En.Cancel=lc;En.CancelToken=RC;En.isCancel=nT;En.VERSION=oT.version;En.all=function(e){return Promise.all(e)};En.spread=CC;En.isAxiosError=kC;lp.exports=En;lp.exports.default=En;var N2=lp.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function pT(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(h){try{u(n.next(h))}catch(E){a(E)}}function d(h){try{u(n.throw(h))}catch(E){a(E)}}function u(h){h.done?s(h.value):i(h.value).then(l,d)}u((n=n.apply(t,e||[])).next())})}function gT(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return d([u,h])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Tn=function(){},Er=Tn(),Ua=Object,Br=function(t){return t===Er},Ba=function(t){return typeof t=="function"},Xi=function(t,e){return Ua.assign({},t,e)},Ep="undefined",Tp=function(){return typeof window!=Ep},PC=function(){return typeof document!=Ep},NC=function(){return Tp()&&typeof window.requestAnimationFrame!=Ep},pc=new WeakMap,MC=0,$a=function(t){var e=typeof t,r=t&&t.constructor,n=r==Date,i,s;if(Ua(t)===t&&!n&&r!=RegExp){if(i=pc.get(t),i)return i;if(i=++MC+"~",pc.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=$a(t[s])+",";pc.set(t,i)}if(r==Ua){i="#";for(var a=Ua.keys(t).sort();!Br(s=a.pop());)Br(t[s])||(i+=s+":"+$a(t[s])+",");pc.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},wp=!0,FC=function(){return wp},mT=Tp(),Sp=PC(),xp=mT&&window.addEventListener?window.addEventListener.bind(window):Tn,UC=Sp?document.addEventListener.bind(document):Tn,_p=mT&&window.removeEventListener?window.removeEventListener.bind(window):Tn,BC=Sp?document.removeEventListener.bind(document):Tn,$C=function(){var t=Sp&&document.visibilityState;return Br(t)||t!=="hidden"},VC=function(t){return UC("visibilitychange",t),xp("focus",t),function(){BC("visibilitychange",t),_p("focus",t)}},jC=function(t){var e=function(){wp=!0,t()},r=function(){wp=!1};return xp("online",e),xp("offline",r),function(){_p("online",e),_p("offline",r)}},GC={isOnline:FC,isVisible:$C},zC={initFocus:VC,initReconnect:jC},gc=!Tp()||"Deno"in window,HC=function(t){return NC()?window.requestAnimationFrame(t):setTimeout(t,1)},Va=gc?ae.exports.useEffect:ae.exports.useLayoutEffect,bp=typeof navigator!="undefined"&&navigator.connection,vT=!gc&&bp&&(["slow-2g","2g"].includes(bp.effectiveType)||bp.saveData),yT=function(t){if(Ba(t))try{t=t()}catch{t=""}var e=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?$a(t):"";var r=t?"$err$"+t:"",n=t?"$req$"+t:"";return[t,e,r,n]},Qi=new WeakMap,ET=0,TT=1,wT=2,mc=function(t,e,r,n,i,s,a){a===void 0&&(a=!0);var l=Qi.get(t),d=l[0],u=l[1],h=l[4],E=d[e],m=u[e]||[];if(a&&m)for(var w=0;w<m.length;++w)m[w](r,n,i);return s&&(delete h[e],E&&E[0])?E[0](wT).then(function(){return t.get(e)}):t.get(e)},WC=0,Ap=function(){return++WC},ST=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return pT(void 0,void 0,void 0,function(){var r,n,i,s,a,l,d,u,h,E,m,w,C,R,S,x,_;return gT(this,function(D){switch(D.label){case 0:if(r=t[0],n=t[1],i=t[2],s=t[3],a=typeof s=="boolean"?{revalidate:s}:s||{},l=a.revalidate!==!1,d=a.populateCache!==!1,u=yT(n),h=u[0],E=u[2],!h)return[2];if(m=Qi.get(r),w=m[2],C=m[3],t.length<3)return[2,mc(r,h,r.get(h),r.get(E),Er,l,d)];if(R=i,x=w[h]=Ap(),C[h]=0,Ba(R))try{R=R(r.get(h))}catch(k){S=k}return R&&Ba(R.then)?[4,R.catch(function(k){S=k})]:[3,2];case 1:if(R=D.sent(),x!==w[h]){if(S)throw S;return[2,R]}D.label=2;case 2:return d&&(S||r.set(h,R),r.set(E,S)),C[h]=Ap(),[4,mc(r,h,R,S,Er,l,d)];case 3:if(_=D.sent(),S)throw S;return[2,d?_:R]}})})},xT=function(t,e){for(var r in t)t[r][0]&&t[r][0](e)},_T=function(t,e){if(!Qi.has(t)){var r=Xi(zC,e),n={},i=ST.bind(Er,t),s=Tn;if(Qi.set(t,[n,{},{},{},{},i]),!gc){var a=r.initFocus(setTimeout.bind(Er,xT.bind(Er,n,ET))),l=r.initReconnect(setTimeout.bind(Er,xT.bind(Er,n,TT)));s=function(){a&&a(),l&&l(),Qi.delete(t)}}return[t,i,s]}return[t,Qi.get(t)[5]]},KC=function(t,e,r,n,i){var s=r.errorRetryCount,a=i.retryCount,l=~~((Math.random()+.5)*(1<<(a<8?a:8)))*r.errorRetryInterval;!Br(s)&&a>s||setTimeout(n,l,i)},bT=_T(new Map),AT=bT[0],qC=bT[1],IT=Xi({onLoadingSlow:Tn,onSuccess:Tn,onError:Tn,onErrorRetry:KC,onDiscarded:Tn,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:vT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:vT?5e3:3e3,compare:function(t,e){return $a(t)==$a(e)},isPaused:function(){return!1},cache:AT,mutate:qC,fallback:{}},GC),RT=function(t,e){var r=Xi(t,e);if(e){var n=t.use,i=t.fallback,s=e.use,a=e.fallback;n&&s&&(r.use=n.concat(s)),i&&a&&(r.fallback=Xi(i,a))}return r},Ip=ae.exports.createContext({}),YC=function(t){var e=t.value,r=RT(ae.exports.useContext(Ip),e),n=e&&e.provider,i=ae.exports.useState(function(){return n?_T(n(r.cache||AT),e):Er})[0];return i&&(r.cache=i[0],r.mutate=i[1]),Va(function(){return i?i[2]:Er},[]),ae.exports.createElement(Ip.Provider,Xi(t,{value:r}))},XC=function(t,e){var r=ae.exports.useState({})[1],n=ae.exports.useRef(t),i=ae.exports.useRef({data:!1,error:!1,isValidating:!1}),s=ae.exports.useCallback(function(a){var l=!1,d=n.current;for(var u in a){var h=u;d[h]!==a[h]&&(d[h]=a[h],i.current[h]&&(l=!0))}l&&!e.current&&r({})},[]);return Va(function(){n.current=t}),[n,i.current,s]},QC=function(t){return Ba(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},JC=function(){return Xi(IT,ae.exports.useContext(Ip))},ZC=function(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=JC(),i=QC(e),s=i[0],a=i[1],l=i[2],d=RT(n,l),u=t,h=d.use;if(h)for(var E=h.length;E-- >0;)u=h[E](u);return u(s,a||d.fetcher,d)}},CT=function(t,e,r){var n=e[t]||(e[t]=[]);return n.push(r),function(){var i=n.indexOf(r);i>=0&&(n[i]=n[n.length-1],n.pop())}},Rp={dedupe:!0},ek=function(t,e,r){var n=r.cache,i=r.compare,s=r.fallbackData,a=r.suspense,l=r.revalidateOnMount,d=r.refreshInterval,u=r.refreshWhenHidden,h=r.refreshWhenOffline,E=Qi.get(n),m=E[0],w=E[1],C=E[2],R=E[3],S=E[4],x=yT(t),_=x[0],D=x[1],k=x[2],M=x[3],B=ae.exports.useRef(!1),z=ae.exports.useRef(!1),q=ae.exports.useRef(_),H=ae.exports.useRef(e),Y=ae.exports.useRef(r),re=function(){return Y.current},se=function(){return re().isVisible()&&re().isOnline()},he=n.get(_),Te=Br(s)?r.fallback[_]:s,Le=Br(he)?Te:he,De=n.get(k),Fe=function(){return Br(l)?re().isPaused()?!1:a?!Br(Le):Br(Le)||r.revalidateIfStale:l},Ke=function(){return!_||!e?!1:n.get(M)?!0:!B.current&&Fe()},Ae=Ke(),Ge=XC({data:Le,error:De,isValidating:Ae},z),ee=Ge[0],oe=Ge[1],ve=Ge[2],ge=ae.exports.useCallback(function(Je){return pT(void 0,void 0,void 0,function(){var Oe,Ze,et,Rt,or,Ut,st,Bt,ct,Zr,Ct,xt;return gT(this,function(bn){switch(bn.label){case 0:if(Oe=H.current,!_||!Oe||z.current||re().isPaused())return[2,!1];Rt=!0,or=Je||{},Ut=!S[_]||!or.dedupe,st=function(){return!z.current&&_===q.current&&B.current},Bt=function(){var $=S[_];$&&$[1]===et&&delete S[_]},ct={isValidating:!1},Zr=function(){n.set(M,!1),st()&&ve(ct)},n.set(M,!0),ve({isValidating:!0}),bn.label=1;case 1:return bn.trys.push([1,3,,4]),Ut&&(mc(n,_,ee.current.data,ee.current.error,!0),r.loadingTimeout&&!n.get(_)&&setTimeout(function(){Rt&&st()&&re().onLoadingSlow(_,r)},r.loadingTimeout),S[_]=[Oe.apply(void 0,D),Ap()]),xt=S[_],Ze=xt[0],et=xt[1],[4,Ze];case 2:return Ze=bn.sent(),Ut&&setTimeout(Bt,r.dedupingInterval),!S[_]||S[_][1]!==et?(Ut&&st()&&re().onDiscarded(_),[2,!1]):(n.set(k,Er),ct.error=Er,!Br(C[_])&&(et<=C[_]||et<=R[_]||R[_]===0)?(Zr(),Ut&&st()&&re().onDiscarded(_),[2,!1]):(i(ee.current.data,Ze)?ct.data=ee.current.data:ct.data=Ze,i(n.get(_),Ze)||n.set(_,Ze),Ut&&st()&&re().onSuccess(Ze,_,r),[3,4]));case 3:return Ct=bn.sent(),Bt(),re().isPaused()||(n.set(k,Ct),ct.error=Ct,Ut&&st()&&(re().onError(Ct,_,r),r.shouldRetryOnError&&se()&&re().onErrorRetry(Ct,_,r,ge,{retryCount:(or.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Rt=!1,Zr(),st()&&Ut&&mc(n,_,ct.data,ct.error,!1),[2,!0]}})})},[_]),Ue=ae.exports.useCallback(ST.bind(Er,n,function(){return q.current}),[]);if(Va(function(){H.current=e,Y.current=r}),Va(function(){if(!!_){var Je=B.current,Oe=ge.bind(Er,Rp),Ze=function(st,Bt,ct){ve(Xi({error:Bt,isValidating:ct},i(ee.current.data,st)?Er:{data:st}))},et=0,Rt=function(st){if(st==ET){var Bt=Date.now();re().revalidateOnFocus&&Bt>et&&se()&&(et=Bt+re().focusThrottleInterval,Oe())}else if(st==TT)re().revalidateOnReconnect&&se()&&Oe();else if(st==wT)return ge()},or=CT(_,w,Ze),Ut=CT(_,m,Rt);return z.current=!1,q.current=_,B.current=!0,Je&&ve({data:Le,error:De,isValidating:Ae}),Fe()&&(Br(Le)||gc?Oe():HC(Oe)),function(){z.current=!0,or(),Ut()}}},[_,ge]),Va(function(){var Je;function Oe(){var et=Ba(d)?d(Le):d;et&&Je!==-1&&(Je=setTimeout(Ze,et))}function Ze(){!ee.current.error&&(u||re().isVisible())&&(h||re().isOnline())?ge(Rp).then(Oe):Oe()}return Oe(),function(){Je&&(clearTimeout(Je),Je=-1)}},[d,u,h,ge]),ae.exports.useDebugValue(Le),a&&Br(Le)&&_)throw Br(De)?ge(Rp):De;return{mutate:Ue,get data(){return oe.data=!0,Le},get error(){return oe.error=!0,De},get isValidating(){return oe.isValidating=!0,Ae}}},M2=Ua.defineProperty(YC,"default",{value:IT}),tk=ZC(ek);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function rk(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function l(h){try{u(n.next(h))}catch(E){a(E)}}function d(h){try{u(n.throw(h))}catch(E){a(E)}}function u(h){h.done?s(h.value):i(h.value).then(l,d)}u((n=n.apply(t,e||[])).next())})}function nk(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(u){return function(h){return d([u,h])}}function d(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ik=function(){},kT=ik(),Cp=Object,fi=function(t){return t===kT},kp=function(t){return typeof t=="function"},sk="undefined",ok=function(){return typeof window!=sk},LT=!ok()||"Deno"in window,DT=LT?ae.exports.useEffect:ae.exports.useLayoutEffect,Lp=typeof navigator!="undefined"&&navigator.connection;!LT&&Lp&&(["slow-2g","2g"].includes(Lp.effectiveType)||Lp.saveData);var vc=new WeakMap,ak=0,Dp=function(t){var e=typeof t,r=t&&t.constructor,n=r==Date,i,s;if(Cp(t)===t&&!n&&r!=RegExp){if(i=vc.get(t),i)return i;if(i=++ak+"~",vc.set(t,i),r==Array){for(i="@",s=0;s<t.length;s++)i+=Dp(t[s])+",";vc.set(t,i)}if(r==Cp){i="#";for(var a=Cp.keys(t).sort();!fi(s=a.pop());)fi(t[s])||(i+=s+":"+Dp(t[s])+",");vc.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},Op=function(t){if(kp(t))try{t=t()}catch{t=""}var e=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Dp(t):"";var r=t?"$err$"+t:"",n=t?"$req$"+t:"";return[t,e,r,n]};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yc=function(){return yc=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yc.apply(this,arguments)},lk=function(t){return kp(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},uk=function(t,e){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=lk(r),s=i[0],a=i[1],l=i[2],d=(l.use||[]).concat(e);return t(s,a,yc(yc({},l),{use:d}))}},ck="$inf$",fk=function(t){return Op(t?t(0,null):null)[0]},dk=function(t){return function(e,r,n){var i=ae.exports.useState({})[1],s=ae.exports.useRef(!1),a=ae.exports.useRef(),l=n.cache,d=n.initialSize,u=d===void 0?1:d,h=n.revalidateAll,E=h===void 0?!1:h,m=n.persistSize,w=m===void 0?!1:m,C=n.revalidateFirstPage,R=C===void 0?!0:C,S=null;try{S=fk(e)}catch{}var x=null,_=null;S&&(x="$ctx$"+S,_="$len$"+S);var D=ae.exports.useCallback(function(){var H=l.get(_);return fi(H)?u:H},[_,u]),k=ae.exports.useRef(D());DT(function(){if(!s.current){s.current=!0;return}S&&l.set(_,w?k.current:u)},[S]);var M=t(S?ck+S:null,function(){return rk(void 0,void 0,void 0,function(){var H,Y,re,se,he,Te,Le,De,Fe,Ke,Ae,Ge;return nk(this,function(ee){switch(ee.label){case 0:H=l.get(x)||[],Y=H[0],re=H[1],se=[],he=D(),Te=null,Le=0,ee.label=1;case 1:return Le<he?(De=Op(e(Le,Te)),Fe=De[0],Ke=De[1],Fe?(Ae=l.get(Fe),Ge=E||Y||fi(Ae)||R&&!Le&&!fi(a.current)||re&&!fi(re[Le])&&!n.compare(re[Le],Ae),r&&Ge?[4,r.apply(void 0,Ke)]:[3,3]):[3,5]):[3,5];case 2:Ae=ee.sent(),l.set(Fe,Ae),ee.label=3;case 3:se.push(Ae),Te=Ae,ee.label=4;case 4:return++Le,[3,1];case 5:return l.delete(x),[2,se]}})})},n);DT(function(){a.current=M.data},[M.data]);var B=ae.exports.useCallback(function(){for(var H=[],Y=0;Y<arguments.length;Y++)H[Y]=arguments[Y];var re=H[0],se=H[1]!==!1;if(!!x){if(se)if(fi(re))l.set(x,[!0]);else{var he=a.current;l.set(x,[!1,he])}return H.length?M.mutate(re,se):M.mutate()}},[x]),z=function(H){for(var Y=[],re=null,se=0;se<H;++se){var he=Op(e(se,re))[0],Te=he?l.get(he):kT;if(fi(Te))return a.current;Y.push(Te),re=Te}return Y},q=ae.exports.useCallback(function(H){if(!!_){var Y;if(kp(H)?Y=H(D()):typeof H=="number"&&(Y=H),typeof Y=="number")return l.set(_,Y),k.current=Y,i({}),B(z(Y))}},[_,D,B]);return{size:D(),setSize:q,mutate:B,get error(){return M.error},get data(){return M.data},get isValidating(){return M.isValidating}}}},F2=uk(tk,dk),OT={exports:{}};(function(t,e){typeof window!="undefined"&&function(n,i){t.exports=i()}(Ob,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return r[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=n,i.d=function(s,a,l){i.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:l})},i.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,a){if(a&1&&(s=i(s)),a&8||a&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),a&2&&typeof s!="string")for(var d in s)i.d(l,d,function(u){return s[u]}.bind(null,d));return l},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="/dist/",i(i.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(r,n,i){var s=Object.prototype.hasOwnProperty,a="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(a=!1));function d(m,w,C){this.fn=m,this.context=w,this.once=C||!1}function u(m,w,C,R,S){if(typeof C!="function")throw new TypeError("The listener must be a function");var x=new d(C,R||m,S),_=a?a+w:w;return m._events[_]?m._events[_].fn?m._events[_]=[m._events[_],x]:m._events[_].push(x):(m._events[_]=x,m._eventsCount++),m}function h(m,w){--m._eventsCount==0?m._events=new l:delete m._events[w]}function E(){this._events=new l,this._eventsCount=0}E.prototype.eventNames=function(){var w=[],C,R;if(this._eventsCount===0)return w;for(R in C=this._events)s.call(C,R)&&w.push(a?R.slice(1):R);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(C)):w},E.prototype.listeners=function(w){var C=a?a+w:w,R=this._events[C];if(!R)return[];if(R.fn)return[R.fn];for(var S=0,x=R.length,_=new Array(x);S<x;S++)_[S]=R[S].fn;return _},E.prototype.listenerCount=function(w){var C=a?a+w:w,R=this._events[C];return R?R.fn?1:R.length:0},E.prototype.emit=function(w,C,R,S,x,_){var D=a?a+w:w;if(!this._events[D])return!1;var k=this._events[D],M=arguments.length,B,z;if(k.fn){switch(k.once&&this.removeListener(w,k.fn,void 0,!0),M){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,C),!0;case 3:return k.fn.call(k.context,C,R),!0;case 4:return k.fn.call(k.context,C,R,S),!0;case 5:return k.fn.call(k.context,C,R,S,x),!0;case 6:return k.fn.call(k.context,C,R,S,x,_),!0}for(z=1,B=new Array(M-1);z<M;z++)B[z-1]=arguments[z];k.fn.apply(k.context,B)}else{var q=k.length,H;for(z=0;z<q;z++)switch(k[z].once&&this.removeListener(w,k[z].fn,void 0,!0),M){case 1:k[z].fn.call(k[z].context);break;case 2:k[z].fn.call(k[z].context,C);break;case 3:k[z].fn.call(k[z].context,C,R);break;case 4:k[z].fn.call(k[z].context,C,R,S);break;default:if(!B)for(H=1,B=new Array(M-1);H<M;H++)B[H-1]=arguments[H];k[z].fn.apply(k[z].context,B)}}return!0},E.prototype.on=function(w,C,R){return u(this,w,C,R,!1)},E.prototype.once=function(w,C,R){return u(this,w,C,R,!0)},E.prototype.removeListener=function(w,C,R,S){var x=a?a+w:w;if(!this._events[x])return this;if(!C)return h(this,x),this;var _=this._events[x];if(_.fn)_.fn===C&&(!S||_.once)&&(!R||_.context===R)&&h(this,x);else{for(var D=0,k=[],M=_.length;D<M;D++)(_[D].fn!==C||S&&!_[D].once||R&&_[D].context!==R)&&k.push(_[D]);k.length?this._events[x]=k.length===1?k[0]:k:h(this,x)}return this},E.prototype.removeAllListeners=function(w){var C;return w?(C=a?a+w:w,this._events[C]&&h(this,C)):(this._events=new l,this._eventsCount=0),this},E.prototype.off=E.prototype.removeListener,E.prototype.addListener=E.prototype.on,E.prefixed=a,E.EventEmitter=E,r.exports=E},"./node_modules/url-toolkit/src/url-toolkit.js":function(r,n,i){(function(s){var a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,l=/^([^\/?#]*)(.*)$/,d=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,h={buildAbsoluteURL:function(E,m,w){if(w=w||{},E=E.trim(),m=m.trim(),!m){if(!w.alwaysNormalize)return E;var C=h.parseURL(E);if(!C)throw new Error("Error trying to parse base URL.");return C.path=h.normalizePath(C.path),h.buildURLFromParts(C)}var R=h.parseURL(m);if(!R)throw new Error("Error trying to parse relative URL.");if(R.scheme)return w.alwaysNormalize?(R.path=h.normalizePath(R.path),h.buildURLFromParts(R)):m;var S=h.parseURL(E);if(!S)throw new Error("Error trying to parse base URL.");if(!S.netLoc&&S.path&&S.path[0]!=="/"){var x=l.exec(S.path);S.netLoc=x[1],S.path=x[2]}S.netLoc&&!S.path&&(S.path="/");var _={scheme:S.scheme,netLoc:R.netLoc,path:null,params:R.params,query:R.query,fragment:R.fragment};if(!R.netLoc&&(_.netLoc=S.netLoc,R.path[0]!=="/"))if(!R.path)_.path=S.path,R.params||(_.params=S.params,R.query||(_.query=S.query));else{var D=S.path,k=D.substring(0,D.lastIndexOf("/")+1)+R.path;_.path=h.normalizePath(k)}return _.path===null&&(_.path=w.alwaysNormalize?h.normalizePath(R.path):R.path),h.buildURLFromParts(_)},parseURL:function(E){var m=a.exec(E);return m?{scheme:m[1]||"",netLoc:m[2]||"",path:m[3]||"",params:m[4]||"",query:m[5]||"",fragment:m[6]||""}:null},normalizePath:function(E){for(E=E.split("").reverse().join("").replace(d,"");E.length!==(E=E.replace(u,"")).length;);return E.split("").reverse().join("")},buildURLFromParts:function(E){return E.scheme+E.netLoc+E.path+E.params+E.query+E.fragment}};r.exports=h})()},"./node_modules/webworkify-webpack/index.js":function(r,n,i){function s(w){var C={};function R(x){if(C[x])return C[x].exports;var _=C[x]={i:x,l:!1,exports:{}};return w[x].call(_.exports,_,_.exports,R),_.l=!0,_.exports}R.m=w,R.c=C,R.i=function(x){return x},R.d=function(x,_,D){R.o(x,_)||Object.defineProperty(x,_,{configurable:!1,enumerable:!0,get:D})},R.r=function(x){Object.defineProperty(x,"__esModule",{value:!0})},R.n=function(x){var _=x&&x.__esModule?function(){return x.default}:function(){return x};return R.d(_,"a",_),_},R.o=function(x,_){return Object.prototype.hasOwnProperty.call(x,_)},R.p="/",R.oe=function(x){throw console.error(x),x};var S=R(R.s=ENTRY_MODULE);return S.default||S}var a="[\\.|\\-|\\+|\\w|/|@]+",l="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+a+").*?\\)";function d(w){return(w+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function u(w){return!isNaN(1*w)}function h(w,C,R){var S={};S[R]=[];var x=C.toString(),_=x.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return S;for(var D=_[1],k=new RegExp("(\\\\n|\\W)"+d(D)+l,"g"),M;M=k.exec(x);)M[3]!=="dll-reference"&&S[R].push(M[3]);for(k=new RegExp("\\("+d(D)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+l,"g");M=k.exec(x);)w[M[2]]||(S[R].push(M[1]),w[M[2]]=i(M[1]).m),S[M[2]]=S[M[2]]||[],S[M[2]].push(M[4]);for(var B=Object.keys(S),z=0;z<B.length;z++)for(var q=0;q<S[B[z]].length;q++)u(S[B[z]][q])&&(S[B[z]][q]=1*S[B[z]][q]);return S}function E(w){var C=Object.keys(w);return C.reduce(function(R,S){return R||w[S].length>0},!1)}function m(w,C){for(var R={main:[C]},S={main:[]},x={main:{}};E(R);)for(var _=Object.keys(R),D=0;D<_.length;D++){var k=_[D],M=R[k],B=M.pop();if(x[k]=x[k]||{},!(x[k][B]||!w[k][B])){x[k][B]=!0,S[k]=S[k]||[],S[k].push(B);for(var z=h(w,w[k][B],k),q=Object.keys(z),H=0;H<q.length;H++)R[q[H]]=R[q[H]]||[],R[q[H]]=R[q[H]].concat(z[q[H]])}}return S}r.exports=function(w,C){C=C||{};var R={main:i.m},S=C.all?{main:Object.keys(R.main)}:m(R,w),x="";Object.keys(S).filter(function(B){return B!=="main"}).forEach(function(B){for(var z=0;S[B][z];)z++;S[B].push(z),R[B][z]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",x=x+"var "+B+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(z))+")({"+S[B].map(function(q){return""+JSON.stringify(q)+": "+R[B][q].toString()}).join(",")+`});
`}),x=x+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(w))+")({"+S.main.map(function(B){return""+JSON.stringify(B)+": "+R.main[B].toString()}).join(",")+"}))(self);";var _=new window.Blob([x],{type:"text/javascript"});if(C.bare)return _;var D=window.URL||window.webkitURL||window.mozURL||window.msURL,k=D.createObjectURL(_),M=new window.Worker(k);return M.objectURL=k,M}},"./src/crypt/decrypter.js":function(r,n,i){i.r(n);var s=function(){function x(D,k){this.subtle=D,this.aesIV=k}var _=x.prototype;return _.decrypt=function(k,M){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},M,k)},x}(),a=function(){function x(D,k){this.subtle=D,this.key=k}var _=x.prototype;return _.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},x}(),l=a;function d(x){var _=x.byteLength,D=_&&new DataView(x).getUint8(_-1);return D?x.slice(0,_-D):x}var u=function(){function x(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var _=x.prototype;return _.uint8ArrayToUint32Array_=function(k){for(var M=new DataView(k),B=new Uint32Array(4),z=0;z<4;z++)B[z]=M.getUint32(z*4);return B},_.initTable=function(){var k=this.sBox,M=this.invSBox,B=this.subMix,z=B[0],q=B[1],H=B[2],Y=B[3],re=this.invSubMix,se=re[0],he=re[1],Te=re[2],Le=re[3],De=new Uint32Array(256),Fe=0,Ke=0,Ae=0;for(Ae=0;Ae<256;Ae++)Ae<128?De[Ae]=Ae<<1:De[Ae]=Ae<<1^283;for(Ae=0;Ae<256;Ae++){var Ge=Ke^Ke<<1^Ke<<2^Ke<<3^Ke<<4;Ge=Ge>>>8^Ge&255^99,k[Fe]=Ge,M[Ge]=Fe;var ee=De[Fe],oe=De[ee],ve=De[oe],ge=De[Ge]*257^Ge*16843008;z[Fe]=ge<<24|ge>>>8,q[Fe]=ge<<16|ge>>>16,H[Fe]=ge<<8|ge>>>24,Y[Fe]=ge,ge=ve*16843009^oe*65537^ee*257^Fe*16843008,se[Ge]=ge<<24|ge>>>8,he[Ge]=ge<<16|ge>>>16,Te[Ge]=ge<<8|ge>>>24,Le[Ge]=ge,Fe?(Fe=ee^De[De[De[ve^ee]]],Ke^=De[De[Ke]]):Fe=Ke=1}},_.expandKey=function(k){for(var M=this.uint8ArrayToUint32Array_(k),B=!0,z=0;z<M.length&&B;)B=M[z]===this.key[z],z++;if(!B){this.key=M;var q=this.keySize=M.length;if(q!==4&&q!==6&&q!==8)throw new Error("Invalid aes key size="+q);var H=this.ksRows=(q+6+1)*4,Y,re,se=this.keySchedule=new Uint32Array(H),he=this.invKeySchedule=new Uint32Array(H),Te=this.sBox,Le=this.rcon,De=this.invSubMix,Fe=De[0],Ke=De[1],Ae=De[2],Ge=De[3],ee,oe;for(Y=0;Y<H;Y++){if(Y<q){ee=se[Y]=M[Y];continue}oe=ee,Y%q==0?(oe=oe<<8|oe>>>24,oe=Te[oe>>>24]<<24|Te[oe>>>16&255]<<16|Te[oe>>>8&255]<<8|Te[oe&255],oe^=Le[Y/q|0]<<24):q>6&&Y%q==4&&(oe=Te[oe>>>24]<<24|Te[oe>>>16&255]<<16|Te[oe>>>8&255]<<8|Te[oe&255]),se[Y]=ee=(se[Y-q]^oe)>>>0}for(re=0;re<H;re++)Y=H-re,re&3?oe=se[Y]:oe=se[Y-4],re<4||Y<=4?he[re]=oe:he[re]=Fe[Te[oe>>>24]]^Ke[Te[oe>>>16&255]]^Ae[Te[oe>>>8&255]]^Ge[Te[oe&255]],he[re]=he[re]>>>0}},_.networkToHostOrderSwap=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},_.decrypt=function(k,M,B,z){for(var q=this.keySize+6,H=this.invKeySchedule,Y=this.invSBox,re=this.invSubMix,se=re[0],he=re[1],Te=re[2],Le=re[3],De=this.uint8ArrayToUint32Array_(B),Fe=De[0],Ke=De[1],Ae=De[2],Ge=De[3],ee=new Int32Array(k),oe=new Int32Array(ee.length),ve,ge,Ue,Je,Oe,Ze,et,Rt,or,Ut,st,Bt,ct,Zr,Ct=this.networkToHostOrderSwap;M<ee.length;){for(or=Ct(ee[M]),Ut=Ct(ee[M+1]),st=Ct(ee[M+2]),Bt=Ct(ee[M+3]),Oe=or^H[0],Ze=Bt^H[1],et=st^H[2],Rt=Ut^H[3],ct=4,Zr=1;Zr<q;Zr++)ve=se[Oe>>>24]^he[Ze>>16&255]^Te[et>>8&255]^Le[Rt&255]^H[ct],ge=se[Ze>>>24]^he[et>>16&255]^Te[Rt>>8&255]^Le[Oe&255]^H[ct+1],Ue=se[et>>>24]^he[Rt>>16&255]^Te[Oe>>8&255]^Le[Ze&255]^H[ct+2],Je=se[Rt>>>24]^he[Oe>>16&255]^Te[Ze>>8&255]^Le[et&255]^H[ct+3],Oe=ve,Ze=ge,et=Ue,Rt=Je,ct=ct+4;ve=Y[Oe>>>24]<<24^Y[Ze>>16&255]<<16^Y[et>>8&255]<<8^Y[Rt&255]^H[ct],ge=Y[Ze>>>24]<<24^Y[et>>16&255]<<16^Y[Rt>>8&255]<<8^Y[Oe&255]^H[ct+1],Ue=Y[et>>>24]<<24^Y[Rt>>16&255]<<16^Y[Oe>>8&255]<<8^Y[Ze&255]^H[ct+2],Je=Y[Rt>>>24]<<24^Y[Oe>>16&255]<<16^Y[Ze>>8&255]<<8^Y[et&255]^H[ct+3],ct=ct+3,oe[M]=Ct(ve^Fe),oe[M+1]=Ct(Je^Ke),oe[M+2]=Ct(Ue^Ae),oe[M+3]=Ct(ge^Ge),Fe=or,Ke=Ut,Ae=st,Ge=Bt,M=M+4}return z?d(oe.buffer):oe.buffer},_.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},x}(),h=u,E=i("./src/errors.ts"),m=i("./src/utils/logger.js"),w=i("./src/events.js"),C=i("./src/utils/get-self-scope.js"),R=Object(C.getSelfScope)(),S=function(){function x(D,k,M){var B=M===void 0?{}:M,z=B.removePKCS7Padding,q=z===void 0?!0:z;if(this.logEnabled=!0,this.observer=D,this.config=k,this.removePKCS7Padding=q,q)try{var H=R.crypto;H&&(this.subtle=H.subtle||H.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}var _=x.prototype;return _.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},_.decrypt=function(k,M,B,z){var q=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(m.logger.log("JS AES decrypt"),this.logEnabled=!1);var H=this.decryptor;H||(this.decryptor=H=new h),H.expandKey(M),z(H.decrypt(k,0,B,this.removePKCS7Padding))}else{this.logEnabled&&(m.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var Y=this.subtle;this.key!==M&&(this.key=M,this.fastAesKey=new l(Y,M)),this.fastAesKey.expandKey().then(function(re){var se=new s(Y,B);se.decrypt(k,re).catch(function(he){q.onWebCryptoError(he,k,M,B,z)}).then(function(he){z(he)})}).catch(function(re){q.onWebCryptoError(re,k,M,B,z)})}},_.onWebCryptoError=function(k,M,B,z,q){this.config.enableSoftwareAES?(m.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(M,B,z,q)):(m.logger.error("decrypting error : "+k.message),this.observer.trigger(w.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:k.message}))},_.destroy=function(){var k=this.decryptor;k&&(k.destroy(),this.decryptor=void 0)},x}();n.default=S},"./src/demux/demuxer-inline.js":function(r,n,i){i.r(n);var s=i("./src/events.js"),a=i("./src/errors.ts"),l=i("./src/crypt/decrypter.js"),d=i("./src/polyfills/number.js"),u=i("./src/utils/logger.js"),h=i("./src/utils/get-self-scope.js");function E($,K,U,I){var O,F,V,j,W,Q=navigator.userAgent.toLowerCase(),te=I,ne=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(O=((K[U+2]&192)>>>6)+1,F=(K[U+2]&60)>>>2,F>ne.length-1){$.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+F});return}return j=(K[U+2]&1)<<2,j|=(K[U+3]&192)>>>6,u.logger.log("manifest codec:"+I+",ADTS data:type:"+O+",sampleingIndex:"+F+"["+ne[F]+"Hz],channelConfig:"+j),/firefox/i.test(Q)?F>=6?(O=5,W=new Array(4),V=F-3):(O=2,W=new Array(2),V=F):Q.indexOf("android")!==-1?(O=2,W=new Array(2),V=F):(O=5,W=new Array(4),I&&(I.indexOf("mp4a.40.29")!==-1||I.indexOf("mp4a.40.5")!==-1)||!I&&F>=6?V=F-3:((I&&I.indexOf("mp4a.40.2")!==-1&&(F>=6&&j===1||/vivaldi/i.test(Q))||!I&&j===1)&&(O=2,W=new Array(2)),V=F)),W[0]=O<<3,W[0]|=(F&14)>>1,W[1]|=(F&1)<<7,W[1]|=j<<3,O===5&&(W[1]|=(V&14)>>1,W[2]=(V&1)<<7,W[2]|=2<<2,W[3]=0),{config:W,samplerate:ne[F],channelCount:j,codec:"mp4a.40."+O,manifestCodec:te}}function m($,K){return $[K]===255&&($[K+1]&246)==240}function w($,K){return $[K+1]&1?7:9}function C($,K){return($[K+3]&3)<<11|$[K+4]<<3|($[K+5]&224)>>>5}function R($,K){return!!(K+1<$.length&&m($,K))}function S($,K){if(R($,K)){var U=w($,K);if(K+U>=$.length)return!1;var I=C($,K);if(I<=U)return!1;var O=K+I;if(O===$.length||O+1<$.length&&m($,O))return!0}return!1}function x($,K,U,I,O){if(!$.samplerate){var F=E(K,U,I,O);$.config=F.config,$.samplerate=F.samplerate,$.channelCount=F.channelCount,$.codec=F.codec,$.manifestCodec=F.manifestCodec,u.logger.log("parsed codec:"+$.codec+",rate:"+F.samplerate+",nb channel:"+F.channelCount)}}function _($){return 1024*9e4/$}function D($,K,U,I,O){var F,V,j,W=$.length;if(F=w($,K),V=C($,K),V-=F,V>0&&K+F+V<=W)return j=U+I*O,{headerLength:F,frameLength:V,stamp:j}}function k($,K,U,I,O){var F=_($.samplerate),V=D(K,U,I,O,F);if(V){var j=V.stamp,W=V.headerLength,Q=V.frameLength,te={unit:K.subarray(U+W,U+W+Q),pts:j,dts:j};return $.samples.push(te),{sample:te,length:Q+W}}}var M=i("./src/demux/id3.js"),B=function(){function $(U,I,O){this.observer=U,this.config=O,this.remuxer=I}var K=$.prototype;return K.resetInitSegment=function(I,O,F,V){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:O,duration:V,inputTimeScale:9e4}},K.resetTimeStamp=function(){},$.probe=function(I){if(!I)return!1;for(var O=M.default.getID3Data(I,0)||[],F=O.length,V=I.length;F<V;F++)if(S(I,F))return u.logger.log("ADTS sync word found !"),!0;return!1},K.append=function(I,O,F,V){for(var j=this._audioTrack,W=M.default.getID3Data(I,0)||[],Q=M.default.getTimeStamp(W),te=Object(d.isFiniteNumber)(Q)?Q*90:O*9e4,ne=0,Z=te,ce=I.length,le=W.length,me=[{pts:Z,dts:Z,data:W}];le<ce-1;)if(R(I,le)&&le+5<ce){x(j,this.observer,I,le,j.manifestCodec);var ue=k(j,I,le,te,ne);if(ue)le+=ue.length,Z=ue.sample.pts,ne++;else{u.logger.log("Unable to parse AAC frame");break}}else M.default.isHeader(I,le)?(W=M.default.getID3Data(I,le),me.push({pts:Z,dts:Z,data:W}),le+=W.length):le++;this.remuxer.remux(j,{samples:[]},{samples:me,inputTimeScale:9e4},{samples:[]},O,F,V)},K.destroy=function(){},$}(),z=B,q=i("./src/demux/mp4demuxer.js"),H={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(K,U,I,O,F){if(!(I+24>U.length)){var V=this.parseHeader(U,I);if(V&&I+V.frameLength<=U.length){var j=V.samplesPerFrame*9e4/V.sampleRate,W=O+F*j,Q={unit:U.subarray(I,I+V.frameLength),pts:W,dts:W};return K.config=[],K.channelCount=V.channelCount,K.samplerate=V.sampleRate,K.samples.push(Q),{sample:Q,length:V.frameLength}}}},parseHeader:function(K,U){var I=K[U+1]>>3&3,O=K[U+1]>>1&3,F=K[U+2]>>4&15,V=K[U+2]>>2&3,j=K[U+2]>>1&1;if(I!==1&&F!==0&&F!==15&&V!==3){var W=I===3?3-O:O===3?3:4,Q=H.BitratesMap[W*14+F-1]*1e3,te=I===3?0:I===2?1:2,ne=H.SamplingRateMap[te*3+V],Z=K[U+3]>>6==3?1:2,ce=H.SamplesCoefficients[I][O],le=H.BytesInSlot[O],me=ce*8*le,ue=parseInt(ce*Q/ne+j,10)*le;return{sampleRate:ne,channelCount:Z,frameLength:ue,samplesPerFrame:me}}},isHeaderPattern:function(K,U){return K[U]===255&&(K[U+1]&224)==224&&(K[U+1]&6)!=0},isHeader:function(K,U){return!!(U+1<K.length&&this.isHeaderPattern(K,U))},probe:function(K,U){if(U+1<K.length&&this.isHeaderPattern(K,U)){var I=4,O=this.parseHeader(K,U),F=I;O&&O.frameLength&&(F=O.frameLength);var V=U+F;if(V===K.length||V+1<K.length&&this.isHeaderPattern(K,V))return!0}return!1}},Y=H,re=function(){function $(U){this.data=U,this.bytesAvailable=U.byteLength,this.word=0,this.bitsAvailable=0}var K=$.prototype;return K.loadWord=function(){var I=this.data,O=this.bytesAvailable,F=I.byteLength-O,V=new Uint8Array(4),j=Math.min(4,O);if(j===0)throw new Error("no bytes available");V.set(I.subarray(F,F+j)),this.word=new DataView(V.buffer).getUint32(0),this.bitsAvailable=j*8,this.bytesAvailable-=j},K.skipBits=function(I){var O;this.bitsAvailable>I?(this.word<<=I,this.bitsAvailable-=I):(I-=this.bitsAvailable,O=I>>3,I-=O>>3,this.bytesAvailable-=O,this.loadWord(),this.word<<=I,this.bitsAvailable-=I)},K.readBits=function(I){var O=Math.min(this.bitsAvailable,I),F=this.word>>>32-O;return I>32&&u.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=O,this.bitsAvailable>0?this.word<<=O:this.bytesAvailable>0&&this.loadWord(),O=I-O,O>0&&this.bitsAvailable?F<<O|this.readBits(O):F},K.skipLZ=function(){var I;for(I=0;I<this.bitsAvailable;++I)if((this.word&2147483648>>>I)!=0)return this.word<<=I,this.bitsAvailable-=I,I;return this.loadWord(),I+this.skipLZ()},K.skipUEG=function(){this.skipBits(1+this.skipLZ())},K.skipEG=function(){this.skipBits(1+this.skipLZ())},K.readUEG=function(){var I=this.skipLZ();return this.readBits(I+1)-1},K.readEG=function(){var I=this.readUEG();return 1&I?1+I>>>1:-1*(I>>>1)},K.readBoolean=function(){return this.readBits(1)===1},K.readUByte=function(){return this.readBits(8)},K.readUShort=function(){return this.readBits(16)},K.readUInt=function(){return this.readBits(32)},K.skipScalingList=function(I){var O=8,F=8,V,j;for(V=0;V<I;V++)F!==0&&(j=this.readEG(),F=(O+j+256)%256),O=F===0?O:F},K.readSPS=function(){var I=0,O=0,F=0,V=0,j,W,Q,te,ne,Z,ce,le=this.readUByte.bind(this),me=this.readBits.bind(this),ue=this.readUEG.bind(this),be=this.readBoolean.bind(this),xe=this.skipBits.bind(this),Me=this.skipEG.bind(this),nt=this.skipUEG.bind(this),$e=this.skipScalingList.bind(this);if(le(),j=le(),me(5),xe(3),le(),nt(),j===100||j===110||j===122||j===244||j===44||j===83||j===86||j===118||j===128){var pt=ue();if(pt===3&&xe(1),nt(),nt(),xe(1),be())for(Z=pt!==3?8:12,ce=0;ce<Z;ce++)be()&&(ce<6?$e(16):$e(64))}nt();var tt=ue();if(tt===0)ue();else if(tt===1)for(xe(1),Me(),Me(),W=ue(),ce=0;ce<W;ce++)Me();nt(),xe(1),Q=ue(),te=ue(),ne=me(1),ne===0&&xe(1),xe(1),be()&&(I=ue(),O=ue(),F=ue(),V=ue());var Ye=[1,1];if(be()&&be()){var ot=le();switch(ot){case 1:Ye=[1,1];break;case 2:Ye=[12,11];break;case 3:Ye=[10,11];break;case 4:Ye=[16,11];break;case 5:Ye=[40,33];break;case 6:Ye=[24,11];break;case 7:Ye=[20,11];break;case 8:Ye=[32,11];break;case 9:Ye=[80,33];break;case 10:Ye=[18,11];break;case 11:Ye=[15,11];break;case 12:Ye=[64,33];break;case 13:Ye=[160,99];break;case 14:Ye=[4,3];break;case 15:Ye=[3,2];break;case 16:Ye=[2,1];break;case 255:{Ye=[le()<<8|le(),le()<<8|le()];break}}}return{width:Math.ceil((Q+1)*16-I*2-O*2),height:(2-ne)*(te+1)*16-(ne?2:4)*(F+V),pixelRatio:Ye}},K.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},$}(),se=re,he=function(){function $(U,I,O,F){this.decryptdata=O,this.discardEPB=F,this.decrypter=new l.default(U,I,{removePKCS7Padding:!1})}var K=$.prototype;return K.decryptBuffer=function(I,O){this.decrypter.decrypt(I,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,O)},K.decryptAacSample=function(I,O,F,V){var j=I[O].unit,W=j.subarray(16,j.length-j.length%16),Q=W.buffer.slice(W.byteOffset,W.byteOffset+W.length),te=this;this.decryptBuffer(Q,function(ne){ne=new Uint8Array(ne),j.set(ne,16),V||te.decryptAacSamples(I,O+1,F)})},K.decryptAacSamples=function(I,O,F){for(;;O++){if(O>=I.length){F();return}if(!(I[O].unit.length<32)){var V=this.decrypter.isSync();if(this.decryptAacSample(I,O,F,V),!V)return}}},K.getAvcEncryptedData=function(I){for(var O=Math.floor((I.length-48)/160)*16+16,F=new Int8Array(O),V=0,j=32;j<=I.length-16;j+=160,V+=16)F.set(I.subarray(j,j+16),V);return F},K.getAvcDecryptedUnit=function(I,O){O=new Uint8Array(O);for(var F=0,V=32;V<=I.length-16;V+=160,F+=16)I.set(O.subarray(F,F+16),V);return I},K.decryptAvcSample=function(I,O,F,V,j,W){var Q=this.discardEPB(j.data),te=this.getAvcEncryptedData(Q),ne=this;this.decryptBuffer(te.buffer,function(Z){j.data=ne.getAvcDecryptedUnit(Q,Z),W||ne.decryptAvcSamples(I,O,F+1,V)})},K.decryptAvcSamples=function(I,O,F,V){for(;;O++,F=0){if(O>=I.length){V();return}for(var j=I[O].units;!(F>=j.length);F++){var W=j[F];if(!(W.data.length<=48||W.type!==1&&W.type!==5)){var Q=this.decrypter.isSync();if(this.decryptAvcSample(I,O,F,V,W,Q),!Q)return}}}},$}(),Te=he,Le={video:1,audio:2,id3:3,text:4},De=function(){function $(U,I,O,F){this.observer=U,this.config=O,this.typeSupported=F,this.remuxer=I,this.sampleAes=null,this.pmtUnknownTypes={}}var K=$.prototype;return K.setDecryptData=function(I){I!=null&&I.key!=null&&I.method==="SAMPLE-AES"?this.sampleAes=new Te(this.observer,this.config,I,this.discardEPB):this.sampleAes=null},$.probe=function(I){var O=$._syncOffset(I);return O<0?!1:(O&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+O+", junk ahead ?"),!0)},$._syncOffset=function(I){for(var O=Math.min(1e3,I.length-3*188),F=0;F<O;){if(I[F]===71&&I[F+188]===71&&I[F+2*188]===71)return F;F++}return-1},$.createTrack=function(I,O){return{container:I==="video"||I==="audio"?"video/mp2t":void 0,type:I,id:Le[I],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:I==="video"?0:void 0,isAAC:I==="audio"?!0:void 0,duration:I==="audio"?O:void 0}},K.resetInitSegment=function(I,O,F,V){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=$.createTrack("video",V),this._audioTrack=$.createTrack("audio",V),this._id3Track=$.createTrack("id3",V),this._txtTrack=$.createTrack("text",V),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=O,this.videoCodec=F,this._duration=V},K.resetTimeStamp=function(){},K.append=function(I,O,F,V){var j,W=I.length,Q,te,ne,Z,ce,le=!1;this.pmtUnknownTypes={},this.contiguous=F;var me=this.pmtParsed,ue=this._avcTrack,be=this._audioTrack,xe=this._id3Track,Me=ue.pid,nt=be.pid,$e=xe.pid,pt=this._pmtId,tt=ue.pesData,Ye=be.pesData,ot=xe.pesData,ft=this._parsePAT,Kt=this._parsePMT.bind(this),Nt=this._parsePES,gt=this._parseAVCPES.bind(this),ar=this._parseAACPES.bind(this),Mt=this._parseMPEGPES.bind(this),gr=this._parseID3PES.bind(this),kt=$._syncOffset(I);for(W-=(W+kt)%188,j=kt;j<W;j+=188)if(I[j]===71){if(Q=!!(I[j+1]&64),te=((I[j+1]&31)<<8)+I[j+2],ne=(I[j+3]&48)>>4,ne>1){if(Z=j+5+I[j+4],Z===j+188)continue}else Z=j+4;switch(te){case Me:Q&&(tt&&(ce=Nt(tt))&&gt(ce,!1),tt={data:[],size:0}),tt&&(tt.data.push(I.subarray(Z,j+188)),tt.size+=j+188-Z);break;case nt:Q&&(Ye&&(ce=Nt(Ye))&&(be.isAAC?ar(ce):Mt(ce)),Ye={data:[],size:0}),Ye&&(Ye.data.push(I.subarray(Z,j+188)),Ye.size+=j+188-Z);break;case $e:Q&&(ot&&(ce=Nt(ot))&&gr(ce),ot={data:[],size:0}),ot&&(ot.data.push(I.subarray(Z,j+188)),ot.size+=j+188-Z);break;case 0:Q&&(Z+=I[Z]+1),pt=this._pmtId=ft(I,Z);break;case pt:Q&&(Z+=I[Z]+1);var mt=Kt(I,Z,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);Me=mt.avc,Me>0&&(ue.pid=Me),nt=mt.audio,nt>0&&(be.pid=nt,be.isAAC=mt.isAAC),$e=mt.id3,$e>0&&(xe.pid=$e),le&&!me&&(u.logger.log("reparse from beginning"),le=!1,j=kt-188),me=this.pmtParsed=!0;break;case 17:case 8191:break;default:le=!0;break}}else this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});tt&&(ce=Nt(tt))?(gt(ce,!0),ue.pesData=null):ue.pesData=tt,Ye&&(ce=Nt(Ye))?(be.isAAC?ar(ce):Mt(ce),be.pesData=null):(Ye&&Ye.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),be.pesData=Ye),ot&&(ce=Nt(ot))?(gr(ce),xe.pesData=null):xe.pesData=ot,this.sampleAes==null?this.remuxer.remux(be,ue,xe,this._txtTrack,O,F,V):this.decryptAndRemux(be,ue,xe,this._txtTrack,O,F,V)},K.decryptAndRemux=function(I,O,F,V,j,W,Q){if(I.samples&&I.isAAC){var te=this;this.sampleAes.decryptAacSamples(I.samples,0,function(){te.decryptAndRemuxAvc(I,O,F,V,j,W,Q)})}else this.decryptAndRemuxAvc(I,O,F,V,j,W,Q)},K.decryptAndRemuxAvc=function(I,O,F,V,j,W,Q){if(O.samples){var te=this;this.sampleAes.decryptAvcSamples(O.samples,0,0,function(){te.remuxer.remux(I,O,F,V,j,W,Q)})}else this.remuxer.remux(I,O,F,V,j,W,Q)},K.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},K._parsePAT=function(I,O){return(I[O+10]&31)<<8|I[O+11]},K._trackUnknownPmt=function(I,O,F){var V=this.pmtUnknownTypes[I]||0;return V===0&&(this.pmtUnknownTypes[I]=0,O.call(u.logger,F)),this.pmtUnknownTypes[I]++,V},K._parsePMT=function(I,O,F,V){var j,W,Q,te,ne={audio:-1,avc:-1,id3:-1,isAAC:!0};for(j=(I[O+1]&15)<<8|I[O+2],W=O+3+j-4,Q=(I[O+10]&15)<<8|I[O+11],O+=12+Q;O<W;){switch(te=(I[O+1]&31)<<8|I[O+2],I[O]){case 207:if(!V){this._trackUnknownPmt(I[O],u.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:ne.audio===-1&&(ne.audio=te);break;case 21:ne.id3===-1&&(ne.id3=te);break;case 219:if(!V){this._trackUnknownPmt(I[O],u.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:ne.avc===-1&&(ne.avc=te);break;case 3:case 4:F?ne.audio===-1&&(ne.audio=te,ne.isAAC=!1):this._trackUnknownPmt(I[O],u.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(I[O],u.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(I[O],u.logger.log,"Unknown stream type:"+I[O]);break}O+=((I[O+3]&15)<<8|I[O+4])+5}return ne},K._parsePES=function(I){var O=0,F,V,j,W,Q,te,ne,Z,ce,le=I.data;if(!I||I.size===0)return null;for(;le[0].length<19&&le.length>1;){var me=new Uint8Array(le[0].length+le[1].length);me.set(le[0]),me.set(le[1],le[0].length),le[0]=me,le.splice(1,1)}if(F=le[0],j=(F[0]<<16)+(F[1]<<8)+F[2],j===1){if(W=(F[4]<<8)+F[5],W&&W>I.size-6||(V=F[7],V&192&&(ne=(F[9]&14)*536870912+(F[10]&255)*4194304+(F[11]&254)*16384+(F[12]&255)*128+(F[13]&254)/2,V&64?(Z=(F[14]&14)*536870912+(F[15]&255)*4194304+(F[16]&254)*16384+(F[17]&255)*128+(F[18]&254)/2,ne-Z>60*9e4&&(u.logger.warn(Math.round((ne-Z)/9e4)+"s delta between PTS and DTS, align them"),ne=Z)):Z=ne),Q=F[8],ce=Q+9,I.size<=ce))return null;I.size-=ce,te=new Uint8Array(I.size);for(var ue=0,be=le.length;ue<be;ue++){F=le[ue];var xe=F.byteLength;if(ce)if(ce>xe){ce-=xe;continue}else F=F.subarray(ce),xe-=ce,ce=0;te.set(F,O),O+=xe}return W&&(W-=Q+3),{data:te,pts:ne,dts:Z,len:W}}else return null},K.pushAccesUnit=function(I,O){if(I.units.length&&I.frame){var F=O.samples,V=F.length;if(isNaN(I.pts))if(V){var j=F[V-1];I.pts=j.pts,I.dts=j.dts}else{O.dropped++;return}!this.config.forceKeyFrameOnDiscontinuity||I.key===!0||O.sps&&(V||this.contiguous)?(I.id=V,F.push(I)):O.dropped++}I.debug.length&&u.logger.log(I.pts+"/"+I.dts+":"+I.debug)},K._parseAVCPES=function(I,O){var F=this,V=this._avcTrack,j=this._parseAVCNALu(I.data),W,Q=this.avcSample,te,ne=!1,Z,ce=this.pushAccesUnit.bind(this),le=function(ue,be,xe,Me){return{key:ue,pts:be,dts:xe,units:[],debug:Me}};I.data=null,Q&&j.length&&!V.audFound&&(ce(Q,V),Q=this.avcSample=le(!1,I.pts,I.dts,"")),j.forEach(function(me){switch(me.type){case 1:te=!0,Q||(Q=F.avcSample=le(!0,I.pts,I.dts,"")),Q.frame=!0;var ue=me.data;if(ne&&ue.length>4){var be=new se(ue).readSliceType();(be===2||be===4||be===7||be===9)&&(Q.key=!0)}break;case 5:te=!0,Q||(Q=F.avcSample=le(!0,I.pts,I.dts,"")),Q.key=!0,Q.frame=!0;break;case 6:te=!0,W=new se(F.discardEPB(me.data)),W.readUByte();for(var xe=0,Me=0,nt=!1,$e=0;!nt&&W.bytesAvailable>1;){xe=0;do $e=W.readUByte(),xe+=$e;while($e===255);Me=0;do $e=W.readUByte(),Me+=$e;while($e===255);if(xe===4&&W.bytesAvailable!==0){nt=!0;var pt=W.readUByte();if(pt===181){var tt=W.readUShort();if(tt===49){var Ye=W.readUInt();if(Ye===1195456820){var ot=W.readUByte();if(ot===3){var ft=W.readUByte(),Kt=W.readUByte(),Nt=31&ft,gt=[ft,Kt];for(Z=0;Z<Nt;Z++)gt.push(W.readUByte()),gt.push(W.readUByte()),gt.push(W.readUByte());F._insertSampleInOrder(F._txtTrack.samples,{type:3,pts:I.pts,bytes:gt})}}}}}else if(xe===5&&W.bytesAvailable!==0){if(nt=!0,Me>16){var ar=[];for(Z=0;Z<16;Z++)ar.push(W.readUByte().toString(16)),(Z===3||Z===5||Z===7||Z===9)&&ar.push("-");var Mt=Me-16,gr=new Uint8Array(Mt);for(Z=0;Z<Mt;Z++)gr[Z]=W.readUByte();F._insertSampleInOrder(F._txtTrack.samples,{pts:I.pts,payloadType:xe,uuid:ar.join(""),userDataBytes:gr,userData:Object(M.utf8ArrayToStr)(gr.buffer)})}}else if(Me<W.bytesAvailable)for(Z=0;Z<Me;Z++)W.readUByte()}break;case 7:if(te=!0,ne=!0,!V.sps){W=new se(me.data);var kt=W.readSPS();V.width=kt.width,V.height=kt.height,V.pixelRatio=kt.pixelRatio,V.sps=[me.data],V.duration=F._duration;var mt=me.data.subarray(1,4),en="avc1.";for(Z=0;Z<3;Z++){var tn=mt[Z].toString(16);tn.length<2&&(tn="0"+tn),en+=tn}V.codec=en}break;case 8:te=!0,V.pps||(V.pps=[me.data]);break;case 9:te=!1,V.audFound=!0,Q&&ce(Q,V),Q=F.avcSample=le(!1,I.pts,I.dts,"");break;case 12:te=!1;break;default:te=!1,Q&&(Q.debug+="unknown NAL "+me.type+" ");break}if(Q&&te){var br=Q.units;br.push(me)}}),O&&Q&&(ce(Q,V),this.avcSample=null)},K._insertSampleInOrder=function(I,O){var F=I.length;if(F>0){if(O.pts>=I[F-1].pts)I.push(O);else for(var V=F-1;V>=0;V--)if(O.pts<I[V].pts){I.splice(V,0,O);break}}else I.push(O)},K._getLastNalUnit=function(){var I=this.avcSample,O;if(!I||I.units.length===0){var F=this._avcTrack,V=F.samples;I=V[V.length-1]}if(I){var j=I.units;O=j[j.length-1]}return O},K._parseAVCNALu=function(I){var O=0,F=I.byteLength,V,j,W=this._avcTrack,Q=W.naluState||0,te=Q,ne=[],Z,ce,le=-1,me;for(Q===-1&&(le=0,me=I[0]&31,Q=0,O=1);O<F;){if(V=I[O++],!Q){Q=V?0:1;continue}if(Q===1){Q=V?0:2;continue}if(!V)Q=3;else if(V===1){if(le>=0)Z={data:I.subarray(le,O-Q-1),type:me},ne.push(Z);else{var ue=this._getLastNalUnit();if(ue&&(te&&O<=4-te&&ue.state&&(ue.data=ue.data.subarray(0,ue.data.byteLength-te)),j=O-Q-1,j>0)){var be=new Uint8Array(ue.data.byteLength+j);be.set(ue.data,0),be.set(I.subarray(0,j),ue.data.byteLength),ue.data=be}}O<F?(ce=I[O]&31,le=O,me=ce,Q=0):Q=-1}else Q=0}if(le>=0&&Q>=0&&(Z={data:I.subarray(le,F),type:me,state:Q},ne.push(Z)),ne.length===0){var xe=this._getLastNalUnit();if(xe){var Me=new Uint8Array(xe.data.byteLength+I.byteLength);Me.set(xe.data,0),Me.set(I,xe.data.byteLength),xe.data=Me}}return W.naluState=Q,ne},K.discardEPB=function(I){for(var O=I.byteLength,F=[],V=1,j,W;V<O-2;)I[V]===0&&I[V+1]===0&&I[V+2]===3?(F.push(V+2),V+=2):V++;if(F.length===0)return I;j=O-F.length,W=new Uint8Array(j);var Q=0;for(V=0;V<j;Q++,V++)Q===F[0]&&(Q++,F.shift()),W[V]=I[Q];return W},K._parseAACPES=function(I){var O=this._audioTrack,F=I.data,V=I.pts,j=0,W=this.aacOverFlow,Q=this.aacLastPTS,te,ne,Z,ce,le;if(W){var me=new Uint8Array(W.byteLength+F.byteLength);me.set(W,0),me.set(F,W.byteLength),F=me}for(Z=j,le=F.length;Z<le-1&&!R(F,Z);Z++);if(Z){var ue,be;if(Z<le-1?(ue="AAC PES did not start with ADTS header,offset:"+Z,be=!1):(ue="no ADTS header found in AAC PES",be=!0),u.logger.warn("parsing error:"+ue),this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:be,reason:ue}),be)return}if(x(O,this.observer,F,Z,this.audioCodec),ne=0,te=_(O.samplerate),W&&Q){var xe=Q+te;Math.abs(xe-V)>1&&(u.logger.log("AAC: align PTS for overlapping frames by "+Math.round((xe-V)/90)),V=xe)}for(;Z<le;)if(R(F,Z)){if(Z+5<le){var Me=k(O,F,Z,V,ne);if(Me){Z+=Me.length,ce=Me.sample.pts,ne++;continue}}break}else Z++;Z<le?W=F.subarray(Z,le):W=null,this.aacOverFlow=W,this.aacLastPTS=ce},K._parseMPEGPES=function(I){for(var O=I.data,F=O.length,V=0,j=0,W=I.pts;j<F;)if(Y.isHeader(O,j)){var Q=Y.appendFrame(this._audioTrack,O,j,W,V);if(Q)j+=Q.length,V++;else break}else j++},K._parseID3PES=function(I){this._id3Track.samples.push(I)},$}(),Fe=De,Ke=function(){function $(U,I,O){this.observer=U,this.config=O,this.remuxer=I}var K=$.prototype;return K.resetInitSegment=function(I,O,F,V){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:O,duration:V,inputTimeScale:9e4}},K.resetTimeStamp=function(){},$.probe=function(I){var O,F,V=M.default.getID3Data(I,0);if(V&&M.default.getTimeStamp(V)!==void 0){for(O=V.length,F=Math.min(I.length-1,O+100);O<F;O++)if(Y.probe(I,O))return u.logger.log("MPEG Audio sync word found !"),!0}return!1},K.append=function(I,O,F,V){for(var j=M.default.getID3Data(I,0)||[],W=M.default.getTimeStamp(j),Q=W!==void 0?90*W:O*9e4,te=j.length,ne=I.length,Z=0,ce=0,le=this._audioTrack,me=[{pts:Q,dts:Q,data:j}];te<ne;)if(Y.isHeader(I,te)){var ue=Y.appendFrame(le,I,te,Q,Z);if(ue)te+=ue.length,ce=ue.sample.pts,Z++;else break}else M.default.isHeader(I,te)?(j=M.default.getID3Data(I,te),me.push({pts:ce,dts:ce,data:j}),te+=j.length):te++;this.remuxer.remux(le,{samples:[]},{samples:me,inputTimeScale:9e4},{samples:[]},O,F,V)},K.destroy=function(){},$}(),Ae=Ke,Ge=function(){function $(){}return $.getSilentFrame=function(U,I){switch(U){case"mp4a.40.2":if(I===1)return new Uint8Array([0,200,0,128,35,128]);if(I===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(I===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(I===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(I===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(I===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(I===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(I===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},$}(),ee=Ge,oe=Math.pow(2,32)-1,ve=function(){function $(){}return $.init=function(){$.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var U;for(U in $.types)$.types.hasOwnProperty(U)&&($.types[U]=[U.charCodeAt(0),U.charCodeAt(1),U.charCodeAt(2),U.charCodeAt(3)]);var I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);$.HDLR_TYPES={video:I,audio:O};var F=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),V=new Uint8Array([0,0,0,0,0,0,0,0]);$.STTS=$.STSC=$.STCO=V,$.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),$.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),$.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),$.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var j=new Uint8Array([105,115,111,109]),W=new Uint8Array([97,118,99,49]),Q=new Uint8Array([0,0,0,1]);$.FTYP=$.box($.types.ftyp,j,Q,j,W),$.DINF=$.box($.types.dinf,$.box($.types.dref,F))},$.box=function(U){for(var I=Array.prototype.slice.call(arguments,1),O=8,F=I.length,V=F,j;F--;)O+=I[F].byteLength;for(j=new Uint8Array(O),j[0]=O>>24&255,j[1]=O>>16&255,j[2]=O>>8&255,j[3]=O&255,j.set(U,4),F=0,O=8;F<V;F++)j.set(I[F],O),O+=I[F].byteLength;return j},$.hdlr=function(U){return $.box($.types.hdlr,$.HDLR_TYPES[U])},$.mdat=function(U){return $.box($.types.mdat,U)},$.mdhd=function(U,I){I*=U;var O=Math.floor(I/(oe+1)),F=Math.floor(I%(oe+1));return $.box($.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,U&255,O>>24,O>>16&255,O>>8&255,O&255,F>>24,F>>16&255,F>>8&255,F&255,85,196,0,0]))},$.mdia=function(U){return $.box($.types.mdia,$.mdhd(U.timescale,U.duration),$.hdlr(U.type),$.minf(U))},$.mfhd=function(U){return $.box($.types.mfhd,new Uint8Array([0,0,0,0,U>>24,U>>16&255,U>>8&255,U&255]))},$.minf=function(U){return U.type==="audio"?$.box($.types.minf,$.box($.types.smhd,$.SMHD),$.DINF,$.stbl(U)):$.box($.types.minf,$.box($.types.vmhd,$.VMHD),$.DINF,$.stbl(U))},$.moof=function(U,I,O){return $.box($.types.moof,$.mfhd(U),$.traf(O,I))},$.moov=function(U){for(var I=U.length,O=[];I--;)O[I]=$.trak(U[I]);return $.box.apply(null,[$.types.moov,$.mvhd(U[0].timescale,U[0].duration)].concat(O).concat($.mvex(U)))},$.mvex=function(U){for(var I=U.length,O=[];I--;)O[I]=$.trex(U[I]);return $.box.apply(null,[$.types.mvex].concat(O))},$.mvhd=function(U,I){I*=U;var O=Math.floor(I/(oe+1)),F=Math.floor(I%(oe+1)),V=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,U>>24&255,U>>16&255,U>>8&255,U&255,O>>24,O>>16&255,O>>8&255,O&255,F>>24,F>>16&255,F>>8&255,F&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return $.box($.types.mvhd,V)},$.sdtp=function(U){var I=U.samples||[],O=new Uint8Array(4+I.length),F,V;for(V=0;V<I.length;V++)F=I[V].flags,O[V+4]=F.dependsOn<<4|F.isDependedOn<<2|F.hasRedundancy;return $.box($.types.sdtp,O)},$.stbl=function(U){return $.box($.types.stbl,$.stsd(U),$.box($.types.stts,$.STTS),$.box($.types.stsc,$.STSC),$.box($.types.stsz,$.STSZ),$.box($.types.stco,$.STCO))},$.avc1=function(U){var I=[],O=[],F,V,j;for(F=0;F<U.sps.length;F++)V=U.sps[F],j=V.byteLength,I.push(j>>>8&255),I.push(j&255),I=I.concat(Array.prototype.slice.call(V));for(F=0;F<U.pps.length;F++)V=U.pps[F],j=V.byteLength,O.push(j>>>8&255),O.push(j&255),O=O.concat(Array.prototype.slice.call(V));var W=$.box($.types.avcC,new Uint8Array([1,I[3],I[4],I[5],252|3,224|U.sps.length].concat(I).concat([U.pps.length]).concat(O))),Q=U.width,te=U.height,ne=U.pixelRatio[0],Z=U.pixelRatio[1];return $.box($.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,Q>>8&255,Q&255,te>>8&255,te&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),W,$.box($.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),$.box($.types.pasp,new Uint8Array([ne>>24,ne>>16&255,ne>>8&255,ne&255,Z>>24,Z>>16&255,Z>>8&255,Z&255])))},$.esds=function(U){var I=U.config.length;return new Uint8Array([0,0,0,0,3,23+I,0,1,0,4,15+I,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([I]).concat(U.config).concat([6,1,2]))},$.mp4a=function(U){var I=U.samplerate;return $.box($.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,I>>8&255,I&255,0,0]),$.box($.types.esds,$.esds(U)))},$.mp3=function(U){var I=U.samplerate;return $.box($.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,U.channelCount,0,16,0,0,0,0,I>>8&255,I&255,0,0]))},$.stsd=function(U){return U.type==="audio"?!U.isAAC&&U.codec==="mp3"?$.box($.types.stsd,$.STSD,$.mp3(U)):$.box($.types.stsd,$.STSD,$.mp4a(U)):$.box($.types.stsd,$.STSD,$.avc1(U))},$.tkhd=function(U){var I=U.id,O=U.duration*U.timescale,F=U.width,V=U.height,j=Math.floor(O/(oe+1)),W=Math.floor(O%(oe+1));return $.box($.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,I>>24&255,I>>16&255,I>>8&255,I&255,0,0,0,0,j>>24,j>>16&255,j>>8&255,j&255,W>>24,W>>16&255,W>>8&255,W&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,F>>8&255,F&255,0,0,V>>8&255,V&255,0,0]))},$.traf=function(U,I){var O=$.sdtp(U),F=U.id,V=Math.floor(I/(oe+1)),j=Math.floor(I%(oe+1));return $.box($.types.traf,$.box($.types.tfhd,new Uint8Array([0,0,0,0,F>>24,F>>16&255,F>>8&255,F&255])),$.box($.types.tfdt,new Uint8Array([1,0,0,0,V>>24,V>>16&255,V>>8&255,V&255,j>>24,j>>16&255,j>>8&255,j&255])),$.trun(U,O.length+16+20+8+16+8+8),O)},$.trak=function(U){return U.duration=U.duration||4294967295,$.box($.types.trak,$.tkhd(U),$.mdia(U))},$.trex=function(U){var I=U.id;return $.box($.types.trex,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,I&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},$.trun=function(U,I){var O=U.samples||[],F=O.length,V=12+16*F,j=new Uint8Array(V),W,Q,te,ne,Z,ce;for(I+=8+V,j.set([0,0,15,1,F>>>24&255,F>>>16&255,F>>>8&255,F&255,I>>>24&255,I>>>16&255,I>>>8&255,I&255],0),W=0;W<F;W++)Q=O[W],te=Q.duration,ne=Q.size,Z=Q.flags,ce=Q.cts,j.set([te>>>24&255,te>>>16&255,te>>>8&255,te&255,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne&255,Z.isLeading<<2|Z.dependsOn,Z.isDependedOn<<6|Z.hasRedundancy<<4|Z.paddingValue<<1|Z.isNonSync,Z.degradPrio&240<<8,Z.degradPrio&15,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce&255],12+16*W);return $.box($.types.trun,j)},$.initSegment=function(U){$.types||$.init();var I=$.moov(U),O;return O=new Uint8Array($.FTYP.byteLength+I.byteLength),O.set($.FTYP),O.set(I,$.FTYP.byteLength),O},$}(),ge=ve,Ue=9e4;function Je($,K,U,I){U===void 0&&(U=1),I===void 0&&(I=!1);var O=$*K*U;return I?Math.round(O):O}function Oe($,K){return K===void 0&&(K=!1),Je($,1e3,1/Ue,K)}function Ze($,K){return K===void 0&&(K=1),Je($,Ue,1/K)}var et=Ze(10),Rt=Ze(.2),or=null,Ut=function(){function $(U,I,O,F){if(this.observer=U,this.config=I,this.typeSupported=O,this.ISGenerated=!1,or===null){var V=navigator.userAgent.match(/Chrome\/(\d+)/i);or=V?parseInt(V[1]):0}}var K=$.prototype;return K.destroy=function(){},K.resetTimeStamp=function(I){this._initPTS=this._initDTS=I},K.resetInitSegment=function(){this.ISGenerated=!1},K.getVideoStartPts=function(I){var O=!1,F=I.reduce(function(V,j){var W=j.pts-V;return W<-4294967296?(O=!0,st(V,j.pts)):W>0?V:j.pts},I[0].pts);return O&&u.logger.debug("PTS rollover detected"),F},K.remux=function(I,O,F,V,j,W,Q){if(this.ISGenerated||this.generateIS(I,O,j),this.ISGenerated){var te=I.samples.length,ne=O.samples.length,Z=j,ce=j;if(te&&ne){var le=this.getVideoStartPts(O.samples),me=st(I.samples[0].pts,le)-le,ue=me/O.inputTimeScale;Z+=Math.max(0,ue),ce+=Math.max(0,-ue)}if(te){I.timescale||(u.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(I,O,j));var be=this.remuxAudio(I,Z,W,Q);if(ne){var xe;be&&(xe=be.endPTS-be.startPTS),O.timescale||(u.logger.warn("regenerate InitSegment as video detected"),this.generateIS(I,O,j)),this.remuxVideo(O,ce,W,xe)}}else if(ne){var Me=this.remuxVideo(O,ce,W,0,Q);Me&&I.codec&&this.remuxEmptyAudio(I,Z,W,Me)}}F.samples.length&&this.remuxID3(F,j),V.samples.length&&this.remuxText(V,j),this.observer.trigger(s.default.FRAG_PARSED)},K.generateIS=function(I,O,F){var V=this.observer,j=I.samples,W=O.samples,Q=this.typeSupported,te="audio/mp4",ne={},Z={tracks:ne},ce=this._initPTS===void 0,le,me;if(ce&&(le=me=1/0),I.config&&j.length&&(I.timescale=I.samplerate,u.logger.log("audio sampling rate : "+I.samplerate),I.isAAC||(Q.mpeg?(te="audio/mpeg",I.codec=""):Q.mp3&&(I.codec="mp3")),ne.audio={container:te,codec:I.codec,initSegment:!I.isAAC&&Q.mpeg?new Uint8Array:ge.initSegment([I]),metadata:{channelCount:I.channelCount}},ce&&(le=me=j[0].pts-Math.round(I.inputTimeScale*F))),O.sps&&O.pps&&W.length){var ue=O.inputTimeScale;if(O.timescale=ue,ne.video={container:"video/mp4",codec:O.codec,initSegment:ge.initSegment([O]),metadata:{width:O.width,height:O.height}},ce){var be=this.getVideoStartPts(W),xe=Math.round(ue*F);me=Math.min(me,st(W[0].dts,be)-xe),le=Math.min(le,be-xe),this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:le})}}else ce&&ne.audio&&this.observer.trigger(s.default.INIT_PTS_FOUND,{initPTS:le});Object.keys(ne).length?(V.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,Z),this.ISGenerated=!0,ce&&(this._initPTS=le,this._initDTS=me)):V.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},K.remuxVideo=function(I,O,F,V){var j=I.timescale,W=I.samples,Q=[],te=W.length,ne=this._initPTS,Z=8,ce,le,me,ue,be,xe=Number.POSITIVE_INFINITY,Me=Number.NEGATIVE_INFINITY,nt=0,$e=!1,pt=this.nextAvcDts;if(te!==0){if(!F){var tt=O*j,Ye=W[0].pts-st(W[0].dts,W[0].pts);pt=tt-Ye}for(var ot=0;ot<te;ot++){var ft=W[ot];ft.pts=st(ft.pts-ne,pt),ft.dts=st(ft.dts-ne,pt),ft.dts>ft.pts&&(nt=Math.max(Math.min(nt,ft.pts-ft.dts),-1*Rt)),ft.dts<W[ot>0?ot-1:ot].dts&&($e=!0)}$e&&W.sort(function(Ts,No){var Ff=Ts.dts-No.dts,Uf=Ts.pts-No.pts;return Ff||Uf||Ts.id-No.id}),ue=W[0].dts,be=W[te-1].dts;var Kt=Math.round((be-ue)/(te-1));if(nt<0){if(nt<Kt*-2){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Oe(-Kt,!0)+" ms");for(var Nt=nt,gt=0;gt<te;gt++)W[gt].dts=Nt=Math.max(Nt,W[gt].pts-Kt),W[gt].pts=Math.max(Nt,W[gt].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Oe(nt,!0)+" ms to overcome this issue");for(var ar=0;ar<te;ar++)W[ar].dts=W[ar].dts+nt}ue=W[0].dts,be=W[te-1].dts}if(F){var Mt=ue-pt,gr=Mt>Kt,kt=Mt<-1;if(gr||kt){gr?u.logger.warn("AVC: "+Oe(Mt,!0)+" ms ("+Mt+"dts) hole between fragments detected, filling it"):u.logger.warn("AVC: "+Oe(-Mt,!0)+" ms ("+Mt+"dts) overlapping between fragments detected"),ue=pt;var mt=W[0].pts-Mt;W[0].dts=ue,W[0].pts=mt,u.logger.log("Video: First PTS/DTS adjusted: "+Oe(mt,!0)+"/"+Oe(ue,!0)+", delta: "+Oe(Mt,!0)+" ms")}}or&&or<75&&(ue=Math.max(0,ue));for(var en=0,tn=0,br=0;br<te;br++){for(var qt=W[br],Wr=qt.units,rn=Wr.length,fn=0,Ii=0;Ii<rn;Ii++)fn+=Wr[Ii].data.length;tn+=fn,en+=rn,qt.length=fn,qt.dts=Math.max(qt.dts,ue),qt.pts=Math.max(qt.pts,qt.dts,0),xe=Math.min(qt.pts,xe),Me=Math.max(qt.pts,Me)}be=W[te-1].dts;var dn=tn+4*en+8;try{le=new Uint8Array(dn)}catch{this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:dn,reason:"fail allocating video mdat "+dn});return}var Ri=new DataView(le.buffer);Ri.setUint32(0,dn),le.set(ge.types.mdat,4);for(var J=0;J<te;J++){for(var mr=W[J],jn=mr.units,Ci=0,nn=void 0,Do=0,Nf=jn.length;Do<Nf;Do++){var Bl=jn[Do],$l=Bl.data,Oo=Bl.data.byteLength;Ri.setUint32(Z,Oo),Z+=4,le.set($l,Z),Z+=Oo,Ci+=4+Oo}if(J<te-1)ce=W[J+1].dts-mr.dts;else{var Vl=this.config,ki=mr.dts-W[J>0?J-1:J].dts;if(Vl.stretchShortVideoTrack){var Mf=Vl.maxBufferHole,Po=Math.floor(Mf*j),Es=(V?xe+V*j:this.nextAudioPts)-mr.pts;Es>Po?(ce=Es-ki,ce<0&&(ce=ki),u.logger.log("It is approximately "+Oe(Es,!1)+" ms to the next segment; using duration "+Oe(ce,!1)+" ms for the last video frame.")):ce=ki}else ce=ki}nn=Math.round(mr.pts-mr.dts),Q.push({size:Ci,duration:ce,cts:nn,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:mr.key?2:1,isNonSync:mr.key?0:1}})}this.nextAvcDts=be+ce;var Li=I.dropped;if(I.nbNalu=0,I.dropped=0,Q.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var jl=Q[0].flags;jl.dependsOn=2,jl.isNonSync=0}I.samples=Q,me=ge.moof(I.sequenceNumber++,ue,I),I.samples=[];var Gl={data1:me,data2:le,startPTS:xe/j,endPTS:(Me+ce)/j,startDTS:ue/j,endDTS:this.nextAvcDts/j,type:"video",hasAudio:!1,hasVideo:!0,nb:Q.length,dropped:Li};return this.observer.trigger(s.default.FRAG_PARSING_DATA,Gl),Gl}},K.remuxAudio=function(I,O,F,V){var j=I.inputTimeScale,W=I.timescale,Q=j/W,te=I.isAAC?1024:1152,ne=te*Q,Z=this._initPTS,ce=!I.isAAC&&this.typeSupported.mpeg,le,me,ue,be,xe,Me,nt=ce?0:8,$e=I.samples,pt=[],tt=this.nextAudioPts;if(F|=$e.length&&tt&&(V&&Math.abs(O-tt/j)<.1||Math.abs($e[0].pts-tt-Z)<20*ne),$e.forEach(function(nn){nn.pts=nn.dts=st(nn.pts-Z,O*j)}),$e=$e.filter(function(nn){return nn.pts>=0}),$e.length!==0){if(F||(V?tt=Math.max(0,O*j):tt=$e[0].pts),I.isAAC)for(var Ye=this.config.maxAudioFramesDrift,ot=0,ft=tt;ot<$e.length;){var Kt=$e[ot],Nt=Kt.pts,gt=Nt-ft;if(gt<=-Ye*ne)F||ot>0?(u.logger.warn("Dropping 1 audio frame @ "+Oe(ft,!0)/1e3+"s due to "+Oe(gt,!0)+" ms overlap."),$e.splice(ot,1)):(u.logger.warn("Audio frame @ "+Oe(Nt,!0)/1e3+"s overlaps nextAudioPts by "+Oe(gt,!0)+" ms."),ft=Nt+ne,ot++);else if(gt>=Ye*ne&&gt<et&&ft){var ar=Math.round(gt/ne);u.logger.warn("Injecting "+ar+" audio frames @ "+Oe(ft,!0)/1e3+"s due to "+Oe(gt,!0)+" ms gap.");for(var Mt=0;Mt<ar;Mt++){var gr=Math.max(ft,0);me=ee.getSilentFrame(I.manifestCodec||I.codec,I.channelCount),me||(u.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),me=Kt.unit.subarray()),$e.splice(ot,0,{unit:me,pts:gr,dts:gr}),ft+=ne,ot++}Kt.pts=Kt.dts=ft,ft+=ne,ot++}else Kt.pts=Kt.dts=ft,ft+=ne,ot++}for(var kt=$e.length,mt=0;kt--;)mt+=$e[kt].unit.byteLength;for(var en=0,tn=$e.length;en<tn;en++){var br=$e[en],qt=br.unit,Wr=br.pts;if(Me!==void 0&&le)le.duration=Math.round((Wr-Me)/Q);else{var rn=Wr-tt,fn=0;if(F&&I.isAAC&&rn){if(rn>0&&rn<et)fn=Math.round((Wr-tt)/ne),u.logger.log(Oe(rn,!0)+" ms hole between AAC samples detected,filling it"),fn>0&&(me=ee.getSilentFrame(I.manifestCodec||I.codec,I.channelCount),me||(me=qt.subarray()),mt+=fn*me.length);else if(rn<-12){u.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+Oe(tt,!0)+" ms / "+Oe(Wr,!0)+" ms / "+Oe(-rn,!0)+" ms"),mt-=qt.byteLength;continue}Wr=tt}if(xe=Wr,mt>0){mt+=nt;try{ue=new Uint8Array(mt)}catch{this.observer.trigger(s.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:mt,reason:"fail allocating audio mdat "+mt});return}if(!ce){var Ii=new DataView(ue.buffer);Ii.setUint32(0,mt),ue.set(ge.types.mdat,4)}}else return;for(var dn=0;dn<fn;dn++)me=ee.getSilentFrame(I.manifestCodec||I.codec,I.channelCount),me||(u.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),me=qt.subarray()),ue.set(me,nt),nt+=me.byteLength,le={size:me.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},pt.push(le)}ue.set(qt,nt);var Ri=qt.byteLength;nt+=Ri,le={size:Ri,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},pt.push(le),Me=Wr}var J=0;if(kt=pt.length,kt>=2&&(J=pt[kt-2].duration,le.duration=J),kt){this.nextAudioPts=tt=Me+Q*J,I.samples=pt,ce?be=new Uint8Array:be=ge.moof(I.sequenceNumber++,xe/Q,I),I.samples=[];var mr=xe/j,jn=tt/j,Ci={data1:be,data2:ue,startPTS:mr,endPTS:jn,startDTS:mr,endDTS:jn,type:"audio",hasAudio:!0,hasVideo:!1,nb:kt};return this.observer.trigger(s.default.FRAG_PARSING_DATA,Ci),Ci}return null}},K.remuxEmptyAudio=function(I,O,F,V){var j=I.inputTimeScale,W=I.samplerate?I.samplerate:j,Q=j/W,te=this.nextAudioPts,ne=(te!==void 0?te:V.startDTS*j)+this._initDTS,Z=V.endDTS*j+this._initDTS,ce=1024,le=Q*ce,me=Math.ceil((Z-ne)/le),ue=ee.getSilentFrame(I.manifestCodec||I.codec,I.channelCount);if(u.logger.warn("remux empty Audio"),!ue){u.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var be=[],xe=0;xe<me;xe++){var Me=ne+xe*le;be.push({unit:ue,pts:Me,dts:Me})}I.samples=be,this.remuxAudio(I,O,F)},K.remuxID3=function(I,O){var F=I.samples.length;if(!!F){for(var V=I.inputTimeScale,j=this._initPTS,W=this._initDTS,Q=0;Q<F;Q++){var te=I.samples[Q];te.pts=st(te.pts-j,O*V)/V,te.dts=st(te.dts-W,O*V)/V}this.observer.trigger(s.default.FRAG_PARSING_METADATA,{samples:I.samples}),I.samples=[]}},K.remuxText=function(I,O){var F=I.samples.length,V=I.inputTimeScale,j=this._initPTS;if(F){for(var W=0;W<F;W++){var Q=I.samples[W];Q.pts=st(Q.pts-j,O*V)/V}I.samples.sort(function(te,ne){return te.pts-ne.pts}),this.observer.trigger(s.default.FRAG_PARSING_USERDATA,{samples:I.samples})}I.samples=[]},$}();function st($,K){var U;if(K===void 0)return $;for(K<$?U=-8589934592:U=8589934592;Math.abs($-K)>4294967296;)$+=U;return $}var Bt=Ut,ct=function(){function $(U){this.observer=U}var K=$.prototype;return K.destroy=function(){},K.resetTimeStamp=function(){},K.resetInitSegment=function(){},K.remux=function(I,O,F,V,j,W,Q,te){var ne=this.observer,Z="";I&&(Z+="audio"),O&&(Z+="video"),ne.trigger(s.default.FRAG_PARSING_DATA,{data1:te,startPTS:j,startDTS:j,type:Z,hasAudio:!!I,hasVideo:!!O,nb:1,dropped:0}),ne.trigger(s.default.FRAG_PARSED)},$}(),Zr=ct,Ct=Object(h.getSelfScope)(),xt;try{xt=Ct.performance.now.bind(Ct.performance)}catch{u.logger.debug("Unable to use Performance API on this environment"),xt=Ct.Date.now}var bn=function(){function $(U,I,O,F){this.observer=U,this.typeSupported=I,this.config=O,this.vendor=F}var K=$.prototype;return K.destroy=function(){var I=this.demuxer;I&&I.destroy()},K.push=function(I,O,F,V,j,W,Q,te,ne,Z,ce,le){var me=this;if(I.byteLength>0&&O!=null&&O.key!=null&&O.method==="AES-128"){var ue=this.decrypter;ue==null&&(ue=this.decrypter=new l.default(this.observer,this.config));var be=xt();ue.decrypt(I,O.key.buffer,O.iv.buffer,function(xe){var Me=xt();me.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:be,tdecrypt:Me}}),me.pushDecrypted(new Uint8Array(xe),O,new Uint8Array(F),V,j,W,Q,te,ne,Z,ce,le)})}else this.pushDecrypted(new Uint8Array(I),O,new Uint8Array(F),V,j,W,Q,te,ne,Z,ce,le)},K.pushDecrypted=function(I,O,F,V,j,W,Q,te,ne,Z,ce,le){var me=this.demuxer,ue=this.remuxer;if(!me||Q||te){for(var be=this.observer,xe=this.typeSupported,Me=this.config,nt=[{demux:Fe,remux:Bt},{demux:q.default,remux:Zr},{demux:z,remux:Bt},{demux:Ae,remux:Bt}],$e,pt=0,tt=nt.length;pt<tt&&($e=nt[pt],!$e.demux.probe(I));pt++);if(!$e){be.trigger(s.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}(!ue||!(ue instanceof $e.remux))&&(ue=new $e.remux(be,Me,xe,this.vendor)),(!me||!(me instanceof $e.demux))&&(me=new $e.demux(be,ue,Me,xe),this.probe=$e.demux.probe),this.demuxer=me,this.remuxer=ue}(Q||te)&&(me.resetInitSegment(F,V,j,Z),ue.resetInitSegment()),Q&&(me.resetTimeStamp(le),ue.resetTimeStamp(le)),typeof me.setDecryptData=="function"&&me.setDecryptData(O),me.append(I,W,ne,ce)},$}();n.default=bn},"./src/demux/demuxer-worker.js":function(r,n,i){i.r(n);var s=i("./src/demux/demuxer-inline.js"),a=i("./src/events.js"),l=i("./src/utils/logger.js"),d=i("./node_modules/eventemitter3/index.js"),u=function(E){var m=new d.EventEmitter;m.trigger=function(R){for(var S=arguments.length,x=new Array(S>1?S-1:0),_=1;_<S;_++)x[_-1]=arguments[_];m.emit.apply(m,[R,R].concat(x))},m.off=function(R){for(var S=arguments.length,x=new Array(S>1?S-1:0),_=1;_<S;_++)x[_-1]=arguments[_];m.removeListener.apply(m,[R].concat(x))};var w=function(R,S){E.postMessage({event:R,data:S})};E.addEventListener("message",function(C){var R=C.data;switch(R.cmd){case"init":var S=JSON.parse(R.config);E.demuxer=new s.default(m,R.typeSupported,S,R.vendor),Object(l.enableLogs)(S.debug),w("init",null);break;case"demux":E.demuxer.push(R.data,R.decryptdata,R.initSegment,R.audioCodec,R.videoCodec,R.timeOffset,R.discontinuity,R.trackSwitch,R.contiguous,R.duration,R.accurateTimeOffset,R.defaultInitPTS);break}}),m.on(a.default.FRAG_DECRYPTED,w),m.on(a.default.FRAG_PARSING_INIT_SEGMENT,w),m.on(a.default.FRAG_PARSED,w),m.on(a.default.ERROR,w),m.on(a.default.FRAG_PARSING_METADATA,w),m.on(a.default.FRAG_PARSING_USERDATA,w),m.on(a.default.INIT_PTS_FOUND,w),m.on(a.default.FRAG_PARSING_DATA,function(C,R){var S=[],x={event:C,data:R};R.data1&&(x.data1=R.data1.buffer,S.push(R.data1.buffer),delete R.data1),R.data2&&(x.data2=R.data2.buffer,S.push(R.data2.buffer),delete R.data2),E.postMessage(x,S)})};n.default=u},"./src/demux/id3.js":function(r,n,i){i.r(n),i.d(n,"utf8ArrayToStr",function(){return u});var s=i("./src/utils/get-self-scope.js"),a=function(){function h(){}return h.isHeader=function(m,w){return w+10<=m.length&&m[w]===73&&m[w+1]===68&&m[w+2]===51&&m[w+3]<255&&m[w+4]<255&&m[w+6]<128&&m[w+7]<128&&m[w+8]<128&&m[w+9]<128},h.isFooter=function(m,w){return w+10<=m.length&&m[w]===51&&m[w+1]===68&&m[w+2]===73&&m[w+3]<255&&m[w+4]<255&&m[w+6]<128&&m[w+7]<128&&m[w+8]<128&&m[w+9]<128},h.getID3Data=function(m,w){for(var C=w,R=0;h.isHeader(m,w);){R+=10;var S=h._readSize(m,w+6);R+=S,h.isFooter(m,w+10)&&(R+=10),w+=R}if(R>0)return m.subarray(C,C+R)},h._readSize=function(m,w){var C=0;return C=(m[w]&127)<<21,C|=(m[w+1]&127)<<14,C|=(m[w+2]&127)<<7,C|=m[w+3]&127,C},h.getTimeStamp=function(m){for(var w=h.getID3Frames(m),C=0;C<w.length;C++){var R=w[C];if(h.isTimeStampFrame(R))return h._readTimeStamp(R)}},h.isTimeStampFrame=function(m){return m&&m.key==="PRIV"&&m.info==="com.apple.streaming.transportStreamTimestamp"},h._getFrameData=function(m){var w=String.fromCharCode(m[0],m[1],m[2],m[3]),C=h._readSize(m,4),R=10;return{type:w,size:C,data:m.subarray(R,R+C)}},h.getID3Frames=function(m){for(var w=0,C=[];h.isHeader(m,w);){var R=h._readSize(m,w+6);w+=10;for(var S=w+R;w+8<S;){var x=h._getFrameData(m.subarray(w)),_=h._decodeFrame(x);_&&C.push(_),w+=x.size+10}h.isFooter(m,w)&&(w+=10)}return C},h._decodeFrame=function(m){return m.type==="PRIV"?h._decodePrivFrame(m):m.type[0]==="W"?h._decodeURLFrame(m):h._decodeTextFrame(m)},h._readTimeStamp=function(m){if(m.data.byteLength===8){var w=new Uint8Array(m.data),C=w[3]&1,R=(w[4]<<23)+(w[5]<<15)+(w[6]<<7)+w[7];return R/=45,C&&(R+=4772185884e-2),Math.round(R)}},h._decodePrivFrame=function(m){if(!(m.size<2)){var w=h._utf8ArrayToStr(m.data,!0),C=new Uint8Array(m.data.subarray(w.length+1));return{key:m.type,info:w,data:C.buffer}}},h._decodeTextFrame=function(m){if(!(m.size<2))if(m.type==="TXXX"){var w=1,C=h._utf8ArrayToStr(m.data.subarray(w),!0);w+=C.length+1;var R=h._utf8ArrayToStr(m.data.subarray(w));return{key:m.type,info:C,data:R}}else{var S=h._utf8ArrayToStr(m.data.subarray(1));return{key:m.type,data:S}}},h._decodeURLFrame=function(m){if(m.type==="WXXX"){if(m.size<2)return;var w=1,C=h._utf8ArrayToStr(m.data.subarray(w),!0);w+=C.length+1;var R=h._utf8ArrayToStr(m.data.subarray(w));return{key:m.type,info:C,data:R}}else{var S=h._utf8ArrayToStr(m.data);return{key:m.type,data:S}}},h._utf8ArrayToStr=function(m,w){w===void 0&&(w=!1);var C=d();if(C){var R=C.decode(m);if(w){var S=R.indexOf("\0");return S!==-1?R.substring(0,S):R}return R.replace(/\0/g,"")}for(var x=m.length,_,D,k,M="",B=0;B<x;){if(_=m[B++],_===0&&w)return M;if(_===0||_===3)continue;switch(_>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:M+=String.fromCharCode(_);break;case 12:case 13:D=m[B++],M+=String.fromCharCode((_&31)<<6|D&63);break;case 14:D=m[B++],k=m[B++],M+=String.fromCharCode((_&15)<<12|(D&63)<<6|(k&63)<<0);break}}return M},h}(),l;function d(){var h=Object(s.getSelfScope)();return!l&&typeof h.TextDecoder!="undefined"&&(l=new h.TextDecoder("utf-8")),l}var u=a._utf8ArrayToStr;n.default=a},"./src/demux/mp4demuxer.js":function(r,n,i){i.r(n);var s=i("./src/utils/logger.js"),a=i("./src/events.js"),l=Math.pow(2,32)-1,d=function(){function u(E,m){this.observer=E,this.remuxer=m}var h=u.prototype;return h.resetTimeStamp=function(m){this.initPTS=m},h.resetInitSegment=function(m,w,C,R){if(m&&m.byteLength){var S=this.initData=u.parseInitSegment(m);w==null&&(w="mp4a.40.5"),C==null&&(C="avc1.42e01e");var x={};S.audio&&S.video?x.audiovideo={container:"video/mp4",codec:w+","+C,initSegment:R?m:null}:(S.audio&&(x.audio={container:"audio/mp4",codec:w,initSegment:R?m:null}),S.video&&(x.video={container:"video/mp4",codec:C,initSegment:R?m:null})),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:x})}else w&&(this.audioCodec=w),C&&(this.videoCodec=C)},u.probe=function(m){return u.findBox({data:m,start:0,end:Math.min(m.length,16384)},["moof"]).length>0},u.bin2str=function(m){return String.fromCharCode.apply(null,m)},u.readUint16=function(m,w){m.data&&(w+=m.start,m=m.data);var C=m[w]<<8|m[w+1];return C<0?65536+C:C},u.readUint32=function(m,w){m.data&&(w+=m.start,m=m.data);var C=m[w]<<24|m[w+1]<<16|m[w+2]<<8|m[w+3];return C<0?4294967296+C:C},u.writeUint32=function(m,w,C){m.data&&(w+=m.start,m=m.data),m[w]=C>>24,m[w+1]=C>>16&255,m[w+2]=C>>8&255,m[w+3]=C&255},u.findBox=function(m,w){var C=[],R,S,x,_,D,k,M;if(m.data?(k=m.start,_=m.end,m=m.data):(k=0,_=m.byteLength),!w.length)return null;for(R=k;R<_;)S=u.readUint32(m,R),x=u.bin2str(m.subarray(R+4,R+8)),M=S>1?R+S:_,x===w[0]&&(w.length===1?C.push({data:m,start:R+8,end:M}):(D=u.findBox({data:m,start:R+8,end:M},w.slice(1)),D.length&&(C=C.concat(D)))),R=M;return C},u.parseSegmentIndex=function(m){var w=u.findBox(m,["moov"])[0],C=w?w.end:null,R=0,S=u.findBox(m,["sidx"]),x;if(!S||!S[0])return null;x=[],S=S[0];var _=S.data[0];R=_===0?8:16;var D=u.readUint32(S,R);R+=4;var k=0,M=0;_===0?R+=8:R+=16,R+=2;var B=S.end+M,z=u.readUint16(S,R);R+=2;for(var q=0;q<z;q++){var H=R,Y=u.readUint32(S,H);H+=4;var re=Y&2147483647,se=(Y&2147483648)>>>31;if(se===1){console.warn("SIDX has hierarchical references (not supported)");return}var he=u.readUint32(S,H);H+=4,x.push({referenceSize:re,subsegmentDuration:he,info:{duration:he/D,start:B,end:B+re-1}}),B+=re,H+=4,R=H}return{earliestPresentationTime:k,timescale:D,version:_,referencesCount:z,references:x,moovEndOffset:C}},u.parseInitSegment=function(m){var w=[],C=u.findBox(m,["moov","trak"]);return C.forEach(function(R){var S=u.findBox(R,["tkhd"])[0];if(S){var x=S.data[S.start],_=x===0?12:20,D=u.readUint32(S,_),k=u.findBox(R,["mdia","mdhd"])[0];if(k){x=k.data[k.start],_=x===0?12:20;var M=u.readUint32(k,_),B=u.findBox(R,["mdia","hdlr"])[0];if(B){var z=u.bin2str(B.data.subarray(B.start+8,B.start+12)),q={soun:"audio",vide:"video"}[z];if(q){var H=u.findBox(R,["mdia","minf","stbl","stsd"]);if(H.length){H=H[0];var Y=u.bin2str(H.data.subarray(H.start+12,H.start+16));s.logger.log("MP4Demuxer:"+q+":"+Y+" found")}w[D]={timescale:M,type:q},w[q]={timescale:M,id:D}}}}}}),w},u.getStartDTS=function(m,w){var C,R,S;return C=u.findBox(w,["moof","traf"]),R=[].concat.apply([],C.map(function(x){return u.findBox(x,["tfhd"]).map(function(_){var D,k,M;return D=u.readUint32(_,4),k=m[D].timescale||9e4,M=u.findBox(x,["tfdt"]).map(function(B){var z,q;return z=B.data[B.start],q=u.readUint32(B,4),z===1&&(q*=Math.pow(2,32),q+=u.readUint32(B,8)),q})[0],M/k})})),S=Math.min.apply(null,R),isFinite(S)?S:0},u.offsetStartDTS=function(m,w,C){u.findBox(w,["moof","traf"]).map(function(R){return u.findBox(R,["tfhd"]).map(function(S){var x=u.readUint32(S,4),_=m[x].timescale||9e4;u.findBox(R,["tfdt"]).map(function(D){var k=D.data[D.start],M=u.readUint32(D,4);if(k===0)u.writeUint32(D,4,M-C*_);else{M*=Math.pow(2,32),M+=u.readUint32(D,8),M-=C*_,M=Math.max(M,0);var B=Math.floor(M/(l+1)),z=Math.floor(M%(l+1));u.writeUint32(D,4,B),u.writeUint32(D,8,z)}})})})},h.append=function(m,w,C,R){var S=this.initData;S||(this.resetInitSegment(m,this.audioCodec,this.videoCodec,!1),S=this.initData);var x,_=this.initPTS;if(_===void 0){var D=u.getStartDTS(S,m);this.initPTS=_=D-w,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:_})}u.offsetStartDTS(S,m,_),x=u.getStartDTS(S,m),this.remuxer.remux(S.audio,S.video,null,null,x,C,R,m)},h.destroy=function(){},u}();n.default=d},"./src/errors.ts":function(r,n,i){i.r(n),i.d(n,"ErrorTypes",function(){return s}),i.d(n,"ErrorDetails",function(){return a});var s;(function(l){l.NETWORK_ERROR="networkError",l.MEDIA_ERROR="mediaError",l.KEY_SYSTEM_ERROR="keySystemError",l.MUX_ERROR="muxError",l.OTHER_ERROR="otherError"})(s||(s={}));var a;(function(l){l.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",l.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",l.KEY_SYSTEM_NO_SESSION="keySystemNoSession",l.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",l.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",l.MANIFEST_LOAD_ERROR="manifestLoadError",l.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",l.MANIFEST_PARSING_ERROR="manifestParsingError",l.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",l.LEVEL_EMPTY_ERROR="levelEmptyError",l.LEVEL_LOAD_ERROR="levelLoadError",l.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",l.LEVEL_SWITCH_ERROR="levelSwitchError",l.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",l.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",l.FRAG_LOAD_ERROR="fragLoadError",l.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",l.FRAG_DECRYPT_ERROR="fragDecryptError",l.FRAG_PARSING_ERROR="fragParsingError",l.REMUX_ALLOC_ERROR="remuxAllocError",l.KEY_LOAD_ERROR="keyLoadError",l.KEY_LOAD_TIMEOUT="keyLoadTimeOut",l.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",l.BUFFER_APPEND_ERROR="bufferAppendError",l.BUFFER_APPENDING_ERROR="bufferAppendingError",l.BUFFER_STALLED_ERROR="bufferStalledError",l.BUFFER_FULL_ERROR="bufferFullError",l.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",l.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",l.INTERNAL_EXCEPTION="internalException"})(a||(a={}))},"./src/events.js":function(r,n,i){i.r(n);var s={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};n.default=s},"./src/hls.ts":function(r,n,i){i.r(n),i.d(n,"default",function(){return Tv});var s={};i.r(s),i.d(s,"newCue",function(){return V1});var a=i("./node_modules/url-toolkit/src/url-toolkit.js"),l=i("./src/errors.ts"),d=i("./src/polyfills/number.js"),u=i("./src/events.js"),h=i("./src/utils/logger.js"),E={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},m=function(){function T(p){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=p,this.onEvent=this.onEvent.bind(this);for(var f=arguments.length,o=new Array(f>1?f-1:0),c=1;c<f;c++)o[c-1]=arguments[c];this.handledEvents=o,this.useGenericHandler=!0,this.registerListeners()}var v=T.prototype;return v.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},v.onHandlerDestroying=function(){},v.onHandlerDestroyed=function(){},v.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},v.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(f){if(E[f])throw new Error("Forbidden event-name: "+f);this.hls.on(f,this.onEvent)},this)},v.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(f){this.hls.off(f,this.onEvent)},this)},v.onEvent=function(f,o){this.onEventGeneric(f,o)},v.onEventGeneric=function(f,o){var c=function(y,b){var A="on"+y.replace("hls","");if(typeof this[A]!="function")throw new Error("Event "+y+" has no generic handler in this "+this.constructor.name+" class (tried "+A+")");return this[A].bind(this,b)};try{c.call(this,f,o).call()}catch(g){h.logger.error("An internal error happened while handling event "+f+'. Error message: "'+g.message+'". Here is a stacktrace:',g),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:f,err:g})}},T}(),w=m,C;(function(T){T.MANIFEST="manifest",T.LEVEL="level",T.AUDIO_TRACK="audioTrack",T.SUBTITLE_TRACK="subtitleTrack"})(C||(C={}));var R;(function(T){T.MAIN="main",T.AUDIO="audio",T.SUBTITLE="subtitle"})(R||(R={}));var S=i("./src/demux/mp4demuxer.js");function x(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function _(T,v,p){return v&&x(T.prototype,v),p&&x(T,p),T}var D=function(){function T(v,p){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=v,this.reluri=p}return _(T,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(a.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),T}();function k(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function M(T,v,p){return v&&k(T.prototype,v),p&&k(T,p),T}var B;(function(T){T.AUDIO="audio",T.VIDEO="video"})(B||(B={}));var z=function(){function T(){var p;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(p={},p[B.AUDIO]=!1,p[B.VIDEO]=!1,p),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var v=T.prototype;return v.setByteRange=function(f,o){var c=f.split("@",2),g=[];c.length===1?g[0]=o?o.byteRangeEndOffset:0:g[0]=parseInt(c[1]),g[1]=parseInt(c[0])+g[0],this._byteRange=g},v.addElementaryStream=function(f){this._elementaryStreams[f]=!0},v.hasElementaryStream=function(f){return this._elementaryStreams[f]===!0},v.createInitializationVector=function(f){for(var o=new Uint8Array(16),c=12;c<16;c++)o[c]=f>>8*(15-c)&255;return o},v.setDecryptDataFromLevelKey=function(f,o){var c=f;return(f==null?void 0:f.method)&&f.uri&&!f.iv&&(c=new D(f.baseuri,f.reluri),c.method=f.method,c.iv=this.createInitializationVector(o)),c},M(T,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(f){this._url=f}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var f=this.sn;typeof f!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&h.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),f=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,f)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(d.isFiniteNumber)(this.programDateTime))return null;var f=Object(d.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+f*1e3}},{key:"encrypted",get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)}}]),T}();function q(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function H(T,v,p){return v&&q(T.prototype,v),p&&q(T,p),T}var Y=function(){function T(v){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=v,this.version=null}return H(T,[{key:"hasProgramDateTime",get:function(){return!!(this.fragments[0]&&Object(d.isFiniteNumber)(this.fragments[0].programDateTime))}}]),T}(),re=/^(\d+)x(\d+)$/,se=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,he=function(){function T(p){typeof p=="string"&&(p=T.parseAttrList(p));for(var f in p)p.hasOwnProperty(f)&&(this[f]=p[f])}var v=T.prototype;return v.decimalInteger=function(f){var o=parseInt(this[f],10);return o>Number.MAX_SAFE_INTEGER?1/0:o},v.hexadecimalInteger=function(f){if(this[f]){var o=(this[f]||"0x").slice(2);o=(o.length&1?"0":"")+o;for(var c=new Uint8Array(o.length/2),g=0;g<o.length/2;g++)c[g]=parseInt(o.slice(g*2,g*2+2),16);return c}else return null},v.hexadecimalIntegerAsNumber=function(f){var o=parseInt(this[f],16);return o>Number.MAX_SAFE_INTEGER?1/0:o},v.decimalFloatingPoint=function(f){return parseFloat(this[f])},v.enumeratedString=function(f){return this[f]},v.decimalResolution=function(f){var o=re.exec(this[f]);if(o!==null)return{width:parseInt(o[1],10),height:parseInt(o[2],10)}},T.parseAttrList=function(f){var o,c={};for(se.lastIndex=0;(o=se.exec(f))!==null;){var g=o[2],y='"';g.indexOf(y)===0&&g.lastIndexOf(y)===g.length-1&&(g=g.slice(1,-1)),c[o[1]]=g}return c},T}(),Te=he,Le={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function De(T,v){var p=Le[v];return!!p&&p[T.slice(0,4)]===!0}function Fe(T,v){return MediaSource.isTypeSupported((v||"video")+'/mp4;codecs="'+T+'"')}var Ke=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,Ae=/#EXT-X-MEDIA:(.*)/g,Ge=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),ee=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,oe=/\.(mp4|m4s|m4v|m4a)$/i,ve=function(){function T(){}return T.findGroup=function(p,f){for(var o=0;o<p.length;o++){var c=p[o];if(c.id===f)return c}},T.convertAVC1ToAVCOTI=function(p){var f=p.split("."),o;return f.length>2?(o=f.shift()+".",o+=parseInt(f.shift()).toString(16),o+=("000"+parseInt(f.shift()).toString(16)).substr(-4)):o=p,o},T.resolve=function(p,f){return a.buildAbsoluteURL(f,p,{alwaysNormalize:!0})},T.parseMasterPlaylist=function(p,f){var o=[],c={},g=!1;Ke.lastIndex=0;function y(G,X){["video","audio"].forEach(function(ie){var de=G.filter(function(ye){return De(ye,ie)});if(de.length){var _e=de.filter(function(ye){return ye.lastIndexOf("avc1",0)===0||ye.lastIndexOf("mp4a",0)===0});X[ie+"Codec"]=_e.length>0?_e[0]:de[0],G=G.filter(function(ye){return de.indexOf(ye)===-1})}}),X.unknownCodecs=G}for(var b;(b=Ke.exec(p))!=null;)if(b[1]){var A={},L=A.attrs=new Te(b[1]);A.url=T.resolve(b[2],f);var P=L.decimalResolution("RESOLUTION");P&&(A.width=P.width,A.height=P.height),A.bitrate=L.decimalInteger("AVERAGE-BANDWIDTH")||L.decimalInteger("BANDWIDTH"),A.name=L.NAME,y([].concat((L.CODECS||"").split(/[ ,]+/)),A),A.videoCodec&&A.videoCodec.indexOf("avc1")!==-1&&(A.videoCodec=T.convertAVC1ToAVCOTI(A.videoCodec)),o.push(A)}else if(b[3]){var N=new Te(b[3]);N["DATA-ID"]&&(g=!0,c[N["DATA-ID"]]=N)}return{levels:o,sessionData:g?c:null}},T.parseMasterPlaylistMedia=function(p,f,o,c){c===void 0&&(c=[]);var g,y=[],b=0;for(Ae.lastIndex=0;(g=Ae.exec(p))!==null;){var A=new Te(g[1]);if(A.TYPE===o){var L={attrs:A,id:b++,groupId:A["GROUP-ID"],instreamId:A["INSTREAM-ID"],name:A.NAME||A.LANGUAGE,type:o,default:A.DEFAULT==="YES",autoselect:A.AUTOSELECT==="YES",forced:A.FORCED==="YES",lang:A.LANGUAGE};if(A.URI&&(L.url=T.resolve(A.URI,f)),c.length){var P=T.findGroup(c,L.groupId);L.audioCodec=P?P.codec:c[0].codec}y.push(L)}}return y},T.parseLevelPlaylist=function(p,f,o,c,g){var y=0,b=0,A=new Y(f),L=0,P=null,N=new z,G,X,ie,de=null;for(Ge.lastIndex=0;(G=Ge.exec(p))!==null;){var _e=G[1];if(_e){N.duration=parseFloat(_e);var ye=(" "+G[2]).slice(1);N.title=ye||null,N.tagList.push(ye?["INF",_e,ye]:["INF",_e])}else if(G[3]){if(Object(d.isFiniteNumber)(N.duration)){var Ce=y++;N.type=c,N.start=b,ie&&(N.levelkey=ie),N.sn=Ce,N.level=o,N.cc=L,N.urlId=g,N.baseurl=f,N.relurl=(" "+G[3]).slice(1),Ue(N,P),A.fragments.push(N),P=N,b+=N.duration,N=new z}}else if(G[4]){var Ne=(" "+G[4]).slice(1);P?N.setByteRange(Ne,P):N.setByteRange(Ne)}else if(G[5])N.rawProgramDateTime=(" "+G[5]).slice(1),N.tagList.push(["PROGRAM-DATE-TIME",N.rawProgramDateTime]),de===null&&(de=A.fragments.length);else{if(G=G[0].match(ee),!G){h.logger.warn("No matches on slow regex match for level playlist!");continue}for(X=1;X<G.length&&typeof G[X]=="undefined";X++);var Qe=(" "+G[X+1]).slice(1),_t=(" "+G[X+2]).slice(1);switch(G[X]){case"#":N.tagList.push(_t?[Qe,_t]:[Qe]);break;case"PLAYLIST-TYPE":A.type=Qe.toUpperCase();break;case"MEDIA-SEQUENCE":y=A.startSN=parseInt(Qe);break;case"TARGETDURATION":A.targetduration=parseFloat(Qe);break;case"VERSION":A.version=parseInt(Qe);break;case"EXTM3U":break;case"ENDLIST":A.live=!1;break;case"DIS":L++,N.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":L=parseInt(Qe);break;case"KEY":{var Pr=Qe,Yt=new Te(Pr),In=Yt.enumeratedString("METHOD"),Re=Yt.URI,qe=Yt.hexadecimalInteger("IV"),Lt=Yt.KEYFORMAT||"identity";if(Lt==="com.apple.streamingkeydelivery"){h.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}In&&(ie=new D(f,Re),Re&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(In)>=0&&(ie.method=In,ie.key=null,ie.iv=qe));break}case"START":{var xs=new Te(Qe),_s=xs.decimalFloatingPoint("TIME-OFFSET");Object(d.isFiniteNumber)(_s)&&(A.startTimeOffset=_s);break}case"MAP":{var Fo=new Te(Qe);N.relurl=Fo.URI,Fo.BYTERANGE&&N.setByteRange(Fo.BYTERANGE),N.baseurl=f,N.level=o,N.type=c,N.sn="initSegment",A.initSegment=N,N=new z,N.rawProgramDateTime=A.initSegment.rawProgramDateTime;break}default:h.logger.warn("line parsed but not handled: "+G);break}}}return N=P,N&&!N.relurl&&(A.fragments.pop(),b-=N.duration),A.totalduration=b,A.averagetargetduration=b/A.fragments.length,A.endSN=y-1,A.startCC=A.fragments[0]?A.fragments[0].cc:0,A.endCC=L,!A.initSegment&&A.fragments.length&&A.fragments.every(function(Kl){return oe.test(Kl.relurl)})&&(h.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),N=new z,N.relurl=A.fragments[0].relurl,N.baseurl=f,N.level=o,N.type=c,N.sn="initSegment",A.initSegment=N,A.needSidxRanges=!0),de&&ge(A.fragments,de),A},T}();function ge(T,v){for(var p=T[v],f=v-1;f>=0;f--){var o=T[f];o.programDateTime=p.programDateTime-o.duration*1e3,p=o}}function Ue(T,v){T.rawProgramDateTime?T.programDateTime=Date.parse(T.rawProgramDateTime):(v==null?void 0:v.programDateTime)&&(T.programDateTime=v.endProgramDateTime),Object(d.isFiniteNumber)(T.programDateTime)||(T.programDateTime=null,T.rawProgramDateTime=null)}function Je(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Oe=window,Ze=Oe.performance,et=function(T){Je(v,T);function v(f){var o;return o=T.call(this,f,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this,o.loaders={},o}v.canHaveQualityLevels=function(o){return o!==C.AUDIO_TRACK&&o!==C.SUBTITLE_TRACK},v.mapContextToLevelType=function(o){var c=o.type;switch(c){case C.AUDIO_TRACK:return R.AUDIO;case C.SUBTITLE_TRACK:return R.SUBTITLE;default:return R.MAIN}},v.getResponseUrl=function(o,c){var g=o.url;return(g===void 0||g.indexOf("data:")===0)&&(g=c.url),g};var p=v.prototype;return p.createInternalLoader=function(o){var c=this.hls.config,g=c.pLoader,y=c.loader,b=g||y,A=new b(c);return o.loader=A,this.loaders[o.type]=A,A},p.getInternalLoader=function(o){return this.loaders[o.type]},p.resetInternalLoader=function(o){this.loaders[o]&&delete this.loaders[o]},p.destroyInternalLoaders=function(){for(var o in this.loaders){var c=this.loaders[o];c&&c.destroy(),this.resetInternalLoader(o)}},p.destroy=function(){this.destroyInternalLoaders(),T.prototype.destroy.call(this)},p.onManifestLoading=function(o){this.load({url:o.url,type:C.MANIFEST,level:0,id:null,responseType:"text"})},p.onLevelLoading=function(o){this.load({url:o.url,type:C.LEVEL,level:o.level,id:o.id,responseType:"text"})},p.onAudioTrackLoading=function(o){this.load({url:o.url,type:C.AUDIO_TRACK,level:null,id:o.id,responseType:"text"})},p.onSubtitleTrackLoading=function(o){this.load({url:o.url,type:C.SUBTITLE_TRACK,level:null,id:o.id,responseType:"text"})},p.load=function(o){var c=this.hls.config;h.logger.debug("Loading playlist of type "+o.type+", level: "+o.level+", id: "+o.id);var g=this.getInternalLoader(o);if(g){var y=g.context;if(y&&y.url===o.url)return h.logger.trace("playlist request ongoing"),!1;h.logger.warn("aborting previous loader for type: "+o.type),g.abort()}var b,A,L,P;switch(o.type){case C.MANIFEST:b=c.manifestLoadingMaxRetry,A=c.manifestLoadingTimeOut,L=c.manifestLoadingRetryDelay,P=c.manifestLoadingMaxRetryTimeout;break;case C.LEVEL:b=0,P=0,L=0,A=c.levelLoadingTimeOut;break;default:b=c.levelLoadingMaxRetry,A=c.levelLoadingTimeOut,L=c.levelLoadingRetryDelay,P=c.levelLoadingMaxRetryTimeout;break}g=this.createInternalLoader(o);var N={timeout:A,maxRetry:b,retryDelay:L,maxRetryDelay:P},G={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return h.logger.debug("Calling internal loader delegate for URL: "+o.url),g.load(o,N,G),!0},p.loadsuccess=function(o,c,g,y){if(y===void 0&&(y=null),g.isSidxRequest){this._handleSidxRequest(o,g),this._handlePlaylistLoaded(o,c,g,y);return}if(this.resetInternalLoader(g.type),typeof o.data!="string")throw new Error('expected responseType of "text" for PlaylistLoader');var b=o.data;if(c.tload=Ze.now(),b.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(o,g,"no EXTM3U delimiter",y);return}b.indexOf("#EXTINF:")>0||b.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(o,c,g,y):this._handleMasterPlaylist(o,c,g,y)},p.loaderror=function(o,c,g){g===void 0&&(g=null),this._handleNetworkError(c,g,!1,o)},p.loadtimeout=function(o,c,g){g===void 0&&(g=null),this._handleNetworkError(c,g,!0)},p._handleMasterPlaylist=function(o,c,g,y){var b=this.hls,A=o.data,L=v.getResponseUrl(o,g),P=ve.parseMasterPlaylist(A,L),N=P.levels,G=P.sessionData;if(!N.length){this._handleManifestParsingError(o,g,"no level found in manifest",y);return}var X=N.map(function(Ce){return{id:Ce.attrs.AUDIO,codec:Ce.audioCodec}}),ie=ve.parseMasterPlaylistMedia(A,L,"AUDIO",X),de=ve.parseMasterPlaylistMedia(A,L,"SUBTITLES"),_e=ve.parseMasterPlaylistMedia(A,L,"CLOSED-CAPTIONS");if(ie.length){var ye=!1;ie.forEach(function(Ce){Ce.url||(ye=!0)}),ye===!1&&N[0].audioCodec&&!N[0].attrs.AUDIO&&(h.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),ie.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}b.trigger(u.default.MANIFEST_LOADED,{levels:N,audioTracks:ie,subtitles:de,captions:_e,url:L,stats:c,networkDetails:y,sessionData:G})},p._handleTrackOrLevelPlaylist=function(o,c,g,y){var b=this.hls,A=g.id,L=g.level,P=g.type,N=v.getResponseUrl(o,g),G=Object(d.isFiniteNumber)(A)?A:0,X=Object(d.isFiniteNumber)(L)?L:G,ie=v.mapContextToLevelType(g),de=ve.parseLevelPlaylist(o.data,N,X,ie,G);if(de.tload=c.tload,!de.fragments.length){b.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:N,reason:"no fragments found in level",level:typeof g.level=="number"?g.level:void 0});return}if(P===C.MANIFEST){var _e={url:N,details:de};b.trigger(u.default.MANIFEST_LOADED,{levels:[_e],audioTracks:[],url:N,stats:c,networkDetails:y,sessionData:null})}if(c.tparsed=Ze.now(),de.needSidxRanges){var ye=de.initSegment.url;this.load({url:ye,isSidxRequest:!0,type:P,level:L,levelDetails:de,id:A,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}g.levelDetails=de,this._handlePlaylistLoaded(o,c,g,y)},p._handleSidxRequest=function(o,c){if(typeof o.data=="string")throw new Error("sidx request must be made with responseType of array buffer");var g=S.default.parseSegmentIndex(new Uint8Array(o.data));if(!!g){var y=g.references,b=c.levelDetails;y.forEach(function(A,L){var P=A.info;if(!!b){var N=b.fragments[L];N.byteRange.length===0&&N.setByteRange(String(1+P.end-P.start)+"@"+String(P.start))}}),b&&b.initSegment.setByteRange(String(g.moovEndOffset)+"@0")}},p._handleManifestParsingError=function(o,c,g,y){this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:o.url,reason:g,networkDetails:y})},p._handleNetworkError=function(o,c,g,y){g===void 0&&(g=!1),y===void 0&&(y=null),h.logger.info("A network error occured while loading a "+o.type+"-type playlist");var b,A,L=this.getInternalLoader(o);switch(o.type){case C.MANIFEST:b=g?l.ErrorDetails.MANIFEST_LOAD_TIMEOUT:l.ErrorDetails.MANIFEST_LOAD_ERROR,A=!0;break;case C.LEVEL:b=g?l.ErrorDetails.LEVEL_LOAD_TIMEOUT:l.ErrorDetails.LEVEL_LOAD_ERROR,A=!1;break;case C.AUDIO_TRACK:b=g?l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,A=!1;break;default:A=!1}L&&(L.abort(),this.resetInternalLoader(o.type));var P={type:l.ErrorTypes.NETWORK_ERROR,details:b,fatal:A,url:o.url,loader:L,context:o,networkDetails:c};y&&(P.response=y),this.hls.trigger(u.default.ERROR,P)},p._handlePlaylistLoaded=function(o,c,g,y){var b=g.type,A=g.level,L=g.id,P=g.levelDetails;if(!P||!P.targetduration){this._handleManifestParsingError(o,g,"invalid target duration",y);return}var N=v.canHaveQualityLevels(g.type);if(N)this.hls.trigger(u.default.LEVEL_LOADED,{details:P,level:A||0,id:L||0,stats:c,networkDetails:y});else switch(b){case C.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:P,id:L,stats:c,networkDetails:y});break;case C.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:P,id:L,stats:c,networkDetails:y});break}},v}(w),Rt=et;function or(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Ut=function(T){or(v,T);function v(f){var o;return o=T.call(this,f,u.default.FRAG_LOADING)||this,o.loaders={},o}var p=v.prototype;return p.destroy=function(){var o=this.loaders;for(var c in o){var g=o[c];g&&g.destroy()}this.loaders={},T.prototype.destroy.call(this)},p.onFragLoading=function(o){var c=o.frag,g=c.type,y=this.loaders,b=this.hls.config,A=b.fLoader,L=b.loader;c.loaded=0;var P=y[g];P&&(h.logger.warn("abort previous fragment loader for type: "+g),P.abort()),P=y[g]=c.loader=b.fLoader?new A(b):new L(b);var N,G,X;N={url:c.url,frag:c,responseType:"arraybuffer",progressData:!1};var ie=c.byteRangeStartOffset,de=c.byteRangeEndOffset;Object(d.isFiniteNumber)(ie)&&Object(d.isFiniteNumber)(de)&&(N.rangeStart=ie,N.rangeEnd=de),G={timeout:b.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:b.fragLoadingMaxRetryTimeout},X={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},P.load(N,G,X)},p.loadsuccess=function(o,c,g,y){y===void 0&&(y=null);var b=o.data,A=g.frag;A.loader=void 0,this.loaders[A.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:b,frag:A,stats:c,networkDetails:y})},p.loaderror=function(o,c,g){g===void 0&&(g=null);var y=c.frag,b=y.loader;b&&b.abort(),this.loaders[y.type]=void 0,this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:c.frag,response:o,networkDetails:g})},p.loadtimeout=function(o,c,g){g===void 0&&(g=null);var y=c.frag,b=y.loader;b&&b.abort(),this.loaders[y.type]=void 0,this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:c.frag,networkDetails:g})},p.loadprogress=function(o,c,g,y){y===void 0&&(y=null);var b=c.frag;b.loaded=o.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:b,stats:o,networkDetails:y})},v}(w),st=Ut;function Bt(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var ct=function(T){Bt(v,T);function v(f){var o;return o=T.call(this,f,u.default.KEY_LOADING)||this,o.loaders={},o.decryptkey=null,o.decrypturl=null,o}var p=v.prototype;return p.destroy=function(){for(var o in this.loaders){var c=this.loaders[o];c&&c.destroy()}this.loaders={},T.prototype.destroy.call(this)},p.onKeyLoading=function(o){var c=o.frag,g=c.type,y=this.loaders[g];if(!c.decryptdata){h.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var b=c.decryptdata.uri;if(b!==this.decrypturl||this.decryptkey===null){var A=this.hls.config;if(y&&(h.logger.warn("abort previous key loader for type:"+g),y.abort()),!b){h.logger.warn("key uri is falsy");return}c.loader=this.loaders[g]=new A.loader(A),this.decrypturl=b,this.decryptkey=null;var L={url:b,frag:c,responseType:"arraybuffer"},P={timeout:A.fragLoadingTimeOut,maxRetry:0,retryDelay:A.fragLoadingRetryDelay,maxRetryDelay:A.fragLoadingMaxRetryTimeout},N={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.loader.load(L,P,N)}else this.decryptkey&&(c.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:c}))},p.loadsuccess=function(o,c,g){var y=g.frag;if(!y.decryptdata){h.logger.error("after key load, decryptdata unset");return}this.decryptkey=y.decryptdata.key=new Uint8Array(o.data),y.loader=void 0,delete this.loaders[y.type],this.hls.trigger(u.default.KEY_LOADED,{frag:y})},p.loaderror=function(o,c){var g=c.frag,y=g.loader;y&&y.abort(),delete this.loaders[g.type],this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:g,response:o})},p.loadtimeout=function(o,c){var g=c.frag,y=g.loader;y&&y.abort(),delete this.loaders[g.type],this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:g})},v}(w),Zr=ct;function Ct(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var xt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},bn=function(T){Ct(v,T);function v(f){var o;return o=T.call(this,f,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this,o.bufferPadding=.2,o.fragments=Object.create(null),o.timeRanges=Object.create(null),o.config=f.config,o}var p=v.prototype;return p.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,w.prototype.destroy.call(this),T.prototype.destroy.call(this)},p.getBufferedFrag=function(o,c){var g=this.fragments,y=Object.keys(g).filter(function(A){var L=g[A];if(L.body.type!==c||!L.buffered)return!1;var P=L.body;return P.startPTS<=o&&o<=P.endPTS});if(y.length===0)return null;var b=y.pop();return g[b].body},p.detectEvictedFragments=function(o,c){var g=this;Object.keys(this.fragments).forEach(function(y){var b=g.fragments[y];if(!(!b||!b.buffered)){var A=b.range[o];if(!!A)for(var L=A.time,P=0;P<L.length;P++){var N=L[P];if(!g.isTimeBuffered(N.startPTS,N.endPTS,c)){g.removeFragment(b.body);break}}}})},p.detectPartialFragments=function(o){var c=this,g=this.getFragmentKey(o),y=this.fragments[g];y&&(y.buffered=!0,Object.keys(this.timeRanges).forEach(function(b){if(o.hasElementaryStream(b)){var A=c.timeRanges[b];y.range[b]=c.getBufferedTimes(o.startPTS,o.endPTS,A)}}))},p.getBufferedTimes=function(o,c,g){for(var y=[],b,A,L=!1,P=0;P<g.length;P++)if(b=g.start(P)-this.bufferPadding,A=g.end(P)+this.bufferPadding,o>=b&&c<=A){y.push({startPTS:Math.max(o,g.start(P)),endPTS:Math.min(c,g.end(P))});break}else if(o<A&&c>b)y.push({startPTS:Math.max(o,g.start(P)),endPTS:Math.min(c,g.end(P))}),L=!0;else if(c<=b)break;return{time:y,partial:L}},p.getFragmentKey=function(o){return o.type+"_"+o.level+"_"+o.urlId+"_"+o.sn},p.getPartialFragment=function(o){var c=this,g,y,b,A=null,L=0;return Object.keys(this.fragments).forEach(function(P){var N=c.fragments[P];c.isPartial(N)&&(y=N.body.startPTS-c.bufferPadding,b=N.body.endPTS+c.bufferPadding,o>=y&&o<=b&&(g=Math.min(o-y,b-o),L<=g&&(A=N.body,L=g)))}),A},p.getState=function(o){var c=this.getFragmentKey(o),g=this.fragments[c],y=xt.NOT_LOADED;return g!==void 0&&(g.buffered?this.isPartial(g)===!0?y=xt.PARTIAL:y=xt.OK:y=xt.APPENDING),y},p.isPartial=function(o){return o.buffered===!0&&(o.range.video!==void 0&&o.range.video.partial===!0||o.range.audio!==void 0&&o.range.audio.partial===!0)},p.isTimeBuffered=function(o,c,g){for(var y,b,A=0;A<g.length;A++){if(y=g.start(A)-this.bufferPadding,b=g.end(A)+this.bufferPadding,o>=y&&c<=b)return!0;if(c<=y)return!1}return!1},p.onFragLoaded=function(o){var c=o.frag;!Object(d.isFiniteNumber)(c.sn)||c.bitrateTest||(this.fragments[this.getFragmentKey(c)]={body:c,range:Object.create(null),buffered:!1})},p.onBufferAppended=function(o){var c=this;this.timeRanges=o.timeRanges,Object.keys(this.timeRanges).forEach(function(g){var y=c.timeRanges[g];c.detectEvictedFragments(g,y)})},p.onFragBuffered=function(o){this.detectPartialFragments(o.frag)},p.hasFragment=function(o){var c=this.getFragmentKey(o);return this.fragments[c]!==void 0},p.removeFragment=function(o){var c=this.getFragmentKey(o);delete this.fragments[c]},p.removeAllFragments=function(){this.fragments=Object.create(null)},v}(w),$={search:function(v,p){for(var f=0,o=v.length-1,c=null,g=null;f<=o;){c=(f+o)/2|0,g=v[c];var y=p(g);if(y>0)f=c+1;else if(y<0)o=c-1;else return g}return null}},K=$,U=function(){function T(){}return T.isBuffered=function(p,f){try{if(p){for(var o=p.buffered,c=0;c<o.length;c++)if(f>=o.start(c)&&f<=o.end(c))return!0}}catch{}return!1},T.bufferInfo=function(p,f,o){try{if(p){var c=p.buffered,g=[],y;for(y=0;y<c.length;y++)g.push({start:c.start(y),end:c.end(y)});return this.bufferedInfo(g,f,o)}}catch{}return{len:0,start:f,end:f,nextStart:void 0}},T.bufferedInfo=function(p,f,o){p.sort(function(de,_e){var ye=de.start-_e.start;return ye||_e.end-de.end});var c=[];if(o)for(var g=0;g<p.length;g++){var y=c.length;if(y){var b=c[y-1].end;p[g].start-b<o?p[g].end>b&&(c[y-1].end=p[g].end):c.push(p[g])}else c.push(p[g])}else c=p;for(var A=0,L,P=f,N=f,G=0;G<c.length;G++){var X=c[G].start,ie=c[G].end;if(f+o>=X&&f<ie)P=X,N=ie,A=N-f;else if(f+o<X){L=X;break}}return{len:A,start:P,end:N,nextStart:L}},T}(),I=i("./node_modules/eventemitter3/index.js"),O=i("./node_modules/webworkify-webpack/index.js"),F=i("./src/demux/demuxer-inline.js");function V(){return window.MediaSource||window.WebKitMediaSource}var j=i("./src/utils/get-self-scope.js");function W(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Q=function(T){W(v,T);function v(){return T.apply(this,arguments)||this}var p=v.prototype;return p.trigger=function(o){for(var c=arguments.length,g=new Array(c>1?c-1:0),y=1;y<c;y++)g[y-1]=arguments[y];this.emit.apply(this,[o,o].concat(g))},v}(I.EventEmitter),te=Object(j.getSelfScope)(),ne=V()||{isTypeSupported:function(){return!1}},Z=function(){function T(p,f){var o=this;this.hls=p,this.id=f;var c=this.observer=new Q,g=p.config,y=function(N,G){G=G||{},G.frag=o.frag,G.id=o.id,p.trigger(N,G)};c.on(u.default.FRAG_DECRYPTED,y),c.on(u.default.FRAG_PARSING_INIT_SEGMENT,y),c.on(u.default.FRAG_PARSING_DATA,y),c.on(u.default.FRAG_PARSED,y),c.on(u.default.ERROR,y),c.on(u.default.FRAG_PARSING_METADATA,y),c.on(u.default.FRAG_PARSING_USERDATA,y),c.on(u.default.INIT_PTS_FOUND,y);var b={mp4:ne.isTypeSupported("video/mp4"),mpeg:ne.isTypeSupported("audio/mpeg"),mp3:ne.isTypeSupported('audio/mp4; codecs="mp3"')},A=navigator.vendor;if(g.enableWorker&&typeof Worker!="undefined"){h.logger.log("demuxing in webworker");var L;try{L=this.w=O("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),L.addEventListener("message",this.onwmsg),L.onerror=function(P){p.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:P.message+" ("+P.filename+":"+P.lineno+")"}})},L.postMessage({cmd:"init",typeSupported:b,vendor:A,id:f,config:JSON.stringify(g)})}catch(P){h.logger.warn("Error in worker:",P),h.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),L&&te.URL.revokeObjectURL(L.objectURL),this.demuxer=new F.default(c,b,g,A),this.w=void 0}}else this.demuxer=new F.default(c,b,g,A)}var v=T.prototype;return v.destroy=function(){var f=this.w;if(f)f.removeEventListener("message",this.onwmsg),f.terminate(),this.w=null;else{var o=this.demuxer;o&&(o.destroy(),this.demuxer=null)}var c=this.observer;c&&(c.removeAllListeners(),this.observer=null)},v.push=function(f,o,c,g,y,b,A,L){var P=this.w,N=Object(d.isFiniteNumber)(y.startPTS)?y.startPTS:y.start,G=y.decryptdata,X=this.frag,ie=!(X&&y.cc===X.cc),de=!(X&&y.level===X.level),_e=X&&y.sn===X.sn+1,ye=!de&&_e;if(ie&&h.logger.log(this.id+":discontinuity detected"),de&&h.logger.log(this.id+":switch detected"),this.frag=y,P)P.postMessage({cmd:"demux",data:f,decryptdata:G,initSegment:o,audioCodec:c,videoCodec:g,timeOffset:N,discontinuity:ie,trackSwitch:de,contiguous:ye,duration:b,accurateTimeOffset:A,defaultInitPTS:L},f instanceof ArrayBuffer?[f]:[]);else{var Ce=this.demuxer;Ce&&Ce.push(f,G,o,c,g,N,ie,de,ye,b,A,L)}},v.onWorkerMessage=function(f){var o=f.data,c=this.hls;switch(o.event){case"init":te.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:o.data.data1=new Uint8Array(o.data1),o.data2&&(o.data.data2=new Uint8Array(o.data2));default:o.data=o.data||{},o.data.frag=this.frag,o.data.id=this.id,c.trigger(o.event,o.data);break}},T}(),ce=Z;function le(T,v,p){switch(v){case"audio":T.audioGroupIds||(T.audioGroupIds=[]),T.audioGroupIds.push(p);break;case"text":T.textGroupIds||(T.textGroupIds=[]),T.textGroupIds.push(p);break}}function me(T,v,p){var f=T[v],o=T[p],c=o.startPTS;if(Object(d.isFiniteNumber)(c))p>v?(f.duration=c-f.start,f.duration<0&&h.logger.warn("negative duration computed for frag "+f.sn+",level "+f.level+", there should be some duration drift between playlist and fragment!")):(o.duration=f.start-c,o.duration<0&&h.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"));else if(p>v){var g=f.cc===o.cc;o.start=f.start+(g&&f.minEndPTS?f.minEndPTS-f.start:f.duration)}else o.start=Math.max(f.start-o.duration,0)}function ue(T,v,p,f,o,c){var g=p,y=f;if(Object(d.isFiniteNumber)(v.startPTS)){var b=Math.abs(v.startPTS-p);Object(d.isFiniteNumber)(v.deltaPTS)?v.deltaPTS=Math.max(b,v.deltaPTS):v.deltaPTS=b,g=Math.max(p,v.startPTS),p=Math.min(p,v.startPTS),y=Math.min(f,v.endPTS),f=Math.max(f,v.endPTS),o=Math.min(o,v.startDTS),c=Math.max(c,v.endDTS)}var A=p-v.start;v.start=v.startPTS=p,v.maxStartPTS=g,v.endPTS=f,v.minEndPTS=y,v.startDTS=o,v.endDTS=c,v.duration=f-p;var L=v.sn;if(!T||L<T.startSN||L>T.endSN)return 0;var P,N,G;for(P=L-T.startSN,N=T.fragments,N[P]=v,G=P;G>0;G--)me(N,G,G-1);for(G=P;G<N.length-1;G++)me(N,G,G+1);return T.PTSKnown=!0,A}function be(T,v){v.initSegment&&T.initSegment&&(v.initSegment=T.initSegment);var p=0,f;if(Me(T,v,function(g,y){p=g.cc-y.cc,Object(d.isFiniteNumber)(g.startPTS)&&(y.start=y.startPTS=g.startPTS,y.endPTS=g.endPTS,y.duration=g.duration,y.backtracked=g.backtracked,y.dropped=g.dropped,f=y),v.PTSKnown=!0}),!!v.PTSKnown){if(p){h.logger.log("discontinuity sliding from playlist, take drift into account");for(var o=v.fragments,c=0;c<o.length;c++)o[c].cc+=p}f?ue(v,f,f.startPTS,f.endPTS,f.startDTS,f.endDTS):nt(T,v),v.PTSKnown=T.PTSKnown}}function xe(T,v,p){p===void 0&&(p=0);var f=-1;Me(T,v,function(g,y,b){y.start=g.start,f=b});var o=v.fragments;if(f<0){o.forEach(function(g){g.start+=p});return}for(var c=f+1;c<o.length;c++)o[c].start=o[c-1].start+o[c-1].duration}function Me(T,v,p){if(!(!T||!v))for(var f=Math.max(T.startSN,v.startSN)-v.startSN,o=Math.min(T.endSN,v.endSN)-v.startSN,c=v.startSN-T.startSN,g=f;g<=o;g++){var y=T.fragments[c+g],b=v.fragments[g];if(!y||!b)break;p(y,b,g)}}function nt(T,v){var p=v.startSN-T.startSN,f=T.fragments,o=v.fragments;if(!(p<0||p>f.length))for(var c=0;c<o.length;c++)o[c].start+=f[p].start}function $e(T,v,p){var f=1e3*(v.averagetargetduration?v.averagetargetduration:v.targetduration),o=f/2;return T&&v.endSN===T.endSN&&(f=o),p&&(f=Math.max(o,f-(window.performance.now()-p))),Math.round(f)}var pt={toString:function(v){for(var p="",f=v.length,o=0;o<f;o++)p+="["+v.start(o).toFixed(3)+","+v.end(o).toFixed(3)+"]";return p}},tt=pt;function Ye(T,v){for(var p=null,f=0;f<T.length;f+=1){var o=T[f];if(o&&o.cc===v){p=o;break}}return p}function ot(T,v){return K.search(T,function(p){return p.cc<v?1:p.cc>v?-1:0})}function ft(T,v,p){var f=!1;return v&&v.details&&p&&(p.endCC>p.startCC||T&&T.cc<p.startCC)&&(f=!0),f}function Kt(T,v){var p=T.fragments,f=v.fragments;if(!f.length||!p.length){h.logger.log("No fragments to align");return}var o=Ye(p,f[0].cc);if(!o||o&&!o.startPTS){h.logger.log("No frag in previous level to align on");return}return o}function Nt(T,v){v.fragments.forEach(function(p){if(p){var f=p.start+T;p.start=p.startPTS=f,p.endPTS=f+p.duration}}),v.PTSKnown=!0}function gt(T,v,p){ar(T,p,v),!p.PTSKnown&&v&&Mt(p,v.details)}function ar(T,v,p){if(ft(T,p,v)){var f=Kt(p.details,v);f&&(h.logger.log("Adjusting PTS using last level due to CC increase within current level"),Nt(f.start,v))}}function Mt(T,v){if(v&&v.fragments.length){if(!T.hasProgramDateTime||!v.hasProgramDateTime)return;var p=v.fragments[0].programDateTime,f=T.fragments[0].programDateTime,o=(f-p)/1e3+v.fragments[0].start;Object(d.isFiniteNumber)(o)&&(h.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),Nt(o,T))}}function gr(T,v,p){if(v===null||!Array.isArray(T)||!T.length||!Object(d.isFiniteNumber)(v))return null;var f=T[0].programDateTime;if(v<(f||0))return null;var o=T[T.length-1].endProgramDateTime;if(v>=(o||0))return null;p=p||0;for(var c=0;c<T.length;++c){var g=T[c];if(en(v,p,g))return g}return null}function kt(T,v,p,f){p===void 0&&(p=0),f===void 0&&(f=0);var o=null;if(T?o=v[T.sn-v[0].sn+1]:p===0&&v[0].start===0&&(o=v[0]),o&&mt(p,f,o)===0)return o;var c=K.search(v,mt.bind(null,p,f));return c||o}function mt(T,v,p){T===void 0&&(T=0),v===void 0&&(v=0);var f=Math.min(v,p.duration+(p.deltaPTS?p.deltaPTS:0));return p.start+p.duration-f<=T?1:p.start-f>T&&p.start?-1:0}function en(T,v,p){var f=Math.min(v,p.duration+(p.deltaPTS?p.deltaPTS:0))*1e3,o=p.endProgramDateTime||0;return o-f>T}var tn=250,br=2,qt=.1,Wr=.05,rn=function(){function T(p,f,o,c){this.config=p,this.media=f,this.fragmentTracker=o,this.hls=c,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var v=T.prototype;return v.poll=function(f){var o=this.config,c=this.media,g=this.stalled,y=c.currentTime,b=c.seeking,A=this.seeking&&!b,L=!this.seeking&&b;if(this.seeking=b,y!==f){if(this.moved=!0,g!==null){if(this.stallReported){var P=self.performance.now()-g;h.logger.warn("playback not stuck anymore @"+y+", after "+Math.round(P)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((L||A)&&(this.stalled=null),!(c.paused||c.ended||c.playbackRate===0||!c.buffered.length)){var N=U.bufferInfo(c,y,0),G=N.len>0,X=N.nextStart||0;if(!(!G&&!X)){if(b){var ie=N.len>br,de=!X||X-y>br&&!this.fragmentTracker.getPartialFragment(y);if(ie||de)return;this.moved=!1}if(!this.moved&&this.stalled){var _e=Math.max(X,N.start||0)-y;if(_e>0&&_e<=br){this._trySkipBufferHole(null);return}}var ye=self.performance.now();if(g===null){this.stalled=ye;return}var Ce=ye-g;!b&&Ce>=tn&&this._reportStall(N.len);var Ne=U.bufferInfo(c,y,o.maxBufferHole);this._tryFixBufferStall(Ne,Ce)}}},v._tryFixBufferStall=function(f,o){var c=this.config,g=this.fragmentTracker,y=this.media,b=y.currentTime,A=g.getPartialFragment(b);if(A){var L=this._trySkipBufferHole(A);if(L)return}f.len>c.maxBufferHole&&o>c.highBufferWatchdogPeriod*1e3&&(h.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},v._reportStall=function(f){var o=this.hls,c=this.media,g=this.stallReported;g||(this.stallReported=!0,h.logger.warn("Playback stalling at @"+c.currentTime+" due to low buffer (buffer="+f+")"),o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:f}))},v._trySkipBufferHole=function(f){for(var o=this.config,c=this.hls,g=this.media,y=g.currentTime,b=0,A=0;A<g.buffered.length;A++){var L=g.buffered.start(A);if(y+o.maxBufferHole>=b&&y<L){var P=Math.max(L+Wr,g.currentTime+qt);return h.logger.warn("skipping hole, adjusting currentTime from "+y+" to "+P),this.moved=!0,this.stalled=null,g.currentTime=P,f&&c.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+y+" to "+P,frag:f}),P}b=g.buffered.end(A)}return 0},v._tryNudgeBuffer=function(){var f=this.config,o=this.hls,c=this.media,g=c.currentTime,y=(this.nudgeRetry||0)+1;if(this.nudgeRetry=y,y<f.nudgeMaxRetry){var b=g+y*f.nudgeOffset;h.logger.warn("Nudging 'currentTime' from "+g+" to "+b),c.currentTime=b,o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("Playhead still not moving while enough data buffered @"+g+" after "+f.nudgeMaxRetry+" nudges"),o.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},T}();function fn(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function Ii(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var dn=function(T){Ii(v,T);function v(f){for(var o,c=arguments.length,g=new Array(c>1?c-1:0),y=1;y<c;y++)g[y-1]=arguments[y];return o=T.call.apply(T,[this,f].concat(g))||this,o._boundTick=void 0,o._tickTimer=null,o._tickInterval=null,o._tickCallCount=0,o._boundTick=o.tick.bind(fn(o)),o}var p=v.prototype;return p.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},p.hasInterval=function(){return!!this._tickInterval},p.hasNextTick=function(){return!!this._tickTimer},p.setInterval=function(o){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,o),!0)},p.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},p.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},p.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},p.doTick=function(){},v}(w);function Ri(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var J={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},mr=function(T){Ri(v,T);function v(){return T.apply(this,arguments)||this}var p=v.prototype;return p.doTick=function(){},p.startLoad=function(){},p.stopLoad=function(){var o=this.fragCurrent;o&&(o.loader&&o.loader.abort(),this.fragmentTracker.removeFragment(o)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=J.STOPPED},p._streamEnded=function(o,c){var g=this.fragCurrent,y=this.fragmentTracker;if(!c.live&&g&&!g.backtracked&&g.sn===c.endSN&&!o.nextStart){var b=y.getState(g);return b===xt.PARTIAL||b===xt.OK}return!1},p.onMediaSeeking=function(){var o=this.config,c=this.media,g=this.mediaBuffer,y=this.state,b=c?c.currentTime:null,A=U.bufferInfo(g||c,b,this.config.maxBufferHole);if(h.logger.log("media seeking to "+(Object(d.isFiniteNumber)(b)?b.toFixed(3):b)),y===J.FRAG_LOADING){var L=this.fragCurrent;if(A.len===0&&L){var P=o.maxFragLookUpTolerance,N=L.start-P,G=L.start+L.duration+P;b<N||b>G?(L.loader&&(h.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),L.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=J.IDLE):h.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else y===J.ENDED&&(A.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=J.IDLE);c&&(this.lastCurrentTime=b),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=b),this.tick()},p.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},p.onHandlerDestroying=function(){this.stopLoad(),T.prototype.onHandlerDestroying.call(this)},p.onHandlerDestroyed=function(){this.state=J.STOPPED,this.fragmentTracker=null},p.computeLivePosition=function(o,c){var g=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*c.targetduration;return o+Math.max(0,c.totalduration-g)},v}(dn);function jn(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function Ci(T,v,p){return v&&jn(T.prototype,v),p&&jn(T,p),T}function nn(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Do=100,Nf=function(T){nn(v,T);function v(f,o){var c;return c=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.LEVELS_UPDATED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this,c.fragmentTracker=o,c.config=f.config,c.audioCodecSwap=!1,c._state=J.STOPPED,c.stallReported=!1,c.gapController=null,c.altAudio=!1,c.audioOnly=!1,c.bitrateTest=!1,c}var p=v.prototype;return p.startLoad=function(o){if(this.levels){var c=this.lastCurrentTime,g=this.hls;if(this.stopLoad(),this.setInterval(Do),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var y=g.startLevel;y===-1&&(g.config.testBandwidth?(y=0,this.bitrateTest=!0):y=g.nextAutoLevel),this.level=g.nextLoadLevel=y,this.loadedmetadata=!1}c>0&&o===-1&&(h.logger.log("override startPosition with lastCurrentTime @"+c.toFixed(3)),o=c),this.state=J.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=o,this.tick()}else this.forceStartLoad=!0,this.state=J.STOPPED},p.stopLoad=function(){this.forceStartLoad=!1,T.prototype.stopLoad.call(this)},p.doTick=function(){switch(this.state){case J.BUFFER_FLUSHING:this.fragLoadError=0;break;case J.IDLE:this._doTickIdle();break;case J.WAITING_LEVEL:var o=this.levels[this.level];o&&o.details&&(this.state=J.IDLE);break;case J.FRAG_LOADING_WAITING_RETRY:var c=window.performance.now(),g=this.retryDate;(!g||c>=g||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=J.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},p._doTickIdle=function(){var o=this.hls,c=o.config,g=this.media;if(!(this.levelLastLoaded===void 0||!g&&(this.startFragRequested||!c.startFragPrefetch))){if(this.altAudio&&this.audioOnly){this.demuxer.frag=null;return}var y;this.loadedmetadata?y=g.currentTime:y=this.nextLoadPosition;var b=o.nextLoadLevel,A=this.levels[b];if(!!A){var L=A.bitrate,P;L?P=Math.max(8*c.maxBufferSize/L,c.maxBufferLength):P=c.maxBufferLength,P=Math.min(P,c.maxMaxBufferLength);var N=y<c.maxBufferHole?Math.max(br,c.maxBufferHole):c.maxBufferHole,G=U.bufferInfo(this.mediaBuffer?this.mediaBuffer:g,y,N),X=G.len;if(!(X>=P)){h.logger.trace("buffer length of "+X.toFixed(3)+" is below max of "+P.toFixed(3)+". checking for more payload ..."),this.level=o.nextLoadLevel=b;var ie=A.details;if(!ie||ie.live&&this.levelLastLoaded!==b){this.state=J.WAITING_LEVEL;return}if(this._streamEnded(G,ie)){var de={};this.altAudio&&(de.type="video"),this.hls.trigger(u.default.BUFFER_EOS,de),this.state=J.ENDED;return}this._fetchPayloadOrEos(y,G,ie)}}}},p._fetchPayloadOrEos=function(o,c,g){var y=this.fragPrevious;this.level;var b=g.fragments,A=b.length;if(A!==0){var L=b[0].start,P=b[A-1].start+b[A-1].duration,N=c.end,G;if(g.initSegment&&!g.initSegment.data)G=g.initSegment;else if(g.live){var X=this.config.initialLiveManifestSize;if(A<X){h.logger.warn("Can not start playback of a level, reason: not enough fragments "+A+" < "+X);return}if(G=this._ensureFragmentAtLivePoint(g,N,L,P,y,b),G===null)return}else N<L&&(G=b[0]);G||(G=this._findFragment(L,y,A,b,N,P,g)),G&&(G.encrypted?this._loadKey(G,g):this._loadFragment(G,g,o,N))}},p._ensureFragmentAtLivePoint=function(o,c,g,y,b,A){var L=this.hls.config,P=this.media,N,G=1/0;if(L.liveMaxLatencyDuration!==void 0?G=L.liveMaxLatencyDuration:Object(d.isFiniteNumber)(L.liveMaxLatencyDurationCount)&&(G=L.liveMaxLatencyDurationCount*o.targetduration),c<Math.max(g-L.maxFragLookUpTolerance,y-G)){var X=this.liveSyncPosition=this.computeLivePosition(g,o);c=X,P&&!P.paused&&P.readyState&&P.duration>X&&X>P.currentTime&&(h.logger.log("buffer end: "+c.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+X.toFixed(3)),P.currentTime=X),this.nextLoadPosition=X}if(o.PTSKnown&&c>y&&P&&P.readyState)return null;if(this.startFragRequested&&!o.PTSKnown&&b)if(o.hasProgramDateTime)h.logger.log("live playlist, switching playlist, load frag with same PDT: "+b.programDateTime),N=gr(A,b.endProgramDateTime,L.maxFragLookUpTolerance);else{var ie=b.sn+1;if(ie>=o.startSN&&ie<=o.endSN){var de=A[ie-o.startSN];b.cc===de.cc&&(N=de,h.logger.log("live playlist, switching playlist, load frag with next SN: "+N.sn))}N||(N=K.search(A,function(_e){return b.cc-_e.cc}),N&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+N.sn))}return N},p._findFragment=function(o,c,g,y,b,A,L){var P=this.hls.config,N;if(b<A){var G=b>A-P.maxFragLookUpTolerance?0:P.maxFragLookUpTolerance;N=kt(c,y,b,G)}else N=y[g-1];if(N){var X=N.sn-L.startSN,ie=c&&N.level===c.level,de=y[X-1],_e=y[X+1];if(c&&N.sn===c.sn)if(ie&&!N.backtracked)if(N.sn<L.endSN){var ye=c.deltaPTS;ye&&ye>P.maxBufferHole&&c.dropped&&X?(N=de,h.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(N=_e,this.fragmentTracker.getState(N)!==xt.OK&&h.logger.log("Re-loading fragment with SN: "+N.sn))}else N=null;else N.backtracked&&(_e&&_e.backtracked?(h.logger.warn("Already backtracked from fragment "+_e.sn+", will not backtrack to fragment "+N.sn+". Loading fragment "+_e.sn),N=_e):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),N.dropped=0,de?(N=de,N.backtracked=!0):X&&(N=null)))}return N},p._loadKey=function(o,c){h.logger.log("Loading key for "+o.sn+" of ["+c.startSN+"-"+c.endSN+"], level "+this.level),this.state=J.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:o})},p._loadFragment=function(o,c,g,y){var b=this.fragmentTracker.getState(o);this.fragCurrent=o,o.sn!=="initSegment"&&(this.startFragRequested=!0),Object(d.isFiniteNumber)(o.sn)&&!o.bitrateTest&&(this.nextLoadPosition=o.start+o.duration),o.backtracked||b===xt.NOT_LOADED||b===xt.PARTIAL?(o.autoLevel=this.hls.autoLevelEnabled,o.bitrateTest=this.bitrateTest,h.logger.log("Loading "+o.sn+" of ["+c.startSN+"-"+c.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(g.toFixed(3))+", bufferEnd: "+parseFloat(y.toFixed(3))),this.hls.trigger(u.default.FRAG_LOADING,{frag:o}),this.demuxer||(this.demuxer=new ce(this.hls,"main")),this.state=J.FRAG_LOADING):b===xt.APPENDING&&this._reduceMaxBufferLength(o.duration)&&this.fragmentTracker.removeFragment(o)},p.getBufferedFrag=function(o){return this.fragmentTracker.getBufferedFrag(o,R.MAIN)},p.followingBufferedFrag=function(o){return o?this.getBufferedFrag(o.endPTS+.5):null},p._checkFragmentChanged=function(){var o,c,g=this.media;if(g&&g.readyState&&g.seeking===!1&&(c=g.currentTime,c>this.lastCurrentTime&&(this.lastCurrentTime=c),U.isBuffered(g,c)?o=this.getBufferedFrag(c):U.isBuffered(g,c+.1)&&(o=this.getBufferedFrag(c+.1)),o)){var y=o;if(y!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:y});var b=y.level;(!this.fragPlaying||this.fragPlaying.level!==b)&&this.hls.trigger(u.default.LEVEL_SWITCHED,{level:b}),this.fragPlaying=y}}},p.immediateLevelSwitch=function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var o=this.media,c;o?(c=o.paused,c||o.pause()):c=!0,this.previouslyPaused=c}var g=this.fragCurrent;g&&g.loader&&g.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},p.immediateLevelSwitchEnd=function(){var o=this.media;o&&o.buffered.length&&(this.immediateSwitch=!1,o.currentTime>0&&U.isBuffered(o,o.currentTime)&&(o.currentTime-=1e-4),this.previouslyPaused||o.play())},p.nextLevelSwitch=function(){var o=this.media;if(o&&o.readyState){var c,g=this.getBufferedFrag(o.currentTime);if(g&&g.startPTS>1&&this.flushMainBuffer(0,g.startPTS-1),o.paused)c=0;else{var y=this.hls.nextLoadLevel,b=this.levels[y],A=this.fragLastKbps;A&&this.fragCurrent?c=this.fragCurrent.duration*b.bitrate/(1e3*A)+1:c=0}var L=this.getBufferedFrag(o.currentTime+c);if(L){var P=this.followingBufferedFrag(L);if(P){var N=this.fragCurrent;N&&N.loader&&N.loader.abort(),this.fragCurrent=null;var G=Math.max(L.endPTS,P.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,P.duration));this.flushMainBuffer(G,Number.POSITIVE_INFINITY)}}}},p.flushMainBuffer=function(o,c){this.state=J.BUFFER_FLUSHING;var g={startOffset:o,endOffset:c};this.altAudio&&(g.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,g)},p.onMediaAttached=function(o){var c=this.media=this.mediaBuffer=o.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),c.addEventListener("seeking",this.onvseeking),c.addEventListener("seeked",this.onvseeked),c.addEventListener("ended",this.onvended);var g=this.config;this.levels&&g.autoStartLoad&&this.hls.startLoad(g.startPosition),this.gapController=new rn(g,c,this.fragmentTracker,this.hls)},p.onMediaDetaching=function(){var o=this.media;o&&o.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var c=this.levels;c&&c.forEach(function(g){g.details&&g.details.fragments.forEach(function(y){y.backtracked=void 0})}),o&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("seeked",this.onvseeked),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},p.onMediaSeeked=function(){var o=this.media,c=o?o.currentTime:void 0;Object(d.isFiniteNumber)(c)&&h.logger.log("media seeked to "+c.toFixed(3)),this.tick()},p.onManifestLoading=function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},p.onManifestParsed=function(o){var c=!1,g=!1,y;o.levels.forEach(function(A){y=A.audioCodec,y&&(y.indexOf("mp4a.40.2")!==-1&&(c=!0),y.indexOf("mp4a.40.5")!==-1&&(g=!0))}),this.audioCodecSwitch=c&&g,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=o.altAudio,this.levels=o.levels,this.startFragRequested=!1;var b=this.config;(b.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(b.startPosition)},p.onLevelLoaded=function(o){var c=o.details,g=o.level,y=this.levels[this.levelLastLoaded],b=this.levels[g],A=c.totalduration,L=0;if(h.logger.log("level "+g+" loaded ["+c.startSN+","+c.endSN+"],duration:"+A),c.live||b.details&&b.details.live){var P=b.details;P&&c.fragments.length>0?(be(P,c),L=c.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(L,P),c.PTSKnown&&Object(d.isFiniteNumber)(L)?h.logger.log("live playlist sliding:"+L.toFixed(3)):(h.logger.log("live playlist - outdated PTS, unknown sliding"),gt(this.fragPrevious,y,c))):(h.logger.log("live playlist - first load, unknown sliding"),c.PTSKnown=!1,gt(this.fragPrevious,y,c))}else c.PTSKnown=!1;if(b.details=c,this.levelLastLoaded=g,this.hls.trigger(u.default.LEVEL_UPDATED,{details:c,level:g}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var N=c.startTimeOffset;Object(d.isFiniteNumber)(N)?(N<0&&(h.logger.log("negative start time offset "+N+", count from end of last fragment"),N=L+A+N),h.logger.log("start time offset found in playlist, adjust startPosition to "+N),this.startPosition=N):c.live?(this.startPosition=this.computeLivePosition(L,c),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===J.WAITING_LEVEL&&(this.state=J.IDLE),this.tick()},p.onKeyLoaded=function(){this.state===J.KEY_LOADING&&(this.state=J.IDLE,this.tick())},p.onFragLoaded=function(o){var c=this.fragCurrent,g=this.hls,y=this.levels,b=this.media,A=o.frag;if(this.state===J.FRAG_LOADING&&c&&A.type==="main"&&A.level===c.level&&A.sn===c.sn){var L=o.stats,P=y[c.level],N=P.details;if(this.bitrateTest=!1,this.stats=L,h.logger.log("Loaded "+c.sn+" of ["+N.startSN+" ,"+N.endSN+"],level "+c.level),A.bitrateTest&&g.nextLoadLevel)this.state=J.IDLE,this.startFragRequested=!1,L.tparsed=L.tbuffered=window.performance.now(),g.trigger(u.default.FRAG_BUFFERED,{stats:L,frag:c,id:"main"}),this.tick();else if(A.sn==="initSegment")this.state=J.IDLE,L.tparsed=L.tbuffered=window.performance.now(),N.initSegment.data=o.payload,g.trigger(u.default.FRAG_BUFFERED,{stats:L,frag:c,id:"main"}),this.tick();else{h.logger.log("Parsing "+c.sn+" of ["+N.startSN+" ,"+N.endSN+"],level "+c.level+", cc "+c.cc),this.state=J.PARSING,this.pendingBuffering=!0,this.appended=!1,A.bitrateTest&&(A.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:A}));var G=!(b&&b.seeking)&&(N.PTSKnown||!N.live),X=N.initSegment?N.initSegment.data:[],ie=this._getAudioCodec(P),de=this.demuxer=this.demuxer||new ce(this.hls,"main");de.push(o.payload,X,ie,P.videoCodec,c,N.totalduration,G)}}this.fragLoadError=0},p.onFragParsingInitSegment=function(o){var c=this.fragCurrent,g=o.frag;if(c&&o.id==="main"&&g.sn===c.sn&&g.level===c.level&&this.state===J.PARSING){var y=o.tracks,b,A;if(this.audioOnly=y.audio&&!y.video,this.altAudio&&!this.audioOnly&&delete y.audio,A=y.audio,A){var L=this.levels[this.level].audioCodec,P=navigator.userAgent.toLowerCase();L&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),L.indexOf("mp4a.40.5")!==-1?L="mp4a.40.2":L="mp4a.40.5"),this.audioCodecSwitch&&A.metadata.channelCount!==1&&P.indexOf("firefox")===-1&&(L="mp4a.40.5"),P.indexOf("android")!==-1&&A.container!=="audio/mpeg"&&(L="mp4a.40.2",h.logger.log("Android: force audio codec to "+L)),A.levelCodec=L,A.id=o.id}A=y.video,A&&(A.levelCodec=this.levels[this.level].videoCodec,A.id=o.id),this.hls.trigger(u.default.BUFFER_CODECS,y);for(b in y){A=y[b],h.logger.log("main track:"+b+",container:"+A.container+",codecs[level/parsed]=["+A.levelCodec+"/"+A.codec+"]");var N=A.initSegment;N&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:b,data:N,parent:"main",content:"initSegment"}))}this.tick()}},p.onFragParsingData=function(o){var c=this,g=this.fragCurrent,y=o.frag;if(g&&o.id==="main"&&y.sn===g.sn&&y.level===g.level&&!(o.type==="audio"&&this.altAudio)&&this.state===J.PARSING){var b=this.levels[this.level],A=g;if(Object(d.isFiniteNumber)(o.endPTS)||(o.endPTS=o.startPTS+g.duration,o.endDTS=o.startDTS+g.duration),o.hasAudio===!0&&A.addElementaryStream(B.AUDIO),o.hasVideo===!0&&A.addElementaryStream(B.VIDEO),h.logger.log("Parsed "+o.type+",PTS:["+o.startPTS.toFixed(3)+","+o.endPTS.toFixed(3)+"],DTS:["+o.startDTS.toFixed(3)+"/"+o.endDTS.toFixed(3)+"],nb:"+o.nb+",dropped:"+(o.dropped||0)),o.type==="video")if(A.dropped=o.dropped,A.dropped)if(A.backtracked)h.logger.warn("Already backtracked on this fragment, appending with the gap",A.sn);else{var L=b.details;if(L&&A.sn===L.startSN)h.logger.warn("missing video frame(s) on first frag, appending with gap",A.sn);else{h.logger.warn("missing video frame(s), backtracking fragment",A.sn),this.fragmentTracker.removeFragment(A),A.backtracked=!0,this.nextLoadPosition=o.startPTS,this.state=J.IDLE,this.fragPrevious=A,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.tick();return}}else A.backtracked=!1;var P=ue(b.details,A,o.startPTS,o.endPTS,o.startDTS,o.endDTS),N=this.hls;N.trigger(u.default.LEVEL_PTS_UPDATED,{details:b.details,level:this.level,drift:P,type:o.type,start:o.startPTS,end:o.endPTS}),[o.data1,o.data2].forEach(function(G){G&&G.length&&c.state===J.PARSING&&(c.appended=!0,c.pendingBuffering=!0,N.trigger(u.default.BUFFER_APPENDING,{type:o.type,data:G,parent:"main",content:"data"}))}),this.tick()}},p.onFragParsed=function(o){var c=this.fragCurrent,g=o.frag;c&&o.id==="main"&&g.sn===c.sn&&g.level===c.level&&this.state===J.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=J.PARSED,this._checkAppendedParsed())},p.onAudioTrackSwitching=function(o){var c=this.altAudio,g=!!o.url,y=o.id;if(!g){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var b=this.fragCurrent;b.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),b.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=J.IDLE}var A=this.hls;c&&A.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),A.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:y})}},p.onAudioTrackSwitched=function(o){var c=o.id,g=!!this.hls.audioTracks[c].url;if(g){var y=this.videoBuffer;y&&this.mediaBuffer!==y&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=y)}this.altAudio=g,this.tick()},p.onBufferCreated=function(o){var c=o.tracks,g,y,b=!1;for(var A in c){var L=c[A];L.id==="main"?(y=A,g=L,A==="video"&&(this.videoBuffer=c[A].buffer)):b=!0}b&&g?(h.logger.log("alternate track found, use "+y+".buffered to schedule main fragment loading"),this.mediaBuffer=g.buffer):this.mediaBuffer=this.media},p.onBufferAppended=function(o){if(o.parent==="main"){var c=this.state;(c===J.PARSING||c===J.PARSED)&&(this.pendingBuffering=o.pending>0,this._checkAppendedParsed())}},p._checkAppendedParsed=function(){if(this.state===J.PARSED&&(!this.appended||!this.pendingBuffering)){var o=this.fragCurrent;if(o){var c=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+tt.toString(c.buffered)),this.fragPrevious=o;var g=this.stats;g.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*g.total/(g.tbuffered-g.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:g,frag:o,id:"main"}),this.state=J.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},p.onError=function(o){var c=o.frag||this.fragCurrent;if(!(c&&c.type!=="main")){var g=!!this.media&&U.isBuffered(this.media,this.media.currentTime)&&U.isBuffered(this.media,this.media.currentTime+.5);switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:if(!o.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var y=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+y+" ms"),this.retryDate=window.performance.now()+y,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=J.FRAG_LOADING_WAITING_RETRY}else h.logger.error("mediaController: "+o.details+" reaches max retry, redispatch as fatal ..."),o.fatal=!0,this.state=J.ERROR;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==J.ERROR&&(o.fatal?(this.state=J.ERROR,h.logger.warn("streamController: "+o.details+",switch to "+this.state+" state ...")):!o.levelRetry&&this.state===J.WAITING_LEVEL&&(this.state=J.IDLE));break;case l.ErrorDetails.BUFFER_FULL_ERROR:o.parent==="main"&&(this.state===J.PARSING||this.state===J.PARSED)&&(g?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=J.IDLE):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},p._reduceMaxBufferLength=function(o){var c=this.config;return c.maxMaxBufferLength>=o?(c.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+c.maxMaxBufferLength+"s"),!0):!1},p._checkBuffer=function(){var o=this.media;if(!(!o||o.readyState===0)){var c=this.mediaBuffer?this.mediaBuffer:o,g=c.buffered;!this.loadedmetadata&&g.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,g)}},p.onFragLoadEmergencyAborted=function(){this.state=J.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},p.onBufferFlushed=function(){var o=this.mediaBuffer?this.mediaBuffer:this.media;if(o){var c=this.audioOnly?B.AUDIO:B.VIDEO;this.fragmentTracker.detectEvictedFragments(c,o.buffered)}this.state=J.IDLE,this.fragPrevious=null},p.onLevelsUpdated=function(o){this.levels=o.levels},p.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},p._seekToStartPos=function(){var o=this.media,c=o.currentTime,g=this.startPosition;if(c!==g&&g>=0){if(o.seeking){h.logger.log("could not seek to "+g+", already seeking at "+c);return}var y=o.buffered.length?o.buffered.start(0):0,b=y-g;b>0&&b<this.config.maxBufferHole&&(h.logger.log("adjusting start position by "+b+" to match buffer start"),g+=b,this.startPosition=g),h.logger.log("seek to target start position "+g+" from current time "+c+". ready state "+o.readyState),o.currentTime=g}},p._getAudioCodec=function(o){var c=this.config.defaultAudioCodec||o.audioCodec;return this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5")),c},Ci(v,[{key:"state",set:function(o){if(this.state!==o){var c=this.state;this._state=o,h.logger.log("main stream-controller: "+c+"->"+o),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:c,nextState:o})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var o=this.media;if(o){var c=this.getBufferedFrag(o.currentTime);if(c)return c.level}return-1}},{key:"nextBufferedFrag",get:function(){var o=this.media;return o?this.followingBufferedFrag(this.getBufferedFrag(o.currentTime)):null}},{key:"nextLevel",get:function(){var o=this.nextBufferedFrag;return o?o.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(o){this._liveSyncPosition=o}}]),v}(mr),Bl=Nf;function $l(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function Oo(T,v,p){return v&&$l(T.prototype,v),p&&$l(T,p),T}function Vl(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var ki,Mf=function(T){Vl(v,T);function v(f){var o;return o=T.call(this,f,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this,o.canload=!1,o.currentLevelIndex=null,o.manualLevelIndex=-1,o.timer=null,ki=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),o}var p=v.prototype;return p.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},p.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},p.startLoad=function(){var o=this._levels;this.canload=!0,this.levelRetryCount=0,o&&o.forEach(function(c){c.loadError=0;var g=c.details;g&&g.live&&(c.details=void 0)}),this.timer!==null&&this.loadLevel()},p.stopLoad=function(){this.canload=!1},p.onManifestLoaded=function(o){var c=[],g=[],y,b={},A=null,L=!1,P=!1;if(o.levels.forEach(function(X){var ie=X.attrs;X.loadError=0,X.fragmentError=!1,L=L||!!X.videoCodec,P=P||!!X.audioCodec,ki&&X.audioCodec&&X.audioCodec.indexOf("mp4a.40.34")!==-1&&(X.audioCodec=void 0),A=b[X.bitrate],A?A.url.push(X.url):(X.url=[X.url],X.urlId=0,b[X.bitrate]=X,c.push(X)),ie&&(ie.AUDIO&&le(A||X,"audio",ie.AUDIO),ie.SUBTITLES&&le(A||X,"text",ie.SUBTITLES))}),L&&P&&(c=c.filter(function(X){var ie=X.videoCodec;return!!ie})),c=c.filter(function(X){var ie=X.audioCodec,de=X.videoCodec;return(!ie||Fe(ie,"audio"))&&(!de||Fe(de,"video"))}),o.audioTracks&&(g=o.audioTracks.filter(function(X){return!X.audioCodec||Fe(X.audioCodec,"audio")}),g.forEach(function(X,ie){X.id=ie})),c.length>0){y=c[0].bitrate,c.sort(function(X,ie){return X.bitrate-ie.bitrate}),this._levels=c;for(var N=0;N<c.length;N++)if(c[N].bitrate===y){this._firstLevel=N,h.logger.log("manifest loaded,"+c.length+" level(s) found, first bitrate:"+y);break}var G=P&&!L;this.hls.trigger(u.default.MANIFEST_PARSED,{levels:c,audioTracks:g,firstLevel:this._firstLevel,stats:o.stats,audio:P,video:L,altAudio:!G&&g.some(function(X){return!!X.url})})}else this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},p.setLevelInternal=function(o){var c=this._levels,g=this.hls;if(o>=0&&o<c.length){if(this.clearTimer(),this.currentLevelIndex!==o){h.logger.log("switching to level "+o),this.currentLevelIndex=o;var y=c[o];y.level=o,g.trigger(u.default.LEVEL_SWITCHING,y)}var b=c[o],A=b.details;if(!A||A.live){var L=b.urlId;g.trigger(u.default.LEVEL_LOADING,{url:b.url[L],level:o,id:L})}}else g.trigger(u.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:o,fatal:!1,reason:"invalid level idx"})},p.onError=function(o){if(o.fatal){o.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var c=!1,g=!1,y;switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:y=o.frag.level,g=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:y=o.context.level,c=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:y=o.level,c=!0;break}y!==void 0&&this.recoverLevel(o,y,c,g)},p.recoverLevel=function(o,c,g,y){var b=this,A=this.hls.config,L=o.details,P=this._levels[c],N,G,X;if(P.loadError++,P.fragmentError=y,g)if(this.levelRetryCount+1<=A.levelLoadingMaxRetry)G=Math.min(Math.pow(2,this.levelRetryCount)*A.levelLoadingRetryDelay,A.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return b.loadLevel()},G),o.levelRetry=!0,this.levelRetryCount++,h.logger.warn("level controller, "+L+", retry in "+G+" ms, current retry count is "+this.levelRetryCount);else{h.logger.error("level controller, cannot recover from "+L+" error"),this.currentLevelIndex=null,this.clearTimer(),o.fatal=!0;return}(g||y)&&(N=P.url.length,N>1&&P.loadError<N?(P.urlId=(P.urlId+1)%N,P.details=void 0,h.logger.warn("level controller, "+L+" for level "+c+": switching to redundant URL-id "+P.urlId)):this.manualLevelIndex===-1?(X=c===0?this._levels.length-1:c-1,h.logger.warn("level controller, "+L+": switch to "+X),this.hls.nextAutoLevel=this.currentLevelIndex=X):y&&(h.logger.warn("level controller, "+L+": reload a fragment"),this.currentLevelIndex=null))},p.onFragLoaded=function(o){var c=o.frag;if(c!==void 0&&c.type==="main"){var g=this._levels[c.level];g!==void 0&&(g.fragmentError=!1,g.loadError=0,this.levelRetryCount=0)}},p.onLevelLoaded=function(o){var c=this,g=o.level,y=o.details;if(g===this.currentLevelIndex){var b=this._levels[g];if(b.fragmentError||(b.loadError=0,this.levelRetryCount=0),y.live){var A=$e(b.details,y,o.stats.trequest);h.logger.log("live playlist, reload in "+Math.round(A)+" ms"),this.timer=setTimeout(function(){return c.loadLevel()},A)}else this.clearTimer()}},p.onAudioTrackSwitched=function(o){var c=this.hls.audioTracks[o.id].groupId,g=this.hls.levels[this.currentLevelIndex];if(!!g&&g.audioGroupIds){for(var y=-1,b=0;b<g.audioGroupIds.length;b++)if(g.audioGroupIds[b]===c){y=b;break}y!==g.urlId&&(g.urlId=y,this.startLoad())}},p.loadLevel=function(){if(h.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var o=this._levels[this.currentLevelIndex];if(typeof o=="object"&&o.url.length>0){var c=this.currentLevelIndex,g=o.urlId,y=o.url[g];h.logger.log("Attempt loading level index "+c+" with URL-id "+g),this.hls.trigger(u.default.LEVEL_LOADING,{url:y,level:c,id:g})}}},p.removeLevel=function(o,c){var g=this.levels.filter(function(y,b){return b!==o?!0:y.url.length>1&&c!==void 0?(y.url=y.url.filter(function(A,L){return L!==c}),y.urlId=0,!0):!1}).map(function(y,b){var A=y.details;return A&&A.fragments&&A.fragments.forEach(function(L){L.level=b}),y});this._levels=g,this.hls.trigger(u.default.LEVELS_UPDATED,{levels:g})},Oo(v,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(o){var c=this._levels;c&&(o=Math.min(o,c.length-1),(this.currentLevelIndex!==o||!c[o].details)&&this.setLevelInternal(o))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(o){this.manualLevelIndex=o,this._startLevel===void 0&&(this._startLevel=o),o!==-1&&(this.level=o)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(o){this._firstLevel=o}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var o=this.hls.config.startLevel;return o!==void 0?o:this._firstLevel}else return this._startLevel},set:function(o){this._startLevel=o}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(o){this.level=o,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=o)}}]),v}(w),Po=i("./src/demux/id3.js");function Es(T,v){var p;try{p=new Event("addtrack")}catch{p=document.createEvent("Event"),p.initEvent("addtrack",!1,!1)}p.track=T,v.dispatchEvent(p)}function Li(T){if(T==null?void 0:T.cues)for(;T.cues.length>0;)T.removeCue(T.cues[0])}function jl(T,v){if(v<T[0].endTime)return T[0];if(v>T[T.length-1].endTime)return T[T.length-1];for(var p=0,f=T.length-1;p<=f;){var o=Math.floor((f+p)/2);if(v<T[o].endTime)f=o-1;else if(v>T[o].endTime)p=o+1;else return T[o]}return T[p].endTime-v<v-T[f].endTime?T[p]:T[f]}function Gl(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Ts=.25,No=function(T){Gl(v,T);function v(f){var o;return o=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this,o.id3Track=void 0,o.media=void 0,o}var p=v.prototype;return p.destroy=function(){w.prototype.destroy.call(this)},p.onMediaAttached=function(o){this.media=o.media,!this.media},p.onMediaDetaching=function(){Li(this.id3Track),this.id3Track=void 0,this.media=void 0},p.getID3Track=function(o){for(var c=0;c<o.length;c++){var g=o[c];if(g.kind==="metadata"&&g.label==="id3")return Es(g,this.media),g}return this.media.addTextTrack("metadata","id3")},p.onFragParsingMetadata=function(o){var c=o.frag,g=o.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var y=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,b=0;b<g.length;b++){var A=Po.default.getID3Frames(g[b].data);if(A){var L=Math.max(g[b].pts,0),P=b<g.length-1?g[b+1].pts:c.endPTS;P||(P=c.start+c.duration);var N=P-L;N<=0&&(P=L+Ts);for(var G=0;G<A.length;G++){var X=A[G];if(!Po.default.isTimeStampFrame(X)){var ie=new y(L,P,"");ie.value=X,this.id3Track.addCue(ie)}}}}},p.onLiveBackBufferReached=function(o){var c=o.bufferEnd,g=this.id3Track;if(!(!g||!g.cues||!g.cues.length)){var y=jl(g.cues,c);if(!!y)for(;g.cues[0]!==y;)g.removeCue(g.cues[0])}},v}(w),Ff=No;function Uf(){var T=V();if(!T)return!1;var v=self.SourceBuffer||self.WebKitSourceBuffer,p=T&&typeof T.isTypeSupported=="function"&&T.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),f=!v||v.prototype&&typeof v.prototype.appendBuffer=="function"&&typeof v.prototype.remove=="function";return!!p&&!!f}var i1=function(){function T(p){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=p?Math.exp(Math.log(.5)/p):0,this.estimate_=0,this.totalWeight_=0}var v=T.prototype;return v.sample=function(f,o){var c=Math.pow(this.alpha_,f);this.estimate_=o*(1-c)+c*this.estimate_,this.totalWeight_+=f},v.getTotalWeight=function(){return this.totalWeight_},v.getEstimate=function(){if(this.alpha_){var f=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/f}else return this.estimate_},T}(),zm=i1,s1=function(){function T(p,f,o,c){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=p,this.defaultEstimate_=c,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new zm(f),this.fast_=new zm(o)}var v=T.prototype;return v.sample=function(f,o){f=Math.max(f,this.minDelayMs_);var c=8*o,g=f/1e3,y=c/g;this.fast_.sample(g,y),this.slow_.sample(g,y)},v.canEstimate=function(){var f=this.fast_;return f&&f.getTotalWeight()>=this.minWeight_},v.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},v.destroy=function(){},T}(),o1=s1;function Hm(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function a1(T,v,p){return v&&Hm(T.prototype,v),p&&Hm(T,p),T}function l1(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function u1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var c1=window,f1=c1.performance,d1=function(T){u1(v,T);function v(f){var o;return o=T.call(this,f,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this,o.lastLoadedFragLevel=0,o._nextAutoLevel=-1,o.hls=f,o.timer=null,o._bwEstimator=null,o.onCheck=o._abandonRulesCheck.bind(l1(o)),o}var p=v.prototype;return p.destroy=function(){this.clearTimer(),w.prototype.destroy.call(this)},p.onFragLoading=function(o){var c=o.frag;if(c.type==="main"&&(this.timer||(this.fragCurrent=c,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var g=this.hls,y=g.config,b=c.level,A=g.levels[b].details.live,L,P;A?(L=y.abrEwmaFastLive,P=y.abrEwmaSlowLive):(L=y.abrEwmaFastVoD,P=y.abrEwmaSlowVoD),this._bwEstimator=new o1(g,P,L,y.abrEwmaDefaultEstimate)}},p._abandonRulesCheck=function(){var o=this.hls,c=o.media,g=this.fragCurrent;if(!!g){var y=g.loader;if(!y||y.stats&&y.stats.aborted){h.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var b=y.stats;if(c&&b&&(!c.paused&&c.playbackRate!==0||!c.readyState)&&g.autoLevel&&g.level){var A=f1.now()-b.trequest,L=Math.abs(c.playbackRate);if(A>500*g.duration/L){var P=o.levels,N=Math.max(1,b.bw?b.bw/8:b.loaded*1e3/A),G=P[g.level];if(!G)return;var X=G.realBitrate?Math.max(G.realBitrate,G.bitrate):G.bitrate,ie=b.total?b.total:Math.max(b.loaded,Math.round(g.duration*X/8)),de=c.currentTime,_e=(ie-b.loaded)/N,ye=(U.bufferInfo(c,de,o.config.maxBufferHole).end-de)/L;if(ye<2*g.duration/L&&_e>ye){var Ce=o.minAutoLevel,Ne,Qe;for(Qe=g.level-1;Qe>Ce;Qe--){var _t=P[Qe].realBitrate?Math.max(P[Qe].realBitrate,P[Qe].bitrate):P[Qe].bitrate,Pr=g.duration*_t/(8*.8*N);if(Pr<ye)break}Ne<_e&&(h.logger.warn("loading too slow, abort fragment loading and switch to level "+Qe+":fragLoadedDelay["+Qe+"]<fragLoadedDelay["+(g.level-1)+"];bufferStarvationDelay:"+Ne.toFixed(1)+"<"+_e.toFixed(1)+":"+ye.toFixed(1)),o.nextLoadLevel=Qe,this._bwEstimator.sample(A,b.loaded),y.abort(),this.clearTimer(),o.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:g,stats:b}))}}}}},p.onFragLoaded=function(o){var c=o.frag;if(c.type==="main"&&Object(d.isFiniteNumber)(c.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=c.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var g=this.hls.levels[c.level],y=(g.loaded?g.loaded.bytes:0)+o.stats.loaded,b=(g.loaded?g.loaded.duration:0)+o.frag.duration;g.loaded={bytes:y,duration:b},g.realBitrate=Math.round(8*y/b)}if(o.frag.bitrateTest){var A=o.stats;A.tparsed=A.tbuffered=A.tload,this.onFragBuffered(o)}}},p.onFragBuffered=function(o){var c=o.stats,g=o.frag;if(c.aborted!==!0&&g.type==="main"&&Object(d.isFiniteNumber)(g.sn)&&(!g.bitrateTest||c.tload===c.tbuffered)){var y=c.tparsed-c.trequest;h.logger.log("latency/loading/parsing/append/kbps:"+Math.round(c.tfirst-c.trequest)+"/"+Math.round(c.tload-c.tfirst)+"/"+Math.round(c.tparsed-c.tload)+"/"+Math.round(c.tbuffered-c.tparsed)+"/"+Math.round(8*c.loaded/(c.tbuffered-c.trequest))),this._bwEstimator.sample(y,c.loaded),c.bwEstimate=this._bwEstimator.getEstimate(),g.bitrateTest?this.bitrateTestDelay=y/1e3:this.bitrateTestDelay=0}},p.onError=function(o){switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},p.clearTimer=function(){clearInterval(this.timer),this.timer=null},p._findBestLevel=function(o,c,g,y,b,A,L,P,N){for(var G=b;G>=y;G--){var X=N[G];if(!!X){var ie=X.details,de=ie?ie.totalduration/ie.fragments.length:c,_e=ie?ie.live:!1,ye=void 0;G<=o?ye=L*g:ye=P*g;var Ce=N[G].realBitrate?Math.max(N[G].realBitrate,N[G].bitrate):N[G].bitrate,Ne=Ce*de/ye;if(h.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+G+"/"+Math.round(ye)+"/"+Ce+"/"+de+"/"+A+"/"+Ne),ye>Ce&&(!Ne||_e&&!this.bitrateTestDelay||Ne<A))return G}}return-1},a1(v,[{key:"nextAutoLevel",get:function(){var o=this._nextAutoLevel,c=this._bwEstimator;if(o!==-1&&(!c||!c.canEstimate()))return o;var g=this._nextABRAutoLevel;return o!==-1&&(g=Math.min(o,g)),g},set:function(o){this._nextAutoLevel=o}},{key:"_nextABRAutoLevel",get:function(){var o=this.hls,c=o.maxAutoLevel,g=o.levels,y=o.config,b=o.minAutoLevel,A=o.media,L=this.lastLoadedFragLevel,P=this.fragCurrent?this.fragCurrent.duration:0,N=A?A.currentTime:0,G=A&&A.playbackRate!==0?Math.abs(A.playbackRate):1,X=this._bwEstimator?this._bwEstimator.getEstimate():y.abrEwmaDefaultEstimate,ie=(U.bufferInfo(A,N,y.maxBufferHole).end-N)/G,de=this._findBestLevel(L,P,X,b,c,ie,y.abrBandWidthFactor,y.abrBandWidthUpFactor,g);if(de>=0)return de;h.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var _e=P?Math.min(P,y.maxStarvationDelay):y.maxStarvationDelay,ye=y.abrBandWidthFactor,Ce=y.abrBandWidthUpFactor;if(ie===0){var Ne=this.bitrateTestDelay;if(Ne){var Qe=P?Math.min(P,y.maxLoadingDelay):y.maxLoadingDelay;_e=Qe-Ne,h.logger.trace("bitrate test took "+Math.round(1e3*Ne)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*_e)+" ms"),ye=Ce=1}}return de=this._findBestLevel(L,P,X,b,c,ie+_e,ye,Ce,g),Math.max(de,0)}}]),v}(w),h1=d1;function p1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Wm=V(),g1=function(T){p1(v,T);function v(f){var o;return o=T.call(this,f,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this,o._msDuration=null,o._levelDuration=null,o._levelTargetDuration=10,o._live=null,o._objectUrl=null,o._needsFlush=!1,o._needsEos=!1,o.config=void 0,o.audioTimestampOffset=void 0,o.bufferCodecEventsExpected=0,o._bufferCodecEventsTotal=0,o.media=null,o.mediaSource=null,o.segments=[],o.parent=void 0,o.appending=!1,o.appended=0,o.appendError=0,o.flushBufferCounter=0,o.tracks={},o.pendingTracks={},o.sourceBuffer={},o.flushRange=[],o._onMediaSourceOpen=function(){h.logger.log("media source opened"),o.hls.trigger(u.default.MEDIA_ATTACHED,{media:o.media});var c=o.mediaSource;c&&c.removeEventListener("sourceopen",o._onMediaSourceOpen),o.checkPendingTracks()},o._onMediaSourceClose=function(){h.logger.log("media source closed")},o._onMediaSourceEnded=function(){h.logger.log("media source ended")},o._onSBUpdateEnd=function(){if(o.audioTimestampOffset&&o.sourceBuffer.audio){var c=o.sourceBuffer.audio;h.logger.warn("change mpeg audio timestamp offset from "+c.timestampOffset+" to "+o.audioTimestampOffset),c.timestampOffset=o.audioTimestampOffset,delete o.audioTimestampOffset}o._needsFlush&&o.doFlush(),o._needsEos&&o.checkEos(),o.appending=!1;var g=o.parent,y=o.segments.reduce(function(N,G){return G.parent===g?N+1:N},0),b={},A=o.sourceBuffer;for(var L in A){var P=A[L];if(!P)throw Error("handling source buffer update end error: source buffer for "+L+" uninitilized and unable to update buffered TimeRanges.");b[L]=P.buffered}o.hls.trigger(u.default.BUFFER_APPENDED,{parent:g,pending:y,timeRanges:b}),o._needsFlush||o.doAppending(),o.updateMediaElementDuration(),y===0&&o.flushLiveBackBuffer()},o._onSBUpdateError=function(c){h.logger.error("sourceBuffer error:",c),o.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},o.config=f.config,o}var p=v.prototype;return p.destroy=function(){w.prototype.destroy.call(this)},p.onLevelPtsUpdated=function(o){var c=o.type,g=this.tracks.audio;if(c==="audio"&&g&&g.container==="audio/mpeg"){var y=this.sourceBuffer.audio;if(!y)throw Error("Level PTS Updated and source buffer for audio uninitalized");var b=Math.abs(y.timestampOffset-o.start);if(b>.1){var A=y.updating;try{y.abort()}catch(L){h.logger.warn("can not abort audio buffer: "+L)}A?this.audioTimestampOffset=o.start:(h.logger.warn("change mpeg audio timestamp offset from "+y.timestampOffset+" to "+o.start),y.timestampOffset=o.start)}}},p.onManifestParsed=function(o){var c=2;(o.audio&&!o.video||!o.altAudio)&&(c=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=c,h.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},p.onMediaAttaching=function(o){var c=this.media=o.media;if(c&&Wm){var g=this.mediaSource=new Wm;g.addEventListener("sourceopen",this._onMediaSourceOpen),g.addEventListener("sourceended",this._onMediaSourceEnded),g.addEventListener("sourceclose",this._onMediaSourceClose),c.src=window.URL.createObjectURL(g),this._objectUrl=c.src}},p.onMediaDetaching=function(){h.logger.log("media source detaching");var o=this.mediaSource;if(o){if(o.readyState==="open")try{o.endOfStream()}catch(c){h.logger.warn("onMediaDetaching:"+c.message+" while calling endOfStream")}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):h.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},p.checkPendingTracks=function(){var o=this.bufferCodecEventsExpected,c=this.pendingTracks,g=Object.keys(c).length;(g&&!o||g===2)&&(this.createSourceBuffers(c),this.pendingTracks={},this.doAppending())},p.onBufferReset=function(){var o=this.sourceBuffer;for(var c in o){var g=o[c];try{g&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(g),g.removeEventListener("updateend",this._onSBUpdateEnd),g.removeEventListener("error",this._onSBUpdateError))}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},p.onBufferCodecs=function(o){var c=this;Object.keys(this.sourceBuffer).length||(Object.keys(o).forEach(function(g){c.pendingTracks[g]=o[g]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},p.createSourceBuffers=function(o){var c=this.sourceBuffer,g=this.mediaSource;if(!g)throw Error("createSourceBuffers called when mediaSource was null");for(var y in o)if(!c[y]){var b=o[y];if(!b)throw Error("source buffer exists for track "+y+", however track does not");var A=b.levelCodec||b.codec,L=b.container+";codecs="+A;h.logger.log("creating sourceBuffer("+L+")");try{var P=c[y]=g.addSourceBuffer(L);P.addEventListener("updateend",this._onSBUpdateEnd),P.addEventListener("error",this._onSBUpdateError),this.tracks[y]={buffer:P,codec:A,id:b.id,container:b.container,levelCodec:b.levelCodec}}catch(N){h.logger.error("error while trying to add sourceBuffer:"+N.message),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:N,mimeType:L})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},p.onBufferAppending=function(o){this._needsFlush||(this.segments?this.segments.push(o):this.segments=[o],this.doAppending())},p.onBufferEos=function(o){for(var c in this.sourceBuffer)if(!o.type||o.type===c){var g=this.sourceBuffer[c];g&&!g.ended&&(g.ended=!0,h.logger.log(c+" sourceBuffer now EOS"))}this.checkEos()},p.checkEos=function(){var o=this.sourceBuffer,c=this.mediaSource;if(!c||c.readyState!=="open"){this._needsEos=!1;return}for(var g in o){var y=o[g];if(!!y){if(!y.ended)return;if(y.updating){this._needsEos=!0;return}}}h.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{c.endOfStream()}catch{h.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},p.onBufferFlushing=function(o){o.type?this.flushRange.push({start:o.startOffset,end:o.endOffset,type:o.type}):(this.flushRange.push({start:o.startOffset,end:o.endOffset,type:"video"}),this.flushRange.push({start:o.startOffset,end:o.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},p.flushLiveBackBuffer=function(){if(!!this._live){var o=this.config.liveBackBufferLength;if(!(!isFinite(o)||o<0)){if(!this.media){h.logger.error("flushLiveBackBuffer called without attaching media");return}for(var c=this.media.currentTime,g=this.sourceBuffer,y=Object.keys(g),b=c-Math.max(o,this._levelTargetDuration),A=y.length-1;A>=0;A--){var L=y[A],P=g[L];if(P){var N=P.buffered;N.length>0&&b>N.start(0)&&this.removeBufferRange(L,P,0,b)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:b})}}}}},p.onLevelUpdated=function(o){var c=o.details;c.fragments.length>0&&(this._levelDuration=c.totalduration+c.fragments[0].start,this._levelTargetDuration=c.averagetargetduration||c.targetduration||10,this._live=c.live,this.updateMediaElementDuration())},p.updateMediaElementDuration=function(){var o=this.config,c;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var g in this.sourceBuffer){var y=this.sourceBuffer[g];if(y&&y.updating===!0)return}c=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&o.liveDurationInfinity===!0?(h.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>c||!Object(d.isFiniteNumber)(c))&&(h.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},p.doFlush=function(){for(;this.flushRange.length;){var o=this.flushRange[0];if(this.flushBuffer(o.start,o.end,o.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var c=0,g=this.sourceBuffer;try{for(var y in g){var b=g[y];b&&(c+=b.buffered.length)}}catch{h.logger.error("error while accessing sourceBuffer.buffered")}this.appended=c,this.hls.trigger(u.default.BUFFER_FLUSHED)}},p.doAppending=function(){var o=this.config,c=this.hls,g=this.segments,y=this.sourceBuffer;if(!!Object.keys(y).length){if(!this.media||this.media.error){this.segments=[],h.logger.error("trying to append although a media error occured, flush segment and abort");return}if(!this.appending){var b=g.shift();if(!!b)try{var A=y[b.type];if(!A){this._onSBUpdateEnd();return}if(A.updating){g.unshift(b);return}A.ended=!1,this.parent=b.parent,A.appendBuffer(b.data),this.appendError=0,this.appended++,this.appending=!0}catch(P){h.logger.error("error while trying to append buffer:"+P.message),g.unshift(b);var L={type:l.ErrorTypes.MEDIA_ERROR,parent:b.parent,details:"",fatal:!1};P.code===22?(this.segments=[],L.details=l.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,L.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>o.appendErrorMaxRetry&&(h.logger.log("fail "+o.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],L.fatal=!0)),c.trigger(u.default.ERROR,L)}}}},p.flushBuffer=function(o,c,g){var y=this.sourceBuffer;if(!Object.keys(y).length)return!0;var b="null";if(this.media&&(b=this.media.currentTime.toFixed(3)),h.logger.log("flushBuffer,pos/start/end: "+b+"/"+o+"/"+c),this.flushBufferCounter>=this.appended)return h.logger.warn("abort flushing too many retries"),!0;var A=y[g];if(A){if(A.ended=!1,A.updating)return h.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(g,A,o,c))return this.flushBufferCounter++,!1}return h.logger.log("buffer flushed"),!0},p.removeBufferRange=function(o,c,g,y){try{for(var b=0;b<c.buffered.length;b++){var A=c.buffered.start(b),L=c.buffered.end(b),P=Math.max(A,g),N=Math.min(L,y);if(Math.min(N,L)-P>.5){var G="null";return this.media&&(G=this.media.currentTime.toString()),h.logger.log("sb remove "+o+" ["+P+","+N+"], of ["+A+","+L+"], pos:"+G),c.remove(P,N),!0}}}catch(X){h.logger.warn("removeBufferRange failed",X)}return!1},v}(w),m1=g1;function Km(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function v1(T,v,p){return v&&Km(T.prototype,v),p&&Km(T,p),T}function y1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var E1=function(T){y1(v,T);function v(f){var o;return o=T.call(this,f,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.LEVELS_UPDATED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this,o.autoLevelCapping=Number.POSITIVE_INFINITY,o.firstLevel=null,o.levels=[],o.media=null,o.restrictedLevels=[],o.timer=null,o.clientRect=null,o}var p=v.prototype;return p.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},p.onFpsDropLevelCapping=function(o){v.isLevelAllowed(o.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(o.droppedLevel)},p.onMediaAttaching=function(o){this.media=o.media instanceof window.HTMLVideoElement?o.media:null},p.onManifestParsed=function(o){var c=this.hls;this.restrictedLevels=[],this.levels=o.levels,this.firstLevel=o.firstLevel,c.config.capLevelToPlayerSize&&o.video&&this.startCapping()},p.onBufferCodecs=function(o){var c=this.hls;c.config.capLevelToPlayerSize&&o.video&&this.startCapping()},p.onLevelsUpdated=function(o){this.levels=o.levels},p.onMediaDetaching=function(){this.stopCapping()},p.detectPlayerSize=function(){if(this.media){var o=this.levels?this.levels.length:0;if(o){var c=this.hls;c.autoLevelCapping=this.getMaxLevel(o-1),c.autoLevelCapping>this.autoLevelCapping&&c.streamController.nextLevelSwitch(),this.autoLevelCapping=c.autoLevelCapping}}},p.getMaxLevel=function(o){var c=this;if(!this.levels)return-1;var g=this.levels.filter(function(y,b){return v.isLevelAllowed(b,c.restrictedLevels)&&b<=o});return this.clientRect=null,v.getMaxLevelByMediaSize(g,this.mediaWidth,this.mediaHeight)},p.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},p.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},p.getDimensions=function(){if(this.clientRect)return this.clientRect;var o=this.media,c={width:0,height:0};if(o){var g=o.getBoundingClientRect();c.width=g.width,c.height=g.height,!c.width&&!c.height&&(c.width=g.right-g.left||o.width||0,c.height=g.bottom-g.top||o.height||0)}return this.clientRect=c,c},v.isLevelAllowed=function(o,c){return c===void 0&&(c=[]),c.indexOf(o)===-1},v.getMaxLevelByMediaSize=function(o,c,g){if(!o||o&&!o.length)return-1;for(var y=function(N,G){return G?N.width!==G.width||N.height!==G.height:!0},b=o.length-1,A=0;A<o.length;A+=1){var L=o[A];if((L.width>=c||L.height>=g)&&y(L,o[A+1])){b=A;break}}return b},v1(v,[{key:"mediaWidth",get:function(){return this.getDimensions().width*v.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*v.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var o=1;try{o=window.devicePixelRatio}catch{}return o}}]),v}(w),T1=E1;function w1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var S1=window,x1=S1.performance,_1=function(T){w1(v,T);function v(f){return T.call(this,f,u.default.MEDIA_ATTACHING)||this}var p=v.prototype;return p.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},p.onMediaAttaching=function(o){var c=this.hls.config;if(c.capLevelOnFPSDrop){var g=this.video=o.media instanceof window.HTMLVideoElement?o.media:null;typeof g.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),c.fpsDroppedMonitoringPeriod)}},p.checkFPS=function(o,c,g){var y=x1.now();if(c){if(this.lastTime){var b=y-this.lastTime,A=g-this.lastDroppedFrames,L=c-this.lastDecodedFrames,P=1e3*A/b,N=this.hls;if(N.trigger(u.default.FPS_DROP,{currentDropped:A,currentDecoded:L,totalDroppedFrames:g}),P>0&&A>N.config.fpsDroppedMonitoringThreshold*L){var G=N.currentLevel;h.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+G),G>0&&(N.autoLevelCapping===-1||N.autoLevelCapping>=G)&&(G=G-1,N.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:G,droppedLevel:N.currentLevel}),N.autoLevelCapping=G,N.streamController.nextLevelSwitch())}}this.lastTime=y,this.lastDroppedFrames=g,this.lastDecodedFrames=c}},p.checkFPSInterval=function(){var o=this.video;if(o)if(this.isVideoPlaybackQualityAvailable){var c=o.getVideoPlaybackQuality();this.checkFPS(o,c.totalVideoFrames,c.droppedVideoFrames)}else this.checkFPS(o,o.webkitDecodedFrameCount,o.webkitDroppedFrameCount)},v}(w),b1=_1,A1=function(){function T(p){p&&p.xhrSetup&&(this.xhrSetup=p.xhrSetup)}var v=T.prototype;return v.destroy=function(){this.abort(),this.loader=null},v.abort=function(){var f=this.loader;f&&f.readyState!==4&&(this.stats.aborted=!0,f.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},v.load=function(f,o,c){this.context=f,this.config=o,this.callbacks=c,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=o.retryDelay,this.loadInternal()},v.loadInternal=function(){var f,o=this.context;f=this.loader=new window.XMLHttpRequest;var c=this.stats;c.tfirst=0,c.loaded=0;var g=this.xhrSetup;try{if(g)try{g(f,o.url)}catch{f.open("GET",o.url,!0),g(f,o.url)}f.readyState||f.open("GET",o.url,!0)}catch(y){this.callbacks.onError({code:f.status,text:y.message},o,f);return}o.rangeEnd&&f.setRequestHeader("Range","bytes="+o.rangeStart+"-"+(o.rangeEnd-1)),f.onreadystatechange=this.readystatechange.bind(this),f.onprogress=this.loadprogress.bind(this),f.responseType=o.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),f.send()},v.readystatechange=function(f){var o=f.currentTarget,c=o.readyState,g=this.stats,y=this.context,b=this.config;if(!g.aborted&&c>=2)if(window.clearTimeout(this.requestTimeout),g.tfirst===0&&(g.tfirst=Math.max(window.performance.now(),g.trequest)),c===4){var A=o.status;if(A>=200&&A<300){g.tload=Math.max(g.tfirst,window.performance.now());var L,P;y.responseType==="arraybuffer"?(L=o.response,P=L.byteLength):(L=o.responseText,P=L.length),g.loaded=g.total=P;var N={url:o.responseURL,data:L};this.callbacks.onSuccess(N,g,y,o)}else g.retry>=b.maxRetry||A>=400&&A<499?(h.logger.error(A+" while loading "+y.url),this.callbacks.onError({code:A,text:o.statusText},y,o)):(h.logger.warn(A+" while loading "+y.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,b.maxRetryDelay),g.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),b.timeout)},v.loadtimeout=function(){h.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},v.loadprogress=function(f){var o=f.currentTarget,c=this.stats;c.loaded=f.loaded,f.lengthComputable&&(c.total=f.total);var g=this.callbacks.onProgress;g&&g(c,this.context,null,o)},T}(),I1=A1;function qm(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function R1(T,v,p){return v&&qm(T.prototype,v),p&&qm(T,p),T}function C1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var k1=function(T){C1(v,T);function v(f){var o;return o=T.call(this,f,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this,o._trackId=-1,o._selectDefaultTrack=!0,o.tracks=[],o.trackIdBlacklist=Object.create(null),o.audioGroupId=null,o}var p=v.prototype;return p.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},p.onManifestParsed=function(o){var c=this.tracks=o.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:c}),this._selectAudioGroup(this.hls.nextLoadLevel)},p.onAudioTrackLoaded=function(o){if(o.id>=this.tracks.length){h.logger.warn("Invalid audio track id:",o.id);return}if(h.logger.log("audioTrack "+o.id+" loaded"),this.tracks[o.id].details=o.details,o.details.live&&!this.hasInterval()){var c=o.details.targetduration*1e3;this.setInterval(c)}!o.details.live&&this.hasInterval()&&this.clearInterval()},p.onAudioTrackSwitched=function(o){var c=this.tracks[o.id].groupId;c&&this.audioGroupId!==c&&(this.audioGroupId=c)},p.onLevelLoaded=function(o){this._selectAudioGroup(o.level)},p.onError=function(o){o.type===l.ErrorTypes.NETWORK_ERROR&&(o.fatal&&this.clearInterval(),o.details===l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(h.logger.warn("Network failure on audio-track id:",o.context.id),this._handleLoadError()))},p._setAudioTrack=function(o){if(this._trackId===o&&this.tracks[this._trackId].details){h.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(o<0||o>=this.tracks.length){h.logger.warn("Invalid id passed to audio-track controller");return}var c=this.tracks[o];h.logger.log("Now switching to audio-track index "+o),this.clearInterval(),this._trackId=o;var g=c.url,y=c.type,b=c.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:b,type:y,url:g}),this._loadTrackDetailsIfNeeded(c)},p.doTick=function(){this._updateTrack(this._trackId)},p._selectAudioGroup=function(o){var c=this.hls.levels[o];if(!(!c||!c.audioGroupIds)){var g=c.audioGroupIds[c.urlId];this.audioGroupId!==g&&(this.audioGroupId=g,this._selectInitialAudioTrack())}},p._selectInitialAudioTrack=function(){var o=this,c=this.tracks;if(!!c.length){var g=this.tracks[this._trackId],y=null;if(g&&(y=g.name),this._selectDefaultTrack){var b=c.filter(function(P){return P.default});b.length?c=b:h.logger.warn("No default audio tracks defined")}var A=!1,L=function(){c.forEach(function(N){A||(!o.audioGroupId||N.groupId===o.audioGroupId)&&(!y||y===N.name)&&(o._setAudioTrack(N.id),A=!0)})};L(),A||(y=null,L()),A||(h.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},p._needsTrackLoading=function(o){var c=o.details,g=o.url;return!c||c.live?!!g:!1},p._loadTrackDetailsIfNeeded=function(o){if(this._needsTrackLoading(o)){var c=o.url,g=o.id;h.logger.log("loading audio-track playlist for id: "+g),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:c,id:g})}},p._updateTrack=function(o){if(!(o<0||o>=this.tracks.length)){this.clearInterval(),this._trackId=o,h.logger.log("trying to update audio-track "+o);var c=this.tracks[o];this._loadTrackDetailsIfNeeded(c)}},p._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var o=this._trackId,c=this.tracks[o],g=c.name,y=c.language,b=c.groupId;h.logger.warn("Loading failed on audio track id: "+o+", group-id: "+b+', name/language: "'+g+'" / "'+y+'"');for(var A=o,L=0;L<this.tracks.length;L++)if(!this.trackIdBlacklist[L]){var P=this.tracks[L];if(P.name===g){A=L;break}}if(A===o){h.logger.warn('No fallback audio-track found for name/language: "'+g+'" / "'+y+'"');return}h.logger.log("Attempting audio-track fallback id:",A,"group-id:",this.tracks[A].groupId),this._setAudioTrack(A)},R1(v,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(o){this._setAudioTrack(o),this._selectDefaultTrack=!1}}]),v}(dn),L1=k1;function Ym(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function D1(T,v,p){return v&&Ym(T.prototype,v),p&&Ym(T,p),T}function O1(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var P1=window,Mo=P1.performance,Xm=100,N1=function(T){O1(v,T);function v(f,o){var c;return c=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this,c.fragmentTracker=o,c.config=f.config,c.audioCodecSwap=!1,c._state=J.STOPPED,c.initPTS=[],c.waitingFragment=null,c.videoTrackCC=null,c.waitingVideoCC=null,c}var p=v.prototype;return p.onInitPtsFound=function(o){var c=o.id,g=o.frag.cc,y=o.initPTS;c==="main"&&(this.initPTS[g]=y,this.videoTrackCC=g,h.logger.log("InitPTS for cc: "+g+" found from main: "+y),this.state===J.WAITING_INIT_PTS&&this.tick())},p.startLoad=function(o){if(this.tracks){var c=this.lastCurrentTime;this.stopLoad(),this.setInterval(Xm),this.fragLoadError=0,c>0&&o===-1?(h.logger.log("audio:override startPosition with lastCurrentTime @"+c.toFixed(3)),this.state=J.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:o,this.state=J.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=o,this.state=J.STOPPED},p.doTick=function(){var o,c,g,y=this.hls,b=y.config;switch(this.state){case J.ERROR:case J.PAUSED:case J.BUFFER_FLUSHING:break;case J.STARTING:this.state=J.WAITING_TRACK,this.loadedmetadata=!1;break;case J.IDLE:var A=this.tracks;if(!A||!this.media&&(this.startFragRequested||!b.startFragPrefetch))break;if(this.loadedmetadata)o=this.media.currentTime;else if(o=this.nextLoadPosition,o===void 0)break;var L=this.mediaBuffer?this.mediaBuffer:this.media,P=this.videoBuffer?this.videoBuffer:this.media,N=o<b.maxBufferHole?Math.max(br,b.maxBufferHole):b.maxBufferHole,G=U.bufferInfo(L,o,N),X=U.bufferInfo(P,o,N),ie=G.len,de=G.end,_e=this.fragPrevious,ye=Math.min(b.maxBufferLength,b.maxMaxBufferLength),Ce=Math.max(ye,X.len),Ne=this.audioSwitch,Qe=this.trackId;if((ie<Ce||Ne)&&Qe<A.length){if(g=A[Qe].details,typeof g=="undefined"){this.state=J.WAITING_TRACK;break}if(!Ne&&this._streamEnded(G,g)){this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),this.state=J.ENDED;return}var _t=g.fragments,Pr=_t.length,Yt=_t[0].start,In=_t[Pr-1].start+_t[Pr-1].duration,Re;if(Ne){if(g.live&&!g.PTSKnown)h.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),de=0;else if(de=o,g.PTSKnown&&o<Yt)if(G.end>Yt||G.nextStart)h.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=Yt+.05;else return}if(g.initSegment&&!g.initSegment.data)Re=g.initSegment;else if(de<=Yt){if(Re=_t[0],this.videoTrackCC!==null&&Re.cc!==this.videoTrackCC&&(Re=ot(_t,this.videoTrackCC)),g.live&&Re.loadIdx&&Re.loadIdx===this.fragLoadIdx){var qe=G.nextStart?G.nextStart:Yt;h.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(qe+.05)),this.media.currentTime=qe+.05;return}}else{var Lt,xs=b.maxFragLookUpTolerance,_s=_e?_t[_e.sn-_t[0].sn+1]:void 0;de<In?(de>In-xs&&(xs=0),_s&&!mt(de,xs,_s)?Lt=_s:Lt=K.search(_t,function(Cb){return mt(de,xs,Cb)})):Lt=_t[Pr-1],Lt&&(Re=Lt,Yt=Lt.start,_e&&Re.level===_e.level&&Re.sn===_e.sn&&(Re.sn<g.endSN?(Re=_t[Re.sn+1-g.startSN],this.fragmentTracker.getState(Re)!==xt.OK&&h.logger.log("SN just loaded, load next one: "+Re.sn)):Re=null))}Re&&(Re.encrypted?(h.logger.log("Loading key for "+Re.sn+" of ["+g.startSN+" ,"+g.endSN+"],track "+Qe),this.state=J.KEY_LOADING,y.trigger(u.default.KEY_LOADING,{frag:Re})):(this.fragCurrent=Re,(Ne||this.fragmentTracker.getState(Re)===xt.NOT_LOADED)&&(h.logger.log("Loading "+Re.sn+", cc: "+Re.cc+" of ["+g.startSN+" ,"+g.endSN+"],track "+Qe+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+o+", bufferEnd: "+de.toFixed(3)),Re.sn!=="initSegment"&&(this.startFragRequested=!0),Object(d.isFiniteNumber)(Re.sn)&&(this.nextLoadPosition=Re.start+Re.duration),y.trigger(u.default.FRAG_LOADING,{frag:Re}),this.state=J.FRAG_LOADING)))}break;case J.WAITING_TRACK:c=this.tracks[this.trackId],c&&c.details&&(this.state=J.IDLE);break;case J.FRAG_LOADING_WAITING_RETRY:var Fo=Mo.now(),Kl=this.retryDate;L=this.media;var Ib=L&&L.seeking;(!Kl||Fo>=Kl||Ib)&&(h.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=J.IDLE);break;case J.WAITING_INIT_PTS:var Uo=this.waitingFragment;if(Uo){var Hf=Uo.frag.cc;if(this.initPTS[Hf]!==void 0)this.waitingFragment=null,this.state=J.FRAG_LOADING,this.onFragLoaded(Uo);else if(this.videoTrackCC!==this.waitingVideoCC)h.logger.log("Waiting fragment cc ("+Hf+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var wv=U.bufferInfo(this.mediaBuffer,this.media.currentTime,b.maxBufferHole),Rb=mt(wv.end,b.maxFragLookUpTolerance,Uo.frag);Rb<0&&(h.logger.log("Waiting fragment cc ("+Hf+") @ "+Uo.frag.start+" cancelled because another fragment at "+wv.end+" is needed"),this.clearWaitingFragment())}}else this.state=J.IDLE;break}},p.clearWaitingFragment=function(){var o=this.waitingFragment;o&&(this.fragmentTracker.removeFragment(o.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=J.IDLE)},p.onMediaAttached=function(o){var c=this.media=this.mediaBuffer=o.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),c.addEventListener("seeking",this.onvseeking),c.addEventListener("ended",this.onvended);var g=this.config;this.tracks&&g.autoStartLoad&&this.startLoad(g.startPosition)},p.onMediaDetaching=function(){var o=this.media;o&&o.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),o&&(o.removeEventListener("seeking",this.onvseeking),o.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},p.onAudioTracksUpdated=function(o){h.logger.log("audio tracks updated"),this.tracks=o.audioTracks},p.onAudioTrackSwitching=function(o){var c=!!o.url;this.trackId=o.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=J.PAUSED,c?this.setInterval(Xm):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),c&&(this.audioSwitch=!0,this.state=J.IDLE),this.tick()},p.onAudioTrackLoaded=function(o){var c=o.details,g=o.id,y=this.tracks[g],b=y.details,A=c.totalduration,L=0;if(h.logger.log("track "+g+" loaded ["+c.startSN+","+c.endSN+"],duration:"+A),c.live||b&&b.live?b&&c.fragments.length>0?(be(b,c),L=c.fragments[0].start,c.PTSKnown?h.logger.log("live audio playlist sliding:"+L.toFixed(3)):h.logger.log("live audio playlist - outdated PTS, unknown sliding")):(c.PTSKnown=!1,h.logger.log("live audio playlist - first load, unknown sliding")):c.PTSKnown=!1,y.details=c,!this.startFragRequested){if(this.startPosition===-1){var P=c.startTimeOffset;Object(d.isFiniteNumber)(P)?(h.logger.log("start time offset found in playlist, adjust startPosition to "+P),this.startPosition=P):c.live?(this.startPosition=this.computeLivePosition(L,c),h.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===J.WAITING_TRACK&&(this.state=J.IDLE),this.tick()},p.onKeyLoaded=function(){this.state===J.KEY_LOADING&&(this.state=J.IDLE,this.tick())},p.onFragLoaded=function(o){var c=this.fragCurrent,g=o.frag;if(this.state===J.FRAG_LOADING&&c&&g.type==="audio"&&g.level===c.level&&g.sn===c.sn){var y=this.tracks[this.trackId],b=y.details,A=b.totalduration,L=c.level,P=c.sn,N=c.cc,G=this.config.defaultAudioCodec||y.audioCodec||"mp4a.40.2",X=this.stats=o.stats;if(P==="initSegment")this.state=J.IDLE,X.tparsed=X.tbuffered=Mo.now(),b.initSegment.data=o.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:X,frag:c,id:"audio"}),this.tick();else{this.state=J.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ce(this.hls,"audio"));var ie=this.initPTS[N],de=b.initSegment?b.initSegment.data:[];if(ie!==void 0){this.pendingBuffering=!0,h.logger.log("Demuxing "+P+" of ["+b.startSN+" ,"+b.endSN+"],track "+L);var _e=!1;this.demuxer.push(o.payload,de,G,null,c,A,_e,ie)}else h.logger.log("Unknown video PTS for cc "+N+", waiting for video PTS before demuxing audio frag "+P+" of ["+b.startSN+" ,"+b.endSN+"],track "+L),this.waitingFragment=o,this.waitingVideoCC=this.videoTrackCC,this.state=J.WAITING_INIT_PTS}}this.fragLoadError=0},p.onFragParsingInitSegment=function(o){var c=this.fragCurrent,g=o.frag;if(c&&o.id==="audio"&&g.sn===c.sn&&g.level===c.level&&this.state===J.PARSING){var y=o.tracks,b;if(y.video&&delete y.video,b=y.audio,b){b.levelCodec=b.codec,b.id=o.id,this.hls.trigger(u.default.BUFFER_CODECS,y),h.logger.log("audio track:audio,container:"+b.container+",codecs[level/parsed]=["+b.levelCodec+"/"+b.codec+"]");var A=b.initSegment;if(A){var L={type:"audio",data:A,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[L]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,L))}this.tick()}}},p.onFragParsingData=function(o){var c=this,g=this.fragCurrent,y=o.frag;if(g&&o.id==="audio"&&o.type==="audio"&&y.sn===g.sn&&y.level===g.level&&this.state===J.PARSING){var b=this.trackId,A=this.tracks[b],L=this.hls;Object(d.isFiniteNumber)(o.endPTS)||(o.endPTS=o.startPTS+g.duration,o.endDTS=o.startDTS+g.duration),g.addElementaryStream(B.AUDIO),h.logger.log("parsed "+o.type+",PTS:["+o.startPTS.toFixed(3)+","+o.endPTS.toFixed(3)+"],DTS:["+o.startDTS.toFixed(3)+"/"+o.endDTS.toFixed(3)+"],nb:"+o.nb),ue(A.details,g,o.startPTS,o.endPTS);var P=this.media,N=!1;if(this.audioSwitch)if(P&&P.readyState){var G=P.currentTime;h.logger.log("switching audio track : currentTime:"+G),G>=o.startPTS&&(h.logger.log("switching audio track : flushing all audio"),this.state=J.BUFFER_FLUSHING,L.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),N=!0,this.audioSwitch=!1,L.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:b}))}else this.audioSwitch=!1,L.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:b});var X=this.pendingData;if(!X){h.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),L.trigger(u.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([o.data1,o.data2].forEach(function(ie){ie&&ie.length&&X.push({type:o.type,data:ie,parent:"audio",content:"data"})}),!N&&X.length&&(X.forEach(function(ie){c.state===J.PARSING&&(c.pendingBuffering=!0,c.hls.trigger(u.default.BUFFER_APPENDING,ie))}),this.pendingData=[],this.appended=!0)),this.tick()}},p.onFragParsed=function(o){var c=this.fragCurrent,g=o.frag;c&&o.id==="audio"&&g.sn===c.sn&&g.level===c.level&&this.state===J.PARSING&&(this.stats.tparsed=Mo.now(),this.state=J.PARSED,this._checkAppendedParsed())},p.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},p.onBufferCreated=function(o){var c=o.tracks.audio;c&&(this.mediaBuffer=c.buffer,this.loadedmetadata=!0),o.tracks.video&&(this.videoBuffer=o.tracks.video.buffer)},p.onBufferAppended=function(o){if(o.parent==="audio"){var c=this.state;(c===J.PARSING||c===J.PARSED)&&(this.pendingBuffering=o.pending>0,this._checkAppendedParsed())}},p._checkAppendedParsed=function(){if(this.state===J.PARSED&&(!this.appended||!this.pendingBuffering)){var o=this.fragCurrent,c=this.stats,g=this.hls;if(o){this.fragPrevious=o,c.tbuffered=Mo.now(),g.trigger(u.default.FRAG_BUFFERED,{stats:c,frag:o,id:"audio"});var y=this.mediaBuffer?this.mediaBuffer:this.media;y&&h.logger.log("audio buffered : "+tt.toString(y.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,g.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=J.IDLE}this.tick()}},p.onError=function(o){var c=o.frag;if(!(c&&c.type!=="audio"))switch(o.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:var g=o.frag;if(g&&g.type!=="audio")break;if(!o.fatal){var y=this.fragLoadError;y?y++:y=1;var b=this.config;if(y<=b.fragLoadingMaxRetry){this.fragLoadError=y;var A=Math.min(Math.pow(2,y-1)*b.fragLoadingRetryDelay,b.fragLoadingMaxRetryTimeout);h.logger.warn("AudioStreamController: frag loading failed, retry in "+A+" ms"),this.retryDate=Mo.now()+A,this.state=J.FRAG_LOADING_WAITING_RETRY}else h.logger.error("AudioStreamController: "+o.details+" reaches max retry, redispatch as fatal ..."),o.fatal=!0,this.state=J.ERROR}break;case l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==J.ERROR&&(this.state=o.fatal?J.ERROR:J.IDLE,h.logger.warn("AudioStreamController: "+o.details+" while loading frag, now switching to "+this.state+" state ..."));break;case l.ErrorDetails.BUFFER_FULL_ERROR:if(o.parent==="audio"&&(this.state===J.PARSING||this.state===J.PARSED)){var L=this.mediaBuffer,P=this.media.currentTime,N=L&&U.isBuffered(L,P)&&U.isBuffered(L,P+.5);if(N){var G=this.config;G.maxMaxBufferLength>=G.maxBufferLength&&(G.maxMaxBufferLength/=2,h.logger.warn("AudioStreamController: reduce max buffer length to "+G.maxMaxBufferLength+"s")),this.state=J.IDLE}else h.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=J.BUFFER_FLUSHING,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},p.onBufferFlushed=function(){var o=this,c=this.pendingData;c&&c.length?(h.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),c.forEach(function(g){o.hls.trigger(u.default.BUFFER_APPENDING,g)}),this.appended=!0,this.pendingData=[],this.state=J.PARSED):(this.state=J.IDLE,this.fragPrevious=null,this.tick())},D1(v,[{key:"state",set:function(o){if(this.state!==o){var c=this.state;this._state=o,h.logger.log("audio stream:"+c+"->"+o)}},get:function(){return this._state}}]),v}(mr),M1=N1,Qm=function(){if(typeof window!="undefined"&&window.VTTCue)return window.VTTCue;var T="auto",v={"":!0,lr:!0,rl:!0},p={start:!0,middle:!0,end:!0,left:!0,right:!0};function f(y){if(typeof y!="string")return!1;var b=v[y.toLowerCase()];return b?y.toLowerCase():!1}function o(y){if(typeof y!="string")return!1;var b=p[y.toLowerCase()];return b?y.toLowerCase():!1}function c(y){for(var b=1;b<arguments.length;b++){var A=arguments[b];for(var L in A)y[L]=A[L]}return y}function g(y,b,A){var L=this,P={};P.enumerable=!0,L.hasBeenReset=!1;var N="",G=!1,X=y,ie=b,de=A,_e=null,ye="",Ce=!0,Ne="auto",Qe="start",_t=50,Pr="middle",Yt=50,In="middle";Object.defineProperty(L,"id",c({},P,{get:function(){return N},set:function(qe){N=""+qe}})),Object.defineProperty(L,"pauseOnExit",c({},P,{get:function(){return G},set:function(qe){G=!!qe}})),Object.defineProperty(L,"startTime",c({},P,{get:function(){return X},set:function(qe){if(typeof qe!="number")throw new TypeError("Start time must be set to a number.");X=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"endTime",c({},P,{get:function(){return ie},set:function(qe){if(typeof qe!="number")throw new TypeError("End time must be set to a number.");ie=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"text",c({},P,{get:function(){return de},set:function(qe){de=""+qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"region",c({},P,{get:function(){return _e},set:function(qe){_e=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"vertical",c({},P,{get:function(){return ye},set:function(qe){var Lt=f(qe);if(Lt===!1)throw new SyntaxError("An invalid or illegal string was specified.");ye=Lt,this.hasBeenReset=!0}})),Object.defineProperty(L,"snapToLines",c({},P,{get:function(){return Ce},set:function(qe){Ce=!!qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"line",c({},P,{get:function(){return Ne},set:function(qe){if(typeof qe!="number"&&qe!==T)throw new SyntaxError("An invalid number or illegal string was specified.");Ne=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"lineAlign",c({},P,{get:function(){return Qe},set:function(qe){var Lt=o(qe);if(!Lt)throw new SyntaxError("An invalid or illegal string was specified.");Qe=Lt,this.hasBeenReset=!0}})),Object.defineProperty(L,"position",c({},P,{get:function(){return _t},set:function(qe){if(qe<0||qe>100)throw new Error("Position must be between 0 and 100.");_t=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"positionAlign",c({},P,{get:function(){return Pr},set:function(qe){var Lt=o(qe);if(!Lt)throw new SyntaxError("An invalid or illegal string was specified.");Pr=Lt,this.hasBeenReset=!0}})),Object.defineProperty(L,"size",c({},P,{get:function(){return Yt},set:function(qe){if(qe<0||qe>100)throw new Error("Size must be between 0 and 100.");Yt=qe,this.hasBeenReset=!0}})),Object.defineProperty(L,"align",c({},P,{get:function(){return In},set:function(qe){var Lt=o(qe);if(!Lt)throw new SyntaxError("An invalid or illegal string was specified.");In=Lt,this.hasBeenReset=!0}})),L.displayState=void 0}return g.prototype.getCueAsHTML=function(){var y=window.WebVTT;return y.convertCueToDOMTree(window,this.text)},g}(),F1=function(){return{decode:function(p){if(!p)return"";if(typeof p!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(p))}}};function Jm(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new F1,this.regionList=[]}function U1(T){function v(f,o,c,g){return(f|0)*3600+(o|0)*60+(c|0)+(g|0)/1e3}var p=T.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return p?p[3]?v(p[1],p[2],p[3].replace(":",""),p[4]):p[1]>59?v(p[1],p[2],0,p[4]):v(0,p[1],p[2],p[4]):null}function Zm(){this.values=Object.create(null)}Zm.prototype={set:function(v,p){!this.get(v)&&p!==""&&(this.values[v]=p)},get:function(v,p,f){return f?this.has(v)?this.values[v]:p[f]:this.has(v)?this.values[v]:p},has:function(v){return v in this.values},alt:function(v,p,f){for(var o=0;o<f.length;++o)if(p===f[o]){this.set(v,p);break}},integer:function(v,p){/^-?\d+$/.test(p)&&this.set(v,parseInt(p,10))},percent:function(v,p){return p.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(p=parseFloat(p),p>=0&&p<=100)?(this.set(v,p),!0):!1}};function ev(T,v,p,f){var o=f?T.split(f):[T];for(var c in o)if(typeof o[c]=="string"){var g=o[c].split(p);if(g.length===2){var y=g[0],b=g[1];v(y,b)}}}var Bf=new Qm(0,0,0),zl=Bf.align==="middle"?"middle":"center";function B1(T,v,p){var f=T;function o(){var y=U1(T);if(y===null)throw new Error("Malformed timestamp: "+f);return T=T.replace(/^[^\sa-zA-Z-]+/,""),y}function c(y,b){var A=new Zm;ev(y,function(N,G){switch(N){case"region":for(var X=p.length-1;X>=0;X--)if(p[X].id===G){A.set(N,p[X].region);break}break;case"vertical":A.alt(N,G,["rl","lr"]);break;case"line":var ie=G.split(","),de=ie[0];A.integer(N,de),A.percent(N,de)&&A.set("snapToLines",!1),A.alt(N,de,["auto"]),ie.length===2&&A.alt("lineAlign",ie[1],["start",zl,"end"]);break;case"position":ie=G.split(","),A.percent(N,ie[0]),ie.length===2&&A.alt("positionAlign",ie[1],["start",zl,"end","line-left","line-right","auto"]);break;case"size":A.percent(N,G);break;case"align":A.alt(N,G,["start",zl,"end","left","right"]);break}},/:/,/\s/),b.region=A.get("region",null),b.vertical=A.get("vertical","");var L=A.get("line","auto");L==="auto"&&Bf.line===-1&&(L=-1),b.line=L,b.lineAlign=A.get("lineAlign","start"),b.snapToLines=A.get("snapToLines",!0),b.size=A.get("size",100),b.align=A.get("align",zl);var P=A.get("position","auto");P==="auto"&&Bf.position===50&&(P=b.align==="start"||b.align==="left"?0:b.align==="end"||b.align==="right"?100:50),b.position=P}function g(){T=T.replace(/^\s+/,"")}if(g(),v.startTime=o(),g(),T.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+f);T=T.substr(3),g(),v.endTime=o(),g(),c(T,v)}function tv(T){return T.replace(/<br(?: \/)?>/gi,`
`)}Jm.prototype={parse:function(v){var p=this;v&&(p.buffer+=p.decoder.decode(v,{stream:!0}));function f(){var A=p.buffer,L=0;for(A=tv(A);L<A.length&&A[L]!=="\r"&&A[L]!==`
`;)++L;var P=A.substr(0,L);return A[L]==="\r"&&++L,A[L]===`
`&&++L,p.buffer=A.substr(L),P}function o(A){ev(A,function(L,P){},/:/)}try{var c;if(p.state==="INITIAL"){if(!/\r\n|\n/.test(p.buffer))return this;c=f();var g=c.match(/^()?WEBVTT([ \t].*)?$/);if(!g||!g[0])throw new Error("Malformed WebVTT signature.");p.state="HEADER"}for(var y=!1;p.buffer;){if(!/\r\n|\n/.test(p.buffer))return this;switch(y?y=!1:c=f(),p.state){case"HEADER":/:/.test(c)?o(c):c||(p.state="ID");continue;case"NOTE":c||(p.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(c)){p.state="NOTE";break}if(!c)continue;if(p.cue=new Qm(0,0,""),p.state="CUE",c.indexOf("-->")===-1){p.cue.id=c;continue}case"CUE":try{B1(c,p.cue,p.regionList)}catch{p.cue=null,p.state="BADCUE";continue}p.state="CUETEXT";continue;case"CUETEXT":var b=c.indexOf("-->")!==-1;if(!c||b&&(y=!0)){p.oncue&&p.oncue(p.cue),p.cue=null,p.state="ID";continue}p.cue.text&&(p.cue.text+=`
`),p.cue.text+=c;continue;case"BADCUE":c||(p.state="ID");continue}}}catch{p.state==="CUETEXT"&&p.cue&&p.oncue&&p.oncue(p.cue),p.cue=null,p.state=p.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var v=this;try{if(v.buffer+=v.decoder.decode(),(v.cue||v.state==="HEADER")&&(v.buffer+=`

`,v.parse()),v.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(p){throw p}return v.onflush&&v.onflush(),this}};var $1=Jm;function V1(T,v,p,f){for(var o=[],c,g,y,b,A,L=window.VTTCue||TextTrackCue,P=0;P<f.rows.length;P++)if(c=f.rows[P],y=!0,b=0,A="",!c.isEmpty()){for(var N=0;N<c.chars.length;N++)c.chars[N].uchar.match(/\s/)&&y?b++:(A+=c.chars[N].uchar,y=!1);c.cueStartTime=v,v===p&&(p+=1e-4),g=new L(v,p,tv(A.trim())),b>=16?b--:b++,navigator.userAgent.match(/Firefox\//)?g.line=P+1:g.line=P>7?P-2:P+1,g.align="left",g.position=Math.max(0,Math.min(100,100*(b/32))),o.push(g),T&&T.addCue(g)}return o}var rv={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},nv=function(v){var p=v;return rv.hasOwnProperty(v)&&(p=rv[v]),String.fromCharCode(p)},sn=15,An=100,j1={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},G1={17:2,18:4,21:6,22:8,23:10,19:13,20:15},z1={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},H1={25:2,26:4,29:6,30:8,31:10,27:13,28:15},W1=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Xe;(function(T){T[T.ERROR=0]="ERROR",T[T.TEXT=1]="TEXT",T[T.WARNING=2]="WARNING",T[T.INFO=2]="INFO",T[T.DEBUG=3]="DEBUG",T[T.DATA=3]="DATA"})(Xe||(Xe={}));var K1=function(){function T(){this.time=null,this.verboseLevel=Xe.ERROR}var v=T.prototype;return v.log=function(f,o){this.verboseLevel>=f&&h.logger.log(this.time+" ["+f+"] "+o)},T}(),Di=function(v){for(var p=[],f=0;f<v.length;f++)p.push(v[f].toString(16));return p},iv=function(){function T(p,f,o,c,g){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=p||"white",this.underline=f||!1,this.italics=o||!1,this.background=c||"black",this.flash=g||!1}var v=T.prototype;return v.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},v.setStyles=function(f){for(var o=["foreground","underline","italics","background","flash"],c=0;c<o.length;c++){var g=o[c];f.hasOwnProperty(g)&&(this[g]=f[g])}},v.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},v.equals=function(f){return this.foreground===f.foreground&&this.underline===f.underline&&this.italics===f.italics&&this.background===f.background&&this.flash===f.flash},v.copy=function(f){this.foreground=f.foreground,this.underline=f.underline,this.italics=f.italics,this.background=f.background,this.flash=f.flash},v.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},T}(),q1=function(){function T(p,f,o,c,g,y){this.uchar=void 0,this.penState=void 0,this.uchar=p||" ",this.penState=new iv(f,o,c,g,y)}var v=T.prototype;return v.reset=function(){this.uchar=" ",this.penState.reset()},v.setChar=function(f,o){this.uchar=f,this.penState.copy(o)},v.setPenState=function(f){this.penState.copy(f)},v.equals=function(f){return this.uchar===f.uchar&&this.penState.equals(f.penState)},v.copy=function(f){this.uchar=f.uchar,this.penState.copy(f.penState)},v.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},T}(),Y1=function(){function T(p){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var f=0;f<An;f++)this.chars.push(new q1);this.logger=p,this.pos=0,this.currPenState=new iv}var v=T.prototype;return v.equals=function(f){for(var o=!0,c=0;c<An;c++)if(!this.chars[c].equals(f.chars[c])){o=!1;break}return o},v.copy=function(f){for(var o=0;o<An;o++)this.chars[o].copy(f.chars[o])},v.isEmpty=function(){for(var f=!0,o=0;o<An;o++)if(!this.chars[o].isEmpty()){f=!1;break}return f},v.setCursor=function(f){this.pos!==f&&(this.pos=f),this.pos<0?(this.logger.log(Xe.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>An&&(this.logger.log(Xe.DEBUG,"Too large cursor position "+this.pos),this.pos=An)},v.moveCursor=function(f){var o=this.pos+f;if(f>1)for(var c=this.pos+1;c<o+1;c++)this.chars[c].setPenState(this.currPenState);this.setCursor(o)},v.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},v.insertChar=function(f){f>=144&&this.backSpace();var o=nv(f);if(this.pos>=An){this.logger.log(Xe.ERROR,"Cannot insert "+f.toString(16)+" ("+o+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(o,this.currPenState),this.moveCursor(1)},v.clearFromPos=function(f){var o;for(o=f;o<An;o++)this.chars[o].reset()},v.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},v.clearToEndOfRow=function(){this.clearFromPos(this.pos)},v.getTextString=function(){for(var f=[],o=!0,c=0;c<An;c++){var g=this.chars[c].uchar;g!==" "&&(o=!1),f.push(g)}return o?"":f.join("")},v.setPenStyles=function(f){this.currPenState.setStyles(f);var o=this.chars[this.pos];o.setPenState(this.currPenState)},T}(),$f=function(){function T(p){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var f=0;f<sn;f++)this.rows.push(new Y1(p));this.logger=p,this.currRow=sn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var v=T.prototype;return v.reset=function(){for(var f=0;f<sn;f++)this.rows[f].clear();this.currRow=sn-1},v.equals=function(f){for(var o=!0,c=0;c<sn;c++)if(!this.rows[c].equals(f.rows[c])){o=!1;break}return o},v.copy=function(f){for(var o=0;o<sn;o++)this.rows[o].copy(f.rows[o])},v.isEmpty=function(){for(var f=!0,o=0;o<sn;o++)if(!this.rows[o].isEmpty()){f=!1;break}return f},v.backSpace=function(){var f=this.rows[this.currRow];f.backSpace()},v.clearToEndOfRow=function(){var f=this.rows[this.currRow];f.clearToEndOfRow()},v.insertChar=function(f){var o=this.rows[this.currRow];o.insertChar(f)},v.setPen=function(f){var o=this.rows[this.currRow];o.setPenStyles(f)},v.moveCursor=function(f){var o=this.rows[this.currRow];o.moveCursor(f)},v.setCursor=function(f){this.logger.log(Xe.INFO,"setCursor: "+f);var o=this.rows[this.currRow];o.setCursor(f)},v.setPAC=function(f){this.logger.log(Xe.INFO,"pacData = "+JSON.stringify(f));var o=f.row-1;if(this.nrRollUpRows&&o<this.nrRollUpRows-1&&(o=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==o){for(var c=0;c<sn;c++)this.rows[c].clear();var g=this.currRow+1-this.nrRollUpRows,y=this.lastOutputScreen;if(y){var b=y.rows[g].cueStartTime,A=this.logger.time;if(b&&A!==null&&b<A)for(var L=0;L<this.nrRollUpRows;L++)this.rows[o-this.nrRollUpRows+L+1].copy(y.rows[g+L])}}this.currRow=o;var P=this.rows[this.currRow];if(f.indent!==null){var N=f.indent,G=Math.max(N-1,0);P.setCursor(f.indent),f.color=P.chars[G].penState.foreground}var X={foreground:f.color,underline:f.underline,italics:f.italics,background:"black",flash:!1};this.setPen(X)},v.setBkgData=function(f){this.logger.log(Xe.INFO,"bkgData = "+JSON.stringify(f)),this.backSpace(),this.setPen(f),this.insertChar(32)},v.setRollUpRows=function(f){this.nrRollUpRows=f},v.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(Xe.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(Xe.TEXT,this.getDisplayText());var f=this.currRow+1-this.nrRollUpRows,o=this.rows.splice(f,1)[0];o.clear(),this.rows.splice(this.currRow,0,o),this.logger.log(Xe.INFO,"Rolling up")},v.getDisplayText=function(f){f=f||!1;for(var o=[],c="",g=-1,y=0;y<sn;y++){var b=this.rows[y].getTextString();b&&(g=y+1,f?o.push("Row "+g+": '"+b+"'"):o.push(b.trim()))}return o.length>0&&(f?c="["+o.join(" | ")+"]":c=o.join(`
`)),c},v.getTextAndFormat=function(){return this.rows},T}(),sv=function(){function T(p,f,o){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=p,this.outputFilter=f,this.mode=null,this.verbose=0,this.displayedMemory=new $f(o),this.nonDisplayedMemory=new $f(o),this.lastOutputScreen=new $f(o),this.currRollUpRow=this.displayedMemory.rows[sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=o}var v=T.prototype;return v.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},v.getHandler=function(){return this.outputFilter},v.setHandler=function(f){this.outputFilter=f},v.setPAC=function(f){this.writeScreen.setPAC(f)},v.setBkgData=function(f){this.writeScreen.setBkgData(f)},v.setMode=function(f){f!==this.mode&&(this.mode=f,this.logger.log(Xe.INFO,"MODE="+f),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=f)},v.insertChars=function(f){for(var o=0;o<f.length;o++)this.writeScreen.insertChar(f[o]);var c=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(Xe.INFO,c+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(Xe.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},v.ccRCL=function(){this.logger.log(Xe.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},v.ccBS=function(){this.logger.log(Xe.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},v.ccAOF=function(){},v.ccAON=function(){},v.ccDER=function(){this.logger.log(Xe.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},v.ccRU=function(f){this.logger.log(Xe.INFO,"RU("+f+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(f)},v.ccFON=function(){this.logger.log(Xe.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},v.ccRDC=function(){this.logger.log(Xe.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},v.ccTR=function(){this.logger.log(Xe.INFO,"TR"),this.setMode("MODE_TEXT")},v.ccRTD=function(){this.logger.log(Xe.INFO,"RTD"),this.setMode("MODE_TEXT")},v.ccEDM=function(){this.logger.log(Xe.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},v.ccCR=function(){this.logger.log(Xe.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},v.ccENM=function(){this.logger.log(Xe.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},v.ccEOC=function(){if(this.logger.log(Xe.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var f=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=f,this.writeScreen=this.nonDisplayedMemory,this.logger.log(Xe.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},v.ccTO=function(f){this.logger.log(Xe.INFO,"TO("+f+") - Tab Offset"),this.writeScreen.moveCursor(f)},v.ccMIDROW=function(f){var o={flash:!1};if(o.underline=f%2==1,o.italics=f>=46,o.italics)o.foreground="white";else{var c=Math.floor(f/2)-16,g=["white","green","blue","cyan","red","yellow","magenta"];o.foreground=g[c]}this.logger.log(Xe.INFO,"MIDROW: "+JSON.stringify(o)),this.writeScreen.setPen(o)},v.outputDataUpdate=function(f){f===void 0&&(f=!1);var o=this.logger.time;o!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=o:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,o,this.lastOutputScreen),f&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:o),this.lastOutputScreen.copy(this.displayedMemory))},v.cueSplitAtTime=function(f){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.displayedMemory),this.cueStartTime=f))},T}(),X1=function(){function T(p,f,o){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var c=new K1;this.channels=[null,new sv(p,f,c),new sv(p+1,o,c)],this.cmdHistory=av(),this.logger=c}var v=T.prototype;return v.getHandler=function(f){return this.channels[f].getHandler()},v.setHandler=function(f,o){this.channels[f].setHandler(o)},v.addData=function(f,o){var c,g,y,b=!1;this.logger.time=f;for(var A=0;A<o.length;A+=2)if(g=o[A]&127,y=o[A+1]&127,!(g===0&&y===0)){if(this.logger.log(Xe.DATA,"["+Di([o[A],o[A+1]])+"] -> ("+Di([g,y])+")"),c=this.parseCmd(g,y),c||(c=this.parseMidrow(g,y)),c||(c=this.parsePAC(g,y)),c||(c=this.parseBackgroundAttributes(g,y)),!c&&(b=this.parseChars(g,y),b)){var L=this.currentChannel;if(L&&L>0){var P=this.channels[L];P.insertChars(b)}else this.logger.log(Xe.WARNING,"No channel found yet. TEXT-MODE?")}!c&&!b&&this.logger.log(Xe.WARNING,"Couldn't parse cleaned data "+Di([g,y])+" orig: "+Di([o[A],o[A+1]]))}},v.parseCmd=function(f,o){var c=this.cmdHistory,g=(f===20||f===28||f===21||f===29)&&o>=32&&o<=47,y=(f===23||f===31)&&o>=33&&o<=35;if(!(g||y))return!1;if(ov(f,o,c))return ws(null,null,c),this.logger.log(Xe.DEBUG,"Repeated command ("+Di([f,o])+") is dropped"),!0;var b=f===20||f===21||f===23?1:2,A=this.channels[b];return f===20||f===21||f===28||f===29?o===32?A.ccRCL():o===33?A.ccBS():o===34?A.ccAOF():o===35?A.ccAON():o===36?A.ccDER():o===37?A.ccRU(2):o===38?A.ccRU(3):o===39?A.ccRU(4):o===40?A.ccFON():o===41?A.ccRDC():o===42?A.ccTR():o===43?A.ccRTD():o===44?A.ccEDM():o===45?A.ccCR():o===46?A.ccENM():o===47&&A.ccEOC():A.ccTO(o-32),ws(f,o,c),this.currentChannel=b,!0},v.parseMidrow=function(f,o){var c=0;if((f===17||f===25)&&o>=32&&o<=47){if(f===17?c=1:c=2,c!==this.currentChannel)return this.logger.log(Xe.ERROR,"Mismatch channel in midrow parsing"),!1;var g=this.channels[c];return g?(g.ccMIDROW(o),this.logger.log(Xe.DEBUG,"MIDROW ("+Di([f,o])+")"),!0):!1}return!1},v.parsePAC=function(f,o){var c,g=this.cmdHistory,y=(f>=17&&f<=23||f>=25&&f<=31)&&o>=64&&o<=127,b=(f===16||f===24)&&o>=64&&o<=95;if(!(y||b))return!1;if(ov(f,o,g))return ws(null,null,g),!0;var A=f<=23?1:2;o>=64&&o<=95?c=A===1?j1[f]:z1[f]:c=A===1?G1[f]:H1[f];var L=this.channels[A];return L?(L.setPAC(this.interpretPAC(c,o)),ws(f,o,g),this.currentChannel=A,!0):!1},v.interpretPAC=function(f,o){var c=o,g={color:null,italics:!1,indent:null,underline:!1,row:f};return o>95?c=o-96:c=o-64,g.underline=(c&1)==1,c<=13?g.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(c/2)]:c<=15?(g.italics=!0,g.color="white"):g.indent=Math.floor((c-16)/2)*4,g},v.parseChars=function(f,o){var c,g=null,y=null;if(f>=25?(c=2,y=f-8):(c=1,y=f),y>=17&&y<=19){var b=o;y===17?b=o+80:y===18?b=o+112:b=o+144,this.logger.log(Xe.INFO,"Special char '"+nv(b)+"' in channel "+c),g=[b]}else f>=32&&f<=127&&(g=o===0?[f]:[f,o]);if(g){var A=Di(g);this.logger.log(Xe.DEBUG,"Char codes =  "+A.join(",")),ws(f,o,this.cmdHistory)}return g},v.parseBackgroundAttributes=function(f,o){var c=(f===16||f===24)&&o>=32&&o<=47,g=(f===23||f===31)&&o>=45&&o<=47;if(!(c||g))return!1;var y,b={};f===16||f===24?(y=Math.floor((o-32)/2),b.background=W1[y],o%2==1&&(b.background=b.background+"_semi")):o===45?b.background="transparent":(b.foreground="black",o===47&&(b.underline=!0));var A=f<=23?1:2,L=this.channels[A];return L.setBkgData(b),ws(f,o,this.cmdHistory),!0},v.reset=function(){for(var f=0;f<Object.keys(this.channels).length;f++){var o=this.channels[f];o&&o.reset()}this.cmdHistory=av()},v.cueSplitAtTime=function(f){for(var o=0;o<this.channels.length;o++){var c=this.channels[o];c&&c.cueSplitAtTime(f)}},T}();function ws(T,v,p){p.a=T,p.b=v}function ov(T,v,p){return p.a===T&&p.b===v}function av(){return{a:null,b:null}}var lv=X1,Hl=function(){function T(p,f){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=p,this.trackName=f}var v=T.prototype;return v.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},v.newCue=function(f,o,c){(this.startTime===null||this.startTime>f)&&(this.startTime=f),this.endTime=o,this.screen=c,this.timelineController.createCaptionsTrack(this.trackName)},v.reset=function(){this.cueRanges=[]},T}(),Vf=function(v,p,f){return v.substr(f||0,p.length)===p},Q1=function(v){var p=parseInt(v.substr(-3)),f=parseInt(v.substr(-6,2)),o=parseInt(v.substr(-9,2)),c=v.length>9?parseInt(v.substr(0,v.indexOf(":"))):0;if(!Object(d.isFiniteNumber)(p)||!Object(d.isFiniteNumber)(f)||!Object(d.isFiniteNumber)(o)||!Object(d.isFiniteNumber)(c))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+v);return p+=1e3*f,p+=60*1e3*o,p+=60*60*1e3*c,p},jf=function(v){for(var p=5381,f=v.length;f;)p=p*33^v.charCodeAt(--f);return(p>>>0).toString()},J1=function(v,p,f){var o=v[p],c=v[o.prevCC];if(!c||!c.new&&o.new){v.ccOffset=v.presentationOffset=o.start,o.new=!1;return}for(;c&&c.new;)v.ccOffset+=o.start-c.start,o.new=!1,o=c,c=v[o.prevCC];v.presentationOffset=f},Z1={parse:function(v,p,f,o,c,g){var y=/\r\n|\n\r|\n|\r/g,b=Object(Po.utf8ArrayToStr)(new Uint8Array(v)).trim().replace(y,`
`).split(`
`),A="00:00.000",L=0,P=0,N=0,G=[],X,ie=!0,de=!1,_e=new $1;_e.oncue=function(ye){var Ce=f[o],Ne=f.ccOffset;Ce&&Ce.new&&(P!==void 0?Ne=f.ccOffset=Ce.start:J1(f,o,N)),N&&(Ne=N-f.presentationOffset),de&&(ye.startTime+=Ne-P,ye.endTime+=Ne-P),ye.id=jf(ye.startTime.toString())+jf(ye.endTime.toString())+jf(ye.text),ye.text=decodeURIComponent(encodeURIComponent(ye.text)),ye.endTime>0&&G.push(ye)},_e.onparsingerror=function(ye){X=ye},_e.onflush=function(){if(X&&g){g(X);return}c(G)},b.forEach(function(ye){if(ie)if(Vf(ye,"X-TIMESTAMP-MAP=")){ie=!1,de=!0,ye.substr(16).split(",").forEach(function(Ce){Vf(Ce,"LOCAL:")?A=Ce.substr(6):Vf(Ce,"MPEGTS:")&&(L=parseInt(Ce.substr(7)))});try{p+(f[o].start*9e4||0)<0&&(p+=8589934592),L-=p,P=Q1(A)/1e3,N=L/9e4}catch(Ce){de=!1,X=Ce}return}else ye===""&&(ie=!1);_e.parse(ye+`
`)}),_e.flush()}},eb=Z1;function Wl(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function tb(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var rb=function(T){tb(v,T);function v(f){var o;if(o=T.call(this,f,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this,o.media=null,o.config=void 0,o.enabled=!0,o.Cues=void 0,o.textTracks=[],o.tracks=[],o.initPTS=[],o.unparsedVttFrags=[],o.captionsTracks={},o.nonNativeCaptionsTracks={},o.captionsProperties=void 0,o.cea608Parser1=void 0,o.cea608Parser2=void 0,o.lastSn=-1,o.prevCC=-1,o.vttCCs=uv(),o.hls=f,o.config=f.config,o.Cues=f.config.cueHandler,o.captionsProperties={textTrack1:{label:o.config.captionsTextTrack1Label,languageCode:o.config.captionsTextTrack1LanguageCode},textTrack2:{label:o.config.captionsTextTrack2Label,languageCode:o.config.captionsTextTrack2LanguageCode},textTrack3:{label:o.config.captionsTextTrack3Label,languageCode:o.config.captionsTextTrack3LanguageCode},textTrack4:{label:o.config.captionsTextTrack4Label,languageCode:o.config.captionsTextTrack4LanguageCode}},o.config.enableCEA708Captions){var c=new Hl(Wl(o),"textTrack1"),g=new Hl(Wl(o),"textTrack2"),y=new Hl(Wl(o),"textTrack3"),b=new Hl(Wl(o),"textTrack4");o.cea608Parser1=new lv(1,c,g),o.cea608Parser2=new lv(3,y,b)}return o}var p=v.prototype;return p.addCues=function(o,c,g,y,b){for(var A=!1,L=b.length;L--;){var P=b[L],N=ib(P[0],P[1],c,g);if(N>=0&&(P[0]=Math.min(P[0],c),P[1]=Math.max(P[1],g),A=!0,N/(g-c)>.5))return}if(A||b.push([c,g]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[o],c,g,y);else{var G=this.Cues.newCue(null,c,g,y);this.hls.trigger(u.default.CUES_PARSED,{type:"captions",cues:G,track:o})}},p.onInitPtsFound=function(o){var c=this,g=o.frag,y=o.id,b=o.initPTS,A=this.unparsedVttFrags;y==="main"&&(this.initPTS[g.cc]=b),A.length&&(this.unparsedVttFrags=[],A.forEach(function(L){c.onFragLoaded(L)}))},p.getExistingTrack=function(o){var c=this.media;if(c)for(var g=0;g<c.textTracks.length;g++){var y=c.textTracks[g];if(y[o])return y}return null},p.createCaptionsTrack=function(o){this.config.renderTextTracksNatively?this.createNativeTrack(o):this.createNonNativeTrack(o)},p.createNativeTrack=function(o){if(!this.captionsTracks[o]){var c=this.captionsProperties,g=this.captionsTracks,y=this.media,b=c[o],A=b.label,L=b.languageCode,P=this.getExistingTrack(o);if(P)g[o]=P,Li(g[o]),Es(g[o],y);else{var N=this.createTextTrack("captions",A,L);N&&(N[o]=!0,g[o]=N)}}},p.createNonNativeTrack=function(o){if(!this.nonNativeCaptionsTracks[o]){var c=this.captionsProperties[o];if(!!c){var g=c.label,y={_id:o,label:g,kind:"captions",default:c.media?!!c.media.default:!1,closedCaptions:c.media};this.nonNativeCaptionsTracks[o]=y,this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[y]})}}},p.createTextTrack=function(o,c,g){var y=this.media;if(!!y)return y.addTextTrack(o,c,g)},p.destroy=function(){T.prototype.destroy.call(this)},p.onMediaAttaching=function(o){this.media=o.media,this._cleanTracks()},p.onMediaDetaching=function(){var o=this.captionsTracks;Object.keys(o).forEach(function(c){Li(o[c]),delete o[c]}),this.nonNativeCaptionsTracks={}},p.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=uv(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},p._cleanTracks=function(){var o=this.media;if(!!o){var c=o.textTracks;if(c)for(var g=0;g<c.length;g++)Li(c[g])}},p.onManifestLoaded=function(o){var c=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var g=o.subtitles||[],y=this.tracks&&g&&this.tracks.length===g.length;if(this.tracks=o.subtitles||[],this.config.renderTextTracksNatively){var b=this.media?this.media.textTracks:[];this.tracks.forEach(function(L,P){var N;if(P<b.length){for(var G=null,X=0;X<b.length;X++)if(nb(b[X],L)){G=b[X];break}G&&(N=G)}N||(N=c.createTextTrack("subtitles",L.name,L.lang)),L.default?N.mode=c.hls.subtitleDisplay?"showing":"hidden":N.mode="disabled",c.textTracks.push(N)})}else if(!y&&this.tracks&&this.tracks.length){var A=this.tracks.map(function(L){return{label:L.name,kind:L.type.toLowerCase(),default:L.default,subtitleTrack:L}});this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:A})}}this.config.enableCEA708Captions&&o.captions&&o.captions.forEach(function(L){var P=/(?:CC|SERVICE)([1-4])/.exec(L.instreamId);if(!!P){var N="textTrack"+P[1],G=c.captionsProperties[N];!G||(G.label=L.name,L.lang&&(G.languageCode=L.lang),G.media=L)}})},p.onFragLoaded=function(o){var c=o.frag,g=o.payload,y=this.cea608Parser1,b=this.cea608Parser2,A=this.initPTS,L=this.lastSn,P=this.unparsedVttFrags;if(c.type==="main"){var N=c.sn;c.sn!==L+1&&y&&b&&(y.reset(),b.reset()),this.lastSn=N}else if(c.type==="subtitle")if(g.byteLength){if(!Object(d.isFiniteNumber)(A[c.cc])){P.push(o),A.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c});return}var G=c.decryptdata;(G==null||G.key==null||G.method!=="AES-128")&&this._parseVTTs(c,g)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c})},p._parseVTTs=function(o,c){var g=this,y=this.hls,b=this.prevCC,A=this.textTracks,L=this.vttCCs;L[o.cc]||(L[o.cc]={start:o.start,prevCC:b,new:!0},this.prevCC=o.cc),eb.parse(c,this.initPTS[o.cc],L,o.cc,function(P){if(g.config.renderTextTracksNatively){var N=A[o.level];if(N.mode==="disabled"){y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o});return}P.forEach(function(X){if(!N.cues.getCueById(X.id))try{if(N.addCue(X),!N.cues.getCueById(X.id))throw new Error("addCue is failed for: "+X)}catch(de){h.logger.debug("Failed occurred on adding cues: "+de);var ie=new window.TextTrackCue(X.startTime,X.endTime,X.text);ie.id=X.id,N.addCue(ie)}})}else{var G=g.tracks[o.level].default?"default":"subtitles"+o.level;y.trigger(u.default.CUES_PARSED,{type:"subtitles",cues:P,track:G})}y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:o})},function(P){h.logger.log("Failed to parse VTT cue: "+P),y.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o})})},p.onFragDecrypted=function(o){var c=o.frag,g=o.payload;if(c.type==="subtitle"){if(!Object(d.isFiniteNumber)(this.initPTS[c.cc])){this.unparsedVttFrags.push(o);return}this._parseVTTs(c,g)}},p.onFragParsingUserdata=function(o){var c=this.cea608Parser1,g=this.cea608Parser2;if(!(!this.enabled||!(c&&g)))for(var y=0;y<o.samples.length;y++){var b=o.samples[y].bytes;if(b){var A=this.extractCea608Data(b);c.addData(o.samples[y].pts,A[0]),g.addData(o.samples[y].pts,A[1])}}},p.extractCea608Data=function(o){for(var c=o[0]&31,g=2,y=[[],[]],b=0;b<c;b++){var A=o[g++],L=127&o[g++],P=127&o[g++],N=(4&A)!=0,G=3&A;L===0&&P===0||N&&(G===0||G===1)&&(y[G].push(L),y[G].push(P))}return y},v}(w);function nb(T,v){return T&&T.label===v.name&&!(T.textTrack1||T.textTrack2)}function ib(T,v,p,f){return Math.min(v,f)-Math.max(T,p)}function uv(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var sb=rb;function cv(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function ob(T,v,p){return v&&cv(T.prototype,v),p&&cv(T,p),T}function ab(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var lb=function(T){ab(v,T);function v(f){var o;return o=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this,o.tracks=[],o.trackId=-1,o.media=null,o.stopped=!0,o.subtitleDisplay=!0,o.queuedDefaultTrack=null,o}var p=v.prototype;return p.destroy=function(){w.prototype.destroy.call(this)},p.onMediaAttached=function(o){var c=this;this.media=o.media,!!this.media&&(Object(d.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){c.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},p.onMediaDetaching=function(){if(!!this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(d.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var o=Gf(this.media.textTracks);o.forEach(function(c){Li(c)}),this.subtitleTrack=-1,this.media=null}},p.onManifestLoaded=function(o){var c=this,g=o.subtitles||[];this.tracks=g,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:g}),g.forEach(function(y){y.default&&(c.media?c.subtitleTrack=y.id:c.queuedDefaultTrack=y.id)})},p.onSubtitleTrackLoaded=function(o){var c=this,g=o.id,y=o.details,b=this.trackId,A=this.tracks,L=A[b];if(g>=A.length||g!==b||!L||this.stopped){this._clearReloadTimer();return}if(h.logger.log("subtitle track "+g+" loaded"),y.live){var P=$e(L.details,y,o.stats.trequest);h.logger.log("Reloading live subtitle playlist in "+P+"ms"),this.timer=setTimeout(function(){c._loadCurrentTrack()},P)}else this._clearReloadTimer()},p.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},p.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},p._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},p._loadCurrentTrack=function(){var o=this.trackId,c=this.tracks,g=this.hls,y=c[o];o<0||!y||y.details&&!y.details.live||(h.logger.log("Loading subtitle track "+o),g.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:y.url,id:o}))},p._toggleTrackModes=function(o){var c=this.media,g=this.subtitleDisplay,y=this.trackId;if(!!c){var b=Gf(c.textTracks);if(o===-1)[].slice.call(b).forEach(function(P){P.mode="disabled"});else{var A=b[y];A&&(A.mode="disabled")}var L=b[o];L&&(L.mode=g?"showing":"hidden")}},p._setSubtitleTrackInternal=function(o){var c=this.hls,g=this.tracks;!Object(d.isFiniteNumber)(o)||o<-1||o>=g.length||(this.trackId=o,h.logger.log("Switching to subtitle track "+o),c.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:o}),this._loadCurrentTrack())},p._onTextTracksChanged=function(){if(!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var o=-1,c=Gf(this.media.textTracks),g=0;g<c.length;g++)if(c[g].mode==="hidden")o=g;else if(c[g].mode==="showing"){o=g;break}this.subtitleTrack=o}},ob(v,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(o){this.trackId!==o&&(this._toggleTrackModes(o),this._setSubtitleTrackInternal(o))}}]),v}(w);function Gf(T){for(var v=[],p=0;p<T.length;p++){var f=T[p];f.kind==="subtitles"&&f.label&&v.push(T[p])}return v}var ub=lb,cb=i("./src/crypt/decrypter.js");function fb(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function db(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var hb=window,fv=hb.performance,zf=500,pb=function(T){db(v,T);function v(f,o){var c;return c=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this,c.fragmentTracker=o,c.config=f.config,c.state=J.STOPPED,c.tracks=[],c.tracksBuffered=[],c.currentTrackId=-1,c.decrypter=new cb.default(f,f.config),c.lastAVStart=0,c._onMediaSeeking=c.onMediaSeeking.bind(fb(c)),c}var p=v.prototype;return p.startLoad=function(){this.stopLoad(),this.state=J.IDLE;var o=this.tracks[this.currentTrackId];o&&o.details&&(this.setInterval(zf),this.tick())},p.onSubtitleFragProcessed=function(o){var c=o.frag,g=o.success;if(this.fragPrevious=c,this.state=J.IDLE,!!g){var y=this.tracksBuffered[this.currentTrackId];if(!!y){for(var b,A=c.start,L=0;L<y.length;L++)if(A>=y[L].start&&A<=y[L].end){b=y[L];break}var P=c.start+c.duration;b?b.end=P:(b={start:A,end:P},y.push(b))}}},p.onMediaAttached=function(o){var c=o.media;this.media=c,c.addEventListener("seeking",this._onMediaSeeking),this.state=J.IDLE},p.onMediaDetaching=function(){var o=this;!this.media||(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(c){o.tracksBuffered[c.id]=[]}),this.media=null,this.state=J.STOPPED)},p.onError=function(o){var c=o.frag;!c||c.type!=="subtitle"||(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=J.IDLE)},p.onSubtitleTracksUpdated=function(o){var c=this;h.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=o.subtitleTracks,this.tracks.forEach(function(g){c.tracksBuffered[g.id]=[]})},p.onSubtitleTrackSwitch=function(o){if(this.currentTrackId=o.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1){this.clearInterval();return}var c=this.tracks[this.currentTrackId];c&&c.details&&this.setInterval(zf)},p.onSubtitleTrackLoaded=function(o){var c=o.id,g=o.details,y=this.currentTrackId,b=this.tracks,A=b[y];c>=b.length||c!==y||!A||(g.live&&xe(A.details,g,this.lastAVStart),A.details=g,this.setInterval(zf))},p.onKeyLoaded=function(){this.state===J.KEY_LOADING&&(this.state=J.IDLE)},p.onFragLoaded=function(o){var c=this.fragCurrent,g=o.frag.decryptdata,y=o.frag,b=this.hls;if(this.state===J.FRAG_LOADING&&c&&o.frag.type==="subtitle"&&c.sn===o.frag.sn&&o.payload.byteLength>0&&g&&g.key&&g.method==="AES-128"){var A=fv.now();this.decrypter.decrypt(o.payload,g.key.buffer,g.iv.buffer,function(L){var P=fv.now();b.trigger(u.default.FRAG_DECRYPTED,{frag:y,payload:L,stats:{tstart:A,tdecrypt:P}})})}},p.onLevelUpdated=function(o){var c=o.details,g=c.fragments;this.lastAVStart=g.length?g[0].start:0},p.doTick=function(){if(!this.media){this.state=J.IDLE;return}switch(this.state){case J.IDLE:{var o=this.config,c=this.currentTrackId,g=this.fragmentTracker,y=this.media,b=this.tracks;if(!b||!b[c]||!b[c].details)break;var A=o.maxBufferHole,L=o.maxFragLookUpTolerance,P=Math.min(o.maxBufferLength,o.maxMaxBufferLength),N=U.bufferedInfo(this._getBuffered(),y.currentTime,A),G=N.end,X=N.len,ie=b[c].details,de=ie.fragments,_e=de.length,ye=de[_e-1].start+de[_e-1].duration;if(X>P)return;var Ce,Ne=this.fragPrevious;G<ye?(Ne&&ie.hasProgramDateTime&&(Ce=gr(de,Ne.endProgramDateTime,L)),Ce||(Ce=kt(Ne,de,G,L))):Ce=de[_e-1],Ce&&Ce.encrypted?(h.logger.log("Loading key for "+Ce.sn),this.state=J.KEY_LOADING,this.hls.trigger(u.default.KEY_LOADING,{frag:Ce})):Ce&&g.getState(Ce)===xt.NOT_LOADED&&(this.fragCurrent=Ce,this.state=J.FRAG_LOADING,this.hls.trigger(u.default.FRAG_LOADING,{frag:Ce}))}}},p.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,T.prototype.stopLoad.call(this)},p._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},p.onMediaSeeking=function(){if(this.fragCurrent){var o=this.media?this.media.currentTime:0,c=this.config.maxFragLookUpTolerance,g=this.fragCurrent.start-c,y=this.fragCurrent.start+this.fragCurrent.duration+c;(o<g||o>y)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=J.IDLE,this.tick())}},v}(mr),Ss;(function(T){T.WIDEVINE="com.widevine.alpha",T.PLAYREADY="com.microsoft.playready"})(Ss||(Ss={}));var gb=function(){return typeof window!="undefined"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function dv(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function mb(T,v,p){return v&&dv(T.prototype,v),p&&dv(T,p),T}function vb(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var hv=3,yb=function(v,p,f){var o={audioCapabilities:[],videoCapabilities:[]};return v.forEach(function(c){o.audioCapabilities.push({contentType:'audio/mp4; codecs="'+c+'"',robustness:f.audioRobustness||""})}),p.forEach(function(c){o.videoCapabilities.push({contentType:'video/mp4; codecs="'+c+'"',robustness:f.videoRobustness||""})}),[o]},Eb=function(v,p,f,o){switch(v){case Ss.WIDEVINE:return yb(p,f,o);default:throw new Error("Unknown key-system: "+v)}},Tb=function(T){vb(v,T);function v(f){var o;return o=T.call(this,f,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this,o._widevineLicenseUrl=void 0,o._licenseXhrSetup=void 0,o._emeEnabled=void 0,o._requestMediaKeySystemAccess=void 0,o._drmSystemOptions=void 0,o._config=void 0,o._mediaKeysList=[],o._media=null,o._hasSetMediaKeys=!1,o._requestLicenseFailureCount=0,o.mediaKeysPromise=null,o._onMediaEncrypted=function(c){if(h.logger.log('Media is encrypted using "'+c.initDataType+'" init data type'),!o.mediaKeysPromise){h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),o.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var g=function(b){!o._media||(o._attemptSetMediaKeys(b),o._generateRequestWithPreferredKeySession(c.initDataType,c.initData))};o.mediaKeysPromise.then(g).catch(g)},o._config=f.config,o._widevineLicenseUrl=o._config.widevineLicenseUrl,o._licenseXhrSetup=o._config.licenseXhrSetup,o._emeEnabled=o._config.emeEnabled,o._requestMediaKeySystemAccess=o._config.requestMediaKeySystemAccessFunc,o._drmSystemOptions=f.config.drmSystemOptions,o}var p=v.prototype;return p.getLicenseServerUrl=function(o){switch(o){case Ss.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+o+'"')},p._attemptKeySystemAccess=function(o,c,g){var y=this,b=Eb(o,c,g,this._drmSystemOptions);h.logger.log("Requesting encrypted media key-system access");var A=this.requestMediaKeySystemAccess(o,b);this.mediaKeysPromise=A.then(function(L){return y._onMediaKeySystemAccessObtained(o,L)}),A.catch(function(L){h.logger.error('Failed to obtain key-system "'+o+'" access:',L)})},p._onMediaKeySystemAccessObtained=function(o,c){var g=this;h.logger.log('Access for key-system "'+o+'" obtained');var y={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:c,mediaKeySystemDomain:o};this._mediaKeysList.push(y);var b=Promise.resolve().then(function(){return c.createMediaKeys()}).then(function(A){return y.mediaKeys=A,h.logger.log('Media-keys created for key-system "'+o+'"'),g._onMediaKeysCreated(),A});return b.catch(function(A){h.logger.error("Failed to create media-keys:",A)}),b},p._onMediaKeysCreated=function(){var o=this;this._mediaKeysList.forEach(function(c){c.mediaKeysSession||(c.mediaKeysSession=c.mediaKeys.createSession(),o._onNewMediaKeySession(c.mediaKeysSession))})},p._onNewMediaKeySession=function(o){var c=this;h.logger.log("New key-system session "+o.sessionId),o.addEventListener("message",function(g){c._onKeySessionMessage(o,g.message)},!1)},p._onKeySessionMessage=function(o,c){h.logger.log("Got EME message event, creating license request"),this._requestLicense(c,function(g){h.logger.log("Received license data (length: "+(g&&g.byteLength)+"), updating key-session"),o.update(g)})},p._attemptSetMediaKeys=function(o){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var c=this._mediaKeysList[0];if(!c||!c.mediaKeys){h.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}h.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(c.mediaKeys),this._hasSetMediaKeys=!0}},p._generateRequestWithPreferredKeySession=function(o,c){var g=this,y=this._mediaKeysList[0];if(!y){h.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(y.mediaKeysSessionInitialized){h.logger.warn("Key-Session already initialized but requested again");return}var b=y.mediaKeysSession;if(!b){h.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!c){h.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}h.logger.log('Generating key-session request for "'+o+'" init data type'),y.mediaKeysSessionInitialized=!0,b.generateRequest(o,c).then(function(){h.logger.debug("Key-session generation succeeded")}).catch(function(A){h.logger.error("Error generating key-session request:",A),g.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},p._createLicenseXhr=function(o,c,g){var y=new XMLHttpRequest,b=this._licenseXhrSetup;try{if(b)try{b(y,o)}catch{y.open("POST",o,!0),b(y,o)}y.readyState||y.open("POST",o,!0)}catch(A){throw new Error("issue setting up KeySystem license XHR "+A)}return y.responseType="arraybuffer",y.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,y,o,c,g),y},p._onLicenseRequestReadyStageChange=function(o,c,g,y){switch(o.readyState){case 4:if(o.status===200)this._requestLicenseFailureCount=0,h.logger.log("License request succeeded"),o.responseType!=="arraybuffer"&&h.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),y(o.response);else{if(h.logger.error("License Request XHR failed ("+c+"). Status: "+o.status+" ("+o.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>hv){this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var b=hv-this._requestLicenseFailureCount+1;h.logger.warn("Retrying license request, "+b+" attempts left"),this._requestLicense(g,y)}break}},p._generateLicenseRequestChallenge=function(o,c){switch(o.mediaKeySystemDomain){case Ss.WIDEVINE:return c}throw new Error("unsupported key-system: "+o.mediaKeySystemDomain)},p._requestLicense=function(o,c){h.logger.log("Requesting content license for key-system");var g=this._mediaKeysList[0];if(!g){h.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var y=this.getLicenseServerUrl(g.mediaKeySystemDomain),b=this._createLicenseXhr(y,o,c);h.logger.log("Sending license request to URL: "+y);var A=this._generateLicenseRequestChallenge(g,o);b.send(A)}catch(L){h.logger.error("Failure requesting DRM license: "+L),this.hls.trigger(u.default.ERROR,{type:l.ErrorTypes.KEY_SYSTEM_ERROR,details:l.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},p.onMediaAttached=function(o){if(!!this._emeEnabled){var c=o.media;this._media=c,c.addEventListener("encrypted",this._onMediaEncrypted)}},p.onMediaDetached=function(){var o=this._media,c=this._mediaKeysList;!o||(o.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(c.map(function(g){if(g.mediaKeysSession)return g.mediaKeysSession.close().catch(function(){})})).then(function(){return o.setMediaKeys(null)}).catch(function(){}))},p.onManifestParsed=function(o){if(!!this._emeEnabled){var c=o.levels.map(function(y){return y.audioCodec}),g=o.levels.map(function(y){return y.videoCodec});this._attemptKeySystemAccess(Ss.WIDEVINE,c,g)}},mb(v,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),v}(w),wb=Tb;function pv(T,v){var p=Object.keys(T);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(T);v&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(T,o).enumerable})),p.push.apply(p,f)}return p}function gv(T){for(var v=1;v<arguments.length;v++){var p=arguments[v]!=null?arguments[v]:{};v%2?pv(Object(p),!0).forEach(function(f){Sb(T,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(p)):pv(Object(p)).forEach(function(f){Object.defineProperty(T,f,Object.getOwnPropertyDescriptor(p,f))})}return T}function Sb(T,v,p){return v in T?Object.defineProperty(T,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):T[v]=p,T}var xb=gv(gv({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:I1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:h1,bufferController:m1,capLevelController:T1,fpsController:b1,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:gb,testBandwidth:!0},_b()),{},{subtitleStreamController:pb,subtitleTrackController:ub,timelineController:sb,audioStreamController:M1,audioTrackController:L1,emeController:wb});function _b(){return{cueHandler:s,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function mv(T,v){var p=Object.keys(T);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(T);v&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(T,o).enumerable})),p.push.apply(p,f)}return p}function vv(T){for(var v=1;v<arguments.length;v++){var p=arguments[v]!=null?arguments[v]:{};v%2?mv(Object(p),!0).forEach(function(f){bb(T,f,p[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(p)):mv(Object(p)).forEach(function(f){Object.defineProperty(T,f,Object.getOwnPropertyDescriptor(p,f))})}return T}function bb(T,v,p){return v in T?Object.defineProperty(T,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):T[v]=p,T}function $t(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function yv(T,v){for(var p=0;p<v.length;p++){var f=v[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(T,f.key,f)}}function Ev(T,v,p){return v&&yv(T.prototype,v),p&&yv(T,p),T}function Ab(T,v){T.prototype=Object.create(v.prototype),T.prototype.constructor=T,T.__proto__=v}var Tv=function(T){Ab(v,T),v.isSupported=function(){return Uf()},Ev(v,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return v.defaultConfig?v.defaultConfig:xb},set:function(o){v.defaultConfig=o}}]);function v(f){var o;f===void 0&&(f={}),o=T.call(this)||this,o.config=void 0,o._autoLevelCapping=void 0,o.abrController=void 0,o.capLevelController=void 0,o.levelController=void 0,o.streamController=void 0,o.networkControllers=void 0,o.audioTrackController=void 0,o.subtitleTrackController=void 0,o.emeController=void 0,o.coreComponents=void 0,o.media=null,o.url=null;var c=v.DefaultConfig;if((f.liveSyncDurationCount||f.liveMaxLatencyDurationCount)&&(f.liveSyncDuration||f.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");o.config=vv(vv({},c),f);var g=$t(o),y=g.config;if(y.liveMaxLatencyDurationCount!==void 0&&y.liveMaxLatencyDurationCount<=y.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(y.liveMaxLatencyDuration!==void 0&&(y.liveSyncDuration===void 0||y.liveMaxLatencyDuration<=y.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(h.enableLogs)(y.debug),o._autoLevelCapping=-1;var b=o.abrController=new y.abrController($t(o)),A=new y.bufferController($t(o)),L=o.capLevelController=new y.capLevelController($t(o)),P=new y.fpsController($t(o)),N=new Rt($t(o)),G=new st($t(o)),X=new Zr($t(o)),ie=new Ff($t(o)),de=o.levelController=new Mf($t(o)),_e=new bn($t(o)),ye=o.streamController=new Bl($t(o),_e),Ce=[de,ye],Ne=y.audioStreamController;Ne&&Ce.push(new Ne($t(o),_e)),o.networkControllers=Ce;var Qe=[N,G,X,b,A,L,P,ie,_e];if(Ne=y.audioTrackController,Ne){var _t=new Ne($t(o));o.audioTrackController=_t,Qe.push(_t)}if(Ne=y.subtitleTrackController,Ne){var Pr=new Ne($t(o));o.subtitleTrackController=Pr,Ce.push(Pr)}if(Ne=y.emeController,Ne){var Yt=new Ne($t(o));o.emeController=Yt,Qe.push(Yt)}return Ne=y.subtitleStreamController,Ne&&Ce.push(new Ne($t(o),_e)),Ne=y.timelineController,Ne&&Qe.push(new Ne($t(o))),o.coreComponents=Qe,o}var p=v.prototype;return p.destroy=function(){h.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(o){o.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},p.attachMedia=function(o){h.logger.log("attachMedia"),this.media=o,this.trigger(u.default.MEDIA_ATTACHING,{media:o})},p.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},p.loadSource=function(o){o=a.buildAbsoluteURL(window.location.href,o,{alwaysNormalize:!0}),h.logger.log("loadSource:"+o),this.url=o,this.trigger(u.default.MANIFEST_LOADING,{url:o})},p.startLoad=function(o){o===void 0&&(o=-1),h.logger.log("startLoad("+o+")"),this.networkControllers.forEach(function(c){c.startLoad(o)})},p.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach(function(o){o.stopLoad()})},p.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},p.recoverMediaError=function(){h.logger.log("recoverMediaError");var o=this.media;this.detachMedia(),o&&this.attachMedia(o)},p.removeLevel=function(o,c){c===void 0&&(c=0),this.levelController.removeLevel(o,c)},Ev(v,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(o){h.logger.log("set currentLevel:"+o),this.loadLevel=o,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(o){h.logger.log("set nextLevel:"+o),this.levelController.manualLevel=o,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(o){h.logger.log("set loadLevel:"+o),this.levelController.manualLevel=o}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(o){this.levelController.nextLoadLevel=o}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(o){h.logger.log("set firstLevel:"+o),this.levelController.firstLevel=o}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(o){h.logger.log("set startLevel:"+o),o!==-1&&(o=Math.max(o,this.minAutoLevel)),this.levelController.startLevel=o}},{key:"capLevelToPlayerSize",set:function(o){var c=!!o;c!==this.config.capLevelToPlayerSize&&(c?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=c)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(o){h.logger.log("set autoLevelCapping:"+o),this._autoLevelCapping=o}},{key:"bandwidthEstimate",get:function(){var o=this.abrController._bwEstimator;return o?o.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var o=this.levels,c=this.config.minAutoBitrate,g=o?o.length:0,y=0;y<g;y++){var b=o[y].realBitrate?Math.max(o[y].realBitrate,o[y].bitrate):o[y].bitrate;if(b>c)return y}return 0}},{key:"maxAutoLevel",get:function(){var o=this.levels,c=this.autoLevelCapping,g;return c===-1&&o&&o.length?g=o.length-1:g=c,g}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(o){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,o)}},{key:"audioTracks",get:function(){var o=this.audioTrackController;return o?o.audioTracks:[]}},{key:"audioTrack",get:function(){var o=this.audioTrackController;return o?o.audioTrack:-1},set:function(o){var c=this.audioTrackController;c&&(c.audioTrack=o)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var o=this.subtitleTrackController;return o?o.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var o=this.subtitleTrackController;return o?o.subtitleTrack:-1},set:function(o){var c=this.subtitleTrackController;c&&(c.subtitleTrack=o)}},{key:"subtitleDisplay",get:function(){var o=this.subtitleTrackController;return o?o.subtitleDisplay:!1},set:function(o){var c=this.subtitleTrackController;c&&(c.subtitleDisplay=o)}}]),v}(Q);Tv.defaultConfig=void 0},"./src/polyfills/number.js":function(r,n,i){i.r(n),i.d(n,"isFiniteNumber",function(){return s}),i.d(n,"MAX_SAFE_INTEGER",function(){return a});var s=Number.isFinite||function(l){return typeof l=="number"&&isFinite(l)},a=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(r,n,i){i.r(n),i.d(n,"getSelfScope",function(){return s});function s(){return typeof window=="undefined"?self:window}},"./src/utils/logger.js":function(r,n,i){i.r(n),i.d(n,"enableLogs",function(){return w}),i.d(n,"logger",function(){return C});var s=i("./src/utils/get-self-scope.js");function a(){}var l={trace:a,debug:a,log:a,warn:a,info:a,error:a},d=l;function u(R,S){return S="["+R+"] > "+S,S}var h=Object(s.getSelfScope)();function E(R){var S=h.console[R];return S?function(){for(var x=arguments.length,_=new Array(x),D=0;D<x;D++)_[D]=arguments[D];_[0]&&(_[0]=u(R,_[0])),S.apply(h.console,_)}:a}function m(R){for(var S=arguments.length,x=new Array(S>1?S-1:0),_=1;_<S;_++)x[_-1]=arguments[_];x.forEach(function(D){d[D]=R[D]?R[D].bind(R):E(D)})}var w=function(S){if(h.console&&S===!0||typeof S=="object"){m(S,"debug","log","info","warn","error");try{d.log()}catch{d=l}}else d=l},C=d}}).default})})(OT);var di=Pb(OT.exports),ja=globalThis&&globalThis.__assign||function(){return ja=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ja.apply(this,arguments)},hk=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};function U2(t){var e=t.hlsConfig,r=t.playerRef,n=r===void 0?Gn.createRef():r,i=t.src,s=t.autoPlay,a=hk(t,["hlsConfig","playerRef","src","autoPlay"]);return ae.exports.useEffect(function(){var l;function d(){l!=null&&l.destroy();var u=new di(ja({enableWorker:!1},e));n.current!=null&&u.attachMedia(n.current),u.on(di.Events.MEDIA_ATTACHED,function(){u.loadSource(i),u.on(di.Events.MANIFEST_PARSED,function(){var h;s&&((h=n==null?void 0:n.current)===null||h===void 0||h.play().catch(function(){return console.log("Unable to autoplay prior to user interaction with the dom.")}))})}),u.on(di.Events.ERROR,function(h,E){if(E.fatal)switch(E.type){case di.ErrorTypes.NETWORK_ERROR:u.startLoad();break;case di.ErrorTypes.MEDIA_ERROR:u.recoverMediaError();break;default:d();break}}),l=u}return di.isSupported()&&d(),function(){l!=null&&l.destroy()}},[s,e,n,i]),di.isSupported()?ln("video",Bo({},ja({ref:n},a))):ln("video",Bo({},ja({ref:n,src:i,autoPlay:s},a)))}function Pp(){return Pp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pp.apply(this,arguments)}function pk(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Np(t,e)}function Np(t,e){return Np=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Np(t,e)}function gk(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Mp=new Map,Ec=new WeakMap,PT=0,mk=void 0;function vk(t){return t?(Ec.has(t)||(PT+=1,Ec.set(t,PT.toString())),Ec.get(t)):"0"}function yk(t){return Object.keys(t).sort().filter(function(e){return t[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?vk(t.root):t[e])}).toString()}function Ek(t){var e=yk(t),r=Mp.get(e);if(!r){var n=new Map,i,s=new IntersectionObserver(function(a){a.forEach(function(l){var d,u=l.isIntersecting&&i.some(function(h){return l.intersectionRatio>=h});t.trackVisibility&&typeof l.isVisible=="undefined"&&(l.isVisible=u),(d=n.get(l.target))==null||d.forEach(function(h){h(u,l)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:e,observer:s,elements:n},Mp.set(e,r)}return r}function Tk(t,e,r,n){if(r===void 0&&(r={}),n===void 0&&(n=mk),typeof window.IntersectionObserver=="undefined"&&n!==void 0){var i=t.getBoundingClientRect();return e(n,{isIntersecting:n,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=Ek(r),a=s.id,l=s.observer,d=s.elements,u=d.get(t)||[];return d.has(t)||d.set(t,u),u.push(e),l.observe(t),function(){u.splice(u.indexOf(e),1),u.length===0&&(d.delete(t),l.unobserve(t)),d.size===0&&(l.disconnect(),Mp.delete(a))}}var wk=["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function NT(t){return typeof t.children!="function"}var MT=function(t){pk(e,t);function e(n){var i;return i=t.call(this,n)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,a){s&&i.props.triggerOnce&&i.unobserve(),NT(i.props)||i.setState({inView:s,entry:a}),i.props.onChange&&i.props.onChange(s,a)},i.state={inView:!!n.initialInView,entry:void 0},i}var r=e.prototype;return r.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},r.componentWillUnmount=function(){this.unobserve(),this.node=null},r.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,a=i.root,l=i.rootMargin,d=i.trackVisibility,u=i.delay,h=i.fallbackInView;this._unobserveCb=Tk(this.node,this.handleChange,{threshold:s,root:a,rootMargin:l,trackVisibility:d,delay:u},h)}},r.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},r.render=function(){if(!NT(this.props)){var i=this.state,s=i.inView,a=i.entry;return this.props.children({inView:s,entry:a,ref:this.handleNode})}var l=this.props,d=l.children,u=l.as,h=l.tag,E=gk(l,wk);return ae.exports.createElement(u||h||"div",Pp({ref:this.handleNode},E),d)},e}(ae.exports.Component);MT.displayName="InView";MT.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)==55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)==56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},xk=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[r++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[r++],a=t[r++],l=t[r++],d=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const s=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},_k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,d=i+2<t.length,u=d?t[i+2]:0,h=s>>2,E=(s&3)<<4|l>>4;let m=(l&15)<<2|u>>6,w=u&63;d||(w=64,a||(m=64)),n.push(r[h],r[E],r[m],r[w])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const s=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const u=i<t.length?r[t.charAt(i)]:64;++i;const E=i<t.length?r[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||E==null)throw Error();const m=s<<2|l>>4;if(n.push(m),u!==64){const w=l<<4&240|u>>2;if(n.push(w),E!==64){const C=u<<6&192|E;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},bk=function(t){try{return _k.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FT(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function UT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ik(){return Gt().indexOf("Electron/")>=0}function $T(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Rk(){return Gt().indexOf("MSAppHost/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="FirebaseError";class Ji extends Error{constructor(e,r,n){super(r);this.code=e,this.customData=n,this.name=Ck,Object.setPrototypeOf(this,Ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ga.prototype.create)}}class Ga{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?kk(s,n):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Ji(i,l,n)}}function kk(t,e){return t.replace(Lk,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Lk=/\{\$([^}]+)}/g;function Dk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const s=t[i],a=e[i];if(VT(s)&&VT(a)){if(!Tc(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function VT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ok(t,e){const r=new Pk(t,e);return r.subscribe.bind(r)}class Pk{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Nk(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Fp),i.error===void 0&&(i.error=Fp),i.complete===void 0&&(i.complete=Fp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console!="undefined"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nk(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Fp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){return t&&t._delegate?t._delegate:t}class ao{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new Ak;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Uk(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=Zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zi){return this.instances.has(e)}getOptions(e=Zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(!!n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Fk(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Zi){return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fk(t){return t===Zi?void 0:t}function Uk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Mk(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const $k={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},Vk=lt.INFO,jk={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},Gk=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=jk[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Up{constructor(e){this.name=e,this._logLevel=Vk,this._logHandler=Gk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Hk(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Hk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bp="@firebase/app",jT="0.7.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Up("@firebase/app"),Wk="@firebase/app-compat",Kk="@firebase/analytics-compat",qk="@firebase/analytics",Yk="@firebase/app-check-compat",Xk="@firebase/app-check",Qk="@firebase/auth",Jk="@firebase/auth-compat",Zk="@firebase/database",eL="@firebase/database-compat",tL="@firebase/functions",rL="@firebase/functions-compat",nL="@firebase/installations",iL="@firebase/installations-compat",sL="@firebase/messaging",oL="@firebase/messaging-compat",aL="@firebase/performance",lL="@firebase/performance-compat",uL="@firebase/remote-config",cL="@firebase/remote-config-compat",fL="@firebase/storage",dL="@firebase/storage-compat",hL="@firebase/firestore",pL="@firebase/firestore-compat",gL="firebase",mL="9.6.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="[DEFAULT]",vL={[Bp]:"fire-core",[Wk]:"fire-core-compat",[qk]:"fire-analytics",[Kk]:"fire-analytics-compat",[Xk]:"fire-app-check",[Yk]:"fire-app-check-compat",[Qk]:"fire-auth",[Jk]:"fire-auth-compat",[Zk]:"fire-rtdb",[eL]:"fire-rtdb-compat",[tL]:"fire-fn",[rL]:"fire-fn-compat",[nL]:"fire-iid",[iL]:"fire-iid-compat",[sL]:"fire-fcm",[oL]:"fire-fcm-compat",[aL]:"fire-perf",[lL]:"fire-perf-compat",[uL]:"fire-rc",[cL]:"fire-rc-compat",[fL]:"fire-gcs",[dL]:"fire-gcs-compat",[hL]:"fire-fst",[pL]:"fire-fst-compat","fire-js":"fire-js",[gL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Map,Vp=new Map;function yL(t,e){try{t.container.addComponent(e)}catch(r){$p.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ha(t){const e=t.name;if(Vp.has(e))return $p.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,t);for(const r of wc.values())yL(r,t);return!0}function jp(t,e){return t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},Sc=new Ga("app","Firebase",EL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=mL;function B2(t,e={}){typeof e!="object"&&(e={name:e});const r=Object.assign({name:GT,automaticDataCollectionEnabled:!1},e),n=r.name;if(typeof n!="string"||!n)throw Sc.create("bad-app-name",{appName:String(n)});const i=wc.get(n);if(i){if(Tc(t,i.options)&&Tc(r,i.config))return i;throw Sc.create("duplicate-app",{appName:n})}const s=new Bk(n);for(const l of Vp.values())s.addComponent(l);const a=new TL(t,r,s);return wc.set(n,a),a}function zT(t=GT){const e=wc.get(t);if(!e)throw Sc.create("no-app",{appName:t});return e}function hi(t,e,r){var n;let i=(n=vL[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$p.warn(l.join(" "));return}Ha(new ao(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){Ha(new ao("platform-logger",e=>new zk(e),"PRIVATE")),hi(Bp,jT,t),hi(Bp,jT,"esm2017"),hi("fire-js","")}wL("");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Gp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function HT(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SL=HT,WT=new Ga("auth","Firebase",HT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Up("@firebase/auth");function xc(t,...e){KT.logLevel<=lt.ERROR&&KT.error(`Auth (${Wa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,...e){throw zp(t,...e)}function Sn(t,...e){return zp(t,...e)}function qT(t,e,r){const n=Object.assign(Object.assign({},SL()),{[e]:r});return new Ga("auth","Firebase",n).create(e,{appName:t.name})}function xL(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&wn(t,"argument-error"),qT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zp(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return WT.create(t,...e)}function ze(t,e,...r){if(!t)throw zp(e,...r)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xc(e),new Error(e)}function Mn(t,e){t||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Map;function Fn(t){Mn(t instanceof Function,"Expected a class definition");let e=YT.get(t);return e?(Mn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YT.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t,e){const r=jp(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),s=r.getOptions();if(Tc(s,e!=null?e:{}))return i;wn(i,"already-initialized")}return r.initialize({options:e})}function bL(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fn);(e==null?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AL(){return XT()==="http:"||XT()==="https:"}function XT(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AL()||UT()||"connection"in navigator)?navigator.onLine:!0}function RL(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,r){this.shortDelay=e,this.longDelay=r,Mn(r>e,"Short delay should be less than long delay!"),this.isMobile=FT()||BT()}get(){return IL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){Mn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new Ka(3e4,6e4);function LL(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _c(t,e,r,n,i={}){return JT(t,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const l=za(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode),QT.fetch()(ZT(t,t.config.apiHost,r,l),Object.assign({method:e,headers:d,referrerPolicy:"no-referrer"},s))})}async function JT(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},CL),e);try{const i=new OL(t),s=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Kp(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[d,u]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kp(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Kp(t,"email-already-in-use",a);const h=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qT(t,h,u);wn(t,h)}}catch(i){if(i instanceof Ji)throw i;wn(t,"network-request-failed")}}async function DL(t,e,r,n,i={}){const s=await _c(t,e,r,n,i);return"mfaPendingCredential"in s&&wn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function ZT(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Wp(t.config,i):`${t.config.apiScheme}://${i}`}class OL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Sn(this.auth,"timeout")),kL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kp(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Sn(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL(t,e){return _c(t,"POST","/v1/accounts:delete",e)}async function NL(t,e){return _c(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ML(t,e=!1){const r=Tr(t),n=await r.getIdToken(e),i=Yp(n);ze(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:qa(qp(i.auth_time)),issuedAtTime:qa(qp(i.iat)),expirationTime:qa(qp(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qp(t){return Number(t)*1e3}function Yp(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const i=bk(r);return i?JSON.parse(i):(xc("Failed to decode base64 JWT payload"),null)}catch(i){return xc("Caught error parsing JWT payload as JSON",i),null}}function FL(t){const e=Yp(t);return ze(e,"internal-error"),ze(typeof e.exp!="undefined","internal-error"),ze(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ji&&UL(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function UL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Ya(t,NL(r,{idToken:n}));ze(i==null?void 0:i.users.length,r,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?jL(s.providerUserInfo):[],l=VL(t.providerData,a),d=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l==null?void 0:l.length),h=d?u:!1,E={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ew(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,E)}async function $L(t){const e=Tr(t);await bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VL(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function jL(t){return t.map(e=>{var{providerId:r}=e,n=Gp(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e){const r=await JT(t,{},async()=>{const n=za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=ZT(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",QT.fetch()(a,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken!="undefined","internal-error"),ze(typeof e.refreshToken!="undefined","internal-error");const r="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):FL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}async getToken(e,r=!1){return ze(!this.accessToken||this.refreshToken,e,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:s}=await GL(e,r);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:s}=r,a=new Xa;return n&&(ze(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ze(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ze(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){ze(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class es{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,s=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new BL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new ew(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Ya(this,this.stsTokenManager.getToken(this.auth,e));return ze(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ML(this,e)}reload(){return $L(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await bc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ya(this,PL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,s,a,l,d,u,h;const E=(n=r.displayName)!==null&&n!==void 0?n:void 0,m=(i=r.email)!==null&&i!==void 0?i:void 0,w=(s=r.phoneNumber)!==null&&s!==void 0?s:void 0,C=(a=r.photoURL)!==null&&a!==void 0?a:void 0,R=(l=r.tenantId)!==null&&l!==void 0?l:void 0,S=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,_=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:D,emailVerified:k,isAnonymous:M,providerData:B,stsTokenManager:z}=r;ze(D&&z,e,"internal-error");const q=Xa.fromJSON(this.name,z);ze(typeof D=="string",e,"internal-error"),pi(E,e.name),pi(m,e.name),ze(typeof k=="boolean",e,"internal-error"),ze(typeof M=="boolean",e,"internal-error"),pi(w,e.name),pi(C,e.name),pi(R,e.name),pi(S,e.name),pi(x,e.name),pi(_,e.name);const H=new es({uid:D,auth:e,email:m,emailVerified:k,displayName:E,isAnonymous:M,photoURL:C,phoneNumber:w,tenantId:R,stsTokenManager:q,createdAt:x,lastLoginAt:_});return B&&Array.isArray(B)&&(H.providerData=B.map(Y=>Object.assign({},Y))),S&&(H._redirectEventId=S),H}static async _fromIdTokenResponse(e,r,n=!1){const i=new Xa;i.updateFromServerResponse(r);const s=new es({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await bc(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}tw.type="NONE";const rw=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t,e,r){return`firebase:${t}:${e}:${r}`}class lo{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Ac(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ac("persistence",i.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new lo(Fn(rw),e,n);const i=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Fn(rw);const a=Ac(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const h=await u._get(a);if(h){const E=es._fromJSON(e,h);u!==s&&(l=E),s=u;break}}catch{}const d=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new lo(s,e,n):(s=d[0],l&&await s._set(a,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new lo(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ow(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lw(e))return"Blackberry";if(uw(e))return"Webos";if(Xp(e))return"Safari";if((e.includes("chrome/")||sw(e))&&!e.includes("edge/"))return"Chrome";if(aw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function iw(t=Gt()){return/firefox\//i.test(t)}function Xp(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(t=Gt()){return/crios\//i.test(t)}function ow(t=Gt()){return/iemobile/i.test(t)}function aw(t=Gt()){return/android/i.test(t)}function lw(t=Gt()){return/blackberry/i.test(t)}function uw(t=Gt()){return/webos/i.test(t)}function Ic(t=Gt()){return/iphone|ipad|ipod/i.test(t)}function zL(t=Gt()){var e;return Ic(t)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function HL(){return $T()&&document.documentMode===10}function cw(t=Gt()){return Ic(t)||aw(t)||uw(t)||lw(t)||/windows phone/i.test(t)||ow(t)}function WL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e=[]){let r;switch(t){case"Browser":r=nw(Gt());break;case"Worker":r=`${nw(Gt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wa}/${n}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,r){this.app=e,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dw(this),this.idTokenSubscription=new dw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),!this._deleted)){if((n=this._popupRedirectResolver)===null||n===void 0?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var r;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=n==null?void 0:n._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===s)&&(a==null?void 0:a.user)&&(n=a.user)}return n?n._redirectEventId?(ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bc(e)}catch(r){if(r.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const r=e?Tr(e):null;return r&&ze(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ga("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fn(e)||this._popupRedirectResolver;ze(r,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[Fn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r),a=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof r=="function"?e.addObserver(r,n,i):e.addObserver(r)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function Qp(t){return Tr(t)}class dw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ok(r=>this.observer=r)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,r){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t,e){return DL(t,"POST","/v1/accounts:signInWithIdp",LL(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="http://localhost";class ts extends hw{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){const r=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):wn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,s=Gp(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new ts(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return uo(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,uo(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,uo(e,r)}buildRequest(){const e={requestUri:qL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=za(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Jp{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Qa{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Qa{constructor(){super("google.com");this.addScope("profile")}static credential(e,r){return ts._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return mi.credential(r,n)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Qa{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Qa{constructor(){super("twitter.com")}static credential(e,r){return ts._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return yi.credential(r,n)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const s=await es._fromIdTokenResponse(e,n,i),a=pw(n);return new co({user:s,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=pw(n);return new co({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function pw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Ji{constructor(e,r,n,i){var s;super(r.code,r.message);this.operationType=n,this.user=i,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Rc(e,r,n,i)}}function gw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(t,s,e,n):s})}async function YL(t,e,r=!1){const n=await Ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return co._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e,r=!1){const{auth:n}=t,i="reauthenticate";try{const s=await Ya(t,gw(n,i,e,t),r);ze(s.idToken,n,"internal-error");const a=Yp(s.idToken);ze(a,n,"internal-error");const{sub:l}=a;return ze(t.uid===l,n,"user-mismatch"),co._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&wn(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e,r=!1){const n="signIn",i=await gw(t,n,e),s=await co._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(s.user),s}function $2(t,e,r,n){return Tr(t).onAuthStateChanged(e,r,n)}function V2(t){return Tr(t).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JL(){const t=Gt();return Xp(t)||Ic(t)}const ZL=1e3,eD=10;class vw extends mw{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=JL()&&WL(),this.fallbackToPolling=cw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,d)=>{this.notifyListeners(a,d)});return}const n=e.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(n);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!r)return}const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);HL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,eD):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},ZL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}vw.type="LOCAL";const tD=vw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}yw.type="SESSION";const Ew=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){return Promise.all(t.map(async e=>{try{const r=await e;return{fulfilled:!0,value:r}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new kc(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:s}=r.data,a=this.handlersMap[i];if(!(a==null?void 0:a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(a).map(async u=>u(r.origin,s)),d=await rD(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,d)=>{const u=Zp("",20);i.port1.start();const h=setTimeout(()=>{d(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(E){const m=E;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(h),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function iD(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(){return typeof xn().WorkerGlobalScope!="undefined"&&typeof xn().importScripts=="function"}async function sD(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aD(){return Tw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firebaseLocalStorageDb",lD=1,Lc="firebaseLocalStorage",Sw="fbase_key";class Ja{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Dc(t,e){return t.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function uD(){const t=indexedDB.deleteDatabase(ww);return new Ja(t).toPromise()}function eg(){const t=indexedDB.open(ww,lD);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Lc,{keyPath:Sw})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Lc)?e(n):(n.close(),await uD(),e(await eg()))})})}async function xw(t,e,r){const n=Dc(t,!0).put({[Sw]:e,value:r});return new Ja(n).toPromise()}async function cD(t,e){const r=Dc(t,!1).get(e),n=await new Ja(r).toPromise();return n===void 0?null:n.value}function _w(t,e){const r=Dc(t,!0).delete(e);return new Ja(r).toPromise()}const fD=800,dD=3;class bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>dD)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kc._getInstance(aD()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new nD(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);!n||((e=n[0])===null||e===void 0?void 0:e.fulfilled)&&((r=n[0])===null||r===void 0?void 0:r.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eg();return await xw(e,Cc,"1"),await _w(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>xw(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>cD(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_w(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dc(i,!1).getAll();return new Ja(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bw.type="LOCAL";const hD=bw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function gD(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const s=Sn("internal-error");s.customData=i,r(s)},n.type="text/javascript",n.charset="UTF-8",pD().appendChild(n)})}function mD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t,e){return e?Fn(e):(ze(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends hw{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return uo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function vD(t){return QL(t.auth,new tg(t),t.bypassAuthState)}function yD(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),XL(r,new tg(t),t.bypassAuthState)}async function ED(t){const{auth:e,user:r}=t;return ze(r,e,"internal-error"),YL(r,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,r,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vD;case"linkViaPopup":case"linkViaRedirect":return ED;case"reauthViaPopup":case"reauthViaRedirect":return yD;default:wn(this.auth,"internal-error")}}resolve(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Ka(2e3,1e4);async function j2(t,e,r){const n=Qp(t);xL(t,e,Jp);const i=Aw(n,r);return new rs(n,"signInViaPopup",e,i).executeNotNull()}class rs extends Iw{constructor(e,r,n,i,s){super(e,r,i,s);this.provider=n,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Mn(this.filter.length===1,"Popup operations only handle one event");const e=Zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0?void 0:n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,TD.get())};e()}}rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="pendingRedirect",rg=new Map;class SD extends Iw{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n);this.eventId=null}async execute(){let e=rg.get(this.auth._key());if(!e){try{const n=await xD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}rg.set(this.auth._key(),e)}return this.bypassAuthState||rg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xD(t,e){const r=bD(e),n=_D(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function _D(t){return Fn(t._redirectPersistence)}function bD(t){return Ac(wD,t.config.apiKey,t.name)}async function AD(t,e,r=!1){const n=Qp(t),i=Aw(n,e),a=await new SD(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=10*60*1e3;class RD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CD(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Cw(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Sn(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ID&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rw(e))}saveEventToCache(e){this.cachedEventUids.add(Rw(e)),this.lastProcessedEventTime=Date.now()}}function Rw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Cw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e={}){return _c(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DD=/^https?/;async function OD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kD(t);for(const r of e)try{if(PD(r))return}catch{}wn(t,"unauthorized-domain")}function PD(t){const e=Hp(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!DD.test(r))return!1;if(LD.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new Ka(3e4,6e4);function kw(){const t=xn().___jsl;if(t==null?void 0:t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function MD(t){return new Promise((e,r)=>{var n,i,s;function a(){kw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kw(),r(Sn(t,"network-request-failed"))},timeout:ND.get()})}if((i=(n=xn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0?void 0:i.Iframe)e(gapi.iframes.getContext());else if((s=xn().gapi)===null||s===void 0?void 0:s.load)a();else{const l=mD("iframefcb");return xn()[l]=()=>{gapi.load?a():r(Sn(t,"network-request-failed"))},gD(`https://apis.google.com/js/api.js?onload=${l}`).catch(d=>r(d))}}).catch(e=>{throw Oc=null,e})}let Oc=null;function FD(t){return Oc=Oc||MD(t),Oc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new Ka(5e3,15e3),BD="__/auth/iframe",$D="emulator/auth/iframe",VD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GD(t){const e=t.config;ze(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Wp(e,$D):`https://${t.config.authDomain}/${BD}`,n={apiKey:e.apiKey,appName:t.name,v:Wa},i=jD.get(t.config.apiHost);i&&(n.eid=i);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${za(n).slice(1)}`}async function zD(t){const e=await FD(t),r=xn().gapi;return ze(r,t,"internal-error"),e.open({where:document.body,url:GD(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VD,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Sn(t,"network-request-failed"),l=xn().setTimeout(()=>{s(a)},UD.get());function d(){xn().clearTimeout(l),i(n)}n.ping(d).then(d,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WD=500,KD=600,qD="_blank",YD="http://localhost";class Lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XD(t,e,r,n=WD,i=KD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const d=Object.assign(Object.assign({},HD),{width:n.toString(),height:i.toString(),top:s,left:a}),u=Gt().toLowerCase();r&&(l=sw(u)?qD:r),iw(u)&&(e=e||YD,d.scrollbars="yes");const h=Object.entries(d).reduce((m,[w,C])=>`${m}${w}=${C},`,"");if(zL(u)&&l!=="_self")return QD(e||"",l),new Lw(null);const E=window.open(e||"",l,h);ze(E,t,"popup-blocked");try{E.focus()}catch{}return new Lw(E)}function QD(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="__/auth/handler",ZD="emulator/auth/handler";function Dw(t,e,r,n,i,s){ze(t.config.authDomain,t,"auth-domain-config-required"),ze(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Wa,eventId:i};if(e instanceof Jp){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Dk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,u]of Object.entries(s||{}))a[d]=u}if(e instanceof Qa){const d=e.getScopes().filter(u=>u!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];return`${eO(t)}?${za(l).slice(1)}`}function eO({config:t}){return t.emulator?Wp(t,ZD):`https://${t.authDomain}/${JD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="webStorageSupport";class tO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ew,this._completeRedirectFn=AD}async _openPopup(e,r,n,i){var s;Mn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=Dw(e,r,n,Hp(),i);return XD(e,a,Zp())}async _openRedirect(e,r,n,i){return await this._originValidation(e),iD(Dw(e,r,n,Hp(),i)),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:s}=this.eventManagers[r];return i?Promise.resolve(i):(Mn(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await zD(e),n=new RD(e);return r.register("authEvent",i=>(ze(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(ng,{type:ng},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ng];a!==void 0&&r(!!a),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=OD(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return cw()||Xp()||Ic()}}const rO=tO;var Ow="@firebase/auth",Pw="0.19.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{var i;e(((i=n)===null||i===void 0?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);!r||(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function sO(t){Ha(new ao("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),{apiKey:i,authDomain:s}=n.options;return(a=>{ze(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),ze(!(s==null?void 0:s.includes(":")),"argument-error",{appName:a.name});const l={apiKey:i,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fw(t)},d=new KL(a,l);return bL(d,r),d})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Ha(new ao("auth-internal",e=>{const r=Qp(e.getProvider("auth").getImmediate());return(n=>new nO(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),hi(Ow,Pw,iO(t)),hi(Ow,Pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t=zT()){const e=jp(t,"auth");return e.isInitialized()?e.getImmediate():_L(t,{popupRedirectResolver:rO,persistence:[hD,tD,Ew]})}sO("Browser");var oO=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},we,ig=ig||{},Ve=oO||self;function Pc(){}function sg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Za(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function aO(t){return Object.prototype.hasOwnProperty.call(t,og)&&t[og]||(t[og]=++lO)}var og="closure_uid_"+(1e9*Math.random()>>>0),lO=0;function uO(t,e,r){return t.call.apply(t.bind,arguments)}function cO(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function er(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?er=uO:er=cO,er.apply(null,arguments)}function Nc(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function tr(t,e){function r(){}r.prototype=e.prototype,t.Z=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Vb=function(n,i,s){for(var a=Array(arguments.length-2),l=2;l<arguments.length;l++)a[l-2]=arguments[l];return e.prototype[i].apply(n,a)}}function Ei(){this.s=this.s,this.o=this.o}var fO=0,dO={};Ei.prototype.s=!1;Ei.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),fO!=0)){var t=aO(this);delete dO[t]}};Ei.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nw=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},Mw=Array.prototype.forEach?function(t,e,r){Array.prototype.forEach.call(t,e,r)}:function(t,e,r){const n=t.length,i=typeof t=="string"?t.split(""):t;for(let s=0;s<n;s++)s in i&&e.call(r,i[s],s,t)};function hO(t){e:{var e=iP;const r=t.length,n=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)if(i in n&&e.call(void 0,n[i],i,t)){e=i;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function Fw(t){return Array.prototype.concat.apply([],arguments)}function ag(t){const e=t.length;if(0<e){const r=Array(e);for(let n=0;n<e;n++)r[n]=t[n];return r}return[]}function Mc(t){return/^[\s\xa0]*$/.test(t)}var Uw=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wr(t,e){return t.indexOf(e)!=-1}function lg(t,e){return t<e?-1:t>e?1:0}var Sr;e:{var Bw=Ve.navigator;if(Bw){var $w=Bw.userAgent;if($w){Sr=$w;break e}}Sr=""}function ug(t,e,r){for(const n in t)e.call(r,t[n],n,t)}function Vw(t){const e={};for(const r in t)e[r]=t[r];return e}var jw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gw(t,e){let r,n;for(let i=1;i<arguments.length;i++){n=arguments[i];for(r in n)t[r]=n[r];for(let s=0;s<jw.length;s++)r=jw[s],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}}function cg(t){return cg[" "](t),t}cg[" "]=Pc;function pO(t){var e=vO;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var gO=wr(Sr,"Opera"),fo=wr(Sr,"Trident")||wr(Sr,"MSIE"),zw=wr(Sr,"Edge"),fg=zw||fo,Hw=wr(Sr,"Gecko")&&!(wr(Sr.toLowerCase(),"webkit")&&!wr(Sr,"Edge"))&&!(wr(Sr,"Trident")||wr(Sr,"MSIE"))&&!wr(Sr,"Edge"),mO=wr(Sr.toLowerCase(),"webkit")&&!wr(Sr,"Edge");function Ww(){var t=Ve.document;return t?t.documentMode:void 0}var Fc;e:{var dg="",hg=function(){var t=Sr;if(Hw)return/rv:([^\);]+)(\)|;)/.exec(t);if(zw)return/Edge\/([\d\.]+)/.exec(t);if(fo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(mO)return/WebKit\/(\S+)/.exec(t);if(gO)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(hg&&(dg=hg?hg[1]:""),fo){var pg=Ww();if(pg!=null&&pg>parseFloat(dg)){Fc=String(pg);break e}}Fc=dg}var vO={};function yO(){return pO(function(){let t=0;const e=Uw(String(Fc)).split("."),r=Uw("9").split("."),n=Math.max(e.length,r.length);for(let a=0;t==0&&a<n;a++){var i=e[a]||"",s=r[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=lg(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||lg(i[2].length==0,s[2].length==0)||lg(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var gg;if(Ve.document&&fo){var Kw=Ww();gg=Kw||parseInt(Fc,10)||void 0}else gg=void 0;var EO=gg,TO=function(){if(!Ve.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ve.addEventListener("test",Pc,e),Ve.removeEventListener("test",Pc,e)}catch{}return t}();function dr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}dr.prototype.h=function(){this.defaultPrevented=!0};function el(t,e){if(dr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Hw){e:{try{cg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wO[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&el.Z.h.call(this)}}tr(el,dr);var wO={2:"touch",3:"pen",4:"mouse"};el.prototype.h=function(){el.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tl="closure_listenable_"+(1e6*Math.random()|0),SO=0;function xO(t,e,r,n,i){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!n,this.ia=i,this.key=++SO,this.ca=this.fa=!1}function Uc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Bc(t){this.src=t,this.g={},this.h=0}Bc.prototype.add=function(t,e,r,n,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=vg(t,e,n,i);return-1<a?(e=t[a],r||(e.fa=!1)):(e=new xO(e,this.src,s,!!n,i),e.fa=r,t.push(e)),e};function mg(t,e){var r=e.type;if(r in t.g){var n=t.g[r],i=Nw(n,e),s;(s=0<=i)&&Array.prototype.splice.call(n,i,1),s&&(Uc(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function vg(t,e,r,n){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!r&&s.ia==n)return i}return-1}var yg="closure_lm_"+(1e6*Math.random()|0),Eg={};function qw(t,e,r,n,i){if(n&&n.once)return Xw(t,e,r,n,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qw(t,e[s],r,n,i);return null}return r=xg(r),t&&t[tl]?t.N(e,r,Za(n)?!!n.capture:!!n,i):Yw(t,e,r,!1,n,i)}function Yw(t,e,r,n,i,s){if(!e)throw Error("Invalid event type");var a=Za(i)?!!i.capture:!!i,l=wg(t);if(l||(t[yg]=l=new Bc(t)),r=l.add(e,r,n,a,s),r.proxy)return r;if(n=_O(),r.proxy=n,n.src=t,n.listener=r,t.addEventListener)TO||(i=a),i===void 0&&(i=!1),t.addEventListener(e.toString(),n,i);else if(t.attachEvent)t.attachEvent(Jw(e.toString()),n);else if(t.addListener&&t.removeListener)t.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function _O(){function t(r){return e.call(t.src,t.listener,r)}var e=bO;return t}function Xw(t,e,r,n,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Xw(t,e[s],r,n,i);return null}return r=xg(r),t&&t[tl]?t.O(e,r,Za(n)?!!n.capture:!!n,i):Yw(t,e,r,!0,n,i)}function Qw(t,e,r,n,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Qw(t,e[s],r,n,i);else n=Za(n)?!!n.capture:!!n,r=xg(r),t&&t[tl]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],r=vg(s,r,n,i),-1<r&&(Uc(s[r]),Array.prototype.splice.call(s,r,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=wg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=vg(e,r,n,i)),(r=-1<t?e[t]:null)&&Tg(r))}function Tg(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[tl])mg(e.i,t);else{var r=t.type,n=t.proxy;e.removeEventListener?e.removeEventListener(r,n,t.capture):e.detachEvent?e.detachEvent(Jw(r),n):e.addListener&&e.removeListener&&e.removeListener(n),(r=wg(e))?(mg(r,t),r.h==0&&(r.src=null,e[yg]=null)):Uc(t)}}}function Jw(t){return t in Eg?Eg[t]:Eg[t]="on"+t}function bO(t,e){if(t.ca)t=!0;else{e=new el(e,this);var r=t.listener,n=t.ia||t.src;t.fa&&Tg(t),t=r.call(n,e)}return t}function wg(t){return t=t[yg],t instanceof Bc?t:null}var Sg="__closure_events_fn_"+(1e9*Math.random()>>>0);function xg(t){return typeof t=="function"?t:(t[Sg]||(t[Sg]=function(e){return t.handleEvent(e)}),t[Sg])}function zt(){Ei.call(this),this.i=new Bc(this),this.P=this,this.I=null}tr(zt,Ei);zt.prototype[tl]=!0;zt.prototype.removeEventListener=function(t,e,r,n){Qw(this,t,e,r,n)};function rr(t,e){var r,n=t.I;if(n)for(r=[];n;n=n.I)r.push(n);if(t=t.P,n=e.type||e,typeof e=="string")e=new dr(e,t);else if(e instanceof dr)e.target=e.target||t;else{var i=e;e=new dr(n,t),Gw(e,i)}if(i=!0,r)for(var s=r.length-1;0<=s;s--){var a=e.g=r[s];i=$c(a,n,!0,e)&&i}if(a=e.g=t,i=$c(a,n,!0,e)&&i,i=$c(a,n,!1,e)&&i,r)for(s=0;s<r.length;s++)a=e.g=r[s],i=$c(a,n,!1,e)&&i}zt.prototype.M=function(){if(zt.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)Uc(r[n]);delete t.g[e],t.h--}}this.I=null};zt.prototype.N=function(t,e,r,n){return this.i.add(String(t),e,!1,r,n)};zt.prototype.O=function(t,e,r,n){return this.i.add(String(t),e,!0,r,n)};function $c(t,e,r,n){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.ca&&a.capture==r){var l=a.listener,d=a.ia||a.src;a.fa&&mg(t.i,a),i=l.call(d,n)!==!1&&i}}return i&&!n.defaultPrevented}var _g=Ve.JSON.stringify;function AO(){var t=eS;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class IO{constructor(){this.h=this.g=null}add(e,r){const n=Zw.get();n.set(e,r),this.h?this.h.next=n:this.g=n,this.h=n}}var Zw=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new RO,t=>t.reset());class RO{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function CO(t){Ve.setTimeout(()=>{throw t},0)}function bg(t,e){Ag||kO(),Ig||(Ag(),Ig=!0),eS.add(t,e)}var Ag;function kO(){var t=Ve.Promise.resolve(void 0);Ag=function(){t.then(LO)}}var Ig=!1,eS=new IO;function LO(){for(var t;t=AO();){try{t.h.call(t.g)}catch(r){CO(r)}var e=Zw;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ig=!1}function Vc(t,e){zt.call(this),this.h=t||1,this.g=e||Ve,this.j=er(this.kb,this),this.l=Date.now()}tr(Vc,zt);we=Vc.prototype;we.da=!1;we.S=null;we.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),rr(this,"tick"),this.da&&(Rg(this),this.start()))}};we.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rg(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}we.M=function(){Vc.Z.M.call(this),Rg(this),delete this.g};function Cg(t,e,r){if(typeof t=="function")r&&(t=er(t,r));else if(t&&typeof t.handleEvent=="function")t=er(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ve.setTimeout(t,e||0)}function tS(t){t.g=Cg(()=>{t.g=null,t.i&&(t.i=!1,tS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class DO extends Ei{constructor(e,r){super();this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tS(this)}M(){super.M(),this.g&&(Ve.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rl(t){Ei.call(this),this.h=t,this.g={}}tr(rl,Ei);var rS=[];function nS(t,e,r,n){Array.isArray(r)||(r&&(rS[0]=r.toString()),r=rS);for(var i=0;i<r.length;i++){var s=qw(e,r[i],n||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function iS(t){ug(t.g,function(e,r){this.g.hasOwnProperty(r)&&Tg(e)},t),t.g={}}rl.prototype.M=function(){rl.Z.M.call(this),iS(this)};rl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function jc(){this.g=!0}jc.prototype.Aa=function(){this.g=!1};function OO(t,e,r,n,i,s){t.info(function(){if(t.g)if(s)for(var a="",l=s.split("&"),d=0;d<l.length;d++){var u=l[d].split("=");if(1<u.length){var h=u[0];u=u[1];var E=h.split("_");a=2<=E.length&&E[1]=="type"?a+(h+"="+u+"&"):a+(h+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+n+") [attempt "+i+"]: "+e+`
`+r+`
`+a})}function PO(t,e,r,n,i,s,a){t.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+i+"]: "+e+`
`+r+`
`+s+" "+a})}function ho(t,e,r,n){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+MO(t,r)+(n?" "+n:"")})}function NO(t,e){t.info(function(){return"TIMEOUT: "+e})}jc.prototype.info=function(){};function MO(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var n=r[t];if(!(2>n.length)){var i=n[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return _g(r)}catch{return e}}var ns={},sS=null;function Gc(){return sS=sS||new zt}ns.Ma="serverreachability";function oS(t){dr.call(this,ns.Ma,t)}tr(oS,dr);function nl(t){const e=Gc();rr(e,new oS(e,t))}ns.STAT_EVENT="statevent";function aS(t,e){dr.call(this,ns.STAT_EVENT,t),this.stat=e}tr(aS,dr);function xr(t){const e=Gc();rr(e,new aS(e,t))}ns.Na="timingevent";function lS(t,e){dr.call(this,ns.Na,t),this.size=e}tr(lS,dr);function il(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ve.setTimeout(function(){t()},e)}var zc={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},uS={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kg(){}kg.prototype.h=null;function cS(t){return t.h||(t.h=t.i())}function fS(){}var sl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Lg(){dr.call(this,"d")}tr(Lg,dr);function Dg(){dr.call(this,"c")}tr(Dg,dr);var Og;function Hc(){}tr(Hc,kg);Hc.prototype.g=function(){return new XMLHttpRequest};Hc.prototype.i=function(){return{}};Og=new Hc;function ol(t,e,r,n){this.l=t,this.j=e,this.m=r,this.X=n||1,this.V=new rl(this),this.P=FO,t=fg?125:void 0,this.W=new Vc(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new dS}function dS(){this.i=null,this.g="",this.h=!1}var FO=45e3,Pg={},Wc={};we=ol.prototype;we.setTimeout=function(t){this.P=t};function Ng(t,e,r){t.K=1,t.v=Qc(Un(e)),t.s=r,t.U=!0,hS(t,null)}function hS(t,e){t.F=Date.now(),al(t),t.A=Un(t.v);var r=t.A,n=t.X;Array.isArray(n)||(n=[String(n)]),SS(r.h,"t",n),t.C=0,r=t.l.H,t.h=new dS,t.g=HS(t.l,r?e:null,!t.s),0<t.O&&(t.L=new DO(er(t.Ia,t,t.g),t.O)),nS(t.V,t.g,"readystatechange",t.gb),e=t.H?Vw(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),nl(1),OO(t.j,t.u,t.A,t.m,t.X,t.s)}we.gb=function(t){t=t.target;const e=this.L;e&&Bn(t)==3?e.l():this.Ia(t)};we.Ia=function(t){try{if(t==this.g)e:{const h=Bn(this.g);var e=this.g.Da();const E=this.g.ba();if(!(3>h)&&(h!=3||fg||this.g&&(this.h.h||this.g.ga()||PS(this.g)))){this.I||h!=4||e==7||(e==8||0>=E?nl(3):nl(2)),Kc(this);var r=this.g.ba();this.N=r;t:if(pS(this)){var n=PS(this.g);t="";var i=n.length,s=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){is(this),ll(this);var a="";break t}this.h.i=new Ve.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(n[e],{stream:s&&e==i-1});n.splice(0,i),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=r==200,PO(this.j,this.u,this.A,this.m,this.X,h,r),this.i){if(this.$&&!this.J){t:{if(this.g){var l,d=this.g;if((l=d.g?d.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mc(l)){var u=l;break t}}u=null}if(r=u)ho(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mg(this,r);else{this.i=!1,this.o=3,xr(12),is(this),ll(this);break e}}this.U?(gS(this,h,a),fg&&this.i&&h==3&&(nS(this.V,this.W,"tick",this.fb),this.W.start())):(ho(this.j,this.m,a,null),Mg(this,a)),h==4&&is(this),this.i&&!this.I&&(h==4?VS(this.l,this):(this.i=!1,al(this)))}else r==400&&0<a.indexOf("Unknown SID")?(this.o=3,xr(12)):(this.o=0,xr(13)),is(this),ll(this)}}}catch{}finally{}};function pS(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function gS(t,e,r){let n=!0,i;for(;!t.I&&t.C<r.length;)if(i=UO(t,r),i==Wc){e==4&&(t.o=4,xr(14),n=!1),ho(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Pg){t.o=4,xr(15),ho(t.j,t.m,r,"[Invalid Chunk]"),n=!1;break}else ho(t.j,t.m,i,null),Mg(t,i);pS(t)&&i!=Wc&&i!=Pg&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,xr(16),n=!1),t.i=t.i&&n,n?0<r.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Kg(e),e.L=!0,xr(11))):(ho(t.j,t.m,r,"[Invalid Chunked Response]"),is(t),ll(t))}we.fb=function(){if(this.g){var t=Bn(this.g),e=this.g.ga();this.C<e.length&&(Kc(this),gS(this,t,e),this.i&&t!=4&&al(this))}};function UO(t,e){var r=t.C,n=e.indexOf(`
`,r);return n==-1?Wc:(r=Number(e.substring(r,n)),isNaN(r)?Pg:(n+=1,n+r>e.length?Wc:(e=e.substr(n,r),t.C=n+r,e)))}we.cancel=function(){this.I=!0,is(this)};function al(t){t.Y=Date.now()+t.P,mS(t,t.P)}function mS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=il(er(t.eb,t),e)}function Kc(t){t.B&&(Ve.clearTimeout(t.B),t.B=null)}we.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(NO(this.j,this.A),this.K!=2&&(nl(3),xr(17)),is(this),this.o=2,ll(this)):mS(this,this.Y-t)};function ll(t){t.l.G==0||t.I||VS(t.l,t)}function is(t){Kc(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Rg(t.W),iS(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Mg(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||Bg(r.i,t))){if(r.I=t.N,!t.J&&Bg(r.i,t)&&r.G==3){try{var n=r.Ca.g.parse(e)}catch{n=null}if(Array.isArray(n)&&n.length==3){var i=n;if(i[0]==0)e:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)nf(r),tf(r);else break e;Wg(r),xr(18)}else r.ta=i[1],0<r.ta-r.U&&37500>i[2]&&r.N&&r.A==0&&!r.v&&(r.v=il(er(r.ab,r),6e3));if(1>=bS(r.i)&&r.ka){try{r.ka()}catch{}r.ka=void 0}}else as(r,11)}else if((t.J||r.g==t)&&nf(r),!Mc(e))for(i=r.Ca.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(r.U=u[0],u=u[1],r.G==2)if(u[0]=="c"){r.J=u[1],r.la=u[2];const h=u[3];h!=null&&(r.ma=h,r.h.info("VER="+r.ma));const E=u[4];E!=null&&(r.za=E,r.h.info("SVER="+r.za));const m=u[5];m!=null&&typeof m=="number"&&0<m&&(n=1.5*m,r.K=n,r.h.info("backChannelRequestTimeoutMs_="+n)),n=r;const w=t.g;if(w){const C=w.g?w.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=n.i;!s.g&&(wr(C,"spdy")||wr(C,"quic")||wr(C,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&($g(s,s.h),s.h=null))}if(n.D){const R=w.g?w.g.getResponseHeader("X-HTTP-Session-Id"):null;R&&(n.sa=R,wt(n.F,n.D,R))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-t.F,r.h.info("Handshake RTT: "+r.O+"ms")),n=r;var a=t;if(n.oa=zS(n,n.H?n.la:null,n.W),a.J){AS(n.i,a);var l=a,d=n.K;d&&l.setTimeout(d),l.B&&(Kc(l),al(l)),n.g=a}else BS(n);0<r.l.length&&rf(r)}else u[0]!="stop"&&u[0]!="close"||as(r,7);else r.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?as(r,7):zg(r):u[0]!="noop"&&r.j&&r.j.wa(u),r.A=0)}}nl(4)}catch{}}function BO(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(sg(t)){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e}e=[],r=0;for(n in t)e[r++]=t[n];return e}function Fg(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(sg(t)||typeof t=="string")Mw(t,e,void 0);else{if(t.T&&typeof t.T=="function")var r=t.T();else if(t.R&&typeof t.R=="function")r=void 0;else if(sg(t)||typeof t=="string"){r=[];for(var n=t.length,i=0;i<n;i++)r.push(i)}else for(i in r=[],n=0,t)r[n++]=i;n=BO(t),i=n.length;for(var s=0;s<i;s++)e.call(void 0,n[s],r&&r[s],t)}}function po(t,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var n=0;n<r;n+=2)this.set(arguments[n],arguments[n+1])}else if(t)if(t instanceof po)for(r=t.T(),n=0;n<r.length;n++)this.set(r[n],t.get(r[n]));else for(n in t)this.set(n,t[n])}we=po.prototype;we.R=function(){Ug(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};we.T=function(){return Ug(this),this.g.concat()};function Ug(t){if(t.i!=t.g.length){for(var e=0,r=0;e<t.g.length;){var n=t.g[e];ss(t.h,n)&&(t.g[r++]=n),e++}t.g.length=r}if(t.i!=t.g.length){var i={};for(r=e=0;e<t.g.length;)n=t.g[e],ss(i,n)||(t.g[r++]=n,i[n]=1),e++;t.g.length=r}}we.get=function(t,e){return ss(this.h,t)?this.h[t]:e};we.set=function(t,e){ss(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};we.forEach=function(t,e){for(var r=this.T(),n=0;n<r.length;n++){var i=r[n],s=this.get(i);t.call(e,s,i,this)}};function ss(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var vS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $O(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var s=t[r].substring(0,n);i=t[r].substring(n+1)}else s=t[r];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function os(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof os){this.g=e!==void 0?e:t.g,qc(this,t.j),this.s=t.s,Yc(this,t.i),Xc(this,t.m),this.l=t.l,e=t.h;var r=new fl;r.i=e.i,e.g&&(r.g=new po(e.g),r.h=e.h),yS(this,r),this.o=t.o}else t&&(r=String(t).match(vS))?(this.g=!!e,qc(this,r[1]||"",!0),this.s=ul(r[2]||""),Yc(this,r[3]||"",!0),Xc(this,r[4]),this.l=ul(r[5]||"",!0),yS(this,r[6]||"",!0),this.o=ul(r[7]||"")):(this.g=!!e,this.h=new fl(null,this.g))}os.prototype.toString=function(){var t=[],e=this.j;e&&t.push(cl(e,ES,!0),":");var r=this.i;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(cl(e,ES,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.i&&r.charAt(0)!="/"&&t.push("/"),t.push(cl(r,r.charAt(0)=="/"?HO:zO,!0))),(r=this.h.toString())&&t.push("?",r),(r=this.o)&&t.push("#",cl(r,KO)),t.join("")};function Un(t){return new os(t)}function qc(t,e,r){t.j=r?ul(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Yc(t,e,r){t.i=r?ul(e,!0):e}function Xc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function yS(t,e,r){e instanceof fl?(t.h=e,qO(t.h,t.g)):(r||(e=cl(e,WO)),t.h=new fl(e,t.g))}function wt(t,e,r){t.h.set(e,r)}function Qc(t){return wt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function VO(t){return t instanceof os?Un(t):new os(t,void 0)}function jO(t,e,r,n){var i=new os(null,void 0);return t&&qc(i,t),e&&Yc(i,e),r&&Xc(i,r),n&&(i.l=n),i}function ul(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cl(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,GO),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function GO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ES=/[#\/\?@]/g,zO=/[#\?:]/g,HO=/[#\?]/g,WO=/[#\?@]/g,KO=/#/g;function fl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ti(t){t.g||(t.g=new po,t.h=0,t.i&&$O(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}we=fl.prototype;we.add=function(t,e){Ti(this),this.i=null,t=go(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function TS(t,e){Ti(t),e=go(t,e),ss(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,ss(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ug(t)))}function wS(t,e){return Ti(t),e=go(t,e),ss(t.g.h,e)}we.forEach=function(t,e){Ti(this),this.g.forEach(function(r,n){Mw(r,function(i){t.call(e,i,n,this)},this)},this)};we.T=function(){Ti(this);for(var t=this.g.R(),e=this.g.T(),r=[],n=0;n<e.length;n++)for(var i=t[n],s=0;s<i.length;s++)r.push(e[n]);return r};we.R=function(t){Ti(this);var e=[];if(typeof t=="string")wS(this,t)&&(e=Fw(e,this.g.get(go(this,t))));else{t=this.g.R();for(var r=0;r<t.length;r++)e=Fw(e,t[r])}return e};we.set=function(t,e){return Ti(this),this.i=null,t=go(this,t),wS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};we.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function SS(t,e,r){TS(t,e),0<r.length&&(t.i=null,t.g.set(go(t,e),ag(r)),t.h+=r.length)}we.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),r=0;r<e.length;r++){var n=e[r],i=encodeURIComponent(String(n));n=this.R(n);for(var s=0;s<n.length;s++){var a=i;n[s]!==""&&(a+="="+encodeURIComponent(String(n[s]))),t.push(a)}}return this.i=t.join("&")};function go(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qO(t,e){e&&!t.j&&(Ti(t),t.i=null,t.g.forEach(function(r,n){var i=n.toLowerCase();n!=i&&(TS(this,n),SS(this,i,r))},t)),t.j=e}var YO=class{constructor(t,e){this.h=t,this.g=e}};function xS(t){this.l=t||XO,Ve.PerformanceNavigationTiming?(t=Ve.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ve.g&&Ve.g.Ea&&Ve.g.Ea()&&Ve.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var XO=10;function _S(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function bS(t){return t.h?1:t.g?t.g.size:0}function Bg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function $g(t,e){t.g?t.g.add(e):t.h=e}function AS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}xS.prototype.cancel=function(){if(this.i=IS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function IS(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const r of t.g.values())e=e.concat(r.D);return e}return ag(t.i)}function Vg(){}Vg.prototype.stringify=function(t){return Ve.JSON.stringify(t,void 0)};Vg.prototype.parse=function(t){return Ve.JSON.parse(t,void 0)};function QO(){this.g=new Vg}function JO(t,e,r){const n=r||"";try{Fg(t,function(i,s){let a=i;Za(i)&&(a=_g(i)),e.push(n+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(n+"type="+encodeURIComponent("_badmap")),i}}function ZO(t,e){const r=new jc;if(Ve.Image){const n=new Image;n.onload=Nc(Jc,r,n,"TestLoadImage: loaded",!0,e),n.onerror=Nc(Jc,r,n,"TestLoadImage: error",!1,e),n.onabort=Nc(Jc,r,n,"TestLoadImage: abort",!1,e),n.ontimeout=Nc(Jc,r,n,"TestLoadImage: timeout",!1,e),Ve.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=t}else e(!1)}function Jc(t,e,r,n,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(n)}catch{}}function dl(t){this.l=t.$b||null,this.j=t.ib||!1}tr(dl,kg);dl.prototype.g=function(){return new Zc(this.l,this.j)};dl.prototype.i=function(t){return function(){return t}}({});function Zc(t,e){zt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=jg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tr(Zc,zt);var jg=0;we=Zc.prototype;we.open=function(t,e){if(this.readyState!=jg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pl(this)};we.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ve).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};we.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,hl(this)),this.readyState=jg};we.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pl(this)),this.g&&(this.readyState=3,pl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ve.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RS(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function RS(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}we.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hl(this):pl(this),this.readyState==3&&RS(this)}};we.Ua=function(t){this.g&&(this.response=this.responseText=t,hl(this))};we.Ta=function(t){this.g&&(this.response=t,hl(this))};we.ha=function(){this.g&&hl(this)};function hl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pl(t)}we.setRequestHeader=function(t,e){this.v.append(t,e)};we.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};we.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function pl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var eP=Ve.JSON.parse;function Dt(t){zt.call(this),this.headers=new po,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=CS,this.K=this.L=!1}tr(Dt,zt);var CS="",tP=/^https?$/i,rP=["POST","PUT"];we=Dt.prototype;we.ea=function(t,e,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Og.g(),this.C=this.u?cS(this.u):cS(Og),this.g.onreadystatechange=er(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){kS(this,s);return}t=r||"";const i=new po(this.headers);n&&Fg(n,function(s,a){i.set(a,s)}),n=hO(i.T()),r=Ve.FormData&&t instanceof Ve.FormData,!(0<=Nw(rP,e))||n||r||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.g.setRequestHeader(a,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{OS(this),0<this.B&&((this.K=nP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=er(this.pa,this)):this.A=Cg(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){kS(this,s)}};function nP(t){return fo&&yO()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function iP(t){return t.toLowerCase()=="content-type"}we.pa=function(){typeof ig!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rr(this,"timeout"),this.abort(8))};function kS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,LS(t),ef(t)}function LS(t){t.D||(t.D=!0,rr(t,"complete"),rr(t,"error"))}we.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,rr(this,"complete"),rr(this,"abort"),ef(this))};we.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ef(this,!0)),Dt.Z.M.call(this)};we.Fa=function(){this.s||(this.F||this.v||this.l?DS(this):this.cb())};we.cb=function(){DS(this)};function DS(t){if(t.h&&typeof ig!="undefined"&&(!t.C[1]||Bn(t)!=4||t.ba()!=2)){if(t.v&&Bn(t)==4)Cg(t.Fa,0,t);else if(rr(t,"readystatechange"),Bn(t)==4){t.h=!1;try{const l=t.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var n;if(n=l===0){var i=String(t.H).match(vS)[1]||null;if(!i&&Ve.self&&Ve.self.location){var s=Ve.self.location.protocol;i=s.substr(0,s.length-1)}n=!tP.test(i?i.toLowerCase():"")}r=n}if(r)rr(t,"complete"),rr(t,"success");else{t.m=6;try{var a=2<Bn(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.ba()+"]",LS(t)}}finally{ef(t)}}}}function ef(t,e){if(t.g){OS(t);const r=t.g,n=t.C[0]?Pc:null;t.g=null,t.C=null,e||rr(t,"ready");try{r.onreadystatechange=n}catch{}}}function OS(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ve.clearTimeout(t.A),t.A=null)}function Bn(t){return t.g?t.g.readyState:0}we.ba=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}};we.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};we.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),eP(e)}};function PS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case CS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}we.Da=function(){return this.m};we.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function sP(t){let e="";return ug(t,function(r,n){e+=n,e+=":",e+=r,e+=`\r
`}),e}function Gg(t,e,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=sP(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):wt(t,e,r))}function gl(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function NS(t){this.za=0,this.l=[],this.h=new jc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gl("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gl("baseRetryDelayMs",5e3,t),this.$a=gl("retryDelaySeedMs",1e4,t),this.Ya=gl("forwardChannelMaxRetries",2,t),this.ra=gl("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new xS(t&&t.concurrentRequestLimit),this.Ca=new QO,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}we=NS.prototype;we.ma=8;we.G=1;function zg(t){if(MS(t),t.G==3){var e=t.V++,r=Un(t.F);wt(r,"SID",t.J),wt(r,"RID",e),wt(r,"TYPE","terminate"),ml(t,r),e=new ol(t,t.h,e,void 0),e.K=2,e.v=Qc(Un(r)),r=!1,Ve.navigator&&Ve.navigator.sendBeacon&&(r=Ve.navigator.sendBeacon(e.v.toString(),"")),!r&&Ve.Image&&(new Image().src=e.v,r=!0),r||(e.g=HS(e.l,null),e.g.ea(e.v)),e.F=Date.now(),al(e)}GS(t)}we.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function tf(t){t.g&&(Kg(t),t.g.cancel(),t.g=null)}function MS(t){tf(t),t.u&&(Ve.clearTimeout(t.u),t.u=null),nf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ve.clearTimeout(t.m),t.m=null)}function Hg(t,e){t.l.push(new YO(t.Za++,e)),t.G==3&&rf(t)}function rf(t){_S(t.i)||t.m||(t.m=!0,bg(t.Ha,t),t.C=0)}function oP(t,e){return bS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=il(er(t.Ha,t,e),jS(t,t.C)),t.C++,!0)}we.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new ol(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=Vw(s),Gw(s,this.P)):s=this.P),this.o===null&&(i.H=s),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){t:{var n=this.l[r];if("__data__"in n.g&&(n=n.g.__data__,typeof n=="string")){n=n.length;break t}n=void 0}if(n===void 0)break;if(e+=n,4096<e){e=r;break e}if(e===4096||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=US(this,i,e),r=Un(this.F),wt(r,"RID",t),wt(r,"CVER",22),this.D&&wt(r,"X-HTTP-Session-Id",this.D),ml(this,r),this.o&&s&&Gg(r,this.o,s),$g(this.i,i),this.Ra&&wt(r,"TYPE","init"),this.ja?(wt(r,"$req",e),wt(r,"SID","null"),i.$=!0,Ng(i,r,null)):Ng(i,r,e),this.G=2}}else this.G==3&&(t?FS(this,t):this.l.length==0||_S(this.i)||FS(this))};function FS(t,e){var r;e?r=e.m:r=t.V++;const n=Un(t.F);wt(n,"SID",t.J),wt(n,"RID",r),wt(n,"AID",t.U),ml(t,n),t.o&&t.s&&Gg(n,t.o,t.s),r=new ol(t,t.h,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.l=e.D.concat(t.l)),e=US(t,r,1e3),r.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),$g(t.i,r),Ng(r,n,e)}function ml(t,e){t.j&&Fg({},function(r,n){wt(e,n,r)})}function US(t,e,r){r=Math.min(t.l.length,r);var n=t.j?er(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const a=["count="+r];s==-1?0<r?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);let l=!0;for(let d=0;d<r;d++){let u=i[d].h;const h=i[d].g;if(u-=s,0>u)s=Math.max(0,i[d].h-100),l=!1;else try{JO(h,a,"req"+u+"_")}catch{n&&n(h)}}if(l){n=a.join("&");break e}}}return t=t.l.splice(0,r),e.D=t,n}function BS(t){t.g||t.u||(t.Y=1,bg(t.Ga,t),t.A=0)}function Wg(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=il(er(t.Ga,t),jS(t,t.A)),t.A++,!0)}we.Ga=function(){if(this.u=null,$S(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=il(er(this.bb,this),t)}};we.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xr(10),tf(this),$S(this))};function Kg(t){t.B!=null&&(Ve.clearTimeout(t.B),t.B=null)}function $S(t){t.g=new ol(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Un(t.oa);wt(e,"RID","rpc"),wt(e,"SID",t.J),wt(e,"CI",t.N?"0":"1"),wt(e,"AID",t.U),ml(t,e),wt(e,"TYPE","xmlhttp"),t.o&&t.s&&Gg(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var r=t.g;t=t.la,r.K=1,r.v=Qc(Un(e)),r.s=null,r.U=!0,hS(r,t)}we.ab=function(){this.v!=null&&(this.v=null,tf(this),Wg(this),xr(19))};function nf(t){t.v!=null&&(Ve.clearTimeout(t.v),t.v=null)}function VS(t,e){var r=null;if(t.g==e){nf(t),Kg(t),t.g=null;var n=2}else if(Bg(t.i,e))r=e.D,AS(t.i,e),n=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(n==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;n=Gc(),rr(n,new lS(n,r,e,i)),rf(t)}else BS(t);else if(i=e.o,i==3||i==0&&0<t.I||!(n==1&&oP(t,e)||n==2&&Wg(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),i){case 1:as(t,5);break;case 4:as(t,10);break;case 3:as(t,6);break;default:as(t,2)}}}function jS(t,e){let r=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(r*=2),r*e}function as(t,e){if(t.h.info("Error code "+e),e==2){var r=null;t.j&&(r=null);var n=er(t.jb,t);r||(r=new os("//www.google.com/images/cleardot.gif"),Ve.location&&Ve.location.protocol=="http"||qc(r,"https"),Qc(r)),ZO(r.toString(),n)}else xr(2);t.G=0,t.j&&t.j.va(e),GS(t),MS(t)}we.jb=function(t){t?(this.h.info("Successfully pinged google.com"),xr(2)):(this.h.info("Failed to ping google.com"),xr(1))};function GS(t){t.G=0,t.I=-1,t.j&&((IS(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,ag(t.l),t.l.length=0),t.j.ua())}function zS(t,e,r){let n=VO(r);if(n.i!="")e&&Yc(n,e+"."+n.i),Xc(n,n.m);else{const i=Ve.location;n=jO(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,r)}return t.aa&&ug(t.aa,function(i,s){wt(n,s,i)}),e=t.D,r=t.sa,e&&r&&wt(n,e,r),wt(n,"VER",t.ma),ml(t,n),n}function HS(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ba&&!t.qa?new Dt(new dl({ib:!0})):new Dt(t.qa),e.L=t.H,e}function WS(){}we=WS.prototype;we.xa=function(){};we.wa=function(){};we.va=function(){};we.ua=function(){};we.Oa=function(){};function sf(){if(fo&&!(10<=Number(EO)))throw Error("Environmental error: no available transport.")}sf.prototype.g=function(t,e){return new $r(t,e)};function $r(t,e){zt.call(this),this.g=new NS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Mc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mc(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new mo(this)}tr($r,zt);$r.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),bg(er(t.hb,t,e))),xr(0),t.W=e,t.aa=r||{},t.N=t.X,t.F=zS(t,null,t.W),rf(t)};$r.prototype.close=function(){zg(this.g)};$r.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Hg(this.g,e)}else this.v?(e={},e.__data__=_g(t),Hg(this.g,e)):Hg(this.g,t)};$r.prototype.M=function(){this.g.j=null,delete this.j,zg(this.g),delete this.g,$r.Z.M.call(this)};function KS(t){Lg.call(this);var e=t.__sm__;if(e){e:{for(const r in e){t=r;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}tr(KS,Lg);function qS(){Dg.call(this),this.status=1}tr(qS,Dg);function mo(t){this.g=t}tr(mo,WS);mo.prototype.xa=function(){rr(this.g,"a")};mo.prototype.wa=function(t){rr(this.g,new KS(t))};mo.prototype.va=function(t){rr(this.g,new qS(t))};mo.prototype.ua=function(){rr(this.g,"b")};sf.prototype.createWebChannel=sf.prototype.g;$r.prototype.send=$r.prototype.u;$r.prototype.open=$r.prototype.m;$r.prototype.close=$r.prototype.close;zc.NO_ERROR=0;zc.TIMEOUT=8;zc.HTTP_ERROR=6;uS.COMPLETE="complete";fS.EventType=sl;sl.OPEN="a";sl.CLOSE="b";sl.ERROR="c";sl.MESSAGE="d";zt.prototype.listen=zt.prototype.N;Dt.prototype.listenOnce=Dt.prototype.O;Dt.prototype.getLastError=Dt.prototype.La;Dt.prototype.getLastErrorCode=Dt.prototype.Da;Dt.prototype.getStatus=Dt.prototype.ba;Dt.prototype.getResponseJson=Dt.prototype.Qa;Dt.prototype.getResponseText=Dt.prototype.ga;Dt.prototype.send=Dt.prototype.ea;var aP=function(){return new sf},lP=function(){return Gc()},qg=zc,uP=uS,cP=ns,YS={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fP=dl,of=fS,dP=Dt;const XS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kr.UNAUTHENTICATED=new kr(null),kr.GOOGLE_CREDENTIALS=new kr("google-credentials-uid"),kr.FIRST_PARTY=new kr("first-party-uid"),kr.MOCK_USER=new kr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="9.6.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Up("@firebase/firestore");function QS(){return ls.logLevel}function ke(t,...e){if(ls.logLevel<=lt.DEBUG){const r=e.map(Yg);ls.debug(`Firestore (${vo}): ${t}`,...r)}}function wi(t,...e){if(ls.logLevel<=lt.ERROR){const r=e.map(Yg);ls.error(`Firestore (${vo}): ${t}`,...r)}}function JS(t,...e){if(ls.logLevel<=lt.WARN){const r=e.map(Yg);ls.warn(`Firestore (${vo}): ${t}`,...r)}}function Yg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t="Unexpected state"){const e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+t;throw wi(e),new Error(e)}function ht(t,e){t||He()}function We(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ji{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(kr.UNAUTHENTICATED))}shutdown(){}}class gP{constructor(e){this.t=e,this.currentUser=kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let s=new us;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new us,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},l=d=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new us)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ht(typeof n.accessToken=="string"),new hP(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string"),new kr(e)}}class mP{constructor(e,r,n){this.type="FirstParty",this.user=kr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class vP{constructor(e,r,n){this.h=e,this.l=r,this.m=n}getToken(){return Promise.resolve(new mP(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EP{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,r){this.o=i=>{e.enqueueRetryable(()=>(s=>(s.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`),r(s.token)))(i))};const n=i=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?n(i):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ht(typeof r.token=="string"),new yP(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.p(n),this.T=n=>r.writeSequenceNumber(n))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xg.I=-1;class ZS{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=TP(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<r&&(n+=e.charAt(i[s]%e.length))}return n}}function ut(t,e){return t<e?-1:t>e?1:0}function yo(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vr.fromMillis(Date.now())}static fromDate(e){return Vr.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Vr(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.timestamp=e}static fromTimestamp(e){return new at(e)}static min(){return new at(new Vr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function cs(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function tx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,r,n){r===void 0?r=0:r>e.length&&He(),n===void 0?n=e.length-r:n>e.length-r&&He(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return vl.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof vl?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const s=e.get(i),a=r.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class St extends vl{construct(e,r,n){return new St(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new St(r)}static emptyPath(){return new St([])}}const wP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends vl{construct(e,r,n){return new Lr(e,r,n)}static isValidIdentifier(e){return wP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Pe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Pe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Pe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(n+=l,i++):(s(),i++)}if(s(),a)throw new Pe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(r)}static emptyPath(){return new Lr([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.fields=e,e.sort(Lr.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new nr(r)}static fromUint8Array(e){const r=function(n){let i="";for(let s=0;s<n.length;++s)i+=String.fromCharCode(n[s]);return i}(e);return new nr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const SP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(t){if(ht(!!t),typeof t=="string"){let e=0;const r=SP.exec(t);if(ht(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Eo(t){return typeof t=="string"?nr.fromBase64String(t):nr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function nx(t){const e=t.mapValue.fields.__previous_value__;return rx(e)?nx(e):e}function El(t){const e=Si(t.mapValue.fields.__local_write_time__.timestampValue);return new Vr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t){return t==null}function af(t){return t===0&&1/t==-1/0}function xP(t){return typeof t=="number"&&Number.isInteger(t)&&!af(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(St.fromString(e))}static fromName(e){return new je(St.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return St.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new St(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rx(t)?4:10:He()}function _n(t,e){if(t===e)return!0;const r=fs(t);if(r!==fs(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return El(t).isEqual(El(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const s=Si(n.timestampValue),a=Si(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(n,i){return Eo(n.bytesValue).isEqual(Eo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(n,i){return Ot(n.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(n.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)}(t,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ot(n.integerValue)===Ot(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const s=Ot(n.doubleValue),a=Ot(i.doubleValue);return s===a?af(s)===af(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],_n);case 10:return function(n,i){const s=n.mapValue.fields||{},a=i.mapValue.fields||{};if(ex(s)!==ex(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!_n(s[l],a[l])))return!1;return!0}(t,e);default:return He()}}function Tl(t,e){return(t.values||[]).find(r=>_n(r,e))!==void 0}function wo(t,e){if(t===e)return 0;const r=fs(t),n=fs(e);if(r!==n)return ut(r,n);switch(r){case 0:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=Ot(i.integerValue||i.doubleValue),l=Ot(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ix(t.timestampValue,e.timestampValue);case 4:return ix(El(t),El(e));case 5:return ut(t.stringValue,e.stringValue);case 6:return function(i,s){const a=Eo(i),l=Eo(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),l=s.split("/");for(let d=0;d<a.length&&d<l.length;d++){const u=ut(a[d],l[d]);if(u!==0)return u}return ut(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=ut(Ot(i.latitude),Ot(s.latitude));return a!==0?a:ut(Ot(i.longitude),Ot(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],l=s.values||[];for(let d=0;d<a.length&&d<l.length;++d){const u=wo(a[d],l[d]);if(u)return u}return ut(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){const a=i.fields||{},l=Object.keys(a),d=s.fields||{},u=Object.keys(d);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const E=ut(l[h],u[h]);if(E!==0)return E;const m=wo(a[l[h]],d[u[h]]);if(m!==0)return m}return ut(l.length,u.length)}(t.mapValue,e.mapValue);default:throw He()}}function ix(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const r=Si(t),n=Si(e),i=ut(r.seconds,n.seconds);return i!==0?i:ut(r.nanos,n.nanos)}function Qg(t){return Jg(t)}function Jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Si(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Eo(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,je.fromName(r).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(n){let i="[",s=!0;for(const a of n.values||[])s?s=!1:i+=",",i+=Jg(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Jg(n.fields[l])}`;return s+"}"}(t.mapValue):He();var e,r}function Zg(t){return!!t&&"integerValue"in t}function em(t){return!!t&&"arrayValue"in t}function sx(t){return!!t&&"nullValue"in t}function ox(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return cs(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=wl(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=wl(t.arrayValue.values[r]);return e}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!lf(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(r)}setAll(e){let r=Lr.emptyPath(),n={},i=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=l.popLast()}a?n[l.lastSegment()]=wl(a):i.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,i)}delete(e){const r=this.field(e.popLast());lf(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return _n(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){cs(r,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new jr(wl(this.value))}}function ax(t){const e=[];return cs(t.fields,(r,n)=>{const i=new Lr([r]);if(lf(n)){const s=ax(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new yl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,r,n,i,s){this.key=e,this.documentType=r,this.version=n,this.data=i,this.documentState=s}static newInvalidDocument(e){return new hr(e,0,at.min(),jr.empty(),0)}static newFoundDocument(e,r,n){return new hr(e,1,r,n,0)}static newNoDocument(e,r){return new hr(e,2,r,jr.empty(),0)}static newUnknownDocument(e,r){return new hr(e,3,r,jr.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,r=null,n=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.R=null}}function lx(t,e=null,r=[],n=[],i=null,s=null,a=null){return new _P(t,e,r,n,i,s,a)}function tm(t){const e=We(t);if(e.R===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>AP(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),To(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=uf(e.startAt)),e.endAt&&(r+="|ub:",r+=uf(e.endAt)),e.R=r}return e.R}function bP(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(r=>{return`${(n=r).field.canonicalString()} ${n.op} ${Qg(n.value)}`;var n}).join(", ")}]`),To(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(r=>function(n){return`${n.field.canonicalString()} (${n.dir})`}(r)).join(", ")}]`),t.startAt&&(e+=", startAt: "+uf(t.startAt)),t.endAt&&(e+=", endAt: "+uf(t.endAt)),`Target(${e})`}function rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!PP(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(r=t.filters[i],n=e.filters[i],r.op!==n.op||!r.field.isEqual(n.field)||!_n(r.value,n.value))return!1;var r,n;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fx(t.startAt,e.startAt)&&fx(t.endAt,e.endAt)}function nm(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Dr extends class{}{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.P(e,r,n):new IP(e,r,n):r==="array-contains"?new kP(e,n):r==="in"?new LP(e,n):r==="not-in"?new DP(e,n):r==="array-contains-any"?new OP(e,n):new Dr(e,r,n)}static P(e,r,n){return r==="in"?new RP(e,n):new CP(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.v(wo(r,this.value)):r!==null&&fs(this.value)===fs(r)&&this.v(wo(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function AP(t){return t.field.canonicalString()+t.op.toString()+Qg(t.value)}class IP extends Dr{constructor(e,r,n){super(e,r,n),this.key=je.fromName(n.referenceValue)}matches(e){const r=je.comparator(e.key,this.key);return this.v(r)}}class RP extends Dr{constructor(e,r){super(e,"in",r),this.keys=ux("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class CP extends Dr{constructor(e,r){super(e,"not-in",r),this.keys=ux("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ux(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>je.fromName(n.referenceValue))}class kP extends Dr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return em(r)&&Tl(r.arrayValue,this.value)}}class LP extends Dr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Tl(this.value.arrayValue,r)}}class DP extends Dr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Tl(this.value.arrayValue,r)}}class OP extends Dr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!em(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Tl(this.value.arrayValue,n))}}class im{constructor(e,r){this.position=e,this.before=r}}function uf(t){return`${t.before?"b":"a"}:${t.position.map(e=>Qg(e)).join(",")}`}class So{constructor(e,r="asc"){this.field=e,this.dir=r}}function PP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function cx(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?n=je.comparator(je.fromName(a.referenceValue),r.key):n=wo(a,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return t.before?n<=0:n<0}function fx(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!_n(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,r=null,n=[],i=[],s=null,a="F",l=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=d,this.S=null,this.D=null,this.startAt,this.endAt}}function NP(t,e,r,n,i,s,a,l){return new Sl(t,e,r,n,i,s,a,l)}function sm(t){return new Sl(t)}function cf(t){return!To(t.limit)&&t.limitType==="F"}function ff(t){return!To(t.limit)&&t.limitType==="L"}function dx(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function hx(t){for(const e of t.filters)if(e.V())return e.field;return null}function MP(t){return t.collectionGroup!==null}function xl(t){const e=We(t);if(e.S===null){e.S=[];const r=hx(e),n=dx(e);if(r!==null&&n===null)r.isKeyField()||e.S.push(new So(r)),e.S.push(new So(Lr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.S.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new So(Lr.keyField(),s))}}}return e.S}function ds(t){const e=We(t);if(!e.D)if(e.limitType==="F")e.D=lx(e.path,e.collectionGroup,xl(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const s of xl(e)){const a=s.dir==="desc"?"asc":"desc";r.push(new So(s.field,a))}const n=e.endAt?new im(e.endAt.position,!e.endAt.before):null,i=e.startAt?new im(e.startAt.position,!e.startAt.before):null;e.D=lx(e.path,e.collectionGroup,r,e.filters,e.limit,n,i)}return e.D}function px(t,e,r){return new Sl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function df(t,e){return rm(ds(t),ds(e))&&t.limitType===e.limitType}function gx(t){return`${tm(ds(t))}|lt:${t.limitType}`}function om(t){return`Query(target=${bP(ds(t))}; limitType=${t.limitType})`}function hf(t,e){return e.isFoundDocument()&&function(r,n){const i=n.key.path;return r.collectionGroup!==null?n.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):je.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,n){for(const i of r.explicitOrderBy)if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,n){for(const i of r.filters)if(!i.matches(n))return!1;return!0}(t,e)&&function(r,n){return!(r.startAt&&!cx(r.startAt,xl(r),n)||r.endAt&&cx(r.endAt,xl(r),n))}(t,e)}function mx(t){return(e,r)=>{let n=!1;for(const i of xl(t)){const s=FP(i,e,r);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function FP(t,e,r){const n=t.field.isKeyField()?je.comparator(e.key,r.key):function(i,s,a){const l=s.data.field(i),d=a.data.field(i);return l!==null&&d!==null?wo(l,d):He()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function yx(t){return{integerValue:""+t}}function UP(t,e){return xP(e)?yx(e):vx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this._=void 0}}function BP(t,e,r){return t instanceof _l?function(n,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(r,e):t instanceof bl?Tx(t,e):t instanceof Al?wx(t,e):function(n,i){const s=Ex(n,i),a=Sx(s)+Sx(n.N);return Zg(s)&&Zg(n.N)?yx(a):vx(n.k,a)}(t,e)}function $P(t,e,r){return t instanceof bl?Tx(t,e):t instanceof Al?wx(t,e):r}function Ex(t,e){return t instanceof gf?Zg(r=e)||function(n){return!!n&&"doubleValue"in n}(r)?e:{integerValue:0}:null;var r}class _l extends pf{}class bl extends pf{constructor(e){super(),this.elements=e}}function Tx(t,e){const r=xx(e);for(const n of t.elements)r.some(i=>_n(i,n))||r.push(n);return{arrayValue:{values:r}}}class Al extends pf{constructor(e){super(),this.elements=e}}function wx(t,e){let r=xx(e);for(const n of t.elements)r=r.filter(i=>!_n(i,n));return{arrayValue:{values:r}}}class gf extends pf{constructor(e,r){super(),this.k=e,this.N=r}}function Sx(t){return Ot(t.integerValue||t.doubleValue)}function xx(t){return em(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,r){this.field=e,this.transform=r}}function jP(t,e){return t.field.isEqual(e.field)&&function(r,n){return r instanceof bl&&n instanceof bl||r instanceof Al&&n instanceof Al?yo(r.elements,n.elements,_n):r instanceof gf&&n instanceof gf?_n(r.N,n.N):r instanceof _l&&n instanceof _l}(t.transform,e.transform)}class GP{constructor(e,r){this.version=e,this.transformResults=r}}class hs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vf{}function zP(t,e,r){t instanceof yf?function(n,i,s){const a=n.value.clone(),l=Ix(n.fieldTransforms,i,s.transformResults);a.setAll(l),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof ps?function(n,i,s){if(!mf(n.precondition,i))return void i.convertToUnknownDocument(s.version);const a=Ix(n.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(Ax(n)),l.setAll(a),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(n,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function am(t,e,r){t instanceof yf?function(n,i,s){if(!mf(n.precondition,i))return;const a=n.value.clone(),l=Rx(n.fieldTransforms,s,i);a.setAll(l),i.convertToFoundDocument(bx(i),a).setHasLocalMutations()}(t,e,r):t instanceof ps?function(n,i,s){if(!mf(n.precondition,i))return;const a=Rx(n.fieldTransforms,s,i),l=i.data;l.setAll(Ax(n)),l.setAll(a),i.convertToFoundDocument(bx(i),l).setHasLocalMutations()}(t,e,r):function(n,i){mf(n.precondition,i)&&i.convertToNoDocument(at.min())}(t,e)}function HP(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),s=Ex(n.transform,i||null);s!=null&&(r==null&&(r=jr.empty()),r.set(n.field,s))}return r||null}function _x(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,n){return r===void 0&&n===void 0||!(!r||!n)&&yo(r,n,(i,s)=>jP(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function bx(t){return t.isFoundDocument()?t.version:at.min()}class yf extends vf{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}}class ps extends vf{constructor(e,r,n,i,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function Ax(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Ix(t,e,r){const n=new Map;ht(t.length===r.length);for(let i=0;i<r.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);n.set(s.field,$P(a,l,r[i]))}return n}function Rx(t,e,r){const n=new Map;for(const i of t){const s=i.transform,a=r.data.field(i.field);n.set(i.field,BP(s,a,e))}return n}class WP extends vf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class KP extends vf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,rt;function YP(t){switch(t){default:return He();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Cx(t){if(t===void 0)return wi("GRPC error has no .code"),fe.UNKNOWN;switch(t){case Pt.OK:return fe.OK;case Pt.CANCELLED:return fe.CANCELLED;case Pt.UNKNOWN:return fe.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return fe.INTERNAL;case Pt.UNAVAILABLE:return fe.UNAVAILABLE;case Pt.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case Pt.NOT_FOUND:return fe.NOT_FOUND;case Pt.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case Pt.ABORTED:return fe.ABORTED;case Pt.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case Pt.DATA_LOSS:return fe.DATA_LOSS;default:return He()}}(rt=Pt||(Pt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,r){this.comparator=e,this.root=r||ir.EMPTY}insert(e,r){return new pr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ir.BLACK,null,null))}remove(e){return new pr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ir.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ef(this.root,e,this.comparator,!0)}}class Ef{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ir{constructor(e,r,n,i,s){this.key=e,this.value=r,this.color=n!=null?n:ir.RED,this.left=i!=null?i:ir.EMPTY,this.right=s!=null?s:ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,s){return new ir(e!=null?e:this.key,r!=null?r:this.value,n!=null?n:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,r,n),null):s===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return ir.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}ir.EMPTY=null,ir.RED=!0,ir.BLACK=!1;ir.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(t,e,r,n,i){return this}insert(t,e,r){return new ir(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new kx(this.data.getIterator())}getIteratorFrom(e){return new kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof sr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new sr(this.comparator);return r.data=e,r}}class kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new pr(je.comparator);function gs(){return XP}const QP=new pr(je.comparator);function lm(){return QP}const JP=new pr(je.comparator);function ZP(){return JP}const eN=new sr(je.comparator);function Et(...t){let e=eN;for(const r of t)e=e.add(r);return e}const tN=new sr(ut);function Lx(){return tN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,r,n,i,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r){const n=new Map;return n.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,r)),new Tf(at.min(),n,Lx(),gs(),Et())}}class Il{constructor(e,r,n,i,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r){return new Il(nr.EMPTY_BYTE_STRING,r,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,r,n,i){this.$=e,this.removedTargetIds=r,this.key=n,this.O=i}}class Dx{constructor(e,r){this.targetId=e,this.M=r}}class Ox{constructor(e,r,n=nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Px{constructor(){this.F=0,this.L=Mx(),this.B=nr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return this.F!==0}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Et(),r=Et(),n=Et();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:He()}}),new Il(this.B,this.U,e,r,n)}H(){this.q=!1,this.L=Mx()}J(e,r){this.q=!0,this.L=this.L.insert(e,r)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class rN{constructor(e){this.et=e,this.nt=new Map,this.st=gs(),this.it=Nx(),this.rt=new sr(ut)}ot(e){for(const r of e.$)e.O&&e.O.isFoundDocument()?this.ct(r,e.O):this.at(r,e.key,e.O);for(const r of e.removedTargetIds)this.at(r,e.key,e.O)}ut(e){this.forEachTarget(e,r=>{const n=this.ht(r);switch(e.state){case 0:this.lt(r)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(r);break;case 3:this.lt(r)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(r)&&(this.ft(r),n.W(e.resumeToken));break;default:He()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.nt.forEach((n,i)=>{this.lt(i)&&r(i)})}dt(e){const r=e.targetId,n=e.M.count,i=this.wt(r);if(i){const s=i.target;if(nm(s))if(n===0){const a=new je(s.path);this.at(r,a,hr.newNoDocument(a,at.min()))}else ht(n===1);else this._t(r)!==n&&(this.ft(r),this.rt=this.rt.add(r))}}gt(e){const r=new Map;this.nt.forEach((s,a)=>{const l=this.wt(a);if(l){if(s.current&&nm(l.target)){const d=new je(l.target.path);this.st.get(d)!==null||this.yt(a,d)||this.at(a,d,hr.newNoDocument(d,e))}s.j&&(r.set(a,s.G()),s.H())}});let n=Et();this.it.forEach((s,a)=>{let l=!0;a.forEachWhile(d=>{const u=this.wt(d);return!u||u.purpose===2||(l=!1,!1)}),l&&(n=n.add(s))});const i=new Tf(e,r,this.rt,this.st,n);return this.st=gs(),this.it=Nx(),this.rt=new sr(ut),i}ct(e,r){if(!this.lt(e))return;const n=this.yt(e,r.key)?2:0;this.ht(e).J(r.key,n),this.st=this.st.insert(r.key,r),this.it=this.it.insert(r.key,this.Tt(r.key).add(e))}at(e,r,n){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,r)?i.J(r,1):i.Y(r),this.it=this.it.insert(r,this.Tt(r).delete(e)),n&&(this.st=this.st.insert(r,n))}removeTarget(e){this.nt.delete(e)}_t(e){const r=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let r=this.nt.get(e);return r||(r=new Px,this.nt.set(e,r)),r}Tt(e){let r=this.it.get(e);return r||(r=new sr(ut),this.it=this.it.insert(e,r)),r}lt(e){const r=this.wt(e)!==null;return r||ke("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.nt.get(e);return r&&r.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Px),this.et.getRemoteKeysForTarget(e).forEach(r=>{this.at(e,r,null)})}yt(e,r){return this.et.getRemoteKeysForTarget(e).has(r)}}function Nx(){return new pr(je.comparator)}function Mx(){return new pr(je.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),iN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class sN{constructor(e,r){this.databaseId=e,this.C=r}}function Sf(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fx(t,e){return t.C?e.toBase64():e.toUint8Array()}function oN(t,e){return Sf(t,e.toTimestamp())}function $n(t){return ht(!!t),at.fromTimestamp(function(e){const r=Si(e);return new Vr(r.seconds,r.nanos)}(t))}function um(t,e){return function(r){return new St(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function Ux(t){const e=St.fromString(t);return ht(zx(e)),e}function cm(t,e){return um(t.databaseId,e.path)}function fm(t,e){const r=Ux(e);if(r.get(1)!==t.databaseId.projectId)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Pe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new je(Bx(r))}function dm(t,e){return um(t.databaseId,e)}function aN(t){const e=Ux(t);return e.length===4?St.emptyPath():Bx(e)}function hm(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bx(t){return ht(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $x(t,e,r){return{name:cm(t,e),fields:r.value.mapValue.fields}}function lN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,u){return d.C?(ht(u===void 0||typeof u=="string"),nr.fromBase64String(u||"")):(ht(u===void 0||u instanceof Uint8Array),nr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const u=d.code===void 0?fe.UNKNOWN:Cx(d.code);return new Pe(u,d.message||"")}(a);r=new Ox(n,i,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=fm(t,n.document.name),s=$n(n.document.updateTime),a=new jr({mapValue:{fields:n.document.fields}}),l=hr.newFoundDocument(i,s,a),d=n.targetIds||[],u=n.removedTargetIds||[];r=new wf(d,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=fm(t,n.document),s=n.readTime?$n(n.readTime):at.min(),a=hr.newNoDocument(i,s),l=n.removedTargetIds||[];r=new wf([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=fm(t,n.document),s=n.removedTargetIds||[];r=new wf([],s,i,null)}else{if(!("filter"in e))return He();{e.filter;const n=e.filter;n.targetId;const i=n.count||0,s=new qP(i),a=n.targetId;r=new Dx(a,s)}}return r}function uN(t,e){let r;if(e instanceof yf)r={update:$x(t,e.key,e.value)};else if(e instanceof WP)r={delete:cm(t,e.key)};else if(e instanceof ps)r={update:$x(t,e.key,e.data),updateMask:EN(e.fieldMask)};else{if(!(e instanceof KP))return He();r={verify:cm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,s){const a=s.transform;if(a instanceof _l)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gf)return{fieldPath:s.field.canonicalString(),increment:a.N};throw He()}(0,n))),e.precondition.isNone||(r.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:oN(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:He()}(t,e.precondition)),r}function cN(t,e){return t&&t.length>0?(ht(e!==void 0),t.map(r=>function(n,i){let s=n.updateTime?$n(n.updateTime):$n(i);return s.isEqual(at.min())&&(s=$n(i)),new GP(s,n.transformResults||[])}(r,e))):[]}function fN(t,e){return{documents:[dm(t,e.path)]}}function dN(t,e){const r={structuredQuery:{}},n=e.path;e.collectionGroup!==null?(r.parent=dm(t,n),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=dm(t,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);const i=function(l){if(l.length===0)return;const d=l.map(u=>function(h){if(h.op==="=="){if(ox(h.value))return{unaryFilter:{field:xo(h.field),op:"IS_NAN"}};if(sx(h.value))return{unaryFilter:{field:xo(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(ox(h.value))return{unaryFilter:{field:xo(h.field),op:"IS_NOT_NAN"}};if(sx(h.value))return{unaryFilter:{field:xo(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(h.field),op:mN(h.op),value:h.value}}}(u));return d.length===1?d[0]:{compositeFilter:{op:"AND",filters:d}}}(e.filters);i&&(r.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(d=>function(u){return{field:xo(u.field),direction:gN(u.dir)}}(d))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=function(l,d){return l.C||To(d)?d:{value:d}}(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=jx(e.startAt)),e.endAt&&(r.structuredQuery.endAt=jx(e.endAt)),r}function hN(t){let e=aN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){ht(n===1);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];r.where&&(s=Vx(r.where));let a=[];r.orderBy&&(a=r.orderBy.map(h=>function(E){return new So(_o(E.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(h)));let l=null;r.limit&&(l=function(h){let E;return E=typeof h=="object"?h.value:h,To(E)?null:E}(r.limit));let d=null;r.startAt&&(d=Gx(r.startAt));let u=null;return r.endAt&&(u=Gx(r.endAt)),NP(e,i,a,s,l,"F",d,u)}function pN(t,e){const r=function(n,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return He()}}(0,e.purpose);return r==null?null:{"goog-listen-tags":r}}function Vx(t){return t?t.unaryFilter!==void 0?[yN(t)]:t.fieldFilter!==void 0?[vN(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Vx(e)).reduce((e,r)=>e.concat(r)):He():[]}function jx(t){return{before:t.before,values:t.position}}function Gx(t){const e=!!t.before,r=t.values||[];return new im(r,e)}function gN(t){return nN[t]}function mN(t){return iN[t]}function xo(t){return{fieldPath:t.canonicalString()}}function _o(t){return Lr.fromServerFormat(t.fieldPath)}function vN(t){return Dr.create(_o(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(t.fieldFilter.op),t.fieldFilter.value)}function yN(t){switch(t.unaryFilter.op){case"IS_NAN":const e=_o(t.unaryFilter.field);return Dr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=_o(t.unaryFilter.field);return Dr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=_o(t.unaryFilter.field);return Dr.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=_o(t.unaryFilter.field);return Dr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return He()}}function EN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function zx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}const TN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ee((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ee?r:Ee.resolve(r)}catch(r){return Ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ee.reject(r)}static resolve(e){return new Ee((r,n)=>{r(e)})}static reject(e){return new Ee((r,n)=>{n(e)})}static waitFor(e){return new Ee((r,n)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&r()},d=>n(d))}),a=!0,s===i&&r()})}static or(e){let r=Ee.resolve(!1);for(const n of e)r=r.next(i=>i?Ee.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,s)=>{n.push(r.call(this,i,s))}),this.waitFor(n)}}function Rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&zP(s,e,n[i])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&am(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&am(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const n=e.get(r.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(at.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Et())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(r,n)=>_x(r,n))&&yo(this.baseMutations,e.baseMutations,(r,n)=>_x(r,n))}}class pm{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){ht(e.mutations.length===n.length);let i=ZP();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new pm(e,r,n,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,r,n,i,s=at.min(),a=at.min(),l=nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.Gt=e}}function _N(t){const e=hN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?px(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.zt=new AN}addToCollectionParentIndex(e,r){return this.zt.add(r),Ee.resolve()}getCollectionParents(e,r){return Ee.resolve(this.zt.getEntries(r))}}class AN{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new sr(St.comparator),s=!i.has(n);return this.index[r]=i.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new sr(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new bo(0)}static re(){return new bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==TN)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={}}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,r]);i.push([e,r])}else this.inner[n]=[[e,r]]}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),!0;return!1}forEach(e){cs(this.inner,(r,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return tx(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(){this.changes=new kl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}getReadTime(e){const r=this.changes.get(e);return r?r.readTime:at.min()}addEntry(e,r){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:r})}removeEntry(e,r=null){this.assertNotApplied(),this.changes.set(e,{document:hr.newInvalidDocument(e),readTime:r})}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ee.resolve(n.document):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,r,n){this.Je=e,this.An=r,this.Jt=n}Rn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKey(e,r).next(n=>this.bn(e,r,n))}bn(e,r,n){return this.Je.getEntry(e,r).next(i=>{for(const s of n)s.applyToLocalView(i);return i})}Pn(e,r){e.forEach((n,i)=>{for(const s of r)s.applyToLocalView(i)})}vn(e,r){return this.Je.getEntries(e,r).next(n=>this.Vn(e,n).next(()=>n))}Vn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,r).next(n=>this.Pn(r,n))}getDocumentsMatchingQuery(e,r,n){return function(i){return je.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.Sn(e,r.path):MP(r)?this.Dn(e,r,n):this.Cn(e,r,n)}Sn(e,r){return this.Rn(e,new je(r)).next(n=>{let i=lm();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}Dn(e,r,n){const i=r.collectionGroup;let s=lm();return this.Jt.getCollectionParents(e,i).next(a=>Ee.forEach(a,l=>{const d=function(u,h){return new Sl(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(r,l.child(i));return this.Cn(e,d,n).next(u=>{u.forEach((h,E)=>{s=s.insert(h,E)})})}).next(()=>s))}Cn(e,r,n){let i,s;return this.Je.getDocumentsMatchingQuery(e,r,n).next(a=>(i=a,this.An.getAllMutationBatchesAffectingQuery(e,r))).next(a=>(s=a,this.Nn(e,s,i).next(l=>{i=l;for(const d of s)for(const u of d.mutations){const h=u.key;let E=i.get(h);E==null&&(E=hr.newInvalidDocument(h),i=i.insert(h,E)),am(u,E,d.localWriteTime),E.isFoundDocument()||(i=i.remove(h))}}))).next(()=>(i.forEach((a,l)=>{hf(r,l)||(i=i.remove(a))}),i))}Nn(e,r,n){let i=Et();for(const a of r)for(const l of a.mutations)l instanceof ps&&n.get(l.key)===null&&(i=i.add(l.key));let s=n;return this.Je.getEntries(e,i).next(a=>(a.forEach((l,d)=>{d.isFoundDocument()&&(s=s.insert(l,d))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.kn=n,this.xn=i}static $n(e,r){let n=Et(),i=Et();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gm(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{On(e){this.Mn=e}getDocumentsMatchingQuery(e,r,n,i){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(r)||n.isEqual(at.min())?this.Fn(e,r):this.Mn.vn(e,i).next(s=>{const a=this.Ln(r,s);return(cf(r)||ff(r))&&this.Bn(r.limitType,a,i,n)?this.Fn(e,r):(QS()<=lt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),om(r)),this.Mn.getDocumentsMatchingQuery(e,r,n).next(l=>(a.forEach(d=>{l=l.insert(d.key,d)}),l)))})}Ln(e,r){let n=new sr(mx(e));return r.forEach((i,s)=>{hf(e,s)&&(n=n.add(s))}),n}Bn(e,r,n,i){if(n.size!==r.size)return!0;const s=e==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Fn(e,r){return QS()<=lt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",om(r)),this.Mn.getDocumentsMatchingQuery(e,r,at.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,r,n,i){this.persistence=e,this.Un=r,this.k=i,this.qn=new pr(ut),this.Kn=new kl(s=>tm(s),rm),this.jn=at.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Hx(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qn))}}function kN(t,e,r,n){return new CN(t,e,r,n)}async function Wx(t,e){const r=We(t);let n=r.An,i=r.Wn;const s=await r.persistence.runTransaction("Handle user change","readonly",a=>{let l;return r.An.getAllMutationBatches(a).next(d=>(l=d,n=r.persistence.getMutationQueue(e),i=new Hx(r.Qn,n,r.persistence.getIndexManager()),n.getAllMutationBatches(a))).next(d=>{const u=[],h=[];let E=Et();for(const m of l){u.push(m.batchId);for(const w of m.mutations)E=E.add(w.key)}for(const m of d){h.push(m.batchId);for(const w of m.mutations)E=E.add(w.key)}return i.vn(a,E).next(m=>({Gn:m,removedBatchIds:u,addedBatchIds:h}))})});return r.An=n,r.Wn=i,r.Un.On(r.Wn),s}function LN(t,e){const r=We(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=r.Qn.newChangeBuffer({trackRemovals:!0});return function(a,l,d,u){const h=d.batch,E=h.keys();let m=Ee.resolve();return E.forEach(w=>{m=m.next(()=>u.getEntry(l,w)).next(C=>{const R=d.docVersions.get(w);ht(R!==null),C.version.compareTo(R)<0&&(h.applyToRemoteDocument(C,d),C.isValidDocument()&&u.addEntry(C,d.commitVersion))})}),m.next(()=>a.An.removeMutationBatch(l,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.An.performConsistencyCheck(n)).next(()=>r.Wn.vn(n,i))})}function Kx(t){const e=We(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.He.getLastRemoteSnapshotVersion(r))}function DN(t,e){const r=We(t),n=e.snapshotVersion;let i=r.qn;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=r.Qn.newChangeBuffer({trackRemovals:!0});i=r.qn;const l=[];e.targetChanges.forEach((u,h)=>{const E=i.get(h);if(!E)return;l.push(r.He.removeMatchingKeys(s,u.removedDocuments,h).next(()=>r.He.addMatchingKeys(s,u.addedDocuments,h)));let m=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(h)?m=m.withResumeToken(nr.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,n)),i=i.insert(h,m),function(w,C,R){return w.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(E,m,u)&&l.push(r.He.updateTargetData(s,m))});let d=gs();if(e.documentUpdates.forEach((u,h)=>{e.resolvedLimboDocuments.has(u)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(ON(s,a,e.documentUpdates,n,void 0).next(u=>{d=u})),!n.isEqual(at.min())){const u=r.He.getLastRemoteSnapshotVersion(s).next(h=>r.He.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(u)}return Ee.waitFor(l).next(()=>a.apply(s)).next(()=>r.Wn.Vn(s,d)).next(()=>d)}).then(s=>(r.qn=i,s))}function ON(t,e,r,n,i){let s=Et();return r.forEach(a=>s=s.add(a)),e.getEntries(t,s).next(a=>{let l=gs();return r.forEach((d,u)=>{const h=a.get(d),E=(i==null?void 0:i.get(d))||n;u.isNoDocument()&&u.version.isEqual(at.min())?(e.removeEntry(d,E),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u,E),l=l.insert(d,u)):ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)}),l})}function PN(t,e){const r=We(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.An.getNextMutationBatchAfterBatchId(n,e)))}function NN(t,e){const r=We(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.He.getTargetData(n,e).next(s=>s?(i=s,Ee.resolve(i)):r.He.allocateTargetId(n).next(a=>(i=new ms(e,a,0,n.currentSequenceNumber),r.He.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.qn.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.qn=r.qn.insert(n.targetId,n),r.Kn.set(e,n.targetId)),n})}async function mm(t,e,r){const n=We(t),i=n.qn.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Rl(a))throw a;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.qn=n.qn.remove(e),n.Kn.delete(i.target)}function qx(t,e,r){const n=We(t);let i=at.min(),s=Et();return n.persistence.runTransaction("Execute query","readonly",a=>function(l,d,u){const h=We(l),E=h.Kn.get(u);return E!==void 0?Ee.resolve(h.qn.get(E)):h.He.getTargetData(d,u)}(n,a,ds(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.He.getMatchingKeysForTargetId(a,l.targetId).next(d=>{s=d})}).next(()=>n.Un.getDocumentsMatchingQuery(a,e,r?i:at.min(),r?s:Et())).next(l=>({documents:l,zn:s})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,r){return Ee.resolve(this.Xn.get(r))}saveBundleMetadata(e,r){var n;return this.Xn.set(r.id,{id:(n=r).id,version:n.version,createTime:$n(n.createTime)}),Ee.resolve()}getNamedQuery(e,r){return Ee.resolve(this.Zn.get(r))}saveNamedQuery(e,r){return this.Zn.set(r.name,function(n){return{name:n.name,query:_N(n.bundledQuery),readTime:$n(n.readTime)}}(r)),Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.ts=new sr(Ht.es),this.ns=new sr(Ht.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,r){const n=new Ht(e,r);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.os(new Ht(e,r))}cs(e,r){e.forEach(n=>this.removeReference(n,r))}us(e){const r=new je(new St([])),n=new Ht(r,e),i=new Ht(r,e+1),s=[];return this.ns.forEachInRange([n,i],a=>{this.os(a),s.push(a.key)}),s}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const r=new je(new St([])),n=new Ht(r,e),i=new Ht(r,e+1);let s=Et();return this.ns.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const r=new Ht(e,0),n=this.ts.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ht{constructor(e,r){this.key=e,this.fs=r}static es(e,r){return je.comparator(e.key,r.key)||ut(e.fs,r.fs)}static ss(e,r){return ut(e.fs,r.fs)||je.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,r){this.Jt=e,this.referenceDelegate=r,this.An=[],this.ds=1,this.ws=new sr(Ht.es)}checkEmpty(e){return Ee.resolve(this.An.length===0)}addMutationBatch(e,r,n,i){const s=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const a=new SN(s,r,n,i);this.An.push(a);for(const l of i)this.ws=this.ws.add(new Ht(l.key,s)),this.Jt.addToCollectionParentIndex(e,l.key.path.popLast());return Ee.resolve(a)}lookupMutationBatch(e,r){return Ee.resolve(this._s(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.gs(n),s=i<0?0:i;return Ee.resolve(this.An.length>s?this.An[s]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.An.length===0?-1:this.ds-1)}getAllMutationBatches(e){return Ee.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ht(r,0),i=new Ht(r,Number.POSITIVE_INFINITY),s=[];return this.ws.forEachInRange([n,i],a=>{const l=this._s(a.fs);s.push(l)}),Ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new sr(ut);return r.forEach(i=>{const s=new Ht(i,0),a=new Ht(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([s,a],l=>{n=n.add(l.fs)})}),Ee.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let s=n;je.isDocumentKey(s)||(s=s.child(""));const a=new Ht(new je(s),0);let l=new sr(ut);return this.ws.forEachWhile(d=>{const u=d.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(d.fs)),!0)},a),Ee.resolve(this.ys(l))}ys(e){const r=[];return e.forEach(n=>{const i=this._s(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){ht(this.ps(r.batchId,"removed")===0),this.An.shift();let n=this.ws;return Ee.forEach(r.mutations,i=>{const s=new Ht(i.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=n})}ee(e){}containsKey(e,r){const n=new Ht(r,0),i=this.ws.firstAfterOrEqual(n);return Ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.An.length,Ee.resolve()}ps(e,r){return this.gs(e)}gs(e){return this.An.length===0?0:e-this.An[0].batchId}_s(e){const r=this.gs(e);return r<0||r>=this.An.length?null:this.An[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,r){this.Jt=e,this.Ts=r,this.docs=new pr(je.comparator),this.size=0}addEntry(e,r,n){const i=r.key,s=this.docs.get(i),a=s?s.size:0,l=this.Ts(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:l,readTime:n}),this.size+=l-a,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ee.resolve(n?n.document.mutableCopy():hr.newInvalidDocument(r))}getEntries(e,r){let n=gs();return r.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():hr.newInvalidDocument(i))}),Ee.resolve(n)}getDocumentsMatchingQuery(e,r,n){let i=gs();const s=new je(r.path.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:l,value:{document:d,readTime:u}}=a.getNext();if(!r.path.isPrefixOf(l.path))break;u.compareTo(n)<=0||hf(r,d)&&(i=i.insert(d.key,d.mutableCopy()))}return Ee.resolve(i)}Es(e,r){return Ee.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new BN(this)}getSize(e){return Ee.resolve(this.size)}}class BN extends IN{constructor(e){super(),this.De=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.document.isValidDocument()?r.push(this.De.addEntry(e,i.document,this.getReadTime(n))):this.De.removeEntry(n)}),Ee.waitFor(r)}getFromCache(e,r){return this.De.getEntry(e,r)}getAllFromCache(e,r){return this.De.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.persistence=e,this.Is=new kl(r=>tm(r),rm),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.As=0,this.Rs=new vm,this.targetCount=0,this.bs=bo.ie()}forEachTarget(e,r){return this.Is.forEach((n,i)=>r(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.As&&(this.As=r),Ee.resolve()}ae(e){this.Is.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.bs=new bo(r),this.highestTargetId=r),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,r){return this.ae(r),this.targetCount+=1,Ee.resolve()}updateTargetData(e,r){return this.ae(r),Ee.resolve()}removeTargetData(e,r){return this.Is.delete(r.target),this.Rs.us(r.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,r,n){let i=0;const s=[];return this.Is.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Is.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Ee.waitFor(s).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.Is.get(r)||null;return Ee.resolve(n)}addMatchingKeys(e,r,n){return this.Rs.rs(r,n),Ee.resolve()}removeMatchingKeys(e,r,n){this.Rs.cs(r,n);const i=this.persistence.referenceDelegate,s=[];return i&&r.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ee.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.Rs.us(r),Ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Rs.ls(r);return Ee.resolve(n)}containsKey(e,r){return Ee.resolve(this.Rs.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,r){this.Ps={},this.Be=new Xg(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new $N(this),this.Jt=new bN,this.Je=function(n,i){return new UN(n,i)}(this.Jt,n=>this.referenceDelegate.vs(n)),this.k=new xN(r),this.Ye=new MN(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let r=this.Ps[e.toKey()];return r||(r=new FN(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,r,n){ke("MemoryPersistence","Starting transaction:",e);const i=new jN(this.Be.next());return this.referenceDelegate.Vs(),n(i).next(s=>this.referenceDelegate.Ss(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ds(e,r){return Ee.or(Object.values(this.Ps).map(n=>()=>n.containsKey(e,r)))}}class jN extends wN{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Cs=new vm,this.Ns=null}static ks(e){return new ym(e)}get xs(){if(this.Ns)return this.Ns;throw He()}addReference(e,r,n){return this.Cs.addReference(n,r),this.xs.delete(n.toString()),Ee.resolve()}removeReference(e,r,n){return this.Cs.removeReference(n,r),this.xs.add(n.toString()),Ee.resolve()}markPotentiallyOrphaned(e,r){return this.xs.add(r.toString()),Ee.resolve()}removeTarget(e,r){this.Cs.us(r.targetId).forEach(i=>this.xs.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(s=>this.xs.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Vs(){this.Ns=new Set}Ss(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.xs,n=>{const i=je.fromPath(n);return this.$s(e,i).next(s=>{s||r.removeEntry(i)})}).next(()=>(this.Ns=null,r.apply(e)))}updateLimboDocument(e,r){return this.$s(e,r).next(n=>{n?this.xs.delete(r.toString()):this.xs.add(r.toString())})}vs(e){return 0}$s(e,r){return Ee.or([()=>Ee.resolve(this.Cs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ds(e,r)])}}class Yx{constructor(){this.activeTargetIds=Lx()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GN{constructor(){this.pi=new Yx,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,r,n){this.Ti[e]=r}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Yx,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{Ei(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http";this.Fi=r+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,r,n,i,s){const a=this.Ui(e,r);ke("RestConnection","Sending: ",a,n);const l={};return this.qi(l,i,s),this.Ki(e,a,l,n).then(d=>(ke("RestConnection","Received: ",d),d),d=>{throw JS("RestConnection",`${e} failed with error: `,d,"url: ",a,"request:",n),d})}ji(e,r,n,i,s){return this.Bi(e,r,n,i,s)}qi(e,r,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+vo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}Ui(e,r){const n=HN[e];return`${this.Fi}/v1/${r}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,r,n,i){return new Promise((s,a)=>{const l=new dP;l.listenOnce(uP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qg.NO_ERROR:const u=l.getResponseJson();ke("Connection","XHR received:",JSON.stringify(u)),s(u);break;case qg.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),a(new Pe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case qg.HTTP_ERROR:const h=l.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',h,"response text:",l.getResponseText()),h>0){const E=l.getResponseJson().error;if(E&&E.status&&E.message){const m=function(w){const C=w.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(C)>=0?C:fe.UNKNOWN}(E.status);a(new Pe(m,E.message))}else a(new Pe(fe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Pe(fe.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const d=JSON.stringify(i);l.send(r,"POST",d,n,15)})}Qi(e,r,n){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aP(),a=lP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new fP({})),this.qi(l.initMessageHeaders,r,n),FT()||BT()||Ik()||$T()||Rk()||UT()||(l.httpHeadersOverwriteParam="$httpHeaders");const d=i.join("");ke("Connection","Creating WebChannel: "+d,l);const u=s.createWebChannel(d,l);let h=!1,E=!1;const m=new WN({Vi:C=>{E?ke("Connection","Not sending because WebChannel is closed:",C):(h||(ke("Connection","Opening WebChannel transport."),u.open(),h=!0),ke("Connection","WebChannel sending:",C),u.send(C))},Si:()=>u.close()}),w=(C,R,S)=>{C.listen(R,x=>{try{S(x)}catch(_){setTimeout(()=>{throw _},0)}})};return w(u,of.EventType.OPEN,()=>{E||ke("Connection","WebChannel transport opened.")}),w(u,of.EventType.CLOSE,()=>{E||(E=!0,ke("Connection","WebChannel transport closed"),m.Oi())}),w(u,of.EventType.ERROR,C=>{E||(E=!0,JS("Connection","WebChannel transport errored:",C),m.Oi(new Pe(fe.UNAVAILABLE,"The operation could not be completed")))}),w(u,of.EventType.MESSAGE,C=>{var R;if(!E){const S=C.data[0];ht(!!S);const x=S,_=x.error||((R=x[0])===null||R===void 0?void 0:R.error);if(_){ke("Connection","WebChannel received error:",_);const D=_.status;let k=function(B){const z=Pt[B];if(z!==void 0)return Cx(z)}(D),M=_.message;k===void 0&&(k=fe.INTERNAL,M="Unknown error status: "+D+" with message "+_.message),E=!0,m.Oi(new Pe(k,M)),u.close()}else ke("Connection","WebChannel received:",S),m.Mi(S)}}),w(a,cP.STAT_EVENT,C=>{C.stat===YS.PROXY?ke("Connection","Detected buffering proxy"):C.stat===YS.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.$i()},0),m}}function Em(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){return new sN(t,!0)}class Qx{constructor(e,r,n=1e3,i=1.5,s=6e4){this.Me=e,this.timerId=r,this.Wi=n,this.Gi=i,this.zi=s,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const r=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),i=Math.max(0,r-n);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){this.Ji!==null&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){this.Ji!==null&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,r,n,i,s,a,l,d){this.Me=e,this.nr=n,this.sr=i,this.ir=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new Qx(e,r)}hr(){return this.state===1||this.state===5||this.lr()}lr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&this.cr===null&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}async close(e,r){this.yr(),this.pr(),this.ur.cancel(),this.rr++,e!==4?this.ur.reset():r&&r.code===fe.RESOURCE_EXHAUSTED?(wi(r.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):r&&r.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(r)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),r=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.rr===r&&this.Ir(n,i)},n=>{e(()=>{const i=new Pe(fe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Ar(i)})})}Ir(e,r){const n=this.Er(this.rr);this.stream=this.Rr(e,r),this.stream.Di(()=>{n(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{n(()=>this.Ar(i))}),this.stream.onMessage(i=>{n(()=>this.onMessage(i))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return r=>{this.Me.enqueueAndForget(()=>this.rr===e?r():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qN extends Jx{constructor(e,r,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.k=s}Rr(e,r){return this.ir.Qi("Listen",e,r)}onMessage(e){this.ur.reset();const r=lN(this.k,e),n=function(i){if(!("targetChange"in i))return at.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?at.min():s.readTime?$n(s.readTime):at.min()}(e);return this.listener.br(r,n)}Pr(e){const r={};r.database=hm(this.k),r.addTarget=function(i,s){let a;const l=s.target;return a=nm(l)?{documents:fN(i,l)}:{query:dN(i,l)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?a.resumeToken=Fx(i,s.resumeToken):s.snapshotVersion.compareTo(at.min())>0&&(a.readTime=Sf(i,s.snapshotVersion.toTimestamp())),a}(this.k,e);const n=pN(this.k,e);n&&(r.labels=n),this.gr(r)}vr(e){const r={};r.database=hm(this.k),r.removeTarget=e,this.gr(r)}}class YN extends Jx{constructor(e,r,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.k=s,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,r){return this.ir.Qi("Write",e,r)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const r=cN(e.writeResults,e.commitTime),n=$n(e.commitTime);return this.listener.Cr(n,r)}return ht(!e.writeResults||e.writeResults.length===0),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=hm(this.k),this.gr(e)}Dr(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>uN(this.k,n))};this.gr(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.ir=n,this.k=i,this.$r=!1}Or(){if(this.$r)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,r,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.ir.Bi(e,r,n,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}ji(e,r,n){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.ir.ji(e,r,n,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(fe.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class QN{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){this.Mr===0&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){this.state==="Online"?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,e==="Online"&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(wi(r),this.Lr=!1):ke("OnlineStateTracker",r)}jr(){this.Fr!==null&&(this.Fr.cancel(),this.Fr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,r,n,i,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=s,this.Hr.Ei(a=>{n.enqueueAndForget(async()=>{vs(this)&&(ke("RemoteStore","Restarting streams for network reachability change."),await async function(l){const d=We(l);d.Gr.add(4),await Ll(d),d.Jr.set("Unknown"),d.Gr.delete(4),await _f(d)}(this))})}),this.Jr=new QN(n,i)}}async function _f(t){if(vs(t))for(const e of t.zr)await e(!0)}async function Ll(t){for(const e of t.zr)await e(!1)}function Zx(t,e){const r=We(t);r.Wr.has(e.targetId)||(r.Wr.set(e.targetId,e),Sm(r)?wm(r):Ao(r).lr()&&Tm(r,e))}function e_(t,e){const r=We(t),n=Ao(r);r.Wr.delete(e),n.lr()&&t_(r,e),r.Wr.size===0&&(n.lr()?n._r():vs(r)&&r.Jr.set("Unknown"))}function Tm(t,e){t.Yr.X(e.targetId),Ao(t).Pr(e)}function t_(t,e){t.Yr.X(e),Ao(t).vr(e)}function wm(t){t.Yr=new rN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),Ao(t).start(),t.Jr.Br()}function Sm(t){return vs(t)&&!Ao(t).hr()&&t.Wr.size>0}function vs(t){return We(t).Gr.size===0}function r_(t){t.Yr=void 0}async function ZN(t){t.Wr.forEach((e,r)=>{Tm(t,e)})}async function eM(t,e){r_(t),Sm(t)?(t.Jr.Kr(e),wm(t)):t.Jr.set("Unknown")}async function tM(t,e,r){if(t.Jr.set("Online"),e instanceof Ox&&e.state===2&&e.cause)try{await async function(n,i){const s=i.cause;for(const a of i.targetIds)n.Wr.has(a)&&(await n.remoteSyncer.rejectListen(a,s),n.Wr.delete(a),n.Yr.removeTarget(a))}(t,e)}catch(n){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bf(t,n)}else if(e instanceof wf?t.Yr.ot(e):e instanceof Dx?t.Yr.dt(e):t.Yr.ut(e),!r.isEqual(at.min()))try{const n=await Kx(t.localStore);r.compareTo(n)>=0&&await function(i,s){const a=i.Yr.gt(s);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Wr.get(d);u&&i.Wr.set(d,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach(l=>{const d=i.Wr.get(l);if(!d)return;i.Wr.set(l,d.withResumeToken(nr.EMPTY_BYTE_STRING,d.snapshotVersion)),t_(i,l);const u=new ms(d.target,l,1,d.sequenceNumber);Tm(i,u)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){ke("RemoteStore","Failed to raise snapshot:",n),await bf(t,n)}}async function bf(t,e,r){if(!Rl(e))throw e;t.Gr.add(1),await Ll(t),t.Jr.set("Offline"),r||(r=()=>Kx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ke("RemoteStore","Retrying IndexedDB access"),await r(),t.Gr.delete(1),await _f(t)})}function n_(t,e){return e().catch(r=>bf(t,r,e))}async function Af(t){const e=We(t),r=xi(e);let n=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;rM(e);)try{const i=await PN(e.localStore,n);if(i===null){e.Qr.length===0&&r._r();break}n=i.batchId,nM(e,i)}catch(i){await bf(e,i)}i_(e)&&s_(e)}function rM(t){return vs(t)&&t.Qr.length<10}function nM(t,e){t.Qr.push(e);const r=xi(t);r.lr()&&r.Sr&&r.Dr(e.mutations)}function i_(t){return vs(t)&&!xi(t).hr()&&t.Qr.length>0}function s_(t){xi(t).start()}async function iM(t){xi(t).kr()}async function sM(t){const e=xi(t);for(const r of t.Qr)e.Dr(r.mutations)}async function oM(t,e,r){const n=t.Qr.shift(),i=pm.from(n,e,r);await n_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Af(t)}async function aM(t,e){e&&xi(t).Sr&&await async function(r,n){if(i=n.code,YP(i)&&i!==fe.ABORTED){const s=r.Qr.shift();xi(r).wr(),await n_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,n)),await Af(r)}var i}(t,e),i_(t)&&s_(t)}async function lM(t,e){const r=We(t);e?(r.Gr.delete(2),await _f(r)):e||(r.Gr.add(2),await Ll(r),r.Jr.set("Unknown"))}function Ao(t){return t.Xr||(t.Xr=function(e,r,n){const i=We(e);return i.Or(),new qN(r,i.ir,i.authCredentials,i.appCheckCredentials,i.k,n)}(t.datastore,t.asyncQueue,{Di:ZN.bind(null,t),Ni:eM.bind(null,t),br:tM.bind(null,t)}),t.zr.push(async e=>{e?(t.Xr.wr(),Sm(t)?wm(t):t.Jr.set("Unknown")):(await t.Xr.stop(),r_(t))})),t.Xr}function xi(t){return t.Zr||(t.Zr=function(e,r,n){const i=We(e);return i.Or(),new YN(r,i.ir,i.authCredentials,i.appCheckCredentials,i.k,n)}(t.datastore,t.asyncQueue,{Di:iM.bind(null,t),Ni:aM.bind(null,t),Nr:sM.bind(null,t),Cr:oM.bind(null,t)}),t.zr.push(async e=>{e?(t.Zr.wr(),await Af(t)):(await t.Zr.stop(),t.Qr.length>0&&(ke("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))})),t.Zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,r,n,i,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,r,n,i,s){const a=Date.now()+n,l=new xm(e,r,a,i,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _m(t,e){if(wi("AsyncQueue",`${e}: ${t}`),Rl(t))return new Pe(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(r,n)=>e(r,n)||je.comparator(r.key,n.key):(r,n)=>je.comparator(r.key,n.key),this.keyedMap=lm(),this.sortedSet=new pr(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Io;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.eo=new pr(je.comparator)}track(e){const r=e.doc.key,n=this.eo.get(r);n?e.type!==0&&n.type===3?this.eo=this.eo.insert(r,e):e.type===3&&n.type!==1?this.eo=this.eo.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.eo=this.eo.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.eo=this.eo.remove(r):e.type===1&&n.type===2?this.eo=this.eo.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):He():this.eo=this.eo.insert(r,e)}no(){const e=[];return this.eo.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ro{constructor(e,r,n,i,s,a,l,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=d}static fromInitialDocuments(e,r,n,i){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new Ro(e,r,Io.emptySet(r),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.so=void 0,this.listeners=[]}}class cM{constructor(){this.queries=new kl(e=>gx(e),df),this.onlineState="Unknown",this.io=new Set}}async function fM(t,e){const r=We(t),n=e.query;let i=!1,s=r.queries.get(n);if(s||(i=!0,s=new uM),i)try{s.so=await r.onListen(n)}catch(a){const l=_m(a,`Initialization of query '${om(e.query)}' failed`);return void e.onError(l)}r.queries.set(n,s),s.listeners.push(e),e.ro(r.onlineState),s.so&&e.oo(s.so)&&bm(r)}async function dM(t,e){const r=We(t),n=e.query;let i=!1;const s=r.queries.get(n);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function hM(t,e){const r=We(t);let n=!1;for(const i of e){const s=i.query,a=r.queries.get(s);if(a){for(const l of a.listeners)l.oo(i)&&(n=!0);a.so=i}}n&&bm(r)}function pM(t,e,r){const n=We(t),i=n.queries.get(e);if(i)for(const s of i.listeners)s.onError(r);n.queries.delete(e)}function bm(t){t.io.forEach(e=>{e.next()})}class gM{constructor(e,r,n){this.query=e,this.co=r,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Ro(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.ao?this.ho(e)&&(this.co.next(e),r=!0):this.lo(e,this.onlineState)&&(this.fo(e),r=!0),this.uo=e,r}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let r=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),r=!0),r}lo(e,r){if(!e.fromCache)return!0;const n=r!=="Offline";return(!this.options.wo||!n)&&(!e.docs.isEmpty()||r==="Offline")}ho(e){if(e.docChanges.length>0)return!0;const r=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}fo(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.key=e}}class l_{constructor(e){this.key=e}}class mM{constructor(e,r){this.query=e,this.To=r,this.Eo=null,this.current=!1,this.Io=Et(),this.mutatedKeys=Et(),this.Ao=mx(e),this.Ro=new Io(this.Ao)}get bo(){return this.To}Po(e,r){const n=r?r.vo:new o_,i=r?r.Ro:this.Ro;let s=r?r.mutatedKeys:this.mutatedKeys,a=i,l=!1;const d=cf(this.query)&&i.size===this.query.limit?i.last():null,u=ff(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,E)=>{const m=i.get(h),w=hf(this.query,E)?E:null,C=!!m&&this.mutatedKeys.has(m.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;m&&w?m.data.isEqual(w.data)?C!==R&&(n.track({type:3,doc:w}),S=!0):this.Vo(m,w)||(n.track({type:2,doc:w}),S=!0,(d&&this.Ao(w,d)>0||u&&this.Ao(w,u)<0)&&(l=!0)):!m&&w?(n.track({type:0,doc:w}),S=!0):m&&!w&&(n.track({type:1,doc:m}),S=!0,(d||u)&&(l=!0)),S&&(w?(a=a.add(w),s=R?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),cf(this.query)||ff(this.query))for(;a.size>this.query.limit;){const h=cf(this.query)?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ro:a,vo:n,Bn:l,mutatedKeys:s}}Vo(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const s=e.vo.no();s.sort((u,h)=>function(E,m){const w=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return w(E)-w(m)}(u.type,h.type)||this.Ao(u.doc,h.doc)),this.So(n);const a=r?this.Do():[],l=this.Io.size===0&&this.current?1:0,d=l!==this.Eo;return this.Eo=l,s.length!==0||d?{snapshot:new Ro(this.query,e.Ro,i,s,e.mutatedKeys,l===0,d,!1),Co:a}:{Co:a}}ro(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new o_,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(r=>this.To=this.To.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.To=this.To.delete(r)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Et(),this.Ro.forEach(n=>{this.No(n.key)&&(this.Io=this.Io.add(n.key))});const r=[];return e.forEach(n=>{this.Io.has(n)||r.push(new l_(n))}),this.Io.forEach(n=>{e.has(n)||r.push(new a_(n))}),r}ko(e){this.To=e.zn,this.Io=Et();const r=this.Po(e.documents);return this.applyChanges(r,!0)}xo(){return Ro.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,this.Eo===0)}}class vM{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class yM{constructor(e){this.key=e,this.$o=!1}}class EM{constructor(e,r,n,i,s,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Oo={},this.Mo=new kl(l=>gx(l),df),this.Fo=new Map,this.Lo=new Set,this.Bo=new pr(je.comparator),this.Uo=new Map,this.qo=new vm,this.Ko={},this.jo=new Map,this.Qo=bo.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return this.Wo===!0}}async function TM(t,e){const r=kM(t);let n,i;const s=r.Mo.get(e);if(s)n=s.targetId,r.sharedClientState.addLocalQueryTarget(n),i=s.view.xo();else{const a=await NN(r.localStore,ds(e)),l=r.sharedClientState.addLocalQueryTarget(a.targetId);n=a.targetId,i=await wM(r,e,n,l==="current"),r.isPrimaryClient&&Zx(r.remoteStore,a)}return i}async function wM(t,e,r,n){t.Go=(h,E,m)=>async function(w,C,R,S){let x=C.view.Po(R);x.Bn&&(x=await qx(w.localStore,C.query,!1).then(({documents:k})=>C.view.Po(k,x)));const _=S&&S.targetChanges.get(C.targetId),D=C.view.applyChanges(x,w.isPrimaryClient,_);return p_(w,C.targetId,D.Co),D.snapshot}(t,h,E,m);const i=await qx(t.localStore,e,!0),s=new mM(e,i.zn),a=s.Po(i.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline"),d=s.applyChanges(a,t.isPrimaryClient,l);p_(t,r,d.Co);const u=new vM(e,r,s);return t.Mo.set(e,u),t.Fo.has(r)?t.Fo.get(r).push(e):t.Fo.set(r,[e]),d.snapshot}async function SM(t,e){const r=We(t),n=r.Mo.get(e),i=r.Fo.get(n.targetId);if(i.length>1)return r.Fo.set(n.targetId,i.filter(s=>!df(s,e))),void r.Mo.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await mm(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),e_(r.remoteStore,n.targetId),Am(r,n.targetId)}).catch(Cl)):(Am(r,n.targetId),await mm(r.localStore,n.targetId,!0))}async function xM(t,e,r){const n=LM(t);try{const i=await function(s,a){const l=We(s),d=Vr.now(),u=a.reduce((E,m)=>E.add(m.key),Et());let h;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>l.Wn.vn(E,u).next(m=>{h=m;const w=[];for(const C of a){const R=HP(C,h.get(C.key));R!=null&&w.push(new ps(C.key,R,ax(R.value.mapValue),hs.exists(!0)))}return l.An.addMutationBatch(E,d,w,a)})).then(E=>(E.applyToLocalDocumentSet(h),{batchId:E.batchId,changes:h}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let d=s.Ko[s.currentUser.toKey()];d||(d=new pr(ut)),d=d.insert(a,l),s.Ko[s.currentUser.toKey()]=d}(n,i.batchId,r),await Dl(n,i.changes),await Af(n.remoteStore)}catch(i){const s=_m(i,"Failed to persist write");r.reject(s)}}async function u_(t,e){const r=We(t);try{const n=await DN(r.localStore,e);e.targetChanges.forEach((i,s)=>{const a=r.Uo.get(s);a&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.$o=!0:i.modifiedDocuments.size>0?ht(a.$o):i.removedDocuments.size>0&&(ht(a.$o),a.$o=!1))}),await Dl(r,n,e)}catch(n){await Cl(n)}}function c_(t,e,r){const n=We(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Mo.forEach((s,a)=>{const l=a.view.ro(e);l.snapshot&&i.push(l.snapshot)}),function(s,a){const l=We(s);l.onlineState=a;let d=!1;l.queries.forEach((u,h)=>{for(const E of h.listeners)E.ro(a)&&(d=!0)}),d&&bm(l)}(n.eventManager,e),i.length&&n.Oo.br(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function _M(t,e,r){const n=We(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Uo.get(e),s=i&&i.key;if(s){let a=new pr(je.comparator);a=a.insert(s,hr.newNoDocument(s,at.min()));const l=Et().add(s),d=new Tf(at.min(),new Map,new sr(ut),a,l);await u_(n,d),n.Bo=n.Bo.remove(s),n.Uo.delete(e),Im(n)}else await mm(n.localStore,e,!1).then(()=>Am(n,e,r)).catch(Cl)}async function bM(t,e){const r=We(t),n=e.batch.batchId;try{const i=await LN(r.localStore,e);d_(r,n,null),f_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Dl(r,i)}catch(i){await Cl(i)}}async function AM(t,e,r){const n=We(t);try{const i=await function(s,a){const l=We(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return l.An.lookupMutationBatch(d,a).next(h=>(ht(h!==null),u=h.keys(),l.An.removeMutationBatch(d,h))).next(()=>l.An.performConsistencyCheck(d)).next(()=>l.Wn.vn(d,u))})}(n.localStore,e);d_(n,e,r),f_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Dl(n,i)}catch(i){await Cl(i)}}function f_(t,e){(t.jo.get(e)||[]).forEach(r=>{r.resolve()}),t.jo.delete(e)}function d_(t,e,r){const n=We(t);let i=n.Ko[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(r?s.reject(r):s.resolve(),i=i.remove(e)),n.Ko[n.currentUser.toKey()]=i}}function Am(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Fo.get(e))t.Mo.delete(n),r&&t.Oo.zo(n,r);t.Fo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach(n=>{t.qo.containsKey(n)||h_(t,n)})}function h_(t,e){t.Lo.delete(e.path.canonicalString());const r=t.Bo.get(e);r!==null&&(e_(t.remoteStore,r),t.Bo=t.Bo.remove(e),t.Uo.delete(r),Im(t))}function p_(t,e,r){for(const n of r)n instanceof a_?(t.qo.addReference(n.key,e),IM(t,n)):n instanceof l_?(ke("SyncEngine","Document no longer in limbo: "+n.key),t.qo.removeReference(n.key,e),t.qo.containsKey(n.key)||h_(t,n.key)):He()}function IM(t,e){const r=e.key,n=r.path.canonicalString();t.Bo.get(r)||t.Lo.has(n)||(ke("SyncEngine","New document in limbo: "+r),t.Lo.add(n),Im(t))}function Im(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const r=new je(St.fromString(e)),n=t.Qo.next();t.Uo.set(n,new yM(r)),t.Bo=t.Bo.insert(r,n),Zx(t.remoteStore,new ms(ds(sm(r.path)),n,2,Xg.I))}}async function Dl(t,e,r){const n=We(t),i=[],s=[],a=[];n.Mo.isEmpty()||(n.Mo.forEach((l,d)=>{a.push(n.Go(d,e,r).then(u=>{if(u){n.isPrimaryClient&&n.sharedClientState.updateQueryState(d.targetId,u.fromCache?"not-current":"current"),i.push(u);const h=gm.$n(d.targetId,u);s.push(h)}}))}),await Promise.all(a),n.Oo.br(i),await async function(l,d){const u=We(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ee.forEach(d,E=>Ee.forEach(E.kn,m=>u.persistence.referenceDelegate.addReference(h,E.targetId,m)).next(()=>Ee.forEach(E.xn,m=>u.persistence.referenceDelegate.removeReference(h,E.targetId,m)))))}catch(h){if(!Rl(h))throw h;ke("LocalStore","Failed to update sequence numbers: "+h)}for(const h of d){const E=h.targetId;if(!h.fromCache){const m=u.qn.get(E),w=m.snapshotVersion,C=m.withLastLimboFreeSnapshotVersion(w);u.qn=u.qn.insert(E,C)}}}(n.localStore,s))}async function RM(t,e){const r=We(t);if(!r.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const n=await Wx(r.localStore,e);r.currentUser=e,function(i,s){i.jo.forEach(a=>{a.forEach(l=>{l.reject(new Pe(fe.CANCELLED,s))})}),i.jo.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Dl(r,n.Gn)}}function CM(t,e){const r=We(t),n=r.Uo.get(e);if(n&&n.$o)return Et().add(n.key);{let i=Et();const s=r.Fo.get(e);if(!s)return i;for(const a of s){const l=r.Mo.get(a);i=i.unionWith(l.view.bo)}return i}}function kM(t){const e=We(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_M.bind(null,e),e.Oo.br=hM.bind(null,e.eventManager),e.Oo.zo=pM.bind(null,e.eventManager),e}function LM(t){const e=We(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AM.bind(null,e),e}class DM{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=xf(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return kN(this.persistence,new RN,e.initialUser,this.k)}Yo(e){return new VN(ym.ks,this.k)}Jo(e){return new GN}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OM{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>c_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=RM.bind(null,this.syncEngine),await lM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new cM}createDatastore(e){const r=xf(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new KN(i));var i;return function(s,a,l,d){return new XN(s,a,l,d)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return r=this.localStore,n=this.datastore,i=e.asyncQueue,s=l=>c_(this.syncEngine,l,0),a=Xx.Pt()?new Xx:new zN,new JN(r,n,i,s,a);var r,n,i,s,a}createSyncEngine(e,r){return function(n,i,s,a,l,d,u){const h=new EM(n,i,s,a,l,d);return u&&(h.Wo=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return async function(e){const r=We(e);ke("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),await Ll(r),r.Hr.shutdown(),r.Jr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=kr.UNAUTHENTICATED,this.clientId=ZS.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{ke("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,()=>Promise.resolve())}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=_m(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function MM(t,e){t.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const r=await t.getConfiguration();await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Wx(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function FM(t,e){t.asyncQueue.verifyOperationInProgress();const r=await UM(t);ke("FirestoreClient","Initializing OnlineComponentProvider");const n=await t.getConfiguration();await e.initialize(r,n),t.setCredentialChangeListener(i=>async function(s,a){const l=We(s);l.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const d=vs(l);l.Gr.add(3),await Ll(l),d&&l.Jr.set("Unknown"),await l.remoteSyncer.handleCredentialChange(a),l.Gr.delete(3),await _f(l)}(e.remoteStore,i)),t.onlineComponents=e}async function UM(t){return t.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),await MM(t,new DM)),t.offlineComponents}async function g_(t){return t.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),await FM(t,new OM)),t.onlineComponents}function BM(t){return g_(t).then(e=>e.syncEngine)}async function m_(t){const e=await g_(t),r=e.eventManager;return r.onListen=TM.bind(null,e.syncEngine),r.onUnlisten=SM.bind(null,e.syncEngine),r}class $M{constructor(e,r,n,i,s,a,l,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.useFetchStreams=d}}class Ol{constructor(e,r){this.projectId=e,this.database=r||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e,r){if(!r)throw new Pe(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VM(t,e,r,n){if(e===!0&&n===!0)throw new Pe(fe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function E_(t){if(!je.isDocumentKey(t))throw new Pe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T_(t){if(je.isDocumentKey(t))throw new Pe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He()}function Co(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Rm(t);throw new Pe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function jM(t,e){if(e<=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,VM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,r,n){this._authCredentials=r,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w_({}),this._settingsFrozen=!1,e instanceof Ol?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Pe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pP;switch(r.type){case"gapi":const n=r.client;return ht(!(typeof n!="object"||n===null||!n.auth||!n.auth.getAuthHeaderValueForFirstParty)),new vP(n,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Pe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=v_.get(e);r&&(ke("ComponentProvider","Removing Datastore"),v_.delete(e),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gr(this.firestore,e,this._key)}}class ko{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class _i extends ko{constructor(e,r,n){super(e,r,sm(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gr(this.firestore,null,new je(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function z2(t,e,...r){if(t=Tr(t),y_("collection","path",e),t instanceof Cm){const n=St.fromString(e,...r);return T_(n),new _i(t,null,n)}{if(!(t instanceof Gr||t instanceof _i))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(St.fromString(e,...r));return T_(n),new _i(t.firestore,null,n)}}function GM(t,e,...r){if(t=Tr(t),arguments.length===1&&(e=ZS.A()),y_("doc","path",e),t instanceof Cm){const n=St.fromString(e,...r);return E_(n),new Gr(t,null,new je(n))}{if(!(t instanceof Gr||t instanceof _i))throw new Pe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(St.fromString(e,...r));return E_(n),new Gr(t.firestore,t instanceof _i?t.converter:null,new je(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new Qx(this,"async_queue_retry"),this.bc=()=>{const r=Em();r&&ke("AsyncQueue","Visibility state changed to "+r.visibilityState),this.ur.er()};const e=Em();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const r=Em();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const r=new us;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}async Vc(){if(this.gc.length!==0){try{await this.gc[0](),this.gc.shift(),this.ur.reset()}catch(e){if(!Rl(e))throw e;ke("AsyncQueue","Operation failed with retryable error: "+e)}this.gc.length>0&&this.ur.Zi(()=>this.Vc())}}vc(e){const r=this.mc.then(()=>(this.Ic=!0,e().catch(n=>{this.Ec=n,this.Ic=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(n);throw wi("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Ic=!1,n))));return this.mc=r,r}enqueueAfterDelay(e,r,n){this.Pc(),this.Rc.indexOf(e)>-1&&(r=0);const i=xm.createAndSchedule(this,e,r,n,s=>this.Sc(s));return this.Tc.push(i),i}Pc(){this.Ec&&He()}verifyOperationInProgress(){}async Dc(){let e;do e=this.mc,await e;while(e!==this.mc)}Cc(e){for(const r of this.Tc)if(r.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const r=this.Tc.indexOf(e);this.Tc.splice(r,1)}}function S_(t){return function(e,r){if(typeof e!="object"||e===null)return!1;const n=e;for(const i of r)if(i in n&&typeof n[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Pl extends Cm{constructor(e,r,n){super(e,r,n),this.type="firestore",this._queue=new zM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||__(this),this._firestoreClient.terminate()}}function H2(t=zT()){return jp(t,"firestore").getImmediate()}function x_(t){return t._firestoreClient||__(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function __(t){var e;const r=t._freezeSettings(),n=function(i,s,a,l){return new $M(i,s,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new NM(t._authCredentials,t._appCheckCredentials,t._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Pe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(nr.fromBase64String(e))}catch(r){throw new Pe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Lo(nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Pe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Pe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^__.*__$/;class WM{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,r,this.fieldTransforms):new yf(e,this.data,r,this.fieldTransforms)}}class b_{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new ps(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function A_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class Lm{constructor(e,r,n,i,s,a){this.settings=e,this.databaseId=r,this.k=n,this.ignoreUndefinedProperties=i,s===void 0&&this.xc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Oc({path:n,Fc:!1});return i.Lc(e),i}Bc(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Oc({path:n,Fc:!1});return i.xc(),i}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return Lf(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(e.length===0)throw this.qc("Document fields must not be empty");if(A_(this.$c)&&HM.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class KM{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.k=n||xf(e)}Qc(e,r,n,i=!1){return new Lm({$c:e,methodName:r,jc:n,path:Lr.emptyPath(),Fc:!1,Kc:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function I_(t){const e=t._freezeSettings(),r=xf(t._databaseId);return new KM(t._databaseId,!!e.ignoreUndefinedProperties,r)}function qM(t,e,r,n,i,s={}){const a=t.Qc(s.merge||s.mergeFields?2:0,e,r,i);Om("Data must be an object, but it was:",a,n);const l=R_(n,a);let d,u;if(s.merge)d=new yl(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const E of s.mergeFields){const m=Pm(e,E,r);if(!a.contains(m))throw new Pe(fe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);k_(h,m)||h.push(m)}d=new yl(h),u=a.fieldTransforms.filter(E=>d.covers(E.field))}else d=null,u=a.fieldTransforms;return new WM(new jr(l),d,u)}class Cf extends Rf{_toFieldTransform(e){if(e.$c!==2)throw e.$c===1?e.qc(`${this._methodName}() can only appear at the top level of your update data`):e.qc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cf}}class Dm extends Rf{_toFieldTransform(e){return new VP(e.path,new _l)}isEqual(e){return e instanceof Dm}}function YM(t,e,r,n){const i=t.Qc(1,e,r);Om("Data must be an object, but it was:",i,n);const s=[],a=jr.empty();cs(n,(d,u)=>{const h=Nm(e,d,r);u=Tr(u);const E=i.Bc(h);if(u instanceof Cf)s.push(h);else{const m=kf(u,E);m!=null&&(s.push(h),a.set(h,m))}});const l=new yl(s);return new b_(a,l,i.fieldTransforms)}function XM(t,e,r,n,i,s){const a=t.Qc(1,e,r),l=[Pm(e,n,r)],d=[i];if(s.length%2!=0)throw new Pe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Pm(e,s[m])),d.push(s[m+1]);const u=[],h=jr.empty();for(let m=l.length-1;m>=0;--m)if(!k_(u,l[m])){const w=l[m];let C=d[m];C=Tr(C);const R=a.Bc(w);if(C instanceof Cf)u.push(w);else{const S=kf(C,R);S!=null&&(u.push(w),h.set(w,S))}}const E=new yl(u);return new b_(h,E,a.fieldTransforms)}function kf(t,e){if(C_(t=Tr(t)))return Om("Unsupported field value:",e,t),R_(t,e);if(t instanceof Rf)return function(r,n){if(!A_(n.$c))throw n.qc(`${r._methodName}() can only be used with update() and set()`);if(!n.path)throw n.qc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.$c!==4)throw e.qc("Nested arrays are not supported");return function(r,n){const i=[];let s=0;for(const a of r){let l=kf(a,n.Uc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,n){if((r=Tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UP(n.k,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Vr.fromDate(r);return{timestampValue:Sf(n.k,i)}}if(r instanceof Vr){const i=new Vr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sf(n.k,i)}}if(r instanceof km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lo)return{bytesValue:Fx(n.k,r._byteString)};if(r instanceof Gr){const i=n.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw n.qc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:um(r.firestore._databaseId||n.databaseId,r._key.path)}}throw n.qc(`Unsupported field value: ${Rm(r)}`)}(t,e)}function R_(t,e){const r={};return tx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(t,(n,i)=>{const s=kf(i,e.Mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function C_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vr||t instanceof km||t instanceof Lo||t instanceof Gr||t instanceof Rf)}function Om(t,e,r){if(!C_(r)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(r)){const n=Rm(r);throw n==="an object"?e.qc(t+" a custom object"):e.qc(t+" "+n)}}function Pm(t,e,r){if((e=Tr(e))instanceof If)return e._internalPath;if(typeof e=="string")return Nm(t,e);throw Lf("Field path arguments must be of type string or ",t,!1,void 0,r)}const QM=new RegExp("[~\\*/\\[\\]]");function Nm(t,e,r){if(e.search(QM)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new If(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Lf(t,e,r,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(s||a)&&(d+=" (found",s&&(d+=` in field ${n}`),a&&(d+=` in document ${i}`),d+=")"),new Pe(fe.INVALID_ARGUMENT,l+t+d)}function k_(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,r,n,i,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Mm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class JM extends L_{data(){return super.data()}}function Mm(t,e){return typeof e=="string"?Nm(t,e):e instanceof If?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D_ extends L_{constructor(e,r,n,i,s,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Mm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Df extends D_{data(e={}){return super.data(e)}}class ZM{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Nl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Df(this._firestore,this._userDataWriter,n.key,n,new Nl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Pe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let s=0;return n._snapshot.docChanges.map(a=>({type:"added",doc:new Df(n._firestore,n._userDataWriter,a.doc.key,a.doc,new Nl(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter),oldIndex:-1,newIndex:s++}))}{let s=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Df(n._firestore,n._userDataWriter,a.doc.key,a.doc,new Nl(n._snapshot.mutatedKeys.has(a.doc.key),n._snapshot.fromCache),n.query.converter);let d=-1,u=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:eF(a.type),doc:l,oldIndex:d,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function eF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){if(ff(t)&&t.explicitOrderBy.length===0)throw new Pe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}function W2(t,...e){for(const r of e)t=r._apply(t);return t}class rF extends O_{constructor(e,r){super(),this.zc=e,this.Yc=r,this.type="orderBy"}_apply(e){const r=function(n,i,s){if(n.startAt!==null)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(n.endAt!==null)throw new Pe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new So(i,s);return function(l,d){if(dx(l)===null){const u=hx(l);u!==null&&iF(l,u,d.field)}}(n,a),a}(e._query,this.zc,this.Yc);return new ko(e.firestore,e.converter,function(n,i){const s=n.explicitOrderBy.concat([i]);return new Sl(n.path,n.collectionGroup,s,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}(e._query,r))}}function K2(t,e="asc"){const r=e,n=Mm("orderBy",t);return new rF(n,r)}class nF extends O_{constructor(e,r,n){super(),this.type=e,this.Xc=r,this.Zc=n}_apply(e){return new ko(e.firestore,e.converter,px(e._query,this.Xc,this.Zc))}}function q2(t){return jM("limit",t),new nF("limit",t,"F")}function iF(t,e,r){if(!r.isEqual(e))throw new Pe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{convertValue(e,r="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw He()}}convertObject(e,r){const n={};return cs(e.fields,(i,s)=>{n[i]=this.convertValue(s,r)}),n}convertGeoPoint(e){return new km(Ot(e.latitude),Ot(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=nx(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const r=Si(e);return new Vr(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=St.fromString(e);ht(zx(n));const i=new Ol(n.get(1),n.get(3)),s=new je(n.popFirst(5));return i.isEqual(r)||wi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class P_ extends sF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gr(this.firestore,null,r)}}function Y2(t,e,r,...n){t=Co(t,Gr);const i=Co(t.firestore,Pl),s=I_(i);let a;return a=typeof(e=Tr(e))=="string"||e instanceof If?XM(s,"updateDoc",t._key,e,r,n):YM(s,"updateDoc",t._key,e),N_(i,[a.toMutation(t._key,hs.exists(!0))])}function X2(t,e){const r=Co(t.firestore,Pl),n=GM(t),i=oF(t.converter,e);return N_(r,[qM(I_(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,hs.exists(!1))]).then(()=>n)}function Q2(t,...e){var r,n,i;t=Tr(t);let s={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||S_(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges};if(S_(e[a])){const E=e[a];e[a]=(r=E.next)===null||r===void 0?void 0:r.bind(E),e[a+1]=(n=E.error)===null||n===void 0?void 0:n.bind(E),e[a+2]=(i=E.complete)===null||i===void 0?void 0:i.bind(E)}let d,u,h;if(t instanceof Gr)u=Co(t.firestore,Pl),h=sm(t._key.path),d={next:E=>{e[a]&&e[a](aF(u,t,E))},error:e[a+1],complete:e[a+2]};else{const E=Co(t,ko);u=Co(E.firestore,Pl),h=E._query;const m=new P_(u);d={next:w=>{e[a]&&e[a](new ZM(u,m,E,w))},error:e[a+1],complete:e[a+2]},tF(t._query)}return function(E,m,w,C){const R=new PM(C),S=new gM(m,R,w);return E.asyncQueue.enqueueAndForget(async()=>fM(await m_(E),S)),()=>{R.nc(),E.asyncQueue.enqueueAndForget(async()=>dM(await m_(E),S))}}(x_(u),h,l,d)}function N_(t,e){return function(r,n){const i=new us;return r.asyncQueue.enqueueAndForget(async()=>xM(await BM(r),n,i)),i.promise}(x_(t),e)}function aF(t,e,r){const n=r.docs.get(e._key),i=new P_(t);return new D_(t,i,e._key,n,new Nl(r.hasPendingWrites,r.fromCache),e.converter)}function J2(){return new Dm("serverTimestamp")}(function(t,e=!0){(function(r){vo=r})(Wa),Ha(new ao("firestore",(r,{options:n})=>{const i=r.getProvider("app").getImmediate(),s=new Pl(i,new gP(r.getProvider("auth-internal")),new EP(r.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),s._setSettings(n),s},"PUBLIC")),hi(XS,"3.4.3",t),hi(XS,"3.4.3","esm2017")})();var lF="firebase",uF="9.6.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hi(lF,uF,"app");function cF(t){let e;const r=new Set,n=(u,h)=>{const E=typeof u=="function"?u(e):u;if(E!==e){const m=e;e=h?E:Object.assign({},e,E),r.forEach(w=>w(e,m))}},i=()=>e,s=(u,h=i,E=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function w(){const C=h(e);if(!E(m,C)){const R=m;u(m=C,R)}}return r.add(w),()=>r.delete(w)},d={setState:n,getState:i,subscribe:(u,h,E)=>h||E?s(u,h,E):(r.add(u),()=>r.delete(u)),destroy:()=>r.clear()};return e=t(n,i,d),d}const fF=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),M_=fF?ae.exports.useEffect:ae.exports.useLayoutEffect;function Z2(t){const e=typeof t=="function"?cF(t):t,r=(n=e.getState,i=Object.is)=>{const[,s]=ae.exports.useReducer(S=>S+1,0),a=e.getState(),l=ae.exports.useRef(a),d=ae.exports.useRef(n),u=ae.exports.useRef(i),h=ae.exports.useRef(!1),E=ae.exports.useRef();E.current===void 0&&(E.current=n(a));let m,w=!1;(l.current!==a||d.current!==n||u.current!==i||h.current)&&(m=n(a),w=!i(E.current,m)),M_(()=>{w&&(E.current=m),l.current=a,d.current=n,u.current=i,h.current=!1});const C=ae.exports.useRef(a);M_(()=>{const S=()=>{try{const _=e.getState(),D=d.current(_);u.current(E.current,D)||(l.current=_,E.current=D,s())}catch{h.current=!0,s()}},x=e.subscribe(S);return e.getState()!==C.current&&S(),x},[]);const R=w?m:E.current;return ae.exports.useDebugValue(R),R};return Object.assign(r,e),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[r,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},r}function F_(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Fm(t={},e={}){Object.keys(e).forEach(r=>{typeof t[r]=="undefined"?t[r]=e[r]:F_(e[r])&&F_(t[r])&&Object.keys(e[r]).length>0&&Fm(t[r],e[r])})}const U_={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Or(){const t=typeof document!="undefined"?document:{};return Fm(t,U_),t}const dF={document:U_,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout=="undefined"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout!="undefined"&&clearTimeout(t)}};function Wt(){const t=typeof window!="undefined"?window:{};return Fm(t,dF),t}function hF(t){const e=t.__proto__;Object.defineProperty(t,"__proto__",{get(){return e},set(r){e.__proto__=r}})}class bi extends Array{constructor(e){if(typeof e=="number")super(e);else{super(...e||[]);hF(this)}}}function Ml(t=[]){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Ml(r)):e.push(r)}),e}function B_(t,e){return Array.prototype.filter.call(t,e)}function pF(t){const e=[];for(let r=0;r<t.length;r+=1)e.indexOf(t[r])===-1&&e.push(t[r]);return e}function gF(t,e){if(typeof t!="string")return[t];const r=[],n=e.querySelectorAll(t);for(let i=0;i<n.length;i+=1)r.push(n[i]);return r}function Ie(t,e){const r=Wt(),n=Or();let i=[];if(!e&&t instanceof bi)return t;if(!t)return new bi(i);if(typeof t=="string"){const s=t.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){let a="div";s.indexOf("<li")===0&&(a="ul"),s.indexOf("<tr")===0&&(a="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(a="tr"),s.indexOf("<tbody")===0&&(a="table"),s.indexOf("<option")===0&&(a="select");const l=n.createElement(a);l.innerHTML=s;for(let d=0;d<l.childNodes.length;d+=1)i.push(l.childNodes[d])}else i=gF(t.trim(),e||n)}else if(t.nodeType||t===r||t===n)i.push(t);else if(Array.isArray(t)){if(t instanceof bi)return t;i=t}return new bi(pF(i))}Ie.fn=bi.prototype;function mF(...t){const e=Ml(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...e)}),this}function vF(...t){const e=Ml(t.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...e)}),this}function yF(...t){const e=Ml(t.map(r=>r.split(" ")));this.forEach(r=>{e.forEach(n=>{r.classList.toggle(n)})})}function EF(...t){const e=Ml(t.map(r=>r.split(" ")));return B_(this,r=>e.filter(n=>r.classList.contains(n)).length>0).length>0}function TF(t,e){if(arguments.length===1&&typeof t=="string")return this[0]?this[0].getAttribute(t):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(t,e);else for(const n in t)this[r][n]=t[n],this[r].setAttribute(n,t[n]);return this}function wF(t){for(let e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this}function SF(t){for(let e=0;e<this.length;e+=1)this[e].style.transform=t;return this}function xF(t){for(let e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof t!="string"?`${t}ms`:t;return this}function _F(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);function s(u){const h=u.target;if(!h)return;const E=u.target.dom7EventData||[];if(E.indexOf(u)<0&&E.unshift(u),Ie(h).is(r))n.apply(h,E);else{const m=Ie(h).parents();for(let w=0;w<m.length;w+=1)Ie(m[w]).is(r)&&n.apply(m[w],E)}}function a(u){const h=u&&u.target?u.target.dom7EventData||[]:[];h.indexOf(u)<0&&h.unshift(u),n.apply(this,h)}const l=e.split(" ");let d;for(let u=0;u<this.length;u+=1){const h=this[u];if(r)for(d=0;d<l.length;d+=1){const E=l[d];h.dom7LiveListeners||(h.dom7LiveListeners={}),h.dom7LiveListeners[E]||(h.dom7LiveListeners[E]=[]),h.dom7LiveListeners[E].push({listener:n,proxyListener:s}),h.addEventListener(E,s,i)}else for(d=0;d<l.length;d+=1){const E=l[d];h.dom7Listeners||(h.dom7Listeners={}),h.dom7Listeners[E]||(h.dom7Listeners[E]=[]),h.dom7Listeners[E].push({listener:n,proxyListener:a}),h.addEventListener(E,a,i)}}return this}function bF(...t){let[e,r,n,i]=t;typeof t[1]=="function"&&([e,n,i]=t,r=void 0),i||(i=!1);const s=e.split(" ");for(let a=0;a<s.length;a+=1){const l=s[a];for(let d=0;d<this.length;d+=1){const u=this[d];let h;if(!r&&u.dom7Listeners?h=u.dom7Listeners[l]:r&&u.dom7LiveListeners&&(h=u.dom7LiveListeners[l]),h&&h.length)for(let E=h.length-1;E>=0;E-=1){const m=h[E];n&&m.listener===n||n&&m.listener&&m.listener.dom7proxy&&m.listener.dom7proxy===n?(u.removeEventListener(l,m.proxyListener,i),h.splice(E,1)):n||(u.removeEventListener(l,m.proxyListener,i),h.splice(E,1))}}}return this}function AF(...t){const e=Wt(),r=t[0].split(" "),n=t[1];for(let i=0;i<r.length;i+=1){const s=r[i];for(let a=0;a<this.length;a+=1){const l=this[a];if(e.CustomEvent){const d=new e.CustomEvent(s,{detail:n,bubbles:!0,cancelable:!0});l.dom7EventData=t.filter((u,h)=>h>0),l.dispatchEvent(d),l.dom7EventData=[],delete l.dom7EventData}}}return this}function IF(t){const e=this;function r(n){n.target===this&&(t.call(this,n),e.off("transitionend",r))}return t&&e.on("transitionend",r),this}function RF(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function CF(t){if(this.length>0){if(t){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function kF(){if(this.length>0){const t=Wt(),e=Or(),r=this[0],n=r.getBoundingClientRect(),i=e.body,s=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,l=r===t?t.scrollY:r.scrollTop,d=r===t?t.scrollX:r.scrollLeft;return{top:n.top+l-s,left:n.left+d-a}}return null}function LF(){const t=Wt();return this[0]?t.getComputedStyle(this[0],null):{}}function DF(t,e){const r=Wt();let n;if(arguments.length===1)if(typeof t=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(t)}else{for(n=0;n<this.length;n+=1)for(const i in t)this[n].style[i]=t[i];return this}if(arguments.length===2&&typeof t=="string"){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this}function OF(t){return t?(this.forEach((e,r)=>{t.apply(e,[e,r])}),this):this}function PF(t){const e=B_(this,t);return Ie(e)}function NF(t){if(typeof t=="undefined")return this[0]?this[0].innerHTML:null;for(let e=0;e<this.length;e+=1)this[e].innerHTML=t;return this}function MF(t){if(typeof t=="undefined")return this[0]?this[0].textContent.trim():null;for(let e=0;e<this.length;e+=1)this[e].textContent=t;return this}function FF(t){const e=Wt(),r=Or(),n=this[0];let i,s;if(!n||typeof t=="undefined")return!1;if(typeof t=="string"){if(n.matches)return n.matches(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);for(i=Ie(t),s=0;s<i.length;s+=1)if(i[s]===n)return!0;return!1}if(t===r)return n===r;if(t===e)return n===e;if(t.nodeType||t instanceof bi){for(i=t.nodeType?[t]:t,s=0;s<i.length;s+=1)if(i[s]===n)return!0;return!1}return!1}function UF(){let t=this[0],e;if(t){for(e=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(e+=1);return e}}function BF(t){if(typeof t=="undefined")return this;const e=this.length;if(t>e-1)return Ie([]);if(t<0){const r=e+t;return r<0?Ie([]):Ie([this[r]])}return Ie([this[t]])}function $F(...t){let e;const r=Or();for(let n=0;n<t.length;n+=1){e=t[n];for(let i=0;i<this.length;i+=1)if(typeof e=="string"){const s=r.createElement("div");for(s.innerHTML=e;s.firstChild;)this[i].appendChild(s.firstChild)}else if(e instanceof bi)for(let s=0;s<e.length;s+=1)this[i].appendChild(e[s]);else this[i].appendChild(e)}return this}function VF(t){const e=Or();let r,n;for(r=0;r<this.length;r+=1)if(typeof t=="string"){const i=e.createElement("div");for(i.innerHTML=t,n=i.childNodes.length-1;n>=0;n-=1)this[r].insertBefore(i.childNodes[n],this[r].childNodes[0])}else if(t instanceof bi)for(n=0;n<t.length;n+=1)this[r].insertBefore(t[n],this[r].childNodes[0]);else this[r].insertBefore(t,this[r].childNodes[0]);return this}function jF(t){return this.length>0?t?this[0].nextElementSibling&&Ie(this[0].nextElementSibling).is(t)?Ie([this[0].nextElementSibling]):Ie([]):this[0].nextElementSibling?Ie([this[0].nextElementSibling]):Ie([]):Ie([])}function GF(t){const e=[];let r=this[0];if(!r)return Ie([]);for(;r.nextElementSibling;){const n=r.nextElementSibling;t?Ie(n).is(t)&&e.push(n):e.push(n),r=n}return Ie(e)}function zF(t){if(this.length>0){const e=this[0];return t?e.previousElementSibling&&Ie(e.previousElementSibling).is(t)?Ie([e.previousElementSibling]):Ie([]):e.previousElementSibling?Ie([e.previousElementSibling]):Ie([])}return Ie([])}function HF(t){const e=[];let r=this[0];if(!r)return Ie([]);for(;r.previousElementSibling;){const n=r.previousElementSibling;t?Ie(n).is(t)&&e.push(n):e.push(n),r=n}return Ie(e)}function WF(t){const e=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(t?Ie(this[r].parentNode).is(t)&&e.push(this[r].parentNode):e.push(this[r].parentNode));return Ie(e)}function KF(t){const e=[];for(let r=0;r<this.length;r+=1){let n=this[r].parentNode;for(;n;)t?Ie(n).is(t)&&e.push(n):e.push(n),n=n.parentNode}return Ie(e)}function qF(t){let e=this;return typeof t=="undefined"?Ie([]):(e.is(t)||(e=e.parents(t).eq(0)),e)}function YF(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].querySelectorAll(t);for(let i=0;i<n.length;i+=1)e.push(n[i])}return Ie(e)}function XF(t){const e=[];for(let r=0;r<this.length;r+=1){const n=this[r].children;for(let i=0;i<n.length;i+=1)(!t||Ie(n[i]).is(t))&&e.push(n[i])}return Ie(e)}function QF(){for(let t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this}const $_={addClass:mF,removeClass:vF,hasClass:EF,toggleClass:yF,attr:TF,removeAttr:wF,transform:SF,transition:xF,on:_F,off:bF,trigger:AF,transitionEnd:IF,outerWidth:RF,outerHeight:CF,styles:LF,offset:kF,css:DF,each:OF,html:NF,text:MF,is:FF,index:UF,eq:BF,append:$F,prepend:VF,next:jF,nextAll:GF,prev:zF,prevAll:HF,parent:WF,parents:KF,closest:qF,find:YF,children:XF,filter:PF,remove:QF};Object.keys($_).forEach(t=>{Object.defineProperty(Ie.fn,t,{value:$_[t],writable:!0})});function JF(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function Um(t,e=0){return setTimeout(t,e)}function Fl(){return Date.now()}function ZF(t){const e=Wt();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function eU(t,e="x"){const r=Wt();let n,i,s;const a=ZF(t);return r.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(l=>l.replace(",",".")).join(", ")),s=new r.WebKitCSSMatrix(i==="none"?"":i)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?i=s.m41:n.length===16?i=parseFloat(n[12]):i=parseFloat(n[4])),e==="y"&&(r.WebKitCSSMatrix?i=s.m42:n.length===16?i=parseFloat(n[13]):i=parseFloat(n[5])),i||0}function Of(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function tU(t){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function zr(...t){const e=Object(t[0]),r=["__proto__","constructor","prototype"];for(let n=1;n<t.length;n+=1){const i=t[n];if(i!=null&&!tU(i)){const s=Object.keys(Object(i)).filter(a=>r.indexOf(a)<0);for(let a=0,l=s.length;a<l;a+=1){const d=s[a],u=Object.getOwnPropertyDescriptor(i,d);u!==void 0&&u.enumerable&&(Of(e[d])&&Of(i[d])?i[d].__swiper__?e[d]=i[d]:zr(e[d],i[d]):!Of(e[d])&&Of(i[d])?(e[d]={},i[d].__swiper__?e[d]=i[d]:zr(e[d],i[d])):e[d]=i[d])}}}return e}function Pf(t,e,r){t.style.setProperty(e,r)}function V_({swiper:t,targetPosition:e,side:r}){const n=Wt(),i=-t.translate;let s=null,a;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const d=e>i?"next":"prev",u=(E,m)=>d==="next"&&E>=m||d==="prev"&&E<=m,h=()=>{a=new Date().getTime(),s===null&&(s=a);const E=Math.max(Math.min((a-s)/l,1),0),m=.5-Math.cos(E*Math.PI)/2;let w=i+m*(e-i);if(u(w,e)&&(w=e),t.wrapperEl.scrollTo({[r]:w}),u(w,e)){t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[r]:w})}),n.cancelAnimationFrame(t.cssModeFrameID);return}t.cssModeFrameID=n.requestAnimationFrame(h)};h()}let Bm;function rU(){const t=Wt(),e=Or();return{smoothScroll:e.documentElement&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),passiveListener:function(){let n=!1;try{const i=Object.defineProperty({},"passive",{get(){n=!0}});t.addEventListener("testPassiveListener",null,i)}catch{}return n}(),gestures:function(){return"ongesturestart"in t}()}}function j_(){return Bm||(Bm=rU()),Bm}let $m;function nU({userAgent:t}={}){const e=j_(),r=Wt(),n=r.navigator.platform,i=t||r.navigator.userAgent,s={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,d=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const h=i.match(/(iPod)(.*OS\s([\d_]+))?/),E=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),m=n==="Win32";let w=n==="MacIntel";const C=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&w&&e.touch&&C.indexOf(`${a}x${l}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),w=!1),d&&!m&&(s.os="android",s.android=!0),(u||E||h)&&(s.os="ios",s.ios=!0),s}function iU(t={}){return $m||($m=nU(t)),$m}let Vm;function sU(){const t=Wt();function e(){const r=t.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function oU(){return Vm||(Vm=sU()),Vm}function aU({swiper:t,on:e,emit:r}){const n=Wt();let i=null;const s=()=>{!t||t.destroyed||!t.initialized||(r("beforeResize"),r("resize"))},a=()=>{!t||t.destroyed||!t.initialized||(i=new ResizeObserver(u=>{const{width:h,height:E}=t;let m=h,w=E;u.forEach(({contentBoxSize:C,contentRect:R,target:S})=>{S&&S!==t.el||(m=R?R.width:(C[0]||C).inlineSize,w=R?R.height:(C[0]||C).blockSize)}),(m!==h||w!==E)&&s()}),i.observe(t.el))},l=()=>{i&&i.unobserve&&t.el&&(i.unobserve(t.el),i=null)},d=()=>{!t||t.destroyed||!t.initialized||r("orientationchange")};e("init",()=>{if(t.params.resizeObserver&&typeof n.ResizeObserver!="undefined"){a();return}n.addEventListener("resize",s),n.addEventListener("orientationchange",d)}),e("destroy",()=>{l(),n.removeEventListener("resize",s),n.removeEventListener("orientationchange",d)})}function lU({swiper:t,extendParams:e,on:r,emit:n}){const i=[],s=Wt(),a=(u,h={})=>{const E=s.MutationObserver||s.WebkitMutationObserver,m=new E(w=>{if(w.length===1){n("observerUpdate",w[0]);return}const C=function(){n("observerUpdate",w[0])};s.requestAnimationFrame?s.requestAnimationFrame(C):s.setTimeout(C,0)});m.observe(u,{attributes:typeof h.attributes=="undefined"?!0:h.attributes,childList:typeof h.childList=="undefined"?!0:h.childList,characterData:typeof h.characterData=="undefined"?!0:h.characterData}),i.push(m)},l=()=>{if(!!t.params.observer){if(t.params.observeParents){const u=t.$el.parents();for(let h=0;h<u.length;h+=1)a(u[h])}a(t.$el[0],{childList:t.params.observeSlideChildren}),a(t.$wrapperEl[0],{attributes:!1})}},d=()=>{i.forEach(u=>{u.disconnect()}),i.splice(0,i.length)};e({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",d)}var uU={on(t,e,r){const n=this;if(typeof e!="function")return n;const i=r?"unshift":"push";return t.split(" ").forEach(s=>{n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][i](e)}),n},once(t,e,r){const n=this;if(typeof e!="function")return n;function i(...s){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy,e.apply(n,s)}return i.__emitterProxy=e,n.on(t,i,r)},onAny(t,e){const r=this;if(typeof t!="function")return r;const n=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[n](t),r},offAny(t){const e=this;if(!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return r.eventsListeners&&t.split(" ").forEach(n=>{typeof e=="undefined"?r.eventsListeners[n]=[]:r.eventsListeners[n]&&r.eventsListeners[n].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[n].splice(s,1)})}),r},emit(...t){const e=this;if(!e.eventsListeners)return e;let r,n,i;return typeof t[0]=="string"||Array.isArray(t[0])?(r=t[0],n=t.slice(1,t.length),i=e):(r=t[0].events,n=t[0].data,i=t[0].context||e),n.unshift(i),(Array.isArray(r)?r:r.split(" ")).forEach(a=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(l=>{l.apply(i,[a,...n])}),e.eventsListeners&&e.eventsListeners[a]&&e.eventsListeners[a].forEach(l=>{l.apply(i,n)})}),e}};function cU(){const t=this;let e,r;const n=t.$el;typeof t.params.width!="undefined"&&t.params.width!==null?e=t.params.width:e=n[0].clientWidth,typeof t.params.height!="undefined"&&t.params.height!==null?r=t.params.height:r=n[0].clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(n.css("padding-left")||0,10)-parseInt(n.css("padding-right")||0,10),r=r-parseInt(n.css("padding-top")||0,10)-parseInt(n.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function fU(){const t=this;function e(Y){return t.isHorizontal()?Y:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Y]}function r(Y,re){return parseFloat(Y.getPropertyValue(e(re))||0)}const n=t.params,{$wrapperEl:i,size:s,rtlTranslate:a,wrongRTL:l}=t,d=t.virtual&&n.virtual.enabled,u=d?t.virtual.slides.length:t.slides.length,h=i.children(`.${t.params.slideClass}`),E=d?t.virtual.slides.length:h.length;let m=[];const w=[],C=[];let R=n.slidesOffsetBefore;typeof R=="function"&&(R=n.slidesOffsetBefore.call(t));let S=n.slidesOffsetAfter;typeof S=="function"&&(S=n.slidesOffsetAfter.call(t));const x=t.snapGrid.length,_=t.slidesGrid.length;let D=n.spaceBetween,k=-R,M=0,B=0;if(typeof s=="undefined")return;typeof D=="string"&&D.indexOf("%")>=0&&(D=parseFloat(D.replace("%",""))/100*s),t.virtualSize=-D,a?h.css({marginLeft:"",marginBottom:"",marginTop:""}):h.css({marginRight:"",marginBottom:"",marginTop:""}),n.centeredSlides&&n.cssMode&&(Pf(t.wrapperEl,"--swiper-centered-offset-before",""),Pf(t.wrapperEl,"--swiper-centered-offset-after",""));const z=n.grid&&n.grid.rows>1&&t.grid;z&&t.grid.initSlides(E);let q;const H=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(Y=>typeof n.breakpoints[Y].slidesPerView!="undefined").length>0;for(let Y=0;Y<E;Y+=1){q=0;const re=h.eq(Y);if(z&&t.grid.updateSlide(Y,re,E,e),re.css("display")!=="none"){if(n.slidesPerView==="auto"){H&&(h[Y].style[e("width")]="");const se=getComputedStyle(re[0]),he=re[0].style.transform,Te=re[0].style.webkitTransform;if(he&&(re[0].style.transform="none"),Te&&(re[0].style.webkitTransform="none"),n.roundLengths)q=t.isHorizontal()?re.outerWidth(!0):re.outerHeight(!0);else{const Le=r(se,"width"),De=r(se,"padding-left"),Fe=r(se,"padding-right"),Ke=r(se,"margin-left"),Ae=r(se,"margin-right"),Ge=se.getPropertyValue("box-sizing");if(Ge&&Ge==="border-box")q=Le+Ke+Ae;else{const{clientWidth:ee,offsetWidth:oe}=re[0];q=Le+De+Fe+Ke+Ae+(oe-ee)}}he&&(re[0].style.transform=he),Te&&(re[0].style.webkitTransform=Te),n.roundLengths&&(q=Math.floor(q))}else q=(s-(n.slidesPerView-1)*D)/n.slidesPerView,n.roundLengths&&(q=Math.floor(q)),h[Y]&&(h[Y].style[e("width")]=`${q}px`);h[Y]&&(h[Y].swiperSlideSize=q),C.push(q),n.centeredSlides?(k=k+q/2+M/2+D,M===0&&Y!==0&&(k=k-s/2-D),Y===0&&(k=k-s/2-D),Math.abs(k)<1/1e3&&(k=0),n.roundLengths&&(k=Math.floor(k)),B%n.slidesPerGroup==0&&m.push(k),w.push(k)):(n.roundLengths&&(k=Math.floor(k)),(B-Math.min(t.params.slidesPerGroupSkip,B))%t.params.slidesPerGroup==0&&m.push(k),w.push(k),k=k+q+D),t.virtualSize+=q+D,M=q,B+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+S,a&&l&&(n.effect==="slide"||n.effect==="coverflow")&&i.css({width:`${t.virtualSize+n.spaceBetween}px`}),n.setWrapperSize&&i.css({[e("width")]:`${t.virtualSize+n.spaceBetween}px`}),z&&t.grid.updateWrapperSize(q,m,e),!n.centeredSlides){const Y=[];for(let re=0;re<m.length;re+=1){let se=m[re];n.roundLengths&&(se=Math.floor(se)),m[re]<=t.virtualSize-s&&Y.push(se)}m=Y,Math.floor(t.virtualSize-s)-Math.floor(m[m.length-1])>1&&m.push(t.virtualSize-s)}if(m.length===0&&(m=[0]),n.spaceBetween!==0){const Y=t.isHorizontal()&&a?"marginLeft":e("marginRight");h.filter((re,se)=>n.cssMode?se!==h.length-1:!0).css({[Y]:`${D}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let Y=0;C.forEach(se=>{Y+=se+(n.spaceBetween?n.spaceBetween:0)}),Y-=n.spaceBetween;const re=Y-s;m=m.map(se=>se<0?-R:se>re?re+S:se)}if(n.centerInsufficientSlides){let Y=0;if(C.forEach(re=>{Y+=re+(n.spaceBetween?n.spaceBetween:0)}),Y-=n.spaceBetween,Y<s){const re=(s-Y)/2;m.forEach((se,he)=>{m[he]=se-re}),w.forEach((se,he)=>{w[he]=se+re})}}if(Object.assign(t,{slides:h,snapGrid:m,slidesGrid:w,slidesSizesGrid:C}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Pf(t.wrapperEl,"--swiper-centered-offset-before",`${-m[0]}px`),Pf(t.wrapperEl,"--swiper-centered-offset-after",`${t.size/2-C[C.length-1]/2}px`);const Y=-t.snapGrid[0],re=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(se=>se+Y),t.slidesGrid=t.slidesGrid.map(se=>se+re)}E!==u&&t.emit("slidesLengthChange"),m.length!==x&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),w.length!==_&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset()}function dU(t){const e=this,r=[],n=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const a=l=>n?e.slides.filter(d=>parseInt(d.getAttribute("data-swiper-slide-index"),10)===l)[0]:e.slides.eq(l)[0];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each(l=>{r.push(l)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const l=e.activeIndex+s;if(l>e.slides.length&&!n)break;r.push(a(l))}else r.push(a(e.activeIndex));for(s=0;s<r.length;s+=1)if(typeof r[s]!="undefined"){const l=r[s].offsetHeight;i=l>i?l:i}(i||i===0)&&e.$wrapperEl.css("height",`${i}px`)}function hU(){const t=this,e=t.slides;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop}function pU(t=this&&this.translate||0){const e=this,r=e.params,{slides:n,rtlTranslate:i,snapGrid:s}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset=="undefined"&&e.updateSlidesOffset();let a=-t;i&&(a=t),n.removeClass(r.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(let l=0;l<n.length;l+=1){const d=n[l];let u=d.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(u-=n[0].swiperSlideOffset);const h=(a+(r.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+r.spaceBetween),E=(a-s[0]+(r.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+r.spaceBetween),m=-(a-u),w=m+e.slidesSizesGrid[l];(m>=0&&m<e.size-1||w>1&&w<=e.size||m<=0&&w>=e.size)&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(l),n.eq(l).addClass(r.slideVisibleClass)),d.progress=i?-h:h,d.originalProgress=i?-E:E}e.visibleSlides=Ie(e.visibleSlides)}function gU(t){const e=this;if(typeof t=="undefined"){const u=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*u||0}const r=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:a}=e;const l=s,d=a;n===0?(i=0,s=!0,a=!0):(i=(t-e.minTranslate())/n,s=i<=0,a=i>=1),Object.assign(e,{progress:i,isBeginning:s,isEnd:a}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),a&&!d&&e.emit("reachEnd toEdge"),(l&&!s||d&&!a)&&e.emit("fromEdge"),e.emit("progress",i)}function mU(){const t=this,{slides:e,params:r,$wrapperEl:n,activeIndex:i,realIndex:s}=t,a=t.virtual&&r.virtual.enabled;e.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let l;a?l=t.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${i}"]`):l=e.eq(i),l.addClass(r.slideActiveClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(r.slideDuplicateActiveClass));let d=l.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&d.length===0&&(d=e.eq(0),d.addClass(r.slideNextClass));let u=l.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&u.length===0&&(u=e.eq(-1),u.addClass(r.slidePrevClass)),r.loop&&(d.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${d.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),u.hasClass(r.slideDuplicateClass)?n.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):n.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${u.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),t.emitSlidesClasses()}function vU(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{slidesGrid:n,snapGrid:i,params:s,activeIndex:a,realIndex:l,snapIndex:d}=e;let u=t,h;if(typeof u=="undefined"){for(let m=0;m<n.length;m+=1)typeof n[m+1]!="undefined"?r>=n[m]&&r<n[m+1]-(n[m+1]-n[m])/2?u=m:r>=n[m]&&r<n[m+1]&&(u=m+1):r>=n[m]&&(u=m);s.normalizeSlideIndex&&(u<0||typeof u=="undefined")&&(u=0)}if(i.indexOf(r)>=0)h=i.indexOf(r);else{const m=Math.min(s.slidesPerGroupSkip,u);h=m+Math.floor((u-m)/s.slidesPerGroup)}if(h>=i.length&&(h=i.length-1),u===a){h!==d&&(e.snapIndex=h,e.emit("snapIndexChange"));return}const E=parseInt(e.slides.eq(u).attr("data-swiper-slide-index")||u,10);Object.assign(e,{snapIndex:h,realIndex:E,previousIndex:a,activeIndex:u}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),l!==E&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function yU(t){const e=this,r=e.params,n=Ie(t).closest(`.${r.slideClass}`)[0];let i=!1,s;if(n){for(let a=0;a<e.slides.length;a+=1)if(e.slides[a]===n){i=!0,s=a;break}}if(n&&i)e.clickedSlide=n,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(Ie(n).attr("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}r.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var EU={updateSize:cU,updateSlides:fU,updateAutoHeight:dU,updateSlidesOffset:hU,updateSlidesProgress:pU,updateProgress:gU,updateSlidesClasses:mU,updateActiveIndex:vU,updateClickedSlide:yU};function TU(t=this.isHorizontal()?"x":"y"){const e=this,{params:r,rtlTranslate:n,translate:i,$wrapperEl:s}=e;if(r.virtualTranslate)return n?-i:i;if(r.cssMode)return i;let a=eU(s[0],t);return n&&(a=-a),a||0}function wU(t,e){const r=this,{rtlTranslate:n,params:i,$wrapperEl:s,wrapperEl:a,progress:l}=r;let d=0,u=0;const h=0;r.isHorizontal()?d=n?-t:t:u=t,i.roundLengths&&(d=Math.floor(d),u=Math.floor(u)),i.cssMode?a[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-d:-u:i.virtualTranslate||s.transform(`translate3d(${d}px, ${u}px, ${h}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?d:u;let E;const m=r.maxTranslate()-r.minTranslate();m===0?E=0:E=(t-r.minTranslate())/m,E!==l&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function SU(){return-this.snapGrid[0]}function xU(){return-this.snapGrid[this.snapGrid.length-1]}function _U(t=0,e=this.params.speed,r=!0,n=!0,i){const s=this,{params:a,wrapperEl:l}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const d=s.minTranslate(),u=s.maxTranslate();let h;if(n&&t>d?h=d:n&&t<u?h=u:h=t,s.updateProgress(h),a.cssMode){const E=s.isHorizontal();if(e===0)l[E?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return V_({swiper:s,targetPosition:-h,side:E?"left":"top"}),!0;l.scrollTo({[E?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(h),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(m){!s||s.destroyed||m.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,r&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}var bU={getTranslate:TU,setTranslate:wU,minTranslate:SU,maxTranslate:xU,translateTo:_U};function AU(t,e){const r=this;r.params.cssMode||r.$wrapperEl.transition(t),r.emit("setTransition",t,e)}function G_({swiper:t,runCallbacks:e,direction:r,step:n}){const{activeIndex:i,previousIndex:s}=t;let a=r;if(a||(i>s?a="next":i<s?a="prev":a="reset"),t.emit(`transition${n}`),e&&i!==s){if(a==="reset"){t.emit(`slideResetTransition${n}`);return}t.emit(`slideChangeTransition${n}`),a==="next"?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`)}}function IU(t=!0,e){const r=this,{params:n}=r;n.cssMode||(n.autoHeight&&r.updateAutoHeight(),G_({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function RU(t=!0,e){const r=this,{params:n}=r;r.animating=!1,!n.cssMode&&(r.setTransition(0),G_({swiper:r,runCallbacks:t,direction:e,step:"End"}))}var CU={setTransition:AU,transitionStart:IU,transitionEnd:RU};function kU(t=0,e=this.params.speed,r=!0,n,i){if(typeof t!="number"&&typeof t!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof t}] given.`);if(typeof t=="string"){const D=parseInt(t,10);if(!isFinite(D))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${t}] given.`);t=D}const s=this;let a=t;a<0&&(a=0);const{params:l,snapGrid:d,slidesGrid:u,previousIndex:h,activeIndex:E,rtlTranslate:m,wrapperEl:w,enabled:C}=s;if(s.animating&&l.preventInteractionOnTransition||!C&&!n&&!i)return!1;const R=Math.min(s.params.slidesPerGroupSkip,a);let S=R+Math.floor((a-R)/s.params.slidesPerGroup);S>=d.length&&(S=d.length-1),(E||l.initialSlide||0)===(h||0)&&r&&s.emit("beforeSlideChangeStart");const x=-d[S];if(s.updateProgress(x),l.normalizeSlideIndex)for(let D=0;D<u.length;D+=1){const k=-Math.floor(x*100),M=Math.floor(u[D]*100),B=Math.floor(u[D+1]*100);typeof u[D+1]!="undefined"?k>=M&&k<B-(B-M)/2?a=D:k>=M&&k<B&&(a=D+1):k>=M&&(a=D)}if(s.initialized&&a!==E&&(!s.allowSlideNext&&x<s.translate&&x<s.minTranslate()||!s.allowSlidePrev&&x>s.translate&&x>s.maxTranslate()&&(E||0)!==a))return!1;let _;if(a>E?_="next":a<E?_="prev":_="reset",m&&-x===s.translate||!m&&x===s.translate)return s.updateActiveIndex(a),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),l.effect!=="slide"&&s.setTranslate(x),_!=="reset"&&(s.transitionStart(r,_),s.transitionEnd(r,_)),!1;if(l.cssMode){const D=s.isHorizontal(),k=m?x:-x;if(e===0){const M=s.virtual&&s.params.virtual.enabled;M&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w[D?"scrollLeft":"scrollTop"]=k,M&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._swiperImmediateVirtual=!1})}else{if(!s.support.smoothScroll)return V_({swiper:s,targetPosition:k,side:D?"left":"top"}),!0;w.scrollTo({[D?"left":"top"]:k,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(x),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,n),s.transitionStart(r,_),e===0?s.transitionEnd(r,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(k){!s||s.destroyed||k.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(r,_))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd)),!0}function LU(t=0,e=this.params.speed,r=!0,n){const i=this;let s=t;return i.params.loop&&(s+=i.loopedSlides),i.slideTo(s,e,r,n)}function DU(t=this.params.speed,e=!0,r){const n=this,{animating:i,enabled:s,params:a}=n;if(!s)return n;let l=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(l=Math.max(n.slidesPerViewDynamic("current",!0),1));const d=n.activeIndex<a.slidesPerGroupSkip?1:l;if(a.loop){if(i&&a.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return a.rewind&&n.isEnd?n.slideTo(0,t,e,r):n.slideTo(n.activeIndex+d,t,e,r)}function OU(t=this.params.speed,e=!0,r){const n=this,{params:i,animating:s,snapGrid:a,slidesGrid:l,rtlTranslate:d,enabled:u}=n;if(!u)return n;if(i.loop){if(s&&i.loopPreventsSlide)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}const h=d?n.translate:-n.translate;function E(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}const m=E(h),w=a.map(S=>E(S));let C=a[w.indexOf(m)-1];if(typeof C=="undefined"&&i.cssMode){let S;a.forEach((x,_)=>{m>=x&&(S=_)}),typeof S!="undefined"&&(C=a[S>0?S-1:S])}let R=0;return typeof C!="undefined"&&(R=l.indexOf(C),R<0&&(R=n.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(R=R-n.slidesPerViewDynamic("previous",!0)+1,R=Math.max(R,0))),i.rewind&&n.isBeginning?n.slideTo(n.slides.length-1,t,e,r):n.slideTo(R,t,e,r)}function PU(t=this.params.speed,e=!0,r){const n=this;return n.slideTo(n.activeIndex,t,e,r)}function NU(t=this.params.speed,e=!0,r,n=.5){const i=this;let s=i.activeIndex;const a=Math.min(i.params.slidesPerGroupSkip,s),l=a+Math.floor((s-a)/i.params.slidesPerGroup),d=i.rtlTranslate?i.translate:-i.translate;if(d>=i.snapGrid[l]){const u=i.snapGrid[l],h=i.snapGrid[l+1];d-u>(h-u)*n&&(s+=i.params.slidesPerGroup)}else{const u=i.snapGrid[l-1],h=i.snapGrid[l];d-u<=(h-u)*n&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,r)}function MU(){const t=this,{params:e,$wrapperEl:r}=t,n=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;if(e.loop){if(t.animating)return;s=parseInt(Ie(t.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-n/2||i>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Um(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-n?(t.loopFix(),i=r.children(`.${e.slideClass}[data-swiper-slide-index="${s}"]:not(.${e.slideDuplicateClass})`).eq(0).index(),Um(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var FU={slideTo:kU,slideToLoop:LU,slideNext:DU,slidePrev:OU,slideReset:PU,slideToClosest:NU,slideToClickedSlide:MU};function UU(){const t=this,e=Or(),{params:r,$wrapperEl:n}=t,i=n.children().length>0?Ie(n.children()[0].parentNode):n;i.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let s=i.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const d=r.slidesPerGroup-s.length%r.slidesPerGroup;if(d!==r.slidesPerGroup){for(let u=0;u<d;u+=1){const h=Ie(e.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);i.append(h)}s=i.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length),t.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),t.loopedSlides+=r.loopAdditionalSlides,t.loopedSlides>s.length&&(t.loopedSlides=s.length);const a=[],l=[];s.each((d,u)=>{const h=Ie(d);u<t.loopedSlides&&l.push(d),u<s.length&&u>=s.length-t.loopedSlides&&a.push(d),h.attr("data-swiper-slide-index",u)});for(let d=0;d<l.length;d+=1)i.append(Ie(l[d].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let d=a.length-1;d>=0;d-=1)i.prepend(Ie(a[d].cloneNode(!0)).addClass(r.slideDuplicateClass))}function BU(){const t=this;t.emit("beforeLoopFix");const{activeIndex:e,slides:r,loopedSlides:n,allowSlidePrev:i,allowSlideNext:s,snapGrid:a,rtlTranslate:l}=t;let d;t.allowSlidePrev=!0,t.allowSlideNext=!0;const h=-a[e]-t.getTranslate();e<n?(d=r.length-n*3+e,d+=n,t.slideTo(d,0,!1,!0)&&h!==0&&t.setTranslate((l?-t.translate:t.translate)-h)):e>=r.length-n&&(d=-r.length+e+n,d+=n,t.slideTo(d,0,!1,!0)&&h!==0&&t.setTranslate((l?-t.translate:t.translate)-h)),t.allowSlidePrev=i,t.allowSlideNext=s,t.emit("loopFix")}function $U(){const t=this,{$wrapperEl:e,params:r,slides:n}=t;e.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),n.removeAttr("data-swiper-slide-index")}var VU={loopCreate:UU,loopFix:BU,loopDestroy:$U};function jU(t){const e=this;if(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;r.style.cursor="move",r.style.cursor=t?"-webkit-grabbing":"-webkit-grab",r.style.cursor=t?"-moz-grabbin":"-moz-grab",r.style.cursor=t?"grabbing":"grab"}function GU(){const t=this;t.support.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var zU={setGrabCursor:jU,unsetGrabCursor:GU};function HU(t,e=this){function r(n){return!n||n===Or()||n===Wt()?null:(n.assignedSlot&&(n=n.assignedSlot),n.closest(t)||r(n.getRootNode().host))}return r(e)}function WU(t){const e=this,r=Or(),n=Wt(),i=e.touchEventsData,{params:s,touches:a,enabled:l}=e;if(!l||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let d=t;d.originalEvent&&(d=d.originalEvent);let u=Ie(d.target);if(s.touchEventsTarget==="wrapper"&&!u.closest(e.wrapperEl).length||(i.isTouchEvent=d.type==="touchstart",!i.isTouchEvent&&"which"in d&&d.which===3)||!i.isTouchEvent&&"button"in d&&d.button>0||i.isTouched&&i.isMoved)return;!!s.noSwipingClass&&s.noSwipingClass!==""&&d.target&&d.target.shadowRoot&&t.path&&t.path[0]&&(u=Ie(t.path[0]));const E=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,m=!!(d.target&&d.target.shadowRoot);if(s.noSwiping&&(m?HU(E,d.target):u.closest(E)[0])){e.allowClick=!0;return}if(s.swipeHandler&&!u.closest(s.swipeHandler)[0])return;a.currentX=d.type==="touchstart"?d.targetTouches[0].pageX:d.pageX,a.currentY=d.type==="touchstart"?d.targetTouches[0].pageY:d.pageY;const w=a.currentX,C=a.currentY,R=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,S=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(R&&(w<=S||w>=n.innerWidth-S))if(R==="prevent")t.preventDefault();else return;if(Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=w,a.startY=C,i.touchStartTime=Fl(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1),d.type!=="touchstart"){let x=!0;u.is(i.focusableElements)&&(x=!1),r.activeElement&&Ie(r.activeElement).is(i.focusableElements)&&r.activeElement!==u[0]&&r.activeElement.blur();const _=x&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||_)&&!u[0].isContentEditable&&d.preventDefault()}e.emit("touchStart",d)}function KU(t){const e=Or(),r=this,n=r.touchEventsData,{params:i,touches:s,rtlTranslate:a,enabled:l}=r;if(!l)return;let d=t;if(d.originalEvent&&(d=d.originalEvent),!n.isTouched){n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",d);return}if(n.isTouchEvent&&d.type!=="touchmove")return;const u=d.type==="touchmove"&&d.targetTouches&&(d.targetTouches[0]||d.changedTouches[0]),h=d.type==="touchmove"?u.pageX:d.pageX,E=d.type==="touchmove"?u.pageY:d.pageY;if(d.preventedByNestedSwiper){s.startX=h,s.startY=E;return}if(!r.allowTouchMove){r.allowClick=!1,n.isTouched&&(Object.assign(s,{startX:h,startY:E,currentX:h,currentY:E}),n.touchStartTime=Fl());return}if(n.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop){if(r.isVertical()){if(E<s.startY&&r.translate<=r.maxTranslate()||E>s.startY&&r.translate>=r.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(h<s.startX&&r.translate<=r.maxTranslate()||h>s.startX&&r.translate>=r.minTranslate())return}if(n.isTouchEvent&&e.activeElement&&d.target===e.activeElement&&Ie(d.target).is(n.focusableElements)){n.isMoved=!0,r.allowClick=!1;return}if(n.allowTouchCallbacks&&r.emit("touchMove",d),d.targetTouches&&d.targetTouches.length>1)return;s.currentX=h,s.currentY=E;const m=s.currentX-s.startX,w=s.currentY-s.startY;if(r.params.threshold&&Math.sqrt(m**2+w**2)<r.params.threshold)return;if(typeof n.isScrolling=="undefined"){let x;r.isHorizontal()&&s.currentY===s.startY||r.isVertical()&&s.currentX===s.startX?n.isScrolling=!1:m*m+w*w>=25&&(x=Math.atan2(Math.abs(w),Math.abs(m))*180/Math.PI,n.isScrolling=r.isHorizontal()?x>i.touchAngle:90-x>i.touchAngle)}if(n.isScrolling&&r.emit("touchMoveOpposite",d),typeof n.startMoving=="undefined"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(n.startMoving=!0),n.isScrolling){n.isTouched=!1;return}if(!n.startMoving)return;r.allowClick=!1,!i.cssMode&&d.cancelable&&d.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&d.stopPropagation(),n.isMoved||(i.loop&&!i.cssMode&&r.loopFix(),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,i.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",d)),r.emit("sliderMove",d),n.isMoved=!0;let C=r.isHorizontal()?m:w;s.diff=C,C*=i.touchRatio,a&&(C=-C),r.swipeDirection=C>0?"prev":"next",n.currentTranslate=C+n.startTranslate;let R=!0,S=i.resistanceRatio;if(i.touchReleaseOnEdges&&(S=0),C>0&&n.currentTranslate>r.minTranslate()?(R=!1,i.resistance&&(n.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+n.startTranslate+C)**S)):C<0&&n.currentTranslate<r.maxTranslate()&&(R=!1,i.resistance&&(n.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-n.startTranslate-C)**S)),R&&(d.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(n.currentTranslate=n.startTranslate),i.threshold>0)if(Math.abs(C)>i.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,n.currentTranslate=n.startTranslate,s.diff=r.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{n.currentTranslate=n.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&r.freeMode||i.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&i.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}function qU(t){const e=this,r=e.touchEventsData,{params:n,touches:i,rtlTranslate:s,slidesGrid:a,enabled:l}=e;if(!l)return;let d=t;if(d.originalEvent&&(d=d.originalEvent),r.allowTouchCallbacks&&e.emit("touchEnd",d),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&n.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}n.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=Fl(),h=u-r.touchStartTime;if(e.allowClick){const S=d.path||d.composedPath&&d.composedPath();e.updateClickedSlide(S&&S[0]||d.target),e.emit("tap click",d),h<300&&u-r.lastClickTime<300&&e.emit("doubleTap doubleClick",d)}if(r.lastClickTime=Fl(),Um(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||i.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let E;if(n.followFinger?E=s?e.translate:-e.translate:E=-r.currentTranslate,n.cssMode)return;if(e.params.freeMode&&n.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:E});return}let m=0,w=e.slidesSizesGrid[0];for(let S=0;S<a.length;S+=S<n.slidesPerGroupSkip?1:n.slidesPerGroup){const x=S<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;typeof a[S+x]!="undefined"?E>=a[S]&&E<a[S+x]&&(m=S,w=a[S+x]-a[S]):E>=a[S]&&(m=S,w=a[a.length-1]-a[a.length-2])}const C=(E-a[m])/w,R=m<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(h>n.longSwipesMs){if(!n.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(C>=n.longSwipesRatio?e.slideTo(m+R):e.slideTo(m)),e.swipeDirection==="prev"&&(C>1-n.longSwipesRatio?e.slideTo(m+R):e.slideTo(m))}else{if(!n.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(d.target===e.navigation.nextEl||d.target===e.navigation.prevEl)?d.target===e.navigation.nextEl?e.slideTo(m+R):e.slideTo(m):(e.swipeDirection==="next"&&e.slideTo(m+R),e.swipeDirection==="prev"&&e.slideTo(m))}}function z_(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:s}=t;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=i,t.allowSlideNext=n,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function YU(t){const e=this;!e.enabled||e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function XU(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===-0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}let H_=!1;function QU(){}const W_=(t,e)=>{const r=Or(),{params:n,touchEvents:i,el:s,wrapperEl:a,device:l,support:d}=t,u=!!n.nested,h=e==="on"?"addEventListener":"removeEventListener",E=e;if(!d.touch)s[h](i.start,t.onTouchStart,!1),r[h](i.move,t.onTouchMove,u),r[h](i.end,t.onTouchEnd,!1);else{const m=i.start==="touchstart"&&d.passiveListener&&n.passiveListeners?{passive:!0,capture:!1}:!1;s[h](i.start,t.onTouchStart,m),s[h](i.move,t.onTouchMove,d.passiveListener?{passive:!1,capture:u}:u),s[h](i.end,t.onTouchEnd,m),i.cancel&&s[h](i.cancel,t.onTouchEnd,m)}(n.preventClicks||n.preventClicksPropagation)&&s[h]("click",t.onClick,!0),n.cssMode&&a[h]("scroll",t.onScroll),n.updateOnWindowResize?t[E](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",z_,!0):t[E]("observerUpdate",z_,!0)};function JU(){const t=this,e=Or(),{params:r,support:n}=t;t.onTouchStart=WU.bind(t),t.onTouchMove=KU.bind(t),t.onTouchEnd=qU.bind(t),r.cssMode&&(t.onScroll=XU.bind(t)),t.onClick=YU.bind(t),n.touch&&!H_&&(e.addEventListener("touchstart",QU),H_=!0),W_(t,"on")}function ZU(){W_(this,"off")}var e2={attachEvents:JU,detachEvents:ZU};const K_=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function t2(){const t=this,{activeIndex:e,initialized:r,loopedSlides:n=0,params:i,$el:s}=t,a=i.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const l=t.getBreakpoint(a,t.params.breakpointsBase,t.el);if(!l||t.currentBreakpoint===l)return;const u=(l in a?a[l]:void 0)||t.originalParams,h=K_(t,i),E=K_(t,u),m=i.enabled;h&&!E?(s.removeClass(`${i.containerModifierClass}grid ${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!h&&E&&(s.addClass(`${i.containerModifierClass}grid`),(u.grid.fill&&u.grid.fill==="column"||!u.grid.fill&&i.grid.fill==="column")&&s.addClass(`${i.containerModifierClass}grid-column`),t.emitContainerClasses());const w=u.direction&&u.direction!==i.direction,C=i.loop&&(u.slidesPerView!==i.slidesPerView||w);w&&r&&t.changeDirection(),zr(t.params,u);const R=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),m&&!R?t.disable():!m&&R&&t.enable(),t.currentBreakpoint=l,t.emit("_beforeBreakpoint",u),C&&r&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-n+t.loopedSlides,0,!1)),t.emit("breakpoint",u)}function r2(t,e="window",r){if(!t||e==="container"&&!r)return;let n=!1;const i=Wt(),s=e==="window"?i.innerHeight:r.clientHeight,a=Object.keys(t).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const d=parseFloat(l.substr(1));return{value:s*d,point:l}}return{value:l,point:l}});a.sort((l,d)=>parseInt(l.value,10)-parseInt(d.value,10));for(let l=0;l<a.length;l+=1){const{point:d,value:u}=a[l];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(n=d):u<=r.clientWidth&&(n=d)}return n||"max"}var n2={setBreakpoint:t2,getBreakpoint:r2};function i2(t,e){const r=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(i=>{n[i]&&r.push(e+i)}):typeof n=="string"&&r.push(e+n)}),r}function s2(){const t=this,{classNames:e,params:r,rtl:n,$el:i,device:s,support:a}=t,l=i2(["initialized",r.direction,{"pointer-events":!a.touch},{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:n},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides}],r.containerModifierClass);e.push(...l),i.addClass([...e].join(" ")),t.emitContainerClasses()}function o2(){const t=this,{$el:e,classNames:r}=t;e.removeClass(r.join(" ")),t.emitContainerClasses()}var a2={addClasses:s2,removeClasses:o2};function l2(t,e,r,n,i,s){const a=Wt();let l;function d(){s&&s()}!Ie(t).parent("picture")[0]&&(!t.complete||!i)&&e?(l=new a.Image,l.onload=d,l.onerror=d,n&&(l.sizes=n),r&&(l.srcset=r),e&&(l.src=e)):d()}function u2(){const t=this;t.imagesToLoad=t.$el.find("img");function e(){typeof t=="undefined"||t===null||!t||t.destroyed||(t.imagesLoaded!==void 0&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}for(let r=0;r<t.imagesToLoad.length;r+=1){const n=t.imagesToLoad[r];t.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,e)}}var c2={loadImage:l2,preloadImages:u2};function f2(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:n}=r;if(n){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+n*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var d2={checkOverflow:f2},q_={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function h2(t,e){return function(n={}){const i=Object.keys(n)[0],s=n[i];if(typeof s!="object"||s===null){zr(e,n);return}if(["navigation","pagination","scrollbar"].indexOf(i)>=0&&t[i]===!0&&(t[i]={auto:!0}),!(i in t&&"enabled"in s)){zr(e,n);return}t[i]===!0&&(t[i]={enabled:!0}),typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),zr(e,n)}}const jm={eventsEmitter:uU,update:EU,translate:bU,transition:CU,slide:FU,loop:VU,grabCursor:zU,events:e2,breakpoints:n2,checkOverflow:d2,classes:a2,images:c2},Gm={};class _r{constructor(...e){let r,n;if(e.length===1&&e[0].constructor&&Object.prototype.toString.call(e[0]).slice(8,-1)==="Object"?n=e[0]:[r,n]=e,n||(n={}),n=zr({},n),r&&!n.el&&(n.el=r),n.el&&Ie(n.el).length>1){const l=[];return Ie(n.el).each(d=>{const u=zr({},n,{el:d});l.push(new _r(u))}),l}const i=this;i.__swiper__=!0,i.support=j_(),i.device=iU({userAgent:n.userAgent}),i.browser=oU(),i.eventsListeners={},i.eventsAnyListeners=[],i.modules=[...i.__modules__],n.modules&&Array.isArray(n.modules)&&i.modules.push(...n.modules);const s={};i.modules.forEach(l=>{l({swiper:i,extendParams:h2(n,s),on:i.on.bind(i),once:i.once.bind(i),off:i.off.bind(i),emit:i.emit.bind(i)})});const a=zr({},q_,s);return i.params=zr({},a,Gm,n),i.originalParams=zr({},i.params),i.passedParams=zr({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach(l=>{i.on(l,i.params.on[l])}),i.params&&i.params.onAny&&i.onAny(i.params.onAny),i.$=Ie,Object.assign(i,{enabled:i.params.enabled,el:r,classNames:[],slides:Ie(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return i.params.direction==="horizontal"},isVertical(){return i.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEvents:function(){const d=["touchstart","touchmove","touchend","touchcancel"],u=["pointerdown","pointermove","pointerup"];return i.touchEventsTouch={start:d[0],move:d[1],end:d[2],cancel:d[3]},i.touchEventsDesktop={start:u[0],move:u[1],end:u[2]},i.support.touch||!i.params.simulateTouch?i.touchEventsTouch:i.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:Fl(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.emit("_swiper"),i.params.init&&i.init(),i}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;!e.enabled||(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),a=(n.maxTranslate()-i)*e+i;n.translateTo(a,typeof r=="undefined"?0:r),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.each(n=>{const i=e.getSlideClasses(n);r.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e="current",r=!1){const n=this,{params:i,slides:s,slidesGrid:a,slidesSizesGrid:l,size:d,activeIndex:u}=n;let h=1;if(i.centeredSlides){let E=s[u].swiperSlideSize,m;for(let w=u+1;w<s.length;w+=1)s[w]&&!m&&(E+=s[w].swiperSlideSize,h+=1,E>d&&(m=!0));for(let w=u-1;w>=0;w-=1)s[w]&&!m&&(E+=s[w].swiperSlideSize,h+=1,E>d&&(m=!0))}else if(e==="current")for(let E=u+1;E<s.length;E+=1)(r?a[E]+l[E]-a[u]<d:a[E]-a[u]<d)&&(h+=1);else for(let E=u-1;E>=0;E-=1)a[u]-a[E]<d&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:n}=e;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const a=e.rtlTranslate?e.translate*-1:e.translate,l=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(l),e.updateActiveIndex(),e.updateSlidesClasses()}let s;e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):((e.params.slidesPerView==="auto"||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?s=e.slideTo(e.slides.length-1,0,!1,!0):s=e.slideTo(e.activeIndex,0,!1,!0),s||i()),n.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r=!0){const n=this,i=n.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(n.$el.removeClass(`${n.params.containerModifierClass}${i}`).addClass(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.each(s=>{e==="vertical"?s.style.width="":s.style.height=""}),n.emit("changeDirection"),r&&n.update()),n}mount(e){const r=this;if(r.mounted)return!0;const n=Ie(e||r.params.el);if(e=n[0],!e)return!1;e.swiper=r;const i=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>{if(e&&e.shadowRoot&&e.shadowRoot.querySelector){const l=Ie(e.shadowRoot.querySelector(i()));return l.children=d=>n.children(d),l}return n.children(i())})();if(a.length===0&&r.params.createElements){const d=Or().createElement("div");a=Ie(d),d.className=r.params.wrapperClass,n.append(d),n.children(`.${r.params.slideClass}`).each(u=>{a.append(u)})}return Object.assign(r,{$el:n,el:e,$wrapperEl:a,wrapperEl:a[0],mounted:!0,rtl:e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(e.dir.toLowerCase()==="rtl"||n.css("direction")==="rtl"),wrongRTL:a.css("display")==="-webkit-box"}),!0}init(e){const r=this;return r.initialized||r.mount(e)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(e=!0,r=!0){const n=this,{params:i,$el:s,$wrapperEl:a,slides:l}=n;return typeof n.params=="undefined"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),r&&(n.removeClasses(),s.removeAttr("style"),a.removeAttr("style"),l&&l.length&&l.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(d=>{n.off(d)}),e!==!1&&(n.$el[0].swiper=null,JF(n)),n.destroyed=!0),null}static extendDefaults(e){zr(Gm,e)}static get extendedDefaults(){return Gm}static get defaults(){return q_}static installModule(e){_r.prototype.__modules__||(_r.prototype.__modules__=[]);const r=_r.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>_r.installModule(r)),_r):(_r.installModule(e),_r)}}Object.keys(jm).forEach(t=>{Object.keys(jm[t]).forEach(e=>{_r.prototype[e]=jm[t][e]})});_r.use([aU,lU]);function p2(t,e,r,n){const i=Or();return t.params.createElements&&Object.keys(n).forEach(s=>{if(!r[s]&&r.auto===!0){let a=t.$el.children(`.${n[s]}`)[0];a||(a=i.createElement("div"),a.className=n[s],t.$el.append(a)),r[s]=a,e[s]=a}}),r}function eB({swiper:t,extendParams:e,on:r,emit:n}){e({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function i(E){let m;return E&&(m=Ie(E),t.params.uniqueNavElements&&typeof E=="string"&&m.length>1&&t.$el.find(E).length===1&&(m=t.$el.find(E))),m}function s(E,m){const w=t.params.navigation;E&&E.length>0&&(E[m?"addClass":"removeClass"](w.disabledClass),E[0]&&E[0].tagName==="BUTTON"&&(E[0].disabled=m),t.params.watchOverflow&&t.enabled&&E[t.isLocked?"addClass":"removeClass"](w.lockClass))}function a(){if(t.params.loop)return;const{$nextEl:E,$prevEl:m}=t.navigation;s(m,t.isBeginning&&!t.params.rewind),s(E,t.isEnd&&!t.params.rewind)}function l(E){E.preventDefault(),!(t.isBeginning&&!t.params.loop&&!t.params.rewind)&&t.slidePrev()}function d(E){E.preventDefault(),!(t.isEnd&&!t.params.loop&&!t.params.rewind)&&t.slideNext()}function u(){const E=t.params.navigation;if(t.params.navigation=p2(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(E.nextEl||E.prevEl))return;const m=i(E.nextEl),w=i(E.prevEl);m&&m.length>0&&m.on("click",d),w&&w.length>0&&w.on("click",l),Object.assign(t.navigation,{$nextEl:m,nextEl:m&&m[0],$prevEl:w,prevEl:w&&w[0]}),t.enabled||(m&&m.addClass(E.lockClass),w&&w.addClass(E.lockClass))}function h(){const{$nextEl:E,$prevEl:m}=t.navigation;E&&E.length&&(E.off("click",d),E.removeClass(t.params.navigation.disabledClass)),m&&m.length&&(m.off("click",l),m.removeClass(t.params.navigation.disabledClass))}r("init",()=>{u(),a()}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{h()}),r("enable disable",()=>{const{$nextEl:E,$prevEl:m}=t.navigation;E&&E[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),m&&m[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)}),r("click",(E,m)=>{const{$nextEl:w,$prevEl:C}=t.navigation,R=m.target;if(t.params.navigation.hideOnClick&&!Ie(R).is(C)&&!Ie(R).is(w)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===R||t.pagination.el.contains(R)))return;let S;w?S=w.hasClass(t.params.navigation.hiddenClass):C&&(S=C.hasClass(t.params.navigation.hiddenClass)),n(S===!0?"navigationShow":"navigationHide"),w&&w.toggleClass(t.params.navigation.hiddenClass),C&&C.toggleClass(t.params.navigation.hiddenClass)}}),Object.assign(t.navigation,{update:a,init:u,destroy:h})}function ys(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function Ai(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]=="undefined"?t[n]=e[n]:ys(e[n])&&ys(t[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?t[n]=e[n]:Ai(t[n],e[n]):t[n]=e[n]})}function Y_(t={}){return t.navigation&&typeof t.navigation.nextEl=="undefined"&&typeof t.navigation.prevEl=="undefined"}function X_(t={}){return t.pagination&&typeof t.pagination.el=="undefined"}function Q_(t={}){return t.scrollbar&&typeof t.scrollbar.el=="undefined"}function J_(t=""){const e=t.split(" ").map(n=>n.trim()).filter(n=>!!n),r=[];return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r.join(" ")}const Z_=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function g2(t={}){const e={on:{}},r={},n={};Ai(e,_r.defaults),Ai(e,_r.extendedDefaults),e._emitClasses=!0,e.init=!1;const i={},s=Z_.map(a=>a.replace(/_/,""));return Object.keys(t).forEach(a=>{s.indexOf(a)>=0?ys(t[a])?(e[a]={},n[a]={},Ai(e[a],t[a]),Ai(n[a],t[a])):(e[a]=t[a],n[a]=t[a]):a.search(/on[A-Z]/)===0&&typeof t[a]=="function"?r[`${a[2].toLowerCase()}${a.substr(3)}`]=t[a]:i[a]=t[a]}),["navigation","pagination","scrollbar"].forEach(a=>{e[a]===!0&&(e[a]={}),e[a]===!1&&delete e[a]}),{params:e,passedParams:n,rest:i,events:r}}function m2(t){return new _r(t)}function v2({el:t,nextEl:e,prevEl:r,paginationEl:n,scrollbarEl:i,swiper:s},a){Y_(a)&&e&&r&&(s.params.navigation.nextEl=e,s.originalParams.navigation.nextEl=e,s.params.navigation.prevEl=r,s.originalParams.navigation.prevEl=r),X_(a)&&n&&(s.params.pagination.el=n,s.originalParams.pagination.el=n),Q_(a)&&i&&(s.params.scrollbar.el=i,s.originalParams.scrollbar.el=i),s.init(t)}function e1(t,e){let r=e.slidesPerView;if(e.breakpoints){const i=_r.prototype.getBreakpoint(e.breakpoints),s=i in e.breakpoints?e.breakpoints[i]:void 0;s&&s.slidesPerView&&(r=s.slidesPerView)}let n=Math.ceil(parseFloat(e.loopedSlides||r,10));return n+=e.loopAdditionalSlides,n>t.length&&(n=t.length),n}function y2(t,e,r){const n=e.map((d,u)=>Gn.cloneElement(d,{swiper:t,"data-swiper-slide-index":u}));function i(d,u,h){return Gn.cloneElement(d,{key:`${d.key}-duplicate-${u}-${h}`,className:`${d.props.className||""} ${r.slideDuplicateClass}`})}if(r.loopFillGroupWithBlank){const d=r.slidesPerGroup-n.length%r.slidesPerGroup;if(d!==r.slidesPerGroup)for(let u=0;u<d;u+=1){const h=Gn.createElement("div",{className:`${r.slideClass} ${r.slideBlankClass}`});n.push(h)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=n.length);const s=e1(n,r),a=[],l=[];return n.forEach((d,u)=>{u<s&&l.push(i(d,u,"prepend")),u<n.length&&u>=n.length-s&&a.push(i(d,u,"append"))}),t&&(t.loopedSlides=s),[...a,...n,...l]}function E2(t,e,r,n){const i=[];if(!e)return i;const s=u=>{i.indexOf(u)<0&&i.push(u)},a=n.map(u=>u.key),l=r.map(u=>u.key);return a.join("")!==l.join("")&&s("children"),n.length!==r.length&&s("children"),Z_.filter(u=>u[0]==="_").map(u=>u.replace(/_/,"")).forEach(u=>{if(u in t&&u in e)if(ys(t[u])&&ys(e[u])){const h=Object.keys(t[u]),E=Object.keys(e[u]);h.length!==E.length?s(u):(h.forEach(m=>{t[u][m]!==e[u][m]&&s(u)}),E.forEach(m=>{t[u][m]!==e[u][m]&&s(u)}))}else t[u]!==e[u]&&s(u)}),i}function t1(t){const e=[];return Gn.Children.toArray(t).forEach(r=>{r.type&&r.type.displayName==="SwiperSlide"?e.push(r):r.props&&r.props.children&&t1(r.props.children).forEach(n=>e.push(n))}),e}function T2(t){const e=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Gn.Children.toArray(t).forEach(n=>{if(n.type&&n.type.displayName==="SwiperSlide")e.push(n);else if(n.props&&n.props.slot&&r[n.props.slot])r[n.props.slot].push(n);else if(n.props&&n.props.children){const i=t1(n.props.children);i.length>0?i.forEach(s=>e.push(s)):r["container-end"].push(n)}else r["container-end"].push(n)}),{slides:e,slots:r}}function w2({swiper:t,slides:e,passedParams:r,changedParams:n,nextEl:i,prevEl:s,scrollbarEl:a,paginationEl:l}){const d=n.filter(M=>M!=="children"&&M!=="direction"),{params:u,pagination:h,navigation:E,scrollbar:m,virtual:w,thumbs:C}=t;let R,S,x,_,D;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(R=!0),n.includes("controller")&&r.controller&&r.controller.control&&u.controller&&!u.controller.control&&(S=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(u.pagination||u.pagination===!1)&&h&&!h.el&&(x=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&m&&!m.el&&(_=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||i)&&(u.navigation||u.navigation===!1)&&E&&!E.prevEl&&!E.nextEl&&(D=!0);const k=M=>{!t[M]||(t[M].destroy(),M==="navigation"?(u[M].prevEl=void 0,u[M].nextEl=void 0,t[M].prevEl=void 0,t[M].nextEl=void 0):(u[M].el=void 0,t[M].el=void 0))};d.forEach(M=>{if(ys(u[M])&&ys(r[M]))Ai(u[M],r[M]);else{const B=r[M];(B===!0||B===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?B===!1&&k(M):u[M]=r[M]}}),n.includes("children")&&w&&u.virtual.enabled?(w.slides=e,w.update(!0)):n.includes("children")&&t.lazy&&t.params.lazy.enabled&&t.lazy.load(),R&&C.init()&&C.update(!0),S&&(t.controller.control=u.controller.control),x&&(l&&(u.pagination.el=l),h.init(),h.render(),h.update()),_&&(a&&(u.scrollbar.el=a),m.init(),m.updateSize(),m.setTranslate()),D&&(i&&(u.navigation.nextEl=i),s&&(u.navigation.prevEl=s),E.init(),E.update()),n.includes("allowSlideNext")&&(t.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(t.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&t.changeDirection(r.direction,!1),t.update()}function S2(t){!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())}function x2(t,e,r){if(!r)return null;const n=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return e.filter((i,s)=>s>=r.from&&s<=r.to).map(i=>Gn.cloneElement(i,{swiper:t,style:n}))}function Ul(t,e){return typeof window=="undefined"?ae.exports.useEffect(t,e):ae.exports.useLayoutEffect(t,e)}const _2=ae.exports.forwardRef((l={},a)=>{var d=l,{className:t,tag:e="div",wrapperTag:r="div",children:n,onSwiper:i}=d,s=Kf(d,["className","tag","wrapperTag","children","onSwiper"]);let u=!1;const[h,E]=ae.exports.useState("swiper"),[m,w]=ae.exports.useState(null),[C,R]=ae.exports.useState(!1),S=ae.exports.useRef(!1),x=ae.exports.useRef(null),_=ae.exports.useRef(null),D=ae.exports.useRef(null),k=ae.exports.useRef(null),M=ae.exports.useRef(null),B=ae.exports.useRef(null),z=ae.exports.useRef(null),q=ae.exports.useRef(null),{params:H,passedParams:Y,rest:re,events:se}=g2(s),{slides:he,slots:Te}=T2(n),Le=()=>{R(!C)};if(Object.assign(H.on,{_containerClasses(Ae,Ge){E(Ge)}}),!x.current&&(Object.assign(H.on,se),u=!0,_.current=m2(H),_.current.loopCreate=()=>{},_.current.loopDestroy=()=>{},H.loop&&(_.current.loopedSlides=e1(he,H)),_.current.virtual&&_.current.params.virtual.enabled)){_.current.virtual.slides=he;const Ae={cache:!1,slides:he,renderExternal:w,renderExternalUpdate:!1};Ai(_.current.params.virtual,Ae),Ai(_.current.originalParams.virtual,Ae)}_.current&&_.current.on("_beforeBreakpoint",Le);const De=()=>{u||!se||!_.current||Object.keys(se).forEach(Ae=>{_.current.on(Ae,se[Ae])})},Fe=()=>{!se||!_.current||Object.keys(se).forEach(Ae=>{_.current.off(Ae,se[Ae])})};ae.exports.useEffect(()=>()=>{_.current&&_.current.off("_beforeBreakpoint",Le)}),ae.exports.useEffect(()=>{!S.current&&_.current&&(_.current.emitSlidesClasses(),S.current=!0)}),Ul(()=>{if(a&&(a.current=x.current),!!x.current)return v2({el:x.current,nextEl:M.current,prevEl:B.current,paginationEl:z.current,scrollbarEl:q.current,swiper:_.current},H),i&&i(_.current),()=>{_.current&&!_.current.destroyed&&_.current.destroy(!0,!1)}},[]),Ul(()=>{De();const Ae=E2(Y,D.current,he,k.current);return D.current=Y,k.current=he,Ae.length&&_.current&&!_.current.destroyed&&w2({swiper:_.current,slides:he,passedParams:Y,changedParams:Ae,nextEl:M.current,prevEl:B.current,scrollbarEl:q.current,paginationEl:z.current}),()=>{Fe()}}),Ul(()=>{S2(_.current)},[m]);function Ke(){return H.virtual?x2(_.current,he,m):!H.loop||_.current&&_.current.destroyed?he.map(Ae=>Gn.cloneElement(Ae,{swiper:_.current})):y2(_.current,he,H)}return eu(e,Wf(Bo({ref:x,className:J_(`${h}${t?` ${t}`:""}`)},re),{children:[Te["container-start"],Y_(H)&&eu(RA,{children:[ln("div",{ref:B,className:"swiper-button-prev"}),ln("div",{ref:M,className:"swiper-button-next"})]}),Q_(H)&&ln("div",{ref:q,className:"swiper-scrollbar"}),X_(H)&&ln("div",{ref:z,className:"swiper-pagination"}),eu(r,{className:"swiper-wrapper",children:[Te["wrapper-start"],Ke(),Te["wrapper-end"]]}),Te["container-end"]]}))});_2.displayName="Swiper";const b2=ae.exports.forwardRef((d={},l)=>{var u=d,{tag:t="div",children:e,className:r="",swiper:n,zoom:i,virtualIndex:s}=u,a=Kf(u,["tag","children","className","swiper","zoom","virtualIndex"]);const h=ae.exports.useRef(null),[E,m]=ae.exports.useState("swiper-slide");function w(S,x,_){x===h.current&&m(_)}Ul(()=>{if(l&&(l.current=h.current),!(!h.current||!n)){if(n.destroyed){E!=="swiper-slide"&&m("swiper-slide");return}return n.on("_slideClass",w),()=>{!n||n.off("_slideClass",w)}}}),Ul(()=>{n&&h.current&&m(n.getSlideClasses(h.current))},[n]);let C;typeof e=="function"&&(C={isActive:E.indexOf("swiper-slide-active")>=0||E.indexOf("swiper-slide-duplicate-active")>=0,isVisible:E.indexOf("swiper-slide-visible")>=0,isDuplicate:E.indexOf("swiper-slide-duplicate")>=0,isPrev:E.indexOf("swiper-slide-prev")>=0||E.indexOf("swiper-slide-duplicate-prev")>=0,isNext:E.indexOf("swiper-slide-next")>=0||E.indexOf("swiper-slide-duplicate-next")>=0});const R=()=>typeof e=="function"?e(C):e;return ln(t,Wf(Bo({ref:h,className:J_(`${E}${r?` ${r}`:""}`),"data-swiper-slide-index":s},a),{children:i?ln("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof i=="number"?i:void 0,children:R()}):R()}))});b2.displayName="SwiperSlide";const r1=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Vn=(()=>{const t=r1[0],e={};for(const r of r1)if((r==null?void 0:r[1])in document){for(const[i,s]of r.entries())e[t[i]]=s;return e}return!1})(),n1={change:Vn.fullscreenchange,error:Vn.fullscreenerror};let Hr={request(t=document.documentElement,e){return new Promise((r,n)=>{const i=()=>{Hr.off("change",i),r()};Hr.on("change",i);const s=t[Vn.requestFullscreen](e);s instanceof Promise&&s.then(i).catch(n)})},exit(){return new Promise((t,e)=>{if(!Hr.isFullscreen){t();return}const r=()=>{Hr.off("change",r),t()};Hr.on("change",r);const n=document[Vn.exitFullscreen]();n instanceof Promise&&n.then(r).catch(e)})},toggle(t,e){return Hr.isFullscreen?Hr.exit():Hr.request(t,e)},onchange(t){Hr.on("change",t)},onerror(t){Hr.on("error",t)},on(t,e){const r=n1[t];r&&document.addEventListener(r,e,!1)},off(t,e){const r=n1[t];r&&document.removeEventListener(r,e,!1)},raw:Vn};Object.defineProperties(Hr,{isFullscreen:{get:()=>Boolean(document[Vn.fullscreenElement])},element:{enumerable:!0,get:()=>{var t;return(t=document[Vn.fullscreenElement])!=null?t:void 0}},isEnabled:{enumerable:!0,get:()=>Boolean(document[Vn.fullscreenEnabled])}});Vn||(Hr={isEnabled:!1});var tB=Hr;export{$2 as A,H2 as B,GM as C,R2 as D,X2 as E,RA as F,mi as G,Kb as H,D2 as I,O2 as J,k2 as K,L2 as L,M2 as M,eB as N,U2 as R,_2 as S,K2 as W,ln as a,N2 as b,P2 as c,Hv as d,C2 as e,tk as f,B2 as g,G2 as h,F2 as i,eu as j,Z2 as k,MT as l,b2 as m,Q2 as n,z2 as o,J2 as p,W2 as q,ae as r,V2 as s,Y2 as t,Jl as u,tB as v,I2 as w,gi as x,j2 as y,q2 as z};
